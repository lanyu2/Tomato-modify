[
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\logic_code\\play\\java\\org\\nsh07\\pomodoro\\billing\\initializePurchases.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\r\n * 自动生成的LOGIC代码\r\n * 源文件: initializePurchases.kt\r\n * 生成时间: 2025-11-11 19:43:19\r\n */\r\n\r\n/*\r\n * Copyright (c) 2025 Nishant Mishra\r\n *\r\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\r\n *\r\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\r\n * General Public License as published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\r\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\r\n * Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License along with Tomato.\r\n * If not, see <https://www.gnu.org/licenses/>.\r\n */\r\n\r\npackage org.nsh07.pomodoro.billing\r\n\r\nimport android.content.Context\r\nimport com.revenuecat.purchases.Purchases\r\nimport com.revenuecat.purchases.PurchasesConfiguration\r\n\r\nfun initializePurchases(context: Context) {\r\n    Purchases.configure(\r\n        PurchasesConfiguration\r\n            .Builder(context, \"goog_jBpRIBjTYvhKYluCqkPXSHbuFbX\")\r\n            .build()\r\n    )\r\n}\r\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\logic_code\\play\\java\\org\\nsh07\\pomodoro\\billing\\PlayBillingManager.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "LOGGING"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Kermit 或 Napier 日志库"
        ],
        "originalCode": "/*\r\n * 自动生成的LOGIC代码\r\n * 源文件: PlayBillingManager.kt\r\n * 生成时间: 2025-11-11 19:43:19\r\n */\r\n\r\n/*\r\n * Copyright (c) 2025 Nishant Mishra\r\n *\r\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\r\n *\r\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\r\n * General Public License as published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\r\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\r\n * Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License along with Tomato.\r\n * If not, see <https://www.gnu.org/licenses/>.\r\n */\r\n\r\npackage org.nsh07.pomodoro.billing\r\n\r\nimport android.util.Log\r\nimport com.revenuecat.purchases.Purchases\r\nimport com.revenuecat.purchases.getCustomerInfoWith\r\nimport com.revenuecat.purchases.interfaces.UpdatedCustomerInfoListener\r\nimport kotlinx.coroutines.flow.MutableStateFlow\r\nimport kotlinx.coroutines.flow.asStateFlow\r\n\r\nprivate const val ENTITLEMENT_ID = \"plus\"\r\n\r\n/**\r\n * Google Play implementation of BillingManager\r\n */\r\nclass PlayBillingManager : BillingManager {\r\n    private val _isPlus = MutableStateFlow(false)\r\n    override val isPlus = _isPlus.asStateFlow()\r\n\r\n    private val purchases by lazy { Purchases.sharedInstance }\r\n\r\n    init {\r\n        purchases.updatedCustomerInfoListener =\r\n            UpdatedCustomerInfoListener { customerInfo ->\r\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\r\n            }\r\n\r\n        // Fetch initial customer info\r\n        purchases.getCustomerInfoWith(\r\n            onSuccess = { customerInfo ->\r\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\r\n            },\r\n            onError = { error ->\r\n                Log.e(\"GooglePlayPaywallManager\", \"Error fetching customer info: $error\")\r\n            }\r\n        )\r\n    }\r\n}\r\n\r\nobject BillingManagerProvider {\r\n    val manager: BillingManager = PlayBillingManager()\r\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\logic_code\\play\\java\\org\\nsh07\\pomodoro\\billing\\initializePurchases.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\r\n * 自动生成的LOGIC代码\r\n * 源文件: initializePurchases.kt\r\n * 生成时间: 2025-11-11 19:43:19\r\n */\r\n\r\n/*\r\n * Copyright (c) 2025 Nishant Mishra\r\n *\r\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\r\n *\r\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\r\n * General Public License as published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\r\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\r\n * Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License along with Tomato.\r\n * If not, see <https://www.gnu.org/licenses/>.\r\n */\r\n\r\npackage org.nsh07.pomodoro.billing\r\n\r\nimport android.content.Context\r\nimport com.revenuecat.purchases.Purchases\r\nimport com.revenuecat.purchases.PurchasesConfiguration\r\n\r\nfun initializePurchases(context: Context) {\r\n    Purchases.configure(\r\n        PurchasesConfiguration\r\n            .Builder(context, \"goog_jBpRIBjTYvhKYluCqkPXSHbuFbX\")\r\n            .build()\r\n    )\r\n}\r\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\logic_code\\play\\java\\org\\nsh07\\pomodoro\\billing\\PlayBillingManager.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "LOGGING"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Kermit 或 Napier 日志库"
        ],
        "originalCode": "/*\r\n * 自动生成的LOGIC代码\r\n * 源文件: PlayBillingManager.kt\r\n * 生成时间: 2025-11-11 19:43:19\r\n */\r\n\r\n/*\r\n * Copyright (c) 2025 Nishant Mishra\r\n *\r\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\r\n *\r\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\r\n * General Public License as published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\r\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\r\n * Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License along with Tomato.\r\n * If not, see <https://www.gnu.org/licenses/>.\r\n */\r\n\r\npackage org.nsh07.pomodoro.billing\r\n\r\nimport android.util.Log\r\nimport com.revenuecat.purchases.Purchases\r\nimport com.revenuecat.purchases.getCustomerInfoWith\r\nimport com.revenuecat.purchases.interfaces.UpdatedCustomerInfoListener\r\nimport kotlinx.coroutines.flow.MutableStateFlow\r\nimport kotlinx.coroutines.flow.asStateFlow\r\n\r\nprivate const val ENTITLEMENT_ID = \"plus\"\r\n\r\n/**\r\n * Google Play implementation of BillingManager\r\n */\r\nclass PlayBillingManager : BillingManager {\r\n    private val _isPlus = MutableStateFlow(false)\r\n    override val isPlus = _isPlus.asStateFlow()\r\n\r\n    private val purchases by lazy { Purchases.sharedInstance }\r\n\r\n    init {\r\n        purchases.updatedCustomerInfoListener =\r\n            UpdatedCustomerInfoListener { customerInfo ->\r\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\r\n            }\r\n\r\n        // Fetch initial customer info\r\n        purchases.getCustomerInfoWith(\r\n            onSuccess = { customerInfo ->\r\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\r\n            },\r\n            onError = { error ->\r\n                Log.e(\"GooglePlayPaywallManager\", \"Error fetching customer info: $error\")\r\n            }\r\n        )\r\n    }\r\n}\r\n\r\nobject BillingManagerProvider {\r\n    val manager: BillingManager = PlayBillingManager()\r\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\logic_code\\play\\java\\org\\nsh07\\pomodoro\\billing\\initializePurchases.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\r\n * 自动生成的LOGIC代码\r\n * 源文件: initializePurchases.kt\r\n * 生成时间: 2025-11-11 19:43:19\r\n */\r\n\r\n/*\r\n * Copyright (c) 2025 Nishant Mishra\r\n *\r\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\r\n *\r\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\r\n * General Public License as published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\r\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\r\n * Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License along with Tomato.\r\n * If not, see <https://www.gnu.org/licenses/>.\r\n */\r\n\r\npackage org.nsh07.pomodoro.billing\r\n\r\nimport android.content.Context\r\nimport com.revenuecat.purchases.Purchases\r\nimport com.revenuecat.purchases.PurchasesConfiguration\r\n\r\nfun initializePurchases(context: Context) {\r\n    Purchases.configure(\r\n        PurchasesConfiguration\r\n            .Builder(context, \"goog_jBpRIBjTYvhKYluCqkPXSHbuFbX\")\r\n            .build()\r\n    )\r\n}\r\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\logic_code\\play\\java\\org\\nsh07\\pomodoro\\billing\\PlayBillingManager.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "LOGGING"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Kermit 或 Napier 日志库"
        ],
        "originalCode": "/*\r\n * 自动生成的LOGIC代码\r\n * 源文件: PlayBillingManager.kt\r\n * 生成时间: 2025-11-11 19:43:19\r\n */\r\n\r\n/*\r\n * Copyright (c) 2025 Nishant Mishra\r\n *\r\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\r\n *\r\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\r\n * General Public License as published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\r\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\r\n * Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License along with Tomato.\r\n * If not, see <https://www.gnu.org/licenses/>.\r\n */\r\n\r\npackage org.nsh07.pomodoro.billing\r\n\r\nimport android.util.Log\r\nimport com.revenuecat.purchases.Purchases\r\nimport com.revenuecat.purchases.getCustomerInfoWith\r\nimport com.revenuecat.purchases.interfaces.UpdatedCustomerInfoListener\r\nimport kotlinx.coroutines.flow.MutableStateFlow\r\nimport kotlinx.coroutines.flow.asStateFlow\r\n\r\nprivate const val ENTITLEMENT_ID = \"plus\"\r\n\r\n/**\r\n * Google Play implementation of BillingManager\r\n */\r\nclass PlayBillingManager : BillingManager {\r\n    private val _isPlus = MutableStateFlow(false)\r\n    override val isPlus = _isPlus.asStateFlow()\r\n\r\n    private val purchases by lazy { Purchases.sharedInstance }\r\n\r\n    init {\r\n        purchases.updatedCustomerInfoListener =\r\n            UpdatedCustomerInfoListener { customerInfo ->\r\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\r\n            }\r\n\r\n        // Fetch initial customer info\r\n        purchases.getCustomerInfoWith(\r\n            onSuccess = { customerInfo ->\r\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\r\n            },\r\n            onError = { error ->\r\n                Log.e(\"GooglePlayPaywallManager\", \"Error fetching customer info: $error\")\r\n            }\r\n        )\r\n    }\r\n}\r\n\r\nobject BillingManagerProvider {\r\n    val manager: BillingManager = PlayBillingManager()\r\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidTest\\java\\org\\nsh07\\pomodoro\\ExampleInstrumentedTest.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "package org.nsh07.pomodoro\n\nimport androidx.test.platform.app.InstrumentationRegistry\nimport androidx.test.ext.junit.runners.AndroidJUnit4\n\nimport org.junit.Test\nimport org.junit.runner.RunWith\n\nimport org.junit.Assert.*\n\n/**\n * Instrumented test, which will execute on an Android device.\n *\n * See [testing documentation](http://d.android.com/tools/testing).\n */\n@RunWith(AndroidJUnit4::class)\nclass ExampleInstrumentedTest {\n    @Test\n    fun useAppContext() {\n        // Context of the app under test.\n        val appContext = InstrumentationRegistry.getInstrumentation().targetContext\n        assertEquals(\"org.nsh07.pomodoro\", appContext.packageName)\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\initializePurchases.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.content.Context\n\nfun initializePurchases(context: Context) {}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\AppDatabase.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "STORAGE",
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.content.Context\nimport androidx.room.AutoMigration\nimport androidx.room.Database\nimport androidx.room.Room\nimport androidx.room.RoomDatabase\nimport androidx.room.TypeConverters\n\n@Database(\n    entities = [IntPreference::class, BooleanPreference::class, StringPreference::class, Stat::class],\n    version = 2,\n    autoMigrations = [\n        AutoMigration(from = 1, to = 2)\n    ]\n)\n@TypeConverters(Converters::class)\nabstract class AppDatabase : RoomDatabase() {\n\n    abstract fun preferenceDao(): PreferenceDao\n    abstract fun statDao(): StatDao\n\n    companion object {\n\n        @Volatile\n        private var Instance: AppDatabase? = null\n\n        fun getDatabase(context: Context): AppDatabase {\n            return Instance ?: synchronized(this) {\n                Instance ?: Room.databaseBuilder(context, AppDatabase::class.java, \"app_database\")\n                    .build()\n                    .also { Instance = it }\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\Converters.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.TypeConverter\nimport java.time.LocalDate\n\nclass Converters {\n    @TypeConverter\n    fun localDateToString(localDate: LocalDate?): String? {\n        return localDate?.toString()\n    }\n\n    @TypeConverter\n    fun stringToLocalDate(date: String?): LocalDate? {\n        return if (date != null) LocalDate.parse(date) else null\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\Preference.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Entity\nimport androidx.room.PrimaryKey\n\n/**\n * Class for storing boolean preferences in the app's database\n */\n@Entity(tableName = \"boolean_preference\")\ndata class BooleanPreference(\n    @PrimaryKey\n    val key: String,\n    val value: Boolean\n)\n\n/**\n * Class for storing integer preferences in the app's database\n */\n@Entity(tableName = \"int_preference\")\ndata class IntPreference(\n    @PrimaryKey\n    val key: String,\n    val value: Int\n)\n\n/**\n * Class for storing string preferences in the app's database\n */\n@Entity(tableName = \"string_preference\")\ndata class StringPreference(\n    @PrimaryKey\n    val key: String,\n    val value: String\n)"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\PreferenceDao.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Dao\nimport androidx.room.Insert\nimport androidx.room.OnConflictStrategy.Companion.REPLACE\nimport androidx.room.Query\nimport kotlinx.coroutines.flow.Flow\n\n@Dao\ninterface PreferenceDao {\n    @Insert(onConflict = REPLACE)\n    suspend fun insertIntPreference(preference: IntPreference)\n\n    @Insert(onConflict = REPLACE)\n    suspend fun insertBooleanPreference(preference: BooleanPreference)\n\n    @Insert(onConflict = REPLACE)\n    suspend fun insertStringPreference(preference: StringPreference)\n\n    @Query(\"DELETE FROM int_preference\")\n    suspend fun resetIntPreferences()\n\n    @Query(\"DELETE FROM boolean_preference\")\n    suspend fun resetBooleanPreferences()\n\n    @Query(\"DELETE FROM string_preference\")\n    suspend fun resetStringPreferences()\n\n    @Query(\"SELECT value FROM int_preference WHERE `key` = :key\")\n    suspend fun getIntPreference(key: String): Int?\n\n    @Query(\"SELECT value FROM boolean_preference WHERE `key` = :key\")\n    suspend fun getBooleanPreference(key: String): Boolean?\n\n    @Query(\"SELECT value FROM boolean_preference WHERE `key` = :key\")\n    fun getBooleanPreferenceFlow(key: String): Flow<Boolean>\n\n    @Query(\"SELECT value FROM string_preference WHERE `key` = :key\")\n    suspend fun getStringPreference(key: String): String?\n\n    @Query(\"SELECT value FROM string_preference WHERE `key` = :key\")\n    fun getStringPreferenceFlow(key: String): Flow<String>\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\Stat.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Entity\nimport androidx.room.PrimaryKey\nimport java.time.LocalDate\n\n/**\n * Data class for storing the user's statistics in the app's database. This class stores the focus\n * durations for the 4 quarters of a day (00:00 - 12:00, 12:00 - 16:00, 16:00 - 20:00, 20:00 - 00:00)\n * separately for later analysis (e.g. for showing which parts of the day are most productive).\n */\n@Entity(tableName = \"stat\")\ndata class Stat(\n    @PrimaryKey\n    val date: LocalDate,\n    val focusTimeQ1: Long,\n    val focusTimeQ2: Long,\n    val focusTimeQ3: Long,\n    val focusTimeQ4: Long,\n    val breakTime: Long\n) {\n    fun totalFocusTime() = focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4\n}\n\ndata class StatSummary(\n    val date: LocalDate,\n    val focusTime: Long,\n    val breakTime: Long\n)\n\ndata class StatFocusTime(\n    val focusTimeQ1: Long,\n    val focusTimeQ2: Long,\n    val focusTimeQ3: Long,\n    val focusTimeQ4: Long\n) {\n    fun total() = focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\StatDao.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Dao\nimport androidx.room.Insert\nimport androidx.room.OnConflictStrategy.Companion.REPLACE\nimport androidx.room.Query\nimport kotlinx.coroutines.flow.Flow\nimport java.time.LocalDate\n\n@Dao\ninterface StatDao {\n    @Insert(onConflict = REPLACE)\n    suspend fun insertStat(stat: Stat)\n\n    @Query(\"UPDATE stat SET focusTimeQ1 = focusTimeQ1 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ1(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ2 = focusTimeQ2 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ2(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ3 = focusTimeQ3 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ3(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ4 = focusTimeQ4 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ4(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET breakTime = breakTime + :breakTime WHERE date = :date\")\n    suspend fun addBreakTime(date: LocalDate, breakTime: Long)\n\n    @Query(\"SELECT * FROM stat WHERE date = :date\")\n    fun getStat(date: LocalDate): Flow<Stat?>\n\n    @Query(\"SELECT date, focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4 as focusTime, breakTime FROM stat ORDER BY date DESC LIMIT :n\")\n    fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>>\n\n    @Query(\n        \"SELECT \" +\n                \"AVG(focusTimeQ1) AS focusTimeQ1, \" +\n                \"AVG(focusTimeQ2) AS focusTimeQ2, \" +\n                \"AVG(focusTimeQ3) AS focusTimeQ3, \" +\n                \"AVG(focusTimeQ4) AS focusTimeQ4 \" +\n                \"FROM (\" +\n                \"SELECT * FROM (\" +\n                \"SELECT focusTimeQ1, focusTimeQ2, focusTimeQ3, focusTimeQ4 FROM stat ORDER BY date DESC LIMIT :n\" +\n                \") \" +\n                \"WHERE focusTimeQ1 != 0 OR focusTimeQ2 != 0 OR focusTimeQ3 != 0 OR focusTimeQ4 != 0 \" +\n                \")\"\n    )\n    fun getLastNDaysAvgFocusTimes(n: Int): Flow<StatFocusTime?>\n\n    @Query(\"SELECT EXISTS (SELECT * FROM stat WHERE date = :date)\")\n    suspend fun statExists(date: LocalDate): Boolean\n\n    @Query(\"SELECT date FROM stat ORDER BY date DESC LIMIT 1\")\n    suspend fun getLastDate(): LocalDate?\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\service\\AddActions.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.app.PendingIntent\nimport android.app.PendingIntent.FLAG_IMMUTABLE\nimport android.content.Context\nimport android.content.Intent\nimport androidx.annotation.DrawableRes\nimport androidx.core.app.NotificationCompat\nimport org.nsh07.pomodoro.R\n\nfun NotificationCompat.Builder.addTimerActions(\n    context: Context,\n    @DrawableRes playPauseIcon: Int,\n    playPauseText: String\n): NotificationCompat.Builder = this\n    .addAction(\n        playPauseIcon,\n        playPauseText,\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.TOGGLE.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n    .addAction(\n        R.drawable.restart,\n        context.getString(R.string.exit),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.RESET.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n    .addAction(\n        R.drawable.skip_next,\n        context.getString(R.string.skip),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.SKIP.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n\nfun NotificationCompat.Builder.addStopAlarmAction(\n    context: Context\n): NotificationCompat.Builder = this\n    .addAction(\n        R.drawable.alarm,\n        context.getString(R.string.stop_alarm),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.STOP_ALARM.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\service\\ServiceHelper.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.content.Context\nimport android.content.Intent\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\n\n/**\n * Helper class that holds a reference to [Context] and helps call [Context.startService] in\n * [androidx.lifecycle.ViewModel]s. This class must be managed by an [android.app.Application] class\n * to scope it to the Activity's lifecycle and prevent leaks.\n */\nclass ServiceHelper(private val context: Context) {\n    fun startService(action: TimerAction) {\n        when (action) {\n            TimerAction.ResetTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.RESET.toString()\n                    context.startService(it)\n                }\n\n            is TimerAction.SkipTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.SKIP.toString()\n                    context.startService(it)\n                }\n\n            TimerAction.StopAlarm ->\n                Intent(context, TimerService::class.java).also {\n                    it.action =\n                        TimerService.Actions.STOP_ALARM.toString()\n                    context.startService(it)\n                }\n\n            TimerAction.ToggleTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.TOGGLE.toString()\n                    context.startService(it)\n                }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\TomatoApplication.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro\n\nimport android.app.Application\nimport android.app.NotificationChannel\nimport android.app.NotificationManager\nimport org.nsh07.pomodoro.billing.initializePurchases\nimport org.nsh07.pomodoro.data.AppContainer\nimport org.nsh07.pomodoro.data.DefaultAppContainer\n\nclass TomatoApplication : Application() {\n    lateinit var container: AppContainer\n    override fun onCreate() {\n        super.onCreate()\n        container = DefaultAppContainer(this)\n\n        initializePurchases(this)\n\n        val notificationChannel = NotificationChannel(\n            \"timer\",\n            getString(R.string.timer_progress),\n            NotificationManager.IMPORTANCE_DEFAULT\n        )\n\n        container.notificationManager.createNotificationChannel(notificationChannel)\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\play\\java\\org\\nsh07\\pomodoro\\billing\\initializePurchases.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.content.Context\nimport com.revenuecat.purchases.Purchases\nimport com.revenuecat.purchases.PurchasesConfiguration\n\nfun initializePurchases(context: Context) {\n    Purchases.configure(\n        PurchasesConfiguration\n            .Builder(context, \"goog_jBpRIBjTYvhKYluCqkPXSHbuFbX\")\n            .build()\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\play\\java\\org\\nsh07\\pomodoro\\billing\\PlayBillingManager.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "LOGGING"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Kermit 或 Napier 日志库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.util.Log\nimport com.revenuecat.purchases.Purchases\nimport com.revenuecat.purchases.getCustomerInfoWith\nimport com.revenuecat.purchases.interfaces.UpdatedCustomerInfoListener\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\n\nprivate const val ENTITLEMENT_ID = \"plus\"\n\n/**\n * Google Play implementation of BillingManager\n */\nclass PlayBillingManager : BillingManager {\n    private val _isPlus = MutableStateFlow(false)\n    override val isPlus = _isPlus.asStateFlow()\n\n    private val purchases by lazy { Purchases.sharedInstance }\n\n    init {\n        purchases.updatedCustomerInfoListener =\n            UpdatedCustomerInfoListener { customerInfo ->\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\n            }\n\n        // Fetch initial customer info\n        purchases.getCustomerInfoWith(\n            onSuccess = { customerInfo ->\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\n            },\n            onError = { error ->\n                Log.e(\"GooglePlayPaywallManager\", \"Error fetching customer info: $error\")\n            }\n        )\n    }\n}\n\nobject BillingManagerProvider {\n    val manager: BillingManager = PlayBillingManager()\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\androidTest\\java\\org\\nsh07\\pomodoro\\ExampleInstrumentedTest.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "package org.nsh07.pomodoro\n\nimport androidx.test.platform.app.InstrumentationRegistry\nimport androidx.test.ext.junit.runners.AndroidJUnit4\n\nimport org.junit.Test\nimport org.junit.runner.RunWith\n\nimport org.junit.Assert.*\n\n/**\n * Instrumented test, which will execute on an Android device.\n *\n * See [testing documentation](http://d.android.com/tools/testing).\n */\n@RunWith(AndroidJUnit4::class)\nclass ExampleInstrumentedTest {\n    @Test\n    fun useAppContext() {\n        // Context of the app under test.\n        val appContext = InstrumentationRegistry.getInstrumentation().targetContext\n        assertEquals(\"org.nsh07.pomodoro\", appContext.packageName)\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\initializePurchases.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.content.Context\n\nfun initializePurchases(context: Context) {}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\AppDatabase.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "STORAGE",
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.content.Context\nimport androidx.room.AutoMigration\nimport androidx.room.Database\nimport androidx.room.Room\nimport androidx.room.RoomDatabase\nimport androidx.room.TypeConverters\n\n@Database(\n    entities = [IntPreference::class, BooleanPreference::class, StringPreference::class, Stat::class],\n    version = 2,\n    autoMigrations = [\n        AutoMigration(from = 1, to = 2)\n    ]\n)\n@TypeConverters(Converters::class)\nabstract class AppDatabase : RoomDatabase() {\n\n    abstract fun preferenceDao(): PreferenceDao\n    abstract fun statDao(): StatDao\n\n    companion object {\n\n        @Volatile\n        private var Instance: AppDatabase? = null\n\n        fun getDatabase(context: Context): AppDatabase {\n            return Instance ?: synchronized(this) {\n                Instance ?: Room.databaseBuilder(context, AppDatabase::class.java, \"app_database\")\n                    .build()\n                    .also { Instance = it }\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\Converters.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.TypeConverter\nimport java.time.LocalDate\n\nclass Converters {\n    @TypeConverter\n    fun localDateToString(localDate: LocalDate?): String? {\n        return localDate?.toString()\n    }\n\n    @TypeConverter\n    fun stringToLocalDate(date: String?): LocalDate? {\n        return if (date != null) LocalDate.parse(date) else null\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\Preference.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Entity\nimport androidx.room.PrimaryKey\n\n/**\n * Class for storing boolean preferences in the app's database\n */\n@Entity(tableName = \"boolean_preference\")\ndata class BooleanPreference(\n    @PrimaryKey\n    val key: String,\n    val value: Boolean\n)\n\n/**\n * Class for storing integer preferences in the app's database\n */\n@Entity(tableName = \"int_preference\")\ndata class IntPreference(\n    @PrimaryKey\n    val key: String,\n    val value: Int\n)\n\n/**\n * Class for storing string preferences in the app's database\n */\n@Entity(tableName = \"string_preference\")\ndata class StringPreference(\n    @PrimaryKey\n    val key: String,\n    val value: String\n)"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\PreferenceDao.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Dao\nimport androidx.room.Insert\nimport androidx.room.OnConflictStrategy.Companion.REPLACE\nimport androidx.room.Query\nimport kotlinx.coroutines.flow.Flow\n\n@Dao\ninterface PreferenceDao {\n    @Insert(onConflict = REPLACE)\n    suspend fun insertIntPreference(preference: IntPreference)\n\n    @Insert(onConflict = REPLACE)\n    suspend fun insertBooleanPreference(preference: BooleanPreference)\n\n    @Insert(onConflict = REPLACE)\n    suspend fun insertStringPreference(preference: StringPreference)\n\n    @Query(\"DELETE FROM int_preference\")\n    suspend fun resetIntPreferences()\n\n    @Query(\"DELETE FROM boolean_preference\")\n    suspend fun resetBooleanPreferences()\n\n    @Query(\"DELETE FROM string_preference\")\n    suspend fun resetStringPreferences()\n\n    @Query(\"SELECT value FROM int_preference WHERE `key` = :key\")\n    suspend fun getIntPreference(key: String): Int?\n\n    @Query(\"SELECT value FROM boolean_preference WHERE `key` = :key\")\n    suspend fun getBooleanPreference(key: String): Boolean?\n\n    @Query(\"SELECT value FROM boolean_preference WHERE `key` = :key\")\n    fun getBooleanPreferenceFlow(key: String): Flow<Boolean>\n\n    @Query(\"SELECT value FROM string_preference WHERE `key` = :key\")\n    suspend fun getStringPreference(key: String): String?\n\n    @Query(\"SELECT value FROM string_preference WHERE `key` = :key\")\n    fun getStringPreferenceFlow(key: String): Flow<String>\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\Stat.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Entity\nimport androidx.room.PrimaryKey\nimport java.time.LocalDate\n\n/**\n * Data class for storing the user's statistics in the app's database. This class stores the focus\n * durations for the 4 quarters of a day (00:00 - 12:00, 12:00 - 16:00, 16:00 - 20:00, 20:00 - 00:00)\n * separately for later analysis (e.g. for showing which parts of the day are most productive).\n */\n@Entity(tableName = \"stat\")\ndata class Stat(\n    @PrimaryKey\n    val date: LocalDate,\n    val focusTimeQ1: Long,\n    val focusTimeQ2: Long,\n    val focusTimeQ3: Long,\n    val focusTimeQ4: Long,\n    val breakTime: Long\n) {\n    fun totalFocusTime() = focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4\n}\n\ndata class StatSummary(\n    val date: LocalDate,\n    val focusTime: Long,\n    val breakTime: Long\n)\n\ndata class StatFocusTime(\n    val focusTimeQ1: Long,\n    val focusTimeQ2: Long,\n    val focusTimeQ3: Long,\n    val focusTimeQ4: Long\n) {\n    fun total() = focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\StatDao.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Dao\nimport androidx.room.Insert\nimport androidx.room.OnConflictStrategy.Companion.REPLACE\nimport androidx.room.Query\nimport kotlinx.coroutines.flow.Flow\nimport java.time.LocalDate\n\n@Dao\ninterface StatDao {\n    @Insert(onConflict = REPLACE)\n    suspend fun insertStat(stat: Stat)\n\n    @Query(\"UPDATE stat SET focusTimeQ1 = focusTimeQ1 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ1(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ2 = focusTimeQ2 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ2(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ3 = focusTimeQ3 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ3(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ4 = focusTimeQ4 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ4(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET breakTime = breakTime + :breakTime WHERE date = :date\")\n    suspend fun addBreakTime(date: LocalDate, breakTime: Long)\n\n    @Query(\"SELECT * FROM stat WHERE date = :date\")\n    fun getStat(date: LocalDate): Flow<Stat?>\n\n    @Query(\"SELECT date, focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4 as focusTime, breakTime FROM stat ORDER BY date DESC LIMIT :n\")\n    fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>>\n\n    @Query(\n        \"SELECT \" +\n                \"AVG(focusTimeQ1) AS focusTimeQ1, \" +\n                \"AVG(focusTimeQ2) AS focusTimeQ2, \" +\n                \"AVG(focusTimeQ3) AS focusTimeQ3, \" +\n                \"AVG(focusTimeQ4) AS focusTimeQ4 \" +\n                \"FROM (\" +\n                \"SELECT * FROM (\" +\n                \"SELECT focusTimeQ1, focusTimeQ2, focusTimeQ3, focusTimeQ4 FROM stat ORDER BY date DESC LIMIT :n\" +\n                \") \" +\n                \"WHERE focusTimeQ1 != 0 OR focusTimeQ2 != 0 OR focusTimeQ3 != 0 OR focusTimeQ4 != 0 \" +\n                \")\"\n    )\n    fun getLastNDaysAvgFocusTimes(n: Int): Flow<StatFocusTime?>\n\n    @Query(\"SELECT EXISTS (SELECT * FROM stat WHERE date = :date)\")\n    suspend fun statExists(date: LocalDate): Boolean\n\n    @Query(\"SELECT date FROM stat ORDER BY date DESC LIMIT 1\")\n    suspend fun getLastDate(): LocalDate?\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\service\\AddActions.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.app.PendingIntent\nimport android.app.PendingIntent.FLAG_IMMUTABLE\nimport android.content.Context\nimport android.content.Intent\nimport androidx.annotation.DrawableRes\nimport androidx.core.app.NotificationCompat\nimport org.nsh07.pomodoro.R\n\nfun NotificationCompat.Builder.addTimerActions(\n    context: Context,\n    @DrawableRes playPauseIcon: Int,\n    playPauseText: String\n): NotificationCompat.Builder = this\n    .addAction(\n        playPauseIcon,\n        playPauseText,\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.TOGGLE.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n    .addAction(\n        R.drawable.restart,\n        context.getString(R.string.exit),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.RESET.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n    .addAction(\n        R.drawable.skip_next,\n        context.getString(R.string.skip),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.SKIP.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n\nfun NotificationCompat.Builder.addStopAlarmAction(\n    context: Context\n): NotificationCompat.Builder = this\n    .addAction(\n        R.drawable.alarm,\n        context.getString(R.string.stop_alarm),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.STOP_ALARM.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\service\\ServiceHelper.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.content.Context\nimport android.content.Intent\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\n\n/**\n * Helper class that holds a reference to [Context] and helps call [Context.startService] in\n * [androidx.lifecycle.ViewModel]s. This class must be managed by an [android.app.Application] class\n * to scope it to the Activity's lifecycle and prevent leaks.\n */\nclass ServiceHelper(private val context: Context) {\n    fun startService(action: TimerAction) {\n        when (action) {\n            TimerAction.ResetTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.RESET.toString()\n                    context.startService(it)\n                }\n\n            is TimerAction.SkipTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.SKIP.toString()\n                    context.startService(it)\n                }\n\n            TimerAction.StopAlarm ->\n                Intent(context, TimerService::class.java).also {\n                    it.action =\n                        TimerService.Actions.STOP_ALARM.toString()\n                    context.startService(it)\n                }\n\n            TimerAction.ToggleTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.TOGGLE.toString()\n                    context.startService(it)\n                }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\TomatoApplication.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro\n\nimport android.app.Application\nimport android.app.NotificationChannel\nimport android.app.NotificationManager\nimport org.nsh07.pomodoro.billing.initializePurchases\nimport org.nsh07.pomodoro.data.AppContainer\nimport org.nsh07.pomodoro.data.DefaultAppContainer\n\nclass TomatoApplication : Application() {\n    lateinit var container: AppContainer\n    override fun onCreate() {\n        super.onCreate()\n        container = DefaultAppContainer(this)\n\n        initializePurchases(this)\n\n        val notificationChannel = NotificationChannel(\n            \"timer\",\n            getString(R.string.timer_progress),\n            NotificationManager.IMPORTANCE_DEFAULT\n        )\n\n        container.notificationManager.createNotificationChannel(notificationChannel)\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\play\\java\\org\\nsh07\\pomodoro\\billing\\initializePurchases.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.content.Context\nimport com.revenuecat.purchases.Purchases\nimport com.revenuecat.purchases.PurchasesConfiguration\n\nfun initializePurchases(context: Context) {\n    Purchases.configure(\n        PurchasesConfiguration\n            .Builder(context, \"goog_jBpRIBjTYvhKYluCqkPXSHbuFbX\")\n            .build()\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidMain\\kotlin\\logic\\src\\play\\java\\org\\nsh07\\pomodoro\\billing\\PlayBillingManager.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "LOGGING"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Kermit 或 Napier 日志库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.util.Log\nimport com.revenuecat.purchases.Purchases\nimport com.revenuecat.purchases.getCustomerInfoWith\nimport com.revenuecat.purchases.interfaces.UpdatedCustomerInfoListener\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\n\nprivate const val ENTITLEMENT_ID = \"plus\"\n\n/**\n * Google Play implementation of BillingManager\n */\nclass PlayBillingManager : BillingManager {\n    private val _isPlus = MutableStateFlow(false)\n    override val isPlus = _isPlus.asStateFlow()\n\n    private val purchases by lazy { Purchases.sharedInstance }\n\n    init {\n        purchases.updatedCustomerInfoListener =\n            UpdatedCustomerInfoListener { customerInfo ->\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\n            }\n\n        // Fetch initial customer info\n        purchases.getCustomerInfoWith(\n            onSuccess = { customerInfo ->\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\n            },\n            onError = { error ->\n                Log.e(\"GooglePlayPaywallManager\", \"Error fetching customer info: $error\")\n            }\n        )\n    }\n}\n\nobject BillingManagerProvider {\n    val manager: BillingManager = PlayBillingManager()\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\androidTest\\java\\org\\nsh07\\pomodoro\\ExampleInstrumentedTest.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "package org.nsh07.pomodoro\n\nimport androidx.test.platform.app.InstrumentationRegistry\nimport androidx.test.ext.junit.runners.AndroidJUnit4\n\nimport org.junit.Test\nimport org.junit.runner.RunWith\n\nimport org.junit.Assert.*\n\n/**\n * Instrumented test, which will execute on an Android device.\n *\n * See [testing documentation](http://d.android.com/tools/testing).\n */\n@RunWith(AndroidJUnit4::class)\nclass ExampleInstrumentedTest {\n    @Test\n    fun useAppContext() {\n        // Context of the app under test.\n        val appContext = InstrumentationRegistry.getInstrumentation().targetContext\n        assertEquals(\"org.nsh07.pomodoro\", appContext.packageName)\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\initializePurchases.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.content.Context\n\nfun initializePurchases(context: Context) {}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\AppDatabase.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "STORAGE",
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.content.Context\nimport androidx.room.AutoMigration\nimport androidx.room.Database\nimport androidx.room.Room\nimport androidx.room.RoomDatabase\nimport androidx.room.TypeConverters\n\n@Database(\n    entities = [IntPreference::class, BooleanPreference::class, StringPreference::class, Stat::class],\n    version = 2,\n    autoMigrations = [\n        AutoMigration(from = 1, to = 2)\n    ]\n)\n@TypeConverters(Converters::class)\nabstract class AppDatabase : RoomDatabase() {\n\n    abstract fun preferenceDao(): PreferenceDao\n    abstract fun statDao(): StatDao\n\n    companion object {\n\n        @Volatile\n        private var Instance: AppDatabase? = null\n\n        fun getDatabase(context: Context): AppDatabase {\n            return Instance ?: synchronized(this) {\n                Instance ?: Room.databaseBuilder(context, AppDatabase::class.java, \"app_database\")\n                    .build()\n                    .also { Instance = it }\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\Converters.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.TypeConverter\nimport java.time.LocalDate\n\nclass Converters {\n    @TypeConverter\n    fun localDateToString(localDate: LocalDate?): String? {\n        return localDate?.toString()\n    }\n\n    @TypeConverter\n    fun stringToLocalDate(date: String?): LocalDate? {\n        return if (date != null) LocalDate.parse(date) else null\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\Preference.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Entity\nimport androidx.room.PrimaryKey\n\n/**\n * Class for storing boolean preferences in the app's database\n */\n@Entity(tableName = \"boolean_preference\")\ndata class BooleanPreference(\n    @PrimaryKey\n    val key: String,\n    val value: Boolean\n)\n\n/**\n * Class for storing integer preferences in the app's database\n */\n@Entity(tableName = \"int_preference\")\ndata class IntPreference(\n    @PrimaryKey\n    val key: String,\n    val value: Int\n)\n\n/**\n * Class for storing string preferences in the app's database\n */\n@Entity(tableName = \"string_preference\")\ndata class StringPreference(\n    @PrimaryKey\n    val key: String,\n    val value: String\n)"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\PreferenceDao.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Dao\nimport androidx.room.Insert\nimport androidx.room.OnConflictStrategy.Companion.REPLACE\nimport androidx.room.Query\nimport kotlinx.coroutines.flow.Flow\n\n@Dao\ninterface PreferenceDao {\n    @Insert(onConflict = REPLACE)\n    suspend fun insertIntPreference(preference: IntPreference)\n\n    @Insert(onConflict = REPLACE)\n    suspend fun insertBooleanPreference(preference: BooleanPreference)\n\n    @Insert(onConflict = REPLACE)\n    suspend fun insertStringPreference(preference: StringPreference)\n\n    @Query(\"DELETE FROM int_preference\")\n    suspend fun resetIntPreferences()\n\n    @Query(\"DELETE FROM boolean_preference\")\n    suspend fun resetBooleanPreferences()\n\n    @Query(\"DELETE FROM string_preference\")\n    suspend fun resetStringPreferences()\n\n    @Query(\"SELECT value FROM int_preference WHERE `key` = :key\")\n    suspend fun getIntPreference(key: String): Int?\n\n    @Query(\"SELECT value FROM boolean_preference WHERE `key` = :key\")\n    suspend fun getBooleanPreference(key: String): Boolean?\n\n    @Query(\"SELECT value FROM boolean_preference WHERE `key` = :key\")\n    fun getBooleanPreferenceFlow(key: String): Flow<Boolean>\n\n    @Query(\"SELECT value FROM string_preference WHERE `key` = :key\")\n    suspend fun getStringPreference(key: String): String?\n\n    @Query(\"SELECT value FROM string_preference WHERE `key` = :key\")\n    fun getStringPreferenceFlow(key: String): Flow<String>\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\Stat.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Entity\nimport androidx.room.PrimaryKey\nimport java.time.LocalDate\n\n/**\n * Data class for storing the user's statistics in the app's database. This class stores the focus\n * durations for the 4 quarters of a day (00:00 - 12:00, 12:00 - 16:00, 16:00 - 20:00, 20:00 - 00:00)\n * separately for later analysis (e.g. for showing which parts of the day are most productive).\n */\n@Entity(tableName = \"stat\")\ndata class Stat(\n    @PrimaryKey\n    val date: LocalDate,\n    val focusTimeQ1: Long,\n    val focusTimeQ2: Long,\n    val focusTimeQ3: Long,\n    val focusTimeQ4: Long,\n    val breakTime: Long\n) {\n    fun totalFocusTime() = focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4\n}\n\ndata class StatSummary(\n    val date: LocalDate,\n    val focusTime: Long,\n    val breakTime: Long\n)\n\ndata class StatFocusTime(\n    val focusTimeQ1: Long,\n    val focusTimeQ2: Long,\n    val focusTimeQ3: Long,\n    val focusTimeQ4: Long\n) {\n    fun total() = focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\StatDao.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Dao\nimport androidx.room.Insert\nimport androidx.room.OnConflictStrategy.Companion.REPLACE\nimport androidx.room.Query\nimport kotlinx.coroutines.flow.Flow\nimport java.time.LocalDate\n\n@Dao\ninterface StatDao {\n    @Insert(onConflict = REPLACE)\n    suspend fun insertStat(stat: Stat)\n\n    @Query(\"UPDATE stat SET focusTimeQ1 = focusTimeQ1 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ1(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ2 = focusTimeQ2 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ2(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ3 = focusTimeQ3 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ3(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ4 = focusTimeQ4 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ4(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET breakTime = breakTime + :breakTime WHERE date = :date\")\n    suspend fun addBreakTime(date: LocalDate, breakTime: Long)\n\n    @Query(\"SELECT * FROM stat WHERE date = :date\")\n    fun getStat(date: LocalDate): Flow<Stat?>\n\n    @Query(\"SELECT date, focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4 as focusTime, breakTime FROM stat ORDER BY date DESC LIMIT :n\")\n    fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>>\n\n    @Query(\n        \"SELECT \" +\n                \"AVG(focusTimeQ1) AS focusTimeQ1, \" +\n                \"AVG(focusTimeQ2) AS focusTimeQ2, \" +\n                \"AVG(focusTimeQ3) AS focusTimeQ3, \" +\n                \"AVG(focusTimeQ4) AS focusTimeQ4 \" +\n                \"FROM (\" +\n                \"SELECT * FROM (\" +\n                \"SELECT focusTimeQ1, focusTimeQ2, focusTimeQ3, focusTimeQ4 FROM stat ORDER BY date DESC LIMIT :n\" +\n                \") \" +\n                \"WHERE focusTimeQ1 != 0 OR focusTimeQ2 != 0 OR focusTimeQ3 != 0 OR focusTimeQ4 != 0 \" +\n                \")\"\n    )\n    fun getLastNDaysAvgFocusTimes(n: Int): Flow<StatFocusTime?>\n\n    @Query(\"SELECT EXISTS (SELECT * FROM stat WHERE date = :date)\")\n    suspend fun statExists(date: LocalDate): Boolean\n\n    @Query(\"SELECT date FROM stat ORDER BY date DESC LIMIT 1\")\n    suspend fun getLastDate(): LocalDate?\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\service\\AddActions.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.app.PendingIntent\nimport android.app.PendingIntent.FLAG_IMMUTABLE\nimport android.content.Context\nimport android.content.Intent\nimport androidx.annotation.DrawableRes\nimport androidx.core.app.NotificationCompat\nimport org.nsh07.pomodoro.R\n\nfun NotificationCompat.Builder.addTimerActions(\n    context: Context,\n    @DrawableRes playPauseIcon: Int,\n    playPauseText: String\n): NotificationCompat.Builder = this\n    .addAction(\n        playPauseIcon,\n        playPauseText,\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.TOGGLE.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n    .addAction(\n        R.drawable.restart,\n        context.getString(R.string.exit),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.RESET.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n    .addAction(\n        R.drawable.skip_next,\n        context.getString(R.string.skip),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.SKIP.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n\nfun NotificationCompat.Builder.addStopAlarmAction(\n    context: Context\n): NotificationCompat.Builder = this\n    .addAction(\n        R.drawable.alarm,\n        context.getString(R.string.stop_alarm),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.STOP_ALARM.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\service\\ServiceHelper.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.content.Context\nimport android.content.Intent\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\n\n/**\n * Helper class that holds a reference to [Context] and helps call [Context.startService] in\n * [androidx.lifecycle.ViewModel]s. This class must be managed by an [android.app.Application] class\n * to scope it to the Activity's lifecycle and prevent leaks.\n */\nclass ServiceHelper(private val context: Context) {\n    fun startService(action: TimerAction) {\n        when (action) {\n            TimerAction.ResetTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.RESET.toString()\n                    context.startService(it)\n                }\n\n            is TimerAction.SkipTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.SKIP.toString()\n                    context.startService(it)\n                }\n\n            TimerAction.StopAlarm ->\n                Intent(context, TimerService::class.java).also {\n                    it.action =\n                        TimerService.Actions.STOP_ALARM.toString()\n                    context.startService(it)\n                }\n\n            TimerAction.ToggleTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.TOGGLE.toString()\n                    context.startService(it)\n                }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\TomatoApplication.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro\n\nimport android.app.Application\nimport android.app.NotificationChannel\nimport android.app.NotificationManager\nimport org.nsh07.pomodoro.billing.initializePurchases\nimport org.nsh07.pomodoro.data.AppContainer\nimport org.nsh07.pomodoro.data.DefaultAppContainer\n\nclass TomatoApplication : Application() {\n    lateinit var container: AppContainer\n    override fun onCreate() {\n        super.onCreate()\n        container = DefaultAppContainer(this)\n\n        initializePurchases(this)\n\n        val notificationChannel = NotificationChannel(\n            \"timer\",\n            getString(R.string.timer_progress),\n            NotificationManager.IMPORTANCE_DEFAULT\n        )\n\n        container.notificationManager.createNotificationChannel(notificationChannel)\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\play\\java\\org\\nsh07\\pomodoro\\billing\\initializePurchases.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.content.Context\nimport com.revenuecat.purchases.Purchases\nimport com.revenuecat.purchases.PurchasesConfiguration\n\nfun initializePurchases(context: Context) {\n    Purchases.configure(\n        PurchasesConfiguration\n            .Builder(context, \"goog_jBpRIBjTYvhKYluCqkPXSHbuFbX\")\n            .build()\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\logic\\src\\play\\java\\org\\nsh07\\pomodoro\\billing\\PlayBillingManager.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "LOGGING"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Kermit 或 Napier 日志库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.util.Log\nimport com.revenuecat.purchases.Purchases\nimport com.revenuecat.purchases.getCustomerInfoWith\nimport com.revenuecat.purchases.interfaces.UpdatedCustomerInfoListener\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\n\nprivate const val ENTITLEMENT_ID = \"plus\"\n\n/**\n * Google Play implementation of BillingManager\n */\nclass PlayBillingManager : BillingManager {\n    private val _isPlus = MutableStateFlow(false)\n    override val isPlus = _isPlus.asStateFlow()\n\n    private val purchases by lazy { Purchases.sharedInstance }\n\n    init {\n        purchases.updatedCustomerInfoListener =\n            UpdatedCustomerInfoListener { customerInfo ->\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\n            }\n\n        // Fetch initial customer info\n        purchases.getCustomerInfoWith(\n            onSuccess = { customerInfo ->\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\n            },\n            onError = { error ->\n                Log.e(\"GooglePlayPaywallManager\", \"Error fetching customer info: $error\")\n            }\n        )\n    }\n}\n\nobject BillingManagerProvider {\n    val manager: BillingManager = PlayBillingManager()\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\TomatoPlusPaywallDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "THREADING",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport androidx.activity.compose.BackHandler\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n@Composable\nfun TomatoPlusPaywallDialog(\n    isPlus: Boolean,\n    onDismiss: () -> Unit\n) {\n    val uriHandler = LocalUriHandler.current\n\n    BackHandler(enabled = true, onDismiss)\n\n    Box(\n        contentAlignment = Alignment.Center,\n        modifier = Modifier\n            .fillMaxSize()\n            .background(colorScheme.surface)\n    ) {\n        Column(horizontalAlignment = Alignment.CenterHorizontally) {\n            Icon(\n                painterResource(R.drawable.bmc),\n                null,\n                tint = colorScheme.onSurface\n            )\n            Spacer(Modifier.height(16.dp))\n            Text(\n                stringResource(R.string.tomato_foss),\n                style = typography.headlineSmall,\n                fontFamily = robotoFlexTopBar,\n                color = colorScheme.onSurface\n            )\n            Spacer(Modifier.height(8.dp))\n            Text(\n                stringResource(R.string.tomato_foss_desc, \"BuyMeACoffee\"),\n                textAlign = TextAlign.Center,\n                color = colorScheme.onSurfaceVariant,\n                modifier = Modifier.padding(horizontal = 24.dp)\n            )\n            Spacer(Modifier.height(16.dp))\n            Button(onClick = { uriHandler.openUri(\"https://coff.ee/nsh07\") }) {\n                Text(stringResource(R.string.bmc))\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\foss\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutButtons.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ButtonColors\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TopButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://coff.ee/nsh07\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.bmc),\n                contentDescription = null,\n                modifier = Modifier.height(24.dp)\n            )\n\n            Text(text = stringResource(R.string.bmc))\n        }\n    }\n}\n\n@Composable\nfun BottomButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://hosted.weblate.org/engage/tomato/\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.weblate),\n                contentDescription = null,\n                modifier = Modifier.size(20.dp)\n            )\n\n            Text(text = stringResource(R.string.help_with_translation))\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\AppContainer.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.app.NotificationManager\nimport android.app.PendingIntent\nimport android.content.Context\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.core.app.NotificationCompat\nimport androidx.core.app.NotificationCompat.VISIBILITY_PUBLIC\nimport androidx.core.app.NotificationManagerCompat\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.billing.BillingManager\nimport org.nsh07.pomodoro.billing.BillingManagerProvider\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.service.addTimerActions\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport org.nsh07.pomodoro.utils.millisecondsToStr\n\ninterface AppContainer {\n    val appPreferenceRepository: AppPreferenceRepository\n    val appStatRepository: AppStatRepository\n    val appTimerRepository: AppTimerRepository\n    val billingManager: BillingManager\n    val notificationManager: NotificationManagerCompat\n    val notificationManagerService: NotificationManager\n    val notificationBuilder: NotificationCompat.Builder\n    val serviceHelper: ServiceHelper\n    val timerState: MutableStateFlow<TimerState>\n    val time: MutableStateFlow<Long>\n    var activityTurnScreenOn: (Boolean) -> Unit\n}\n\nclass DefaultAppContainer(context: Context) : AppContainer {\n\n    override val appPreferenceRepository: AppPreferenceRepository by lazy {\n        AppPreferenceRepository(AppDatabase.getDatabase(context).preferenceDao())\n    }\n\n    override val appStatRepository: AppStatRepository by lazy {\n        AppStatRepository(AppDatabase.getDatabase(context).statDao())\n    }\n\n    override val appTimerRepository: AppTimerRepository by lazy { AppTimerRepository() }\n\n    override val billingManager: BillingManager by lazy { BillingManagerProvider.manager }\n\n    override val notificationManager: NotificationManagerCompat by lazy {\n        NotificationManagerCompat.from(context)\n    }\n\n    override val notificationManagerService: NotificationManager =\n        context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n\n    override val notificationBuilder: NotificationCompat.Builder by lazy {\n        NotificationCompat.Builder(context, \"timer\")\n            .setSmallIcon(R.drawable.tomato_logo_notification)\n            .setColor(Color.Red.toArgb())\n            .setContentIntent(\n                PendingIntent.getActivity(\n                    context,\n                    0,\n                    context.packageManager.getLaunchIntentForPackage(context.packageName),\n                    PendingIntent.FLAG_IMMUTABLE\n                )\n            )\n            .addTimerActions(context, R.drawable.play, context.getString(R.string.start))\n            .setShowWhen(true)\n            .setSilent(true)\n            .setOngoing(true)\n            .setRequestPromotedOngoing(true)\n            .setVisibility(VISIBILITY_PUBLIC)\n    }\n\n    override val serviceHelper: ServiceHelper by lazy {\n        ServiceHelper(context)\n    }\n\n    override val timerState: MutableStateFlow<TimerState> by lazy {\n        MutableStateFlow(\n            TimerState(\n                totalTime = appTimerRepository.focusTime,\n                timeStr = millisecondsToStr(appTimerRepository.focusTime),\n                nextTimeStr = millisecondsToStr(appTimerRepository.shortBreakTime)\n            )\n        )\n    }\n\n    override val time: MutableStateFlow<Long> by lazy {\n        MutableStateFlow(appTimerRepository.focusTime)\n    }\n\n    override var activityTurnScreenOn: (Boolean) -> Unit = {}\n\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\TimerRepository.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.net.Uri\nimport android.provider.Settings\nimport androidx.compose.material3.ColorScheme\nimport androidx.compose.material3.lightColorScheme\nimport kotlinx.coroutines.flow.MutableStateFlow\n\n/**\n * Interface that holds the timer durations for each timer type. This repository maintains a single\n * source of truth for the timer durations for the various ViewModels in the app.\n */\ninterface TimerRepository {\n    var focusTime: Long\n    var shortBreakTime: Long\n    var longBreakTime: Long\n\n    var sessionLength: Int\n\n    var timerFrequency: Float\n\n    var alarmEnabled: Boolean\n    var vibrateEnabled: Boolean\n    var dndEnabled: Boolean\n\n    var colorScheme: ColorScheme\n\n    var alarmSoundUri: Uri?\n\n    var serviceRunning: MutableStateFlow<Boolean>\n}\n\n/**\n * See [TimerRepository] for more details\n */\nclass AppTimerRepository : TimerRepository {\n    override var focusTime = 25 * 60 * 1000L\n    override var shortBreakTime = 5 * 60 * 1000L\n    override var longBreakTime = 15 * 60 * 1000L\n    override var sessionLength = 4\n    override var timerFrequency: Float = 60f\n    override var alarmEnabled = true\n    override var vibrateEnabled = true\n    override var dndEnabled: Boolean = false\n    override var colorScheme = lightColorScheme()\n    override var alarmSoundUri: Uri? =\n        Settings.System.DEFAULT_ALARM_ALERT_URI ?: Settings.System.DEFAULT_RINGTONE_URI\n    override var serviceRunning = MutableStateFlow(false)\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\MainActivity.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro\n\nimport android.os.Bundle\nimport androidx.activity.ComponentActivity\nimport androidx.activity.compose.setContent\nimport androidx.activity.enableEdgeToEdge\nimport androidx.activity.viewModels\nimport androidx.compose.foundation.isSystemInDarkTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport org.nsh07.pomodoro.ui.AppScreen\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsViewModel\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.toColor\n\nclass MainActivity : ComponentActivity() {\n\n    private val settingsViewModel: SettingsViewModel by viewModels(factoryProducer = { SettingsViewModel.Factory })\n\n    private val appContainer by lazy {\n        (application as TomatoApplication).container\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        enableEdgeToEdge()\n\n        appContainer.activityTurnScreenOn = {\n            setShowWhenLocked(it)\n            setTurnScreenOn(it)\n        }\n\n        setContent {\n            val settingsState by settingsViewModel.settingsState.collectAsStateWithLifecycle()\n\n            val darkTheme = when (settingsState.theme) {\n                \"dark\" -> true\n                \"light\" -> false\n                else -> isSystemInDarkTheme()\n            }\n\n            val seed = settingsState.colorScheme.toColor()\n\n            val isPlus by settingsViewModel.isPlus.collectAsStateWithLifecycle()\n\n            TomatoTheme(\n                darkTheme = darkTheme,\n                seedColor = seed,\n                blackTheme = settingsState.blackTheme\n            ) {\n                val colorScheme = colorScheme\n                LaunchedEffect(colorScheme) {\n                    appContainer.appTimerRepository.colorScheme = colorScheme\n                }\n\n                AppScreen(\n                    isPlus = isPlus,\n                    isAODEnabled = settingsState.aodEnabled,\n                    setTimerFrequency = {\n                        appContainer.appTimerRepository.timerFrequency = it\n                    }\n                )\n            }\n        }\n    }\n\n\n    override fun onStop() {\n        super.onStop()\n        // Reduce the timer loop frequency when not visible to save battery power\n        appContainer.appTimerRepository.timerFrequency = 1f\n    }\n\n    override fun onStart() {\n        super.onStart()\n        // Increase the timer loop frequency again when visible to make the progress smoother\n        appContainer.appTimerRepository.timerFrequency = 60f\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\service\\TimerService.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "TIME",
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.annotation.SuppressLint\nimport android.app.NotificationManager\nimport android.app.Service\nimport android.content.Intent\nimport android.media.AudioAttributes\nimport android.media.MediaPlayer\nimport android.os.Build\nimport android.os.IBinder\nimport android.os.SystemClock\nimport android.os.VibrationEffect\nimport android.os.Vibrator\nimport android.os.VibratorManager\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.core.app.NotificationCompat\nimport kotlinx.coroutines.CoroutineScope\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.Job\nimport kotlinx.coroutines.SupervisorJob\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport kotlinx.coroutines.runBlocking\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.utils.millisecondsToStr\nimport kotlin.text.Typography.middleDot\n\nclass TimerService : Service() {\n    private val appContainer by lazy {\n        (application as TomatoApplication).container\n    }\n\n    private val timerRepository by lazy { appContainer.appTimerRepository }\n    private val statRepository by lazy { appContainer.appStatRepository }\n    private val notificationManager by lazy { appContainer.notificationManager }\n    private val notificationManagerService by lazy { appContainer.notificationManagerService }\n    private val notificationBuilder by lazy { appContainer.notificationBuilder }\n    private val _timerState by lazy { appContainer.timerState }\n    private val _time by lazy { appContainer.time }\n\n    private val timeStateFlow by lazy { _time.asStateFlow() }\n\n    private var time: Long\n        get() = timeStateFlow.value\n        set(value) = _time.update { value }\n\n    private val timerState by lazy { _timerState.asStateFlow() }\n\n    private var cycles = 0\n    private var startTime = 0L\n    private var pauseTime = 0L\n    private var pauseDuration = 0L\n\n    private var job = SupervisorJob()\n    private val timerScope = CoroutineScope(Dispatchers.IO + job)\n    private val skipScope = CoroutineScope(Dispatchers.IO + job)\n\n    private var autoAlarmStopScope: Job? = null\n\n    private var alarm: MediaPlayer? = null\n    private val vibrator by lazy {\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {\n            val vibratorManager = getSystemService(VIBRATOR_MANAGER_SERVICE) as VibratorManager\n            vibratorManager.defaultVibrator\n        } else {\n            @Suppress(\"DEPRECATION\") getSystemService(VIBRATOR_SERVICE) as Vibrator\n        }\n    }\n\n    private val cs by lazy { timerRepository.colorScheme }\n\n    private lateinit var notificationStyle: NotificationCompat.ProgressStyle\n\n    override fun onBind(intent: Intent?): IBinder? {\n        return null\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        timerRepository.serviceRunning.update { true }\n        alarm = initializeMediaPlayer()\n    }\n\n    override fun onDestroy() {\n        timerRepository.serviceRunning.update { false }\n        runBlocking {\n            job.cancel()\n            saveTimeToDb()\n            setDoNotDisturb(false)\n            notificationManager.cancel(1)\n            alarm?.release()\n        }\n        super.onDestroy()\n    }\n\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n        when (intent?.action) {\n            Actions.TOGGLE.toString() -> {\n                startForegroundService()\n                toggleTimer()\n            }\n\n            Actions.RESET.toString() -> {\n                if (timerState.value.timerRunning) toggleTimer()\n                skipScope.launch {\n                    resetTimer()\n                    stopForegroundService()\n                }\n            }\n\n            Actions.SKIP.toString() -> skipScope.launch { skipTimer(true) }\n\n            Actions.STOP_ALARM.toString() -> stopAlarm()\n\n            Actions.UPDATE_ALARM_TONE.toString() -> updateAlarmTone()\n        }\n        return super.onStartCommand(intent, flags, startId)\n    }\n\n    private fun toggleTimer() {\n        updateProgressSegments()\n\n        if (timerState.value.timerRunning) {\n            setDoNotDisturb(false)\n            notificationBuilder.clearActions().addTimerActions(\n                this, R.drawable.play, getString(R.string.start)\n            )\n            showTimerNotification(time.toInt(), paused = true)\n            _timerState.update { currentState ->\n                currentState.copy(timerRunning = false)\n            }\n            pauseTime = SystemClock.elapsedRealtime()\n        } else {\n            if (timerState.value.timerMode == TimerMode.FOCUS) setDoNotDisturb(true)\n            else setDoNotDisturb(false)\n            notificationBuilder.clearActions().addTimerActions(\n                this, R.drawable.pause, getString(R.string.stop)\n            )\n            _timerState.update { it.copy(timerRunning = true) }\n            if (pauseTime != 0L) pauseDuration += SystemClock.elapsedRealtime() - pauseTime\n\n            var iterations = -1\n\n            timerScope.launch {\n                while (true) {\n                    if (!timerState.value.timerRunning) break\n                    if (startTime == 0L) startTime = SystemClock.elapsedRealtime()\n\n                    time = when (timerState.value.timerMode) {\n                        TimerMode.FOCUS -> timerRepository.focusTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n\n                        TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n\n                        else -> timerRepository.longBreakTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n                    }\n\n                    iterations =\n                        (iterations + 1) % timerRepository.timerFrequency.toInt().coerceAtLeast(1)\n\n                    if (iterations == 0) showTimerNotification(time.toInt())\n\n                    if (time < 0) {\n                        skipTimer()\n                        _timerState.update { currentState ->\n                            currentState.copy(timerRunning = false)\n                        }\n                        break\n                    } else {\n                        _timerState.update { currentState ->\n                            currentState.copy(\n                                timeStr = millisecondsToStr(time)\n                            )\n                        }\n                    }\n\n                    delay((1000f / timerRepository.timerFrequency).toLong())\n                }\n            }\n        }\n    }\n\n    @SuppressLint(\n        \"MissingPermission\",\n        \"StringFormatInvalid\"\n    ) // We check for the permission when pressing the Play button in the UI\n    fun showTimerNotification(\n        remainingTime: Int, paused: Boolean = false, complete: Boolean = false\n    ) {\n        if (complete) notificationBuilder.clearActions().addStopAlarmAction(this)\n\n        val totalTime = when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n            TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n            else -> timerRepository.longBreakTime.toInt()\n        }\n\n        val currentTimer = when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> getString(R.string.focus)\n            TimerMode.SHORT_BREAK -> getString(R.string.short_break)\n            else -> getString(R.string.long_break)\n        }\n\n        val nextTimer = when (timerState.value.nextTimerMode) {\n            TimerMode.FOCUS -> getString(R.string.focus)\n            TimerMode.SHORT_BREAK -> getString(R.string.short_break)\n            else -> getString(R.string.long_break)\n        }\n\n        val remainingTimeString = if ((remainingTime.toFloat() / 60000f) < 1.0f) \"< 1\"\n        else (remainingTime.toFloat() / 60000f).toInt()\n\n        notificationManager.notify(\n            1,\n            notificationBuilder\n                .setContentTitle(\n                    if (!complete) {\n                        \"$currentTimer  $middleDot  ${\n                            getString(R.string.min_remaining_notification, remainingTimeString)\n                        }\" + if (paused) \"  $middleDot  ${getString(R.string.paused)}\" else \"\"\n                    } else \"$currentTimer $middleDot ${getString(R.string.completed)}\"\n                )\n                .setContentText(\n                    getString(\n                        R.string.up_next_notification,\n                        nextTimer,\n                        timerState.value.nextTimeStr\n                    )\n                )\n                .setStyle(\n                    notificationStyle\n                        .setProgress( // Set the current progress by filling the previous intervals and part of the current interval\n                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.BAKLAVA) {\n                                (totalTime - remainingTime) + ((cycles + 1) / 2) * timerRepository.focusTime.toInt() + (cycles / 2) * timerRepository.shortBreakTime.toInt()\n                            } else (totalTime - remainingTime)\n                        )\n                )\n                .setWhen(System.currentTimeMillis() + remainingTime) // Sets the Live Activity/Now Bar chip time\n                .setShortCriticalText(millisecondsToStr(time.coerceAtLeast(0)))\n                .build()\n        )\n\n        if (complete) {\n            startAlarm()\n            _timerState.update { currentState ->\n                currentState.copy(alarmRinging = true)\n            }\n        }\n    }\n\n    private fun updateProgressSegments() {\n        notificationStyle = NotificationCompat.ProgressStyle()\n            .also {\n                // Add all the Focus, Short break and long break intervals in order\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.BAKLAVA) {\n                    // Android 16 and later supports live updates\n                    // Set progress bar sections if on Baklava or later\n                    for (i in 0..<timerRepository.sessionLength * 2) {\n                        if (i % 2 == 0) it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.focusTime.toInt()\n                            )\n                                .setColor(cs.primary.toArgb())\n                        )\n                        else if (i != (timerRepository.sessionLength * 2 - 1)) it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.shortBreakTime.toInt()\n                            ).setColor(cs.tertiary.toArgb())\n                        )\n                        else it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.longBreakTime.toInt()\n                            ).setColor(cs.tertiary.toArgb())\n                        )\n                    }\n                } else {\n                    it.addProgressSegment(\n                        NotificationCompat.ProgressStyle.Segment(\n                            when (timerState.value.timerMode) {\n                                TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n                                TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n                                else -> timerRepository.longBreakTime.toInt()\n                            }\n                        )\n                    )\n                }\n            }\n    }\n\n    private suspend fun resetTimer() {\n        updateProgressSegments()\n        saveTimeToDb()\n        time = timerRepository.focusTime\n        cycles = 0\n        startTime = 0L\n        pauseTime = 0L\n        pauseDuration = 0L\n\n        _timerState.update { currentState ->\n            currentState.copy(\n                timerMode = TimerMode.FOCUS,\n                timeStr = millisecondsToStr(time),\n                totalTime = time,\n                nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                currentFocusCount = 1,\n                totalFocusCount = timerRepository.sessionLength\n            )\n        }\n    }\n\n    private suspend fun skipTimer(fromButton: Boolean = false) {\n        updateProgressSegments()\n        saveTimeToDb()\n        updateProgressSegments()\n        showTimerNotification(0, paused = true, complete = !fromButton)\n        startTime = 0L\n        pauseTime = 0L\n        pauseDuration = 0L\n\n        cycles = (cycles + 1) % (timerRepository.sessionLength * 2)\n\n        if (cycles % 2 == 0) {\n            if (timerState.value.timerRunning) setDoNotDisturb(true)\n            time = timerRepository.focusTime\n            _timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = TimerMode.FOCUS,\n                    timeStr = millisecondsToStr(time),\n                    totalTime = time,\n                    nextTimerMode = if (cycles == (timerRepository.sessionLength - 1) * 2) TimerMode.LONG_BREAK else TimerMode.SHORT_BREAK,\n                    nextTimeStr = if (cycles == (timerRepository.sessionLength - 1) * 2) millisecondsToStr(\n                        timerRepository.longBreakTime\n                    ) else millisecondsToStr(\n                        timerRepository.shortBreakTime\n                    ),\n                    currentFocusCount = cycles / 2 + 1,\n                    totalFocusCount = timerRepository.sessionLength\n                )\n            }\n        } else {\n            if (timerState.value.timerRunning) setDoNotDisturb(false)\n            val long = cycles == (timerRepository.sessionLength * 2) - 1\n            time = if (long) timerRepository.longBreakTime else timerRepository.shortBreakTime\n\n            _timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = if (long) TimerMode.LONG_BREAK else TimerMode.SHORT_BREAK,\n                    timeStr = millisecondsToStr(time),\n                    totalTime = time,\n                    nextTimerMode = TimerMode.FOCUS,\n                    nextTimeStr = millisecondsToStr(timerRepository.focusTime)\n                )\n            }\n        }\n    }\n\n    fun startAlarm() {\n        if (timerRepository.alarmEnabled) alarm?.start()\n\n        appContainer.activityTurnScreenOn(true)\n\n        autoAlarmStopScope = CoroutineScope(Dispatchers.IO).launch {\n            delay(1 * 60 * 1000)\n            stopAlarm()\n        }\n\n        if (timerRepository.vibrateEnabled) {\n            if (!vibrator.hasVibrator()) {\n                return\n            }\n            val vibrationPattern = longArrayOf(0, 1000, 1000, 1000)\n            val repeat = 2\n            val effect = VibrationEffect.createWaveform(vibrationPattern, repeat)\n            vibrator.vibrate(effect)\n        }\n    }\n\n    fun stopAlarm() {\n        autoAlarmStopScope?.cancel()\n\n        if (timerRepository.alarmEnabled) {\n            alarm?.pause()\n            alarm?.seekTo(0)\n        }\n\n        if (timerRepository.vibrateEnabled) {\n            vibrator.cancel()\n        }\n\n        appContainer.activityTurnScreenOn(false)\n\n        _timerState.update { currentState ->\n            currentState.copy(alarmRinging = false)\n        }\n        notificationBuilder.clearActions().addTimerActions(\n            this, R.drawable.play,\n            getString(R.string.start_next)\n        )\n        showTimerNotification(\n            when (timerState.value.timerMode) {\n                TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n                TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n                else -> timerRepository.longBreakTime.toInt()\n            }, paused = true, complete = false\n        )\n    }\n\n    private fun initializeMediaPlayer(): MediaPlayer? {\n        return try {\n            MediaPlayer().apply {\n                setAudioAttributes(\n                    AudioAttributes.Builder()\n                        .setContentType(AudioAttributes.CONTENT_TYPE_MUSIC)\n                        .setUsage(AudioAttributes.USAGE_ALARM)\n                        .build()\n                )\n                timerRepository.alarmSoundUri?.let {\n                    setDataSource(applicationContext, it)\n                    prepare()\n                }\n            }\n        } catch (e: Exception) {\n            e.printStackTrace()\n            null\n        }\n    }\n\n    private fun setDoNotDisturb(doNotDisturb: Boolean) {\n        if (timerRepository.dndEnabled && notificationManagerService.isNotificationPolicyAccessGranted()) {\n            if (doNotDisturb) {\n                notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALARMS)\n            } else notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALL)\n        }\n    }\n\n    private fun updateAlarmTone() {\n        alarm?.release()\n        alarm = initializeMediaPlayer()\n    }\n\n    suspend fun saveTimeToDb() {\n        when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> statRepository.addFocusTime(\n                (timerState.value.totalTime - time).coerceAtLeast(\n                    0L\n                )\n            )\n\n            else -> statRepository.addBreakTime((timerState.value.totalTime - time).coerceAtLeast(0L))\n        }\n    }\n\n    private fun startForegroundService() {\n        startForeground(1, notificationBuilder.build())\n    }\n\n    private fun stopForegroundService() {\n        notificationManager.cancel(1)\n        stopForeground(STOP_FOREGROUND_REMOVE)\n        stopSelf()\n    }\n\n    enum class Actions {\n        TOGGLE, SKIP, RESET, STOP_ALARM, UPDATE_ALARM_TONE\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\AlwaysOnDisplay.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport android.app.Activity\nimport android.view.WindowManager\nimport androidx.activity.compose.LocalActivity\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.SharedTransitionScope\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.animation.core.animateIntAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.offset\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.CircularProgressIndicator\nimport androidx.compose.material3.CircularWavyProgressIndicator\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.DisposableEffect\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableIntStateOf\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.StrokeCap\nimport androidx.compose.ui.graphics.drawscope.Stroke\nimport androidx.compose.ui.platform.LocalDensity\nimport androidx.compose.ui.platform.LocalView\nimport androidx.compose.ui.platform.LocalWindowInfo\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Density\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.IntOffset\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.core.view.WindowCompat\nimport androidx.core.view.WindowInsetsCompat\nimport androidx.core.view.WindowInsetsControllerCompat\nimport androidx.navigation3.ui.LocalNavAnimatedContentScope\nimport kotlinx.coroutines.delay\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.ui.timerScreen.TimerScreen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport kotlin.random.Random\n\n/**\n * Always On Display composable. Must be called within a [SharedTransitionScope] which allows\n * animating the clock and progress indicator\n *\n * @param timerState [TimerState] instance. This must be the same instance as the one used on the\n * root [TimerScreen] composable\n * @param progress lambda that returns the current progress of the clock\n * randomized offset for the clock to allow smooth motion with sharedBounds\n */\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun SharedTransitionScope.AlwaysOnDisplay(\n    timerState: TimerState,\n    progress: () -> Float,\n    setTimerFrequency: (Float) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    var sharedElementTransitionComplete by remember { mutableStateOf(false) }\n\n    val activity = LocalActivity.current\n    val density = LocalDensity.current\n    val windowInfo = LocalWindowInfo.current\n    val view = LocalView.current\n\n    val window = remember { (view.context as Activity).window }\n    val insetsController = remember { WindowCompat.getInsetsController(window, view) }\n\n    DisposableEffect(Unit) {\n        setTimerFrequency(1f)\n        window.addFlags(\n            WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON or\n                    WindowManager.LayoutParams.FLAG_ALLOW_LOCK_WHILE_SCREEN_ON\n        )\n        activity?.setShowWhenLocked(true)\n        insetsController.apply {\n            hide(WindowInsetsCompat.Type.statusBars())\n            hide(WindowInsetsCompat.Type.navigationBars())\n            systemBarsBehavior =\n                WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE\n        }\n\n        onDispose {\n            setTimerFrequency(60f)\n            window.clearFlags(\n                WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON or\n                        WindowManager.LayoutParams.FLAG_ALLOW_LOCK_WHILE_SCREEN_ON\n            )\n            activity?.setShowWhenLocked(false)\n            insetsController.apply {\n                show(WindowInsetsCompat.Type.statusBars())\n                show(WindowInsetsCompat.Type.navigationBars())\n                systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_DEFAULT\n            }\n        }\n    }\n\n    LaunchedEffect(Unit) {\n        delay(300)\n        sharedElementTransitionComplete = true\n    }\n\n    val primary by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFFA2A2A2)\n        else {\n            if (timerState.timerMode == TimerMode.FOCUS) colorScheme.primary\n            else colorScheme.tertiary\n        },\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val secondaryContainer by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFF1D1D1D)\n        else {\n            if (timerState.timerMode == TimerMode.FOCUS) colorScheme.secondaryContainer\n            else colorScheme.tertiaryContainer\n        },\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val surface by animateColorAsState(\n        if (sharedElementTransitionComplete) Color.Black\n        else colorScheme.surface,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val onSurface by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFFE3E3E3)\n        else colorScheme.onSurface,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n\n    var randomX by remember {\n        mutableIntStateOf(\n            Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.width - 266.dp.toIntPx(density)\n            )\n        )\n    }\n    var randomY by remember {\n        mutableIntStateOf(\n            Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.height - 266.dp.toIntPx(density)\n            )\n        )\n    }\n\n    LaunchedEffect(timerState.timeStr[1]) { // Randomize position every minute\n        if (sharedElementTransitionComplete) {\n            randomX = Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.width - 266.dp.toIntPx(density)\n            )\n            randomY = Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.height - 266.dp.toIntPx(density)\n            )\n        }\n    }\n\n    val x by animateIntAsState(randomX, motionScheme.slowSpatialSpec())\n    val y by animateIntAsState(randomY, motionScheme.slowSpatialSpec())\n\n    Box(\n        modifier = modifier\n            .fillMaxSize()\n            .background(surface)\n    ) {\n        Box(\n            contentAlignment = Alignment.Center,\n            modifier = Modifier.offset {\n                IntOffset(x, y)\n            }\n        ) {\n            if (timerState.timerMode == TimerMode.FOCUS) {\n                CircularProgressIndicator(\n                    progress = progress,\n                    modifier = Modifier\n                        .sharedBounds(\n                            sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"focus progress\"),\n                            animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                        )\n                        .size(250.dp),\n                    color = primary,\n                    trackColor = secondaryContainer,\n                    strokeWidth = 12.dp,\n                    gapSize = 8.dp,\n                )\n            } else {\n                CircularWavyProgressIndicator(\n                    progress = progress,\n                    modifier = Modifier\n                        .sharedBounds(\n                            sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"break progress\"),\n                            animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                        )\n                        .size(250.dp),\n                    color = primary,\n                    trackColor = secondaryContainer,\n                    stroke = Stroke(\n                        width = with(LocalDensity.current) {\n                            12.dp.toPx()\n                        },\n                        cap = StrokeCap.Round,\n                    ),\n                    trackStroke = Stroke(\n                        width = with(LocalDensity.current) {\n                            12.dp.toPx()\n                        },\n                        cap = StrokeCap.Round,\n                    ),\n                    wavelength = 42.dp,\n                    gapSize = 8.dp\n                )\n            }\n\n            Text(\n                text = timerState.timeStr,\n                style = TextStyle(\n                    fontFamily = interClock,\n                    fontSize = 56.sp,\n                    letterSpacing = (-2).sp,\n                    fontFeatureSettings = \"tnum\"\n                ),\n                textAlign = TextAlign.Center,\n                color = onSurface,\n                maxLines = 1,\n                modifier = Modifier.sharedBounds(\n                    sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"clock\"),\n                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                )\n            )\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nprivate fun AlwaysOnDisplayPreview() {\n    val timerState = TimerState()\n    val progress = { 0.5f }\n    TomatoTheme {\n        SharedTransitionLayout {\n            AlwaysOnDisplay(\n                timerState = timerState,\n                progress = progress,\n                setTimerFrequency = {}\n            )\n        }\n    }\n}\n\nfun Dp.toIntPx(density: Density) = with(density) { toPx().toInt() }\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\AppScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport android.content.Intent\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.animation.Crossfade\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.slideInVertically\nimport androidx.compose.animation.slideOutVertically\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.calculateEndPadding\nimport androidx.compose.foundation.layout.calculateStartPadding\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.NavigationItemIconPosition\nimport androidx.compose.material3.Scaffold\nimport androidx.compose.material3.ShortNavigationBar\nimport androidx.compose.material3.ShortNavigationBarArrangement\nimport androidx.compose.material3.ShortNavigationBarItem\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.adaptive.currentWindowAdaptiveInfo\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalLayoutDirection\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport androidx.navigation3.runtime.entryProvider\nimport androidx.navigation3.runtime.rememberNavBackStack\nimport androidx.navigation3.ui.NavDisplay\nimport androidx.window.core.layout.WindowSizeClass\nimport org.nsh07.pomodoro.billing.TomatoPlusPaywallDialog\nimport org.nsh07.pomodoro.service.TimerService\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsScreenRoot\nimport org.nsh07.pomodoro.ui.statsScreen.StatsScreenRoot\nimport org.nsh07.pomodoro.ui.timerScreen.AlarmDialog\nimport org.nsh07.pomodoro.ui.timerScreen.TimerScreen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerViewModel\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AppScreen(\n    isAODEnabled: Boolean,\n    isPlus: Boolean,\n    setTimerFrequency: (Float) -> Unit,\n    modifier: Modifier = Modifier,\n    timerViewModel: TimerViewModel = viewModel(factory = TimerViewModel.Factory)\n) {\n    val context = LocalContext.current\n\n    val uiState by timerViewModel.timerState.collectAsStateWithLifecycle()\n    val progress by timerViewModel.progress.collectAsStateWithLifecycle()\n\n    val layoutDirection = LocalLayoutDirection.current\n    val motionScheme = motionScheme\n    val windowSizeClass = currentWindowAdaptiveInfo().windowSizeClass\n\n    val backStack = rememberNavBackStack(Screen.Timer)\n\n    if (uiState.alarmRinging)\n        AlarmDialog {\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.STOP_ALARM.toString()\n                context.startService(it)\n            }\n        }\n\n    var showPaywall by remember { mutableStateOf(false) }\n\n    Scaffold(\n        bottomBar = {\n            AnimatedVisibility(\n                backStack.last() !is Screen.AOD,\n                enter = fadeIn(),\n                exit = fadeOut()\n            ) {\n                val wide = remember {\n                    windowSizeClass.isWidthAtLeastBreakpoint(\n                        WindowSizeClass.WIDTH_DP_MEDIUM_LOWER_BOUND\n                    )\n                }\n                ShortNavigationBar(\n                    arrangement =\n                        if (wide) ShortNavigationBarArrangement.Centered\n                        else ShortNavigationBarArrangement.EqualWeight\n                ) {\n                    mainScreens.forEach {\n                        val selected = backStack.last() == it.route\n                        ShortNavigationBarItem(\n                            selected = selected,\n                            onClick = if (it.route != Screen.Timer) { // Ensure the backstack does not accumulate screens\n                                {\n                                    if (backStack.size < 2) backStack.add(it.route)\n                                    else backStack[1] = it.route\n                                }\n                            } else {\n                                { if (backStack.size > 1) backStack.removeAt(1) }\n                            },\n                            icon = {\n                                Crossfade(selected) { selected ->\n                                    if (selected) Icon(painterResource(it.selectedIcon), null)\n                                    else Icon(painterResource(it.unselectedIcon), null)\n                                }\n                            },\n                            iconPosition =\n                                if (wide) NavigationItemIconPosition.Start\n                                else NavigationItemIconPosition.Top,\n                            label = { Text(stringResource(it.label)) }\n                        )\n                    }\n                }\n            }\n        }\n    ) { contentPadding ->\n        SharedTransitionLayout {\n            NavDisplay(\n                backStack = backStack,\n                onBack = backStack::removeLastOrNull,\n                transitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                popTransitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                predictivePopTransitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                entryProvider = entryProvider {\n                    entry<Screen.Timer> {\n                        TimerScreen(\n                            timerState = uiState,\n                            isPlus = isPlus,\n                            progress = { progress },\n                            onAction = timerViewModel::onAction,\n                            modifier = modifier\n                                .padding(\n                                    start = contentPadding.calculateStartPadding(layoutDirection),\n                                    end = contentPadding.calculateEndPadding(layoutDirection),\n                                    bottom = contentPadding.calculateBottomPadding()\n                                )\n                                .then(\n                                    if (isAODEnabled) Modifier.clickable {\n                                        if (backStack.size < 2) backStack.add(Screen.AOD)\n                                    }\n                                    else Modifier\n                                ),\n                        )\n                    }\n\n                    entry<Screen.AOD> {\n                        AlwaysOnDisplay(\n                            timerState = uiState,\n                            progress = { progress },\n                            setTimerFrequency = setTimerFrequency,\n                            modifier = Modifier\n                                .then(\n                                    if (isAODEnabled) Modifier.clickable {\n                                        if (backStack.size > 1) backStack.removeLastOrNull()\n                                    }\n                                    else Modifier\n                                )\n                        )\n                    }\n\n                    entry<Screen.Settings.Main> {\n                        SettingsScreenRoot(\n                            setShowPaywall = { showPaywall = it },\n                            modifier = modifier.padding(\n                                start = contentPadding.calculateStartPadding(layoutDirection),\n                                end = contentPadding.calculateEndPadding(layoutDirection),\n                                bottom = contentPadding.calculateBottomPadding()\n                            )\n                        )\n                    }\n\n                    entry<Screen.Stats> {\n                        StatsScreenRoot(\n                            contentPadding = contentPadding,\n                            modifier = modifier.padding(\n                                start = contentPadding.calculateStartPadding(layoutDirection),\n                                end = contentPadding.calculateEndPadding(layoutDirection),\n                                bottom = contentPadding.calculateBottomPadding()\n                            )\n                        )\n                    }\n                }\n            )\n        }\n    }\n\n    AnimatedVisibility(\n        showPaywall,\n        enter = slideInVertically { it },\n        exit = slideOutVertically { it }\n    ) {\n        TomatoPlusPaywallDialog(isPlus = isPlus) { showPaywall = false }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\Screen.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport androidx.annotation.DrawableRes\nimport androidx.annotation.StringRes\nimport androidx.navigation3.runtime.NavKey\nimport kotlinx.serialization.Serializable\n\nsealed class Screen : NavKey {\n    @Serializable\n    object Timer : Screen()\n\n    @Serializable\n    object AOD : Screen()\n\n    @Serializable\n    sealed class Settings : Screen() {\n        @Serializable\n        object Main : Settings()\n\n        @Serializable\n        object Alarm : Settings()\n\n        @Serializable\n        object Appearance : Settings()\n\n        @Serializable\n        object Timer : Settings()\n    }\n\n    @Serializable\n    object Stats : Screen()\n}\n\ndata class NavItem(\n    val route: Screen,\n    @param:DrawableRes val unselectedIcon: Int,\n    @param:DrawableRes val selectedIcon: Int,\n    @param:StringRes val label: Int\n)\n\ndata class SettingsNavItem(\n    val route: Screen.Settings,\n    @param:DrawableRes val icon: Int,\n    @param:StringRes val label: Int,\n    val innerSettings: List<Int>\n)\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutCard.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.widget.Toast\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.FlowRow\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.ButtonDefaults\nimport androidx.compose.material3.Card\nimport androidx.compose.material3.CardDefaults\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n// Taken from https://github.com/shub39/Grit/blob/master/app/src/main/java/com/shub39/grit/core/presentation/settings/ui/component/AboutApp.kt\n@Composable\nfun AboutCard(\n    isPlus: Boolean,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    val context = LocalContext.current\n\n    Card(\n        modifier = modifier.fillMaxWidth(),\n        colors = CardDefaults.cardColors(\n            containerColor = colorScheme.primaryContainer,\n            contentColor = colorScheme.onPrimaryContainer\n        ),\n        shape = shapes.extraLarge\n    ) {\n        val buttonColors = ButtonDefaults.buttonColors(\n            containerColor = colorScheme.onPrimaryContainer,\n            contentColor = colorScheme.primaryContainer\n        )\n\n        Row(\n            modifier = Modifier\n                .padding(16.dp)\n                .fillMaxWidth(),\n            verticalAlignment = Alignment.CenterVertically,\n            horizontalArrangement = Arrangement.spacedBy(8.dp)\n        ) {\n            Column {\n                Text(\n                    if (!isPlus) stringResource(R.string.app_name)\n                    else stringResource(R.string.app_name_plus),\n                    style = MaterialTheme.typography.titleLarge,\n                    fontFamily = robotoFlexTopBar\n                )\n                Text(text = \"${BuildConfig.VERSION_NAME} (${BuildConfig.VERSION_CODE})\")\n            }\n\n            Spacer(modifier = Modifier.weight(1f))\n\n            Row {\n                IconButton(\n                    onClick = {\n                        Toast.makeText(context, \"Coming soon...\", Toast.LENGTH_SHORT).show()\n                    }\n                ) {\n                    Icon(\n                        painterResource(R.drawable.discord),\n                        contentDescription = \"Discord\",\n                        modifier = Modifier.size(24.dp)\n                    )\n                }\n\n                IconButton(\n                    onClick = { uriHandler.openUri(\"https://github.com/nsh07/Tomato\") }\n                ) {\n                    Icon(\n                        painterResource(R.drawable.github),\n                        contentDescription = \"GitHub\",\n                        modifier = Modifier.size(24.dp)\n                    )\n                }\n            }\n        }\n\n        FlowRow(\n            modifier = Modifier.padding(start = 16.dp, end = 16.dp, bottom = 16.dp),\n            horizontalArrangement = Arrangement.spacedBy(8.dp)\n        ) {\n            TopButton(buttonColors)\n            BottomButton(buttonColors)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ClickableListItem.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.core.animateDpAsState\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.interaction.MutableInteractionSource\nimport androidx.compose.foundation.interaction.collectIsPressedAsState\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.ListItemColors\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ClickableListItem(\n    headlineContent: @Composable (() -> Unit),\n    modifier: Modifier = Modifier,\n    overlineContent: @Composable (() -> Unit)? = null,\n    supportingContent: @Composable (() -> Unit)? = null,\n    leadingContent: @Composable (() -> Unit)? = null,\n    trailingContent: @Composable (() -> Unit)? = null,\n    colors: ListItemColors = listItemColors,\n    tonalElevation: Dp = ListItemDefaults.Elevation,\n    shadowElevation: Dp = ListItemDefaults.Elevation,\n    items: Int,\n    index: Int,\n    onClick: () -> Unit\n) {\n    val interactionSource = remember { MutableInteractionSource() }\n    val isPressed by interactionSource.collectIsPressedAsState()\n\n    val top by animateDpAsState(\n        if (isPressed) 40.dp\n        else {\n            if (items == 1 || index == 0) 20.dp\n            else 4.dp\n        },\n        motionScheme.fastSpatialSpec()\n    )\n    val bottom by animateDpAsState(\n        if (isPressed) 40.dp\n        else {\n            if (items == 1 || index == items - 1) 20.dp\n            else 4.dp\n        },\n        motionScheme.fastSpatialSpec()\n    )\n\n    ListItem(\n        headlineContent = headlineContent,\n        modifier = modifier\n            .clip(\n                RoundedCornerShape(\n                    topStart = top,\n                    topEnd = top,\n                    bottomStart = bottom,\n                    bottomEnd = bottom\n                )\n            )\n            .clickable(\n                onClick = onClick,\n                interactionSource = interactionSource,\n            ),\n        overlineContent = overlineContent,\n        supportingContent = supportingContent,\n        leadingContent = leadingContent,\n        trailingContent = trailingContent,\n        colors = colors,\n        tonalElevation = tonalElevation,\n        shadowElevation = shadowElevation\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ColorSchemePickerListItem.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.os.Build\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.PaddingValues\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyRow\nimport androidx.compose.foundation.lazy.items\nimport androidx.compose.foundation.shape.CornerSize\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@Composable\nfun ColorSchemePickerListItem(\n    color: Color,\n    items: Int,\n    index: Int,\n    isPlus: Boolean,\n    onColorChange: (Color) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val colorSchemes = listOf(\n        Color(0xfffeb4a7), Color(0xffffb3c0), Color(0xfffcaaff), Color(0xffb9c3ff),\n        Color(0xff62d3ff), Color(0xff44d9f1), Color(0xff52dbc9), Color(0xff78dd77),\n        Color(0xff9fd75c), Color(0xffc1d02d), Color(0xfffabd00), Color(0xffffb86e),\n        Color.White\n    )\n    val zeroCorner = remember { CornerSize(0) }\n\n    Column(\n        modifier\n            .clip(\n                when (index) {\n                    0 -> topListItemShape\n                    items - 1 -> bottomListItemShape\n                    else -> middleListItemShape\n                }\n            )\n    ) {\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {\n            ListItem(\n                leadingContent = {\n                    Icon(\n                        painterResource(R.drawable.colors),\n                        null\n                    )\n                },\n                headlineContent = { Text(stringResource(R.string.dynamic_color)) },\n                supportingContent = { Text(stringResource(R.string.dynamic_color_desc)) },\n                trailingContent = {\n                    val checked = color == colorSchemes.last()\n                    Switch(\n                        checked = checked,\n                        onCheckedChange = {\n                            if (it) onColorChange(colorSchemes.last())\n                            else onColorChange(colorSchemes.first())\n                        },\n                        enabled = isPlus,\n                        thumbContent = {\n                            if (checked) {\n                                Icon(\n                                    painter = painterResource(R.drawable.check),\n                                    contentDescription = null,\n                                    modifier = Modifier.size(SwitchDefaults.IconSize),\n                                )\n                            } else {\n                                Icon(\n                                    painter = painterResource(R.drawable.clear),\n                                    contentDescription = null,\n                                    modifier = Modifier.size(SwitchDefaults.IconSize),\n                                )\n                            }\n                        },\n                        colors = switchColors\n                    )\n                },\n                colors = listItemColors,\n                modifier = Modifier.clip(middleListItemShape)\n            )\n            Spacer(Modifier.height(2.dp))\n        }\n\n        ListItem(\n            leadingContent = {\n                Icon(\n                    painter = painterResource(R.drawable.palette),\n                    contentDescription = null,\n                    tint = colorScheme.primary\n                )\n            },\n            headlineContent = { Text(stringResource(R.string.color_scheme)) },\n            supportingContent = {\n                Text(\n                    if (color == Color.White) stringResource(R.string.dynamic)\n                    else stringResource(R.string.color)\n                )\n            },\n            colors = listItemColors,\n            modifier = Modifier.clip(\n                RoundedCornerShape(\n                    topStart = middleListItemShape.topStart,\n                    topEnd = middleListItemShape.topEnd,\n                    zeroCorner,\n                    zeroCorner\n                )\n            )\n        )\n\n        LazyRow(\n            contentPadding = PaddingValues(horizontal = 48.dp),\n            userScrollEnabled = isPlus,\n            modifier = Modifier\n                .background(listItemColors.containerColor)\n                .padding(bottom = 8.dp)\n        ) {\n            items(colorSchemes.dropLast(1)) {\n                ColorPickerButton(\n                    color = it,\n                    isSelected = it == color,\n                    enabled = isPlus,\n                    modifier = Modifier.padding(4.dp)\n                ) {\n                    onColorChange(it)\n                }\n            }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ColorPickerButton(\n    color: Color,\n    isSelected: Boolean,\n    enabled: Boolean,\n    modifier: Modifier = Modifier,\n    onClick: () -> Unit\n) {\n    IconButton(\n        shapes = IconButtonDefaults.shapes(),\n        colors = IconButtonDefaults.iconButtonColors(\n            containerColor = color,\n            disabledContainerColor = color.copy(0.3f)\n        ),\n        enabled = enabled,\n        modifier = modifier.size(48.dp),\n        onClick = onClick\n    ) {\n        AnimatedContent(isSelected) { isSelected ->\n            when (isSelected) {\n                true -> Icon(\n                    painterResource(R.drawable.check),\n                    tint = Color.Black,\n                    contentDescription = null\n                )\n\n                else ->\n                    if (color == Color.White) Icon(\n                        painterResource(R.drawable.colors),\n                        tint = Color.Black,\n                        contentDescription = null\n                    )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\LocaleBottomSheet.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.app.LocaleConfig\nimport android.app.LocaleManager\nimport android.os.Build\nimport android.os.LocaleList\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.lazy.rememberLazyListState\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.ModalBottomSheet\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.rememberModalBottomSheetState\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.rememberCoroutineScope\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\nimport java.util.Locale\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun LocaleBottomSheet(\n    currentLocales: LocaleList,\n    setShowSheet: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val context = LocalContext.current\n    val scope = rememberCoroutineScope()\n\n    val supportedLocales = remember {\n        if (Build.VERSION.SDK_INT >= 33) {\n            LocaleConfig(context).supportedLocales\n        } else null\n    }\n    val supportedLocalesSize = supportedLocales?.size() ?: 0\n\n    val supportedLocalesList: List<AppLocale>? = remember {\n        if (supportedLocales != null) {\n            buildList {\n                for (i in 0 until supportedLocalesSize) {\n                    add(AppLocale(supportedLocales.get(i), supportedLocales.get(i).displayName))\n                }\n                sortWith(compareBy { it.name })\n            }\n        } else null\n    }\n\n    val bottomSheetState = rememberModalBottomSheetState()\n    val listState = rememberLazyListState()\n\n    ModalBottomSheet(\n        onDismissRequest = { setShowSheet(false) },\n        sheetState = bottomSheetState,\n        modifier = modifier\n    ) {\n        Column(horizontalAlignment = Alignment.CenterHorizontally) {\n            Text(\n                text = stringResource(R.string.choose_language),\n                style = MaterialTheme.typography.labelLarge,\n                modifier = Modifier.padding(bottom = 16.dp)\n            )\n            if (supportedLocalesList != null) {\n                LazyColumn(\n                    verticalArrangement = Arrangement.spacedBy(2.dp),\n                    state = listState,\n                    modifier = Modifier\n                        .padding(horizontal = 16.dp)\n                        .clip(shapes.largeIncreased)\n                ) {\n                    item {\n                        ListItem(\n                            headlineContent = {\n                                Text(stringResource(R.string.system_default))\n                            },\n                            trailingContent = {\n                                if (currentLocales.isEmpty)\n                                    Icon(\n                                        painterResource(R.drawable.check),\n                                        contentDescription = stringResource(R.string.selected)\n                                    )\n                            },\n                            colors =\n                                if (currentLocales.isEmpty)\n                                    ListItemDefaults.colors(\n                                        containerColor = colorScheme.primaryContainer.copy(\n                                            0.3f\n                                        )\n                                    )\n                                else listItemColors,\n                            modifier = Modifier\n                                .clip(if (currentLocales.isEmpty) CircleShape else shapes.largeIncreased)\n                                .clickable(\n                                    onClick = {\n                                        scope\n                                            .launch { bottomSheetState.hide() }\n                                            .invokeOnCompletion {\n                                                if (Build.VERSION.SDK_INT >= 33) {\n                                                    context\n                                                        .getSystemService(LocaleManager::class.java)\n                                                        .applicationLocales = LocaleList()\n                                                }\n                                                setShowSheet(false)\n                                            }\n                                    }\n                                )\n                        )\n                    }\n                    item {\n                        Spacer(Modifier.height(12.dp))\n                    }\n                    itemsIndexed(\n                        supportedLocalesList,\n                        key = { _: Int, it: AppLocale -> it.name }\n                    ) { index, it ->\n                        ListItem(\n                            headlineContent = {\n                                Text(it.name)\n                            },\n                            trailingContent = {\n                                if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                    Icon(\n                                        painterResource(R.drawable.check),\n                                        tint = colorScheme.primary,\n                                        contentDescription = stringResource(R.string.selected)\n                                    )\n                            },\n                            colors =\n                                if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                    ListItemDefaults.colors(containerColor = colorScheme.primaryContainer)\n                                else listItemColors,\n                            modifier = Modifier\n                                .clip(\n                                    if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                        CircleShape\n                                    else when (index) {\n                                        0 -> topListItemShape\n                                        supportedLocalesSize - 1 -> bottomListItemShape\n                                        else -> middleListItemShape\n                                    }\n                                )\n                                .clickable(\n                                    onClick = {\n                                        scope\n                                            .launch { bottomSheetState.hide() }\n                                            .invokeOnCompletion { _ ->\n                                                if (Build.VERSION.SDK_INT >= 33) {\n                                                    context.getSystemService(LocaleManager::class.java)\n                                                        .applicationLocales =\n                                                        LocaleList(it.locale)\n                                                }\n                                                setShowSheet(false)\n                                            }\n                                    }\n                                )\n                        )\n                    }\n                }\n            }\n        }\n    }\n}\n\ndata class AppLocale(\n    val locale: Locale,\n    val name: String\n)"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\MinuteInputField.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.text.BasicTextField\nimport androidx.compose.foundation.text.KeyboardOptions\nimport androidx.compose.foundation.text.input.TextFieldLineLimits\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Shape\nimport androidx.compose.ui.graphics.SolidColor\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.input.ImeAction\nimport androidx.compose.ui.text.input.KeyboardType\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun MinuteInputField(\n    state: TextFieldState,\n    enabled: Boolean,\n    shape: Shape,\n    modifier: Modifier = Modifier,\n    imeAction: ImeAction = ImeAction.Next\n) {\n    BasicTextField(\n        state = state,\n        enabled = enabled,\n        lineLimits = TextFieldLineLimits.SingleLine,\n        inputTransformation = MinutesInputTransformation,\n//        outputTransformation = MinutesOutputTransformation,\n        keyboardOptions = KeyboardOptions(\n            keyboardType = KeyboardType.NumberPassword,\n            imeAction = imeAction\n        ),\n        textStyle = TextStyle(\n            fontFamily = interClock,\n            fontSize = 57.sp,\n            letterSpacing = (-2).sp,\n            color = if (enabled) colorScheme.onSurfaceVariant else colorScheme.outlineVariant,\n            textAlign = TextAlign.Center\n        ),\n        cursorBrush = SolidColor(colorScheme.onSurface),\n        decorator = { innerTextField ->\n            Box(\n                contentAlignment = Alignment.Center,\n                modifier = modifier\n                    .size(112.dp, 100.dp)\n                    .background(\n                        animateColorAsState(\n                            if (state.text.isNotEmpty())\n                                listItemColors.containerColor\n                            else colorScheme.errorContainer,\n                            motionScheme.defaultEffectsSpec()\n                        ).value,\n                        shape\n                    )\n            ) { innerTextField() }\n        }\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\MinutesTransformation.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.text.input.InputTransformation\nimport androidx.compose.foundation.text.input.TextFieldBuffer\nimport androidx.core.text.isDigitsOnly\n\nobject MinutesInputTransformation : InputTransformation {\n    override fun TextFieldBuffer.transformInput() {\n        if (!this.asCharSequence().isDigitsOnly() || this.length > 2) {\n            revertAllChanges()\n        }\n    }\n}\n\n//object MinutesOutputTransformation : OutputTransformation {\n//    override fun TextFieldBuffer.transformOutput() {\n//        when (this.length) {\n//            0 -> insert(0, \"00\")\n//            1 -> insert(0, \"0\")\n//        }\n//    }\n//}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\PlusDivider.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.HorizontalDivider\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.unit.dp\n\n@Composable\nfun PlusDivider(\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    Box(contentAlignment = Alignment.Center, modifier = modifier.padding(vertical = 14.dp)) {\n        HorizontalDivider(modifier = Modifier.clip(CircleShape), thickness = 4.dp)\n        Button(\n            onClick = { setShowPaywall(true) },\n            modifier = Modifier\n                .background(colorScheme.surfaceContainer)\n                .padding(horizontal = 8.dp)\n        ) {\n            Text(\"Customize further with Tomato+\", style = typography.titleSmall)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\PlusPromo.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n@Composable\nfun PlusPromo(\n    isPlus: Boolean,\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val container = if (isPlus) colorScheme.surfaceBright else colorScheme.primary\n    val onContainer = if (isPlus) colorScheme.onSurface else colorScheme.onPrimary\n    val onContainerVariant = if (isPlus) colorScheme.onSurfaceVariant else colorScheme.onPrimary\n\n    Row(\n        verticalAlignment = Alignment.CenterVertically,\n        modifier = modifier\n            .clip(CircleShape)\n            .background(container)\n            .padding(16.dp)\n            .clickable { setShowPaywall(true) }\n    ) {\n        Icon(\n            painterResource(R.drawable.tomato_logo_notification),\n            null,\n            tint = onContainerVariant,\n            modifier = Modifier\n                .size(24.dp)\n        )\n        Spacer(Modifier.width(8.dp))\n        Text(\n            if (!isPlus) stringResource(R.string.get_plus)\n            else stringResource(R.string.app_name_plus),\n            style = typography.titleLarge,\n            fontFamily = robotoFlexTopBar,\n            color = onContainer\n        )\n        Spacer(Modifier.weight(1f))\n        Icon(\n            painterResource(R.drawable.arrow_forward_big),\n            null,\n            tint = onContainerVariant\n        )\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ThemePickerListItem.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.ButtonGroupDefaults\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.ToggleButton\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.semantics.Role\nimport androidx.compose.ui.semantics.role\nimport androidx.compose.ui.semantics.semantics\nimport androidx.compose.ui.text.style.TextOverflow\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.cardShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ThemePickerListItem(\n    theme: String,\n    items: Int,\n    index: Int,\n    onThemeChange: (String) -> Unit,\n    modifier: Modifier = Modifier,\n) {\n    val themeMap: Map<String, Pair<Int, Int>> = remember {\n        mapOf(\n            \"auto\" to Pair(\n                R.drawable.brightness_auto,\n                R.string.system_default\n            ),\n            \"light\" to Pair(R.drawable.light_mode, R.string.light),\n            \"dark\" to Pair(R.drawable.dark_mode, R.string.dark)\n        )\n    }\n\n    Column(\n        modifier\n            .clip(\n                if (items > 1)\n                    when (index) {\n                        0 -> topListItemShape\n                        items - 1 -> bottomListItemShape\n                        else -> middleListItemShape\n                    }\n                else cardShape,\n            ),\n    ) {\n        ListItem(\n            leadingContent = {\n                AnimatedContent(themeMap[theme]!!.first) {\n                    Icon(\n                        painter = painterResource(it),\n                        contentDescription = null,\n                    )\n                }\n            },\n            headlineContent = { Text(stringResource(R.string.theme)) },\n            colors = listItemColors,\n        )\n\n        val options = themeMap.toList()\n        val selectedIndex = options.indexOf(Pair(theme, themeMap[theme]))\n\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(ButtonGroupDefaults.ConnectedSpaceBetween),\n            modifier = Modifier\n                .background(listItemColors.containerColor)\n                .padding(start = 52.dp, end = 16.dp, bottom = 8.dp)\n        ) {\n            options.forEachIndexed { index, theme ->\n                val isSelected = selectedIndex == index\n                ToggleButton(\n                    checked = isSelected,\n                    onCheckedChange = { onThemeChange(theme.first) },\n                    modifier = Modifier\n                        .weight(1f)\n                        .semantics { role = Role.RadioButton },\n                    shapes =\n                        when (index) {\n                            0 -> ButtonGroupDefaults.connectedLeadingButtonShapes()\n                            options.lastIndex -> ButtonGroupDefaults.connectedTrailingButtonShapes()\n                            else -> ButtonGroupDefaults.connectedMiddleButtonShapes()\n                        },\n                ) {\n                    Text(\n                        stringResource(theme.second.second),\n                        maxLines = 1,\n                        overflow = TextOverflow.Ellipsis\n                    )\n                }\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\AlarmSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport android.annotation.SuppressLint\nimport android.app.Activity\nimport android.content.Intent\nimport android.media.RingtoneManager\nimport android.net.Uri\nimport android.os.Build\nimport androidx.activity.compose.rememberLauncherForActivityResult\nimport androidx.activity.result.contract.ActivityResultContracts\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.core.net.toUri\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.withContext\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AlarmSettings(\n    settingsState: SettingsState,\n    onAction: (SettingsAction) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n    val context = LocalContext.current\n\n    var alarmName by remember { mutableStateOf(\"...\") }\n\n    LaunchedEffect(settingsState.alarmSound) {\n        withContext(Dispatchers.IO) {\n            alarmName =\n                RingtoneManager.getRingtone(context, settingsState.alarmSound.toUri())\n                    ?.getTitle(context) ?: \"\"\n        }\n    }\n\n    val ringtonePickerLauncher = rememberLauncherForActivityResult(\n        contract = ActivityResultContracts.StartActivityForResult()\n    ) { result ->\n        if (result.resultCode == Activity.RESULT_OK) {\n            val uri =\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU) {\n                    result.data?.getParcelableExtra(\n                        RingtoneManager.EXTRA_RINGTONE_PICKED_URI,\n                        Uri::class.java\n                    )\n                } else {\n                    @Suppress(\"DEPRECATION\")\n                    result.data?.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI)\n                }\n            onAction(SettingsAction.SaveAlarmSound(uri))\n        }\n    }\n\n    @SuppressLint(\"LocalContextGetResourceValueCall\")\n    val ringtonePickerIntent = remember(settingsState.alarmSound) {\n        Intent(RingtoneManager.ACTION_RINGTONE_PICKER).apply {\n            putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_ALARM)\n            putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, context.getString(R.string.alarm_sound))\n            putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, settingsState.alarmSound.toUri())\n        }\n    }\n\n    val switchItems = remember(\n        settingsState.blackTheme,\n        settingsState.aodEnabled,\n        settingsState.alarmEnabled,\n        settingsState.vibrateEnabled\n    ) {\n        listOf(\n            SettingsSwitchItem(\n                checked = settingsState.alarmEnabled,\n                icon = R.drawable.alarm_on,\n                label = R.string.sound,\n                description = R.string.alarm_desc,\n                onClick = { onAction(SettingsAction.SaveAlarmEnabled(it)) }\n            ),\n            SettingsSwitchItem(\n                checked = settingsState.vibrateEnabled,\n                icon = R.drawable.mobile_vibrate,\n                label = R.string.vibrate,\n                description = R.string.vibrate_desc,\n                onClick = { onAction(SettingsAction.SaveVibrateEnabled(it)) }\n            )\n        )\n    }\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.alarm), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                Spacer(Modifier.height(14.dp))\n            }\n\n            item {\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(R.drawable.alarm), null)\n                    },\n                    headlineContent = { Text(stringResource(R.string.alarm_sound)) },\n                    supportingContent = { Text(alarmName) },\n                    colors = listItemColors,\n                    modifier = Modifier\n                        .clip(topListItemShape)\n                        .clickable(onClick = { ringtonePickerLauncher.launch(ringtonePickerIntent) })\n                )\n            }\n            itemsIndexed(switchItems) { index, item ->\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(item.icon), contentDescription = null)\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            onCheckedChange = { item.onClick(it) },\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier\n                        .clip(\n                            when (index) {\n                                switchItems.lastIndex -> bottomListItemShape\n                                else -> middleListItemShape\n                            }\n                        )\n                )\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nfun AlarmSettingsPreview() {\n    val settingsState = SettingsState()\n    AlarmSettings(\n        settingsState = settingsState,\n        onAction = {},\n        onBack = {}\n    )\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\AppearanceSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ColorSchemePickerListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusDivider\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ThemePickerListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.toColor\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AppearanceSettings(\n    settingsState: SettingsState,\n    isPlus: Boolean,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.appearance), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                Spacer(Modifier.height(14.dp))\n            }\n            item {\n                ThemePickerListItem(\n                    theme = settingsState.theme,\n                    onThemeChange = { onAction(SettingsAction.SaveTheme(it)) },\n                    items = if (isPlus) 3 else 1,\n                    index = 0\n                )\n            }\n\n            if (!isPlus) {\n                item { PlusDivider(setShowPaywall) }\n            }\n\n            item {\n                ColorSchemePickerListItem(\n                    color = settingsState.colorScheme.toColor(),\n                    items = 3,\n                    index = if (isPlus) 1 else 0,\n                    isPlus = isPlus,\n                    onColorChange = { onAction(SettingsAction.SaveColorScheme(it)) },\n                )\n            }\n            item {\n                val item = SettingsSwitchItem(\n                    checked = settingsState.blackTheme,\n                    icon = R.drawable.contrast,\n                    label = R.string.black_theme,\n                    description = R.string.black_theme_desc,\n                    onClick = { onAction(SettingsAction.SaveBlackTheme(it)) }\n                )\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(item.icon), contentDescription = null)\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            onCheckedChange = { item.onClick(it) },\n                            enabled = isPlus,\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(bottomListItemShape)\n                )\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@Preview\n@Composable\nfun AppearanceSettingsPreview() {\n    val settingsState = SettingsState()\n    TomatoTheme(dynamicColor = false) {\n        AppearanceSettings(\n            settingsState = settingsState,\n            isPlus = false,\n            onAction = {},\n            setShowPaywall = {},\n            onBack = {}\n        )\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\TimerSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport android.app.NotificationManager\nimport android.content.Context\nimport android.content.Intent\nimport android.provider.Settings\nimport android.widget.Toast\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.horizontalScroll\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.items\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.rememberScrollState\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.foundation.text.input.rememberTextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledTonalIconToggleButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.LocalContentColor\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Slider\nimport androidx.compose.material3.SliderState\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.material3.rememberSliderState\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.CompositionLocalProvider\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.input.ImeAction\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.MinuteInputField\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusDivider\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.cardShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimerSettings(\n    isPlus: Boolean,\n    serviceRunning: Boolean,\n    settingsState: SettingsState,\n    focusTimeInputFieldState: TextFieldState,\n    shortBreakTimeInputFieldState: TextFieldState,\n    longBreakTimeInputFieldState: TextFieldState,\n    sessionsSliderState: SliderState,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n    val context = LocalContext.current\n    val appName = stringResource(R.string.app_name)\n    val notificationManagerService =\n        remember { context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager }\n\n    val switchItems = listOf(\n        SettingsSwitchItem(\n            checked = settingsState.dndEnabled,\n            enabled = !serviceRunning,\n            icon = R.drawable.dnd,\n            label = R.string.dnd,\n            description = R.string.dnd_desc,\n            onClick = {\n                if (it && !notificationManagerService.isNotificationPolicyAccessGranted()) {\n                    val intent = Intent(Settings.ACTION_NOTIFICATION_POLICY_ACCESS_SETTINGS)\n                    Toast.makeText(context, \"Enable permission for \\\"$appName\\\"\", Toast.LENGTH_LONG)\n                        .show()\n                    context.startActivity(intent)\n                } else if (!it && notificationManagerService.isNotificationPolicyAccessGranted()) {\n                    notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALL)\n                }\n                onAction(SettingsAction.SaveDndEnabled(it))\n            }\n        ),\n        SettingsSwitchItem(\n            checked = settingsState.aodEnabled,\n            icon = R.drawable.aod,\n            label = R.string.always_on_display,\n            description = R.string.always_on_display_desc,\n            onClick = { onAction(SettingsAction.SaveAodEnabled(it)) }\n        )\n    )\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.timer), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                CompositionLocalProvider(LocalContentColor provides colorScheme.error) {\n                    AnimatedVisibility(serviceRunning) {\n                        Column {\n                            Spacer(Modifier.height(8.dp))\n                            Row(\n                                verticalAlignment = Alignment.CenterVertically,\n                                horizontalArrangement = Arrangement.spacedBy(8.dp)\n                            ) {\n                                Icon(painterResource(R.drawable.info), null)\n                                Text(stringResource(R.string.timer_settings_reset_info))\n                            }\n                        }\n                    }\n                }\n                Spacer(Modifier.height(14.dp))\n            }\n            item {\n                Row(\n                    horizontalArrangement = Arrangement.Center,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .horizontalScroll(rememberScrollState())\n                ) {\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.focus),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = focusTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(\n                                topStart = topListItemShape.topStart,\n                                bottomStart = topListItemShape.topStart,\n                                topEnd = topListItemShape.bottomStart,\n                                bottomEnd = topListItemShape.bottomStart\n                            ),\n                            imeAction = ImeAction.Next\n                        )\n                    }\n                    Spacer(Modifier.width(2.dp))\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.short_break),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = shortBreakTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(middleListItemShape.topStart),\n                            imeAction = ImeAction.Next\n                        )\n                    }\n                    Spacer(Modifier.width(2.dp))\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.long_break),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = longBreakTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(\n                                topStart = bottomListItemShape.topStart,\n                                bottomStart = bottomListItemShape.topStart,\n                                topEnd = bottomListItemShape.bottomStart,\n                                bottomEnd = bottomListItemShape.bottomStart\n                            ),\n                            imeAction = ImeAction.Done\n                        )\n                    }\n                }\n            }\n            item {\n                Spacer(Modifier.height(12.dp))\n            }\n            item {\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(R.drawable.clocks), null)\n                    },\n                    headlineContent = {\n                        Text(stringResource(R.string.session_length))\n                    },\n                    supportingContent = {\n                        Column {\n                            Text(\n                                stringResource(\n                                    R.string.session_length_desc,\n                                    sessionsSliderState.value.toInt()\n                                )\n                            )\n                            Slider(\n                                state = sessionsSliderState,\n                                enabled = !serviceRunning,\n                                modifier = Modifier.padding(vertical = 4.dp)\n                            )\n                        }\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(cardShape)\n                )\n            }\n            item { Spacer(Modifier.height(12.dp)) }\n\n            itemsIndexed(if (isPlus) switchItems else switchItems.take(1)) { index, item ->\n                ListItem(\n                    leadingContent = {\n                        Icon(\n                            painterResource(item.icon),\n                            contentDescription = null,\n                            modifier = Modifier.padding(top = 4.dp)\n                        )\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            enabled = item.enabled,\n                            onCheckedChange = { item.onClick(it) },\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(\n                        if (isPlus) when (index) {\n                            0 -> topListItemShape\n                            switchItems.size - 1 -> bottomListItemShape\n                            else -> middleListItemShape\n                        }\n                        else cardShape\n                    )\n                )\n            }\n\n            if (!isPlus) {\n                item {\n                    PlusDivider(setShowPaywall)\n                }\n                items(switchItems.drop(1)) { item ->\n                    ListItem(\n                        leadingContent = {\n                            Icon(\n                                painterResource(item.icon),\n                                contentDescription = null,\n                                modifier = Modifier.padding(top = 4.dp)\n                            )\n                        },\n                        headlineContent = { Text(stringResource(item.label)) },\n                        supportingContent = { Text(stringResource(item.description)) },\n                        trailingContent = {\n                            Switch(\n                                checked = item.checked,\n                                onCheckedChange = { item.onClick(it) },\n                                enabled = isPlus,\n                                thumbContent = {\n                                    if (item.checked) {\n                                        Icon(\n                                            painter = painterResource(R.drawable.check),\n                                            contentDescription = null,\n                                            modifier = Modifier.size(SwitchDefaults.IconSize),\n                                        )\n                                    } else {\n                                        Icon(\n                                            painter = painterResource(R.drawable.clear),\n                                            contentDescription = null,\n                                            modifier = Modifier.size(SwitchDefaults.IconSize),\n                                        )\n                                    }\n                                },\n                                colors = switchColors\n                            )\n                        },\n                        colors = listItemColors,\n                        modifier = Modifier.clip(cardShape)\n                    )\n                }\n            }\n\n            item {\n                var expanded by remember { mutableStateOf(false) }\n                Column(\n                    horizontalAlignment = Alignment.End,\n                    modifier = Modifier\n                        .padding(vertical = 6.dp)\n                        .fillMaxWidth()\n                ) {\n                    FilledTonalIconToggleButton(\n                        checked = expanded,\n                        onCheckedChange = { expanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier.width(52.dp)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.info),\n                            null\n                        )\n                    }\n                    AnimatedVisibility(expanded) {\n                        Text(\n                            stringResource(R.string.pomodoro_info),\n                            style = typography.bodyMedium,\n                            color = colorScheme.onSurfaceVariant,\n                            modifier = Modifier.padding(8.dp)\n                        )\n                    }\n                }\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Preview\n@Composable\nprivate fun TimerSettingsPreview() {\n    val focusTimeInputFieldState = rememberTextFieldState(\"25\")\n    val shortBreakTimeInputFieldState = rememberTextFieldState(\"5\")\n    val longBreakTimeInputFieldState = rememberTextFieldState(\"15\")\n    val sessionsSliderState = rememberSliderState(\n        value = 4f,\n        valueRange = 1f..8f,\n        steps = 6\n    )\n    TimerSettings(\n        isPlus = false,\n        serviceRunning = true,\n        settingsState = remember { SettingsState() },\n        focusTimeInputFieldState = focusTimeInputFieldState,\n        shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n        longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n        sessionsSliderState = sessionsSliderState,\n        onAction = {},\n        setShowPaywall = {},\n        onBack = {}\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\SettingsScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen\n\nimport android.annotation.SuppressLint\nimport android.app.LocaleManager\nimport android.os.Build\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.slideInHorizontally\nimport androidx.compose.animation.slideOutHorizontally\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.LocalTextStyle\nimport androidx.compose.material3.SliderState\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.DisposableEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.saveable.rememberSaveable\nimport androidx.compose.runtime.setValue\nimport androidx.compose.runtime.snapshots.SnapshotStateList\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextOverflow\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport androidx.navigation3.runtime.entryProvider\nimport androidx.navigation3.ui.NavDisplay\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.Screen\nimport org.nsh07.pomodoro.ui.settingsScreen.components.AboutCard\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ClickableListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.LocaleBottomSheet\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusPromo\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.AlarmSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.AppearanceSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.TimerSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsViewModel\nimport org.nsh07.pomodoro.ui.settingsScreens\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\n\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Composable\nfun SettingsScreenRoot(\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier,\n    viewModel: SettingsViewModel = viewModel(factory = SettingsViewModel.Factory)\n) {\n    val backStack = viewModel.backStack\n\n    DisposableEffect(Unit) {\n        viewModel.runTextFieldFlowCollection()\n        onDispose { viewModel.cancelTextFieldFlowCollection() }\n    }\n\n    val focusTimeInputFieldState = viewModel.focusTimeTextFieldState\n    val shortBreakTimeInputFieldState = viewModel.shortBreakTimeTextFieldState\n    val longBreakTimeInputFieldState = viewModel.longBreakTimeTextFieldState\n\n    val isPlus by viewModel.isPlus.collectAsStateWithLifecycle()\n    val serviceRunning by viewModel.serviceRunning.collectAsStateWithLifecycle()\n\n    val settingsState by viewModel.settingsState.collectAsStateWithLifecycle()\n\n    val sessionsSliderState = rememberSaveable(\n        saver = SliderState.Saver(\n            viewModel.sessionsSliderState.onValueChangeFinished,\n            viewModel.sessionsSliderState.valueRange\n        )\n    ) {\n        viewModel.sessionsSliderState\n    }\n\n    SettingsScreen(\n        isPlus = isPlus,\n        serviceRunning = serviceRunning,\n        settingsState = settingsState,\n        backStack = backStack,\n        focusTimeInputFieldState = focusTimeInputFieldState,\n        shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n        longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n        sessionsSliderState = sessionsSliderState,\n        onAction = viewModel::onAction,\n        setShowPaywall = setShowPaywall,\n        modifier = modifier\n    )\n}\n\n@SuppressLint(\"LocalContextGetResourceValueCall\")\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nprivate fun SettingsScreen(\n    isPlus: Boolean,\n    serviceRunning: Boolean,\n    settingsState: SettingsState,\n    backStack: SnapshotStateList<Screen.Settings>,\n    focusTimeInputFieldState: TextFieldState,\n    shortBreakTimeInputFieldState: TextFieldState,\n    longBreakTimeInputFieldState: TextFieldState,\n    sessionsSliderState: SliderState,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val context = LocalContext.current\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    val currentLocales =\n        if (Build.VERSION.SDK_INT >= 33) {\n            context\n                .getSystemService(LocaleManager::class.java)\n                .applicationLocales\n        } else null\n    val currentLocalesSize = currentLocales?.size() ?: 0\n\n    var showLocaleSheet by remember { mutableStateOf(false) }\n\n    if (showLocaleSheet && currentLocales != null)\n        LocaleBottomSheet(\n            currentLocales = currentLocales,\n            setShowSheet = { showLocaleSheet = it }\n        )\n\n    NavDisplay(\n        backStack = backStack,\n        onBack = backStack::removeLastOrNull,\n        transitionSpec = {\n            (slideInHorizontally(initialOffsetX = { it }))\n                .togetherWith(slideOutHorizontally(targetOffsetX = { -it / 4 }) + fadeOut())\n        },\n        popTransitionSpec = {\n            (slideInHorizontally(initialOffsetX = { -it / 4 }) + fadeIn())\n                .togetherWith(slideOutHorizontally(targetOffsetX = { it }))\n        },\n        predictivePopTransitionSpec = {\n            (slideInHorizontally(initialOffsetX = { -it / 4 }) + fadeIn())\n                .togetherWith(slideOutHorizontally(targetOffsetX = { it }))\n        },\n        entryProvider = entryProvider {\n            entry<Screen.Settings.Main> {\n                Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n                    TopAppBar(\n                        title = {\n                            Text(\n                                stringResource(R.string.settings),\n                                style = LocalTextStyle.current.copy(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp\n                                )\n                            )\n                        },\n                        subtitle = {},\n                        colors = topBarColors,\n                        titleHorizontalAlignment = Alignment.CenterHorizontally,\n                        scrollBehavior = scrollBehavior\n                    )\n\n                    LazyColumn(\n                        verticalArrangement = Arrangement.spacedBy(2.dp),\n                        modifier = Modifier\n                            .background(topBarColors.containerColor)\n                            .fillMaxSize()\n                            .padding(horizontal = 16.dp)\n                    ) {\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (!isPlus) item {\n                            PlusPromo(isPlus, setShowPaywall)\n                            Spacer(Modifier.height(14.dp))\n                        }\n\n                        item { AboutCard(isPlus) }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (isPlus) item {\n                            PlusPromo(isPlus, setShowPaywall)\n                            Spacer(Modifier.height(14.dp))\n                        }\n\n                        itemsIndexed(settingsScreens) { index, item ->\n                            ClickableListItem(\n                                leadingContent = {\n                                    Icon(painterResource(item.icon), null)\n                                },\n                                headlineContent = { Text(stringResource(item.label)) },\n                                supportingContent = {\n                                    Text(\n                                        remember {\n                                            item.innerSettings.joinToString(\", \") {\n                                                context.getString(it)\n                                            }\n                                        },\n                                        maxLines = 1,\n                                        overflow = TextOverflow.Ellipsis\n                                    )\n                                },\n                                trailingContent = {\n                                    Icon(painterResource(R.drawable.arrow_forward_big), null)\n                                },\n                                items = settingsScreens.size,\n                                index = index\n                            ) { backStack.add(item.route) }\n                        }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (currentLocales != null)\n                            item {\n                                ClickableListItem(\n                                    leadingContent = {\n                                        Icon(\n                                            painterResource(R.drawable.language),\n                                            contentDescription = null\n                                        )\n                                    },\n                                    headlineContent = { Text(stringResource(R.string.language)) },\n                                    supportingContent = {\n                                        Text(\n                                            if (currentLocalesSize > 0) currentLocales.get(0).displayName\n                                            else stringResource(R.string.system_default)\n                                        )\n                                    },\n                                    colors = listItemColors,\n                                    items = 1,\n                                    index = 0\n                                ) { showLocaleSheet = true }\n                            }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n                    }\n                }\n            }\n\n            entry<Screen.Settings.Alarm> {\n                AlarmSettings(\n                    settingsState = settingsState,\n                    onAction = onAction,\n                    onBack = backStack::removeLastOrNull\n                )\n            }\n            entry<Screen.Settings.Appearance> {\n                AppearanceSettings(\n                    settingsState = settingsState,\n                    isPlus = isPlus,\n                    onAction = onAction,\n                    setShowPaywall = setShowPaywall,\n                    onBack = backStack::removeLastOrNull\n                )\n            }\n            entry<Screen.Settings.Timer> {\n                TimerSettings(\n                    isPlus = isPlus,\n                    serviceRunning = serviceRunning,\n                    settingsState = settingsState,\n                    focusTimeInputFieldState = focusTimeInputFieldState,\n                    shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n                    longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n                    sessionsSliderState = sessionsSliderState,\n                    onAction = onAction,\n                    setShowPaywall = setShowPaywall,\n                    onBack = backStack::removeLastOrNull,\n                )\n            }\n        }\n    )\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\SettingsSwitchItem.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen\n\nimport androidx.annotation.DrawableRes\nimport androidx.annotation.StringRes\n\ndata class SettingsSwitchItem(\n    val checked: Boolean,\n    val enabled: Boolean = true,\n    @param:DrawableRes val icon: Int,\n    @param:StringRes val label: Int,\n    @param:StringRes val description: Int,\n    val onClick: (Boolean) -> Unit\n)\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsAction.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport android.net.Uri\nimport androidx.compose.ui.graphics.Color\n\nsealed interface SettingsAction {\n    data class SaveAlarmEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveVibrateEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveBlackTheme(val enabled: Boolean) : SettingsAction\n    data class SaveAodEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveDndEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveAlarmSound(val uri: Uri?) : SettingsAction\n    data class SaveTheme(val theme: String) : SettingsAction\n    data class SaveColorScheme(val color: Color) : SettingsAction\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsState.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport androidx.compose.runtime.Immutable\nimport androidx.compose.ui.graphics.Color\n\n@Immutable\ndata class SettingsState(\n    val theme: String = \"auto\",\n    val alarmSound: String = \"\",\n    val colorScheme: String = Color.White.toString(),\n    val blackTheme: Boolean = false,\n    val aodEnabled: Boolean = false,\n    val alarmEnabled: Boolean = true,\n    val vibrateEnabled: Boolean = true,\n    val dndEnabled: Boolean = false\n)\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport android.net.Uri\nimport android.provider.Settings\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.SliderState\nimport androidx.compose.runtime.mutableStateListOf\nimport androidx.compose.runtime.snapshotFlow\nimport androidx.compose.ui.graphics.Color\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.FlowPreview\nimport kotlinx.coroutines.Job\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.debounce\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.billing.BillingManager\nimport org.nsh07.pomodoro.data.AppPreferenceRepository\nimport org.nsh07.pomodoro.data.TimerRepository\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.ui.Screen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport org.nsh07.pomodoro.utils.millisecondsToStr\n\n@OptIn(FlowPreview::class, ExperimentalMaterial3Api::class)\nclass SettingsViewModel(\n    private val billingManager: BillingManager,\n    private val preferenceRepository: AppPreferenceRepository,\n    private val serviceHelper: ServiceHelper,\n    private val time: MutableStateFlow<Long>,\n    private val timerRepository: TimerRepository,\n    private val timerState: MutableStateFlow<TimerState>\n) : ViewModel() {\n    val backStack = mutableStateListOf<Screen.Settings>(Screen.Settings.Main)\n\n    val isPlus = billingManager.isPlus\n    val serviceRunning = timerRepository.serviceRunning.asStateFlow()\n\n    private val _settingsState = MutableStateFlow(SettingsState())\n    val settingsState = _settingsState.asStateFlow()\n\n    val focusTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.focusTime / 60000).toString())\n    }\n    val shortBreakTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.shortBreakTime / 60000).toString())\n    }\n    val longBreakTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.longBreakTime / 60000).toString())\n    }\n\n    val sessionsSliderState by lazy {\n        SliderState(\n            value = timerRepository.sessionLength.toFloat(),\n            steps = 4,\n            valueRange = 1f..6f,\n            onValueChangeFinished = ::updateSessionLength\n        )\n    }\n\n    private var focusFlowCollectionJob: Job? = null\n    private var shortBreakFlowCollectionJob: Job? = null\n    private var longBreakFlowCollectionJob: Job? = null\n\n    init {\n        viewModelScope.launch {\n            reloadSettings()\n        }\n    }\n\n    fun onAction(action: SettingsAction) {\n        when (action) {\n            is SettingsAction.SaveAlarmSound -> saveAlarmSound(action.uri)\n            is SettingsAction.SaveAlarmEnabled -> saveAlarmEnabled(action.enabled)\n            is SettingsAction.SaveVibrateEnabled -> saveVibrateEnabled(action.enabled)\n            is SettingsAction.SaveDndEnabled -> saveDndEnabled(action.enabled)\n            is SettingsAction.SaveColorScheme -> saveColorScheme(action.color)\n            is SettingsAction.SaveTheme -> saveTheme(action.theme)\n            is SettingsAction.SaveBlackTheme -> saveBlackTheme(action.enabled)\n            is SettingsAction.SaveAodEnabled -> saveAodEnabled(action.enabled)\n        }\n    }\n\n    private fun updateSessionLength() {\n        viewModelScope.launch {\n            timerRepository.sessionLength = preferenceRepository.saveIntPreference(\n                \"session_length\",\n                sessionsSliderState.value.toInt()\n            )\n            refreshTimer()\n        }\n    }\n\n    fun runTextFieldFlowCollection() {\n        focusFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { focusTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.focusTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"focus_time\",\n                            timerRepository.focusTime.toInt()\n                        )\n                    }\n                }\n        }\n        shortBreakFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { shortBreakTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.shortBreakTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"short_break_time\",\n                            timerRepository.shortBreakTime.toInt()\n                        )\n                    }\n                }\n        }\n        longBreakFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { longBreakTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.longBreakTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"long_break_time\",\n                            timerRepository.longBreakTime.toInt()\n                        )\n                    }\n                }\n        }\n    }\n\n    fun cancelTextFieldFlowCollection() {\n        if (!serviceRunning.value) serviceHelper.startService(TimerAction.ResetTimer)\n        focusFlowCollectionJob?.cancel()\n        shortBreakFlowCollectionJob?.cancel()\n        longBreakFlowCollectionJob?.cancel()\n    }\n\n    private fun saveAlarmEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.alarmEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(alarmEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"alarm_enabled\", enabled)\n        }\n    }\n\n    private fun saveVibrateEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.vibrateEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(vibrateEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", enabled)\n        }\n    }\n\n    private fun saveDndEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.dndEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(dndEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"dnd_enabled\", enabled)\n        }\n    }\n\n    private fun saveAlarmSound(uri: Uri?) {\n        viewModelScope.launch {\n            timerRepository.alarmSoundUri = uri\n            _settingsState.update { currentState ->\n                currentState.copy(alarmSound = uri.toString())\n            }\n            preferenceRepository.saveStringPreference(\"alarm_sound\", uri.toString())\n        }\n    }\n\n    private fun saveColorScheme(colorScheme: Color) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(colorScheme = colorScheme.toString())\n            }\n            preferenceRepository.saveStringPreference(\"color_scheme\", colorScheme.toString())\n        }\n    }\n\n    private fun saveTheme(theme: String) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(theme = theme)\n            }\n            preferenceRepository.saveStringPreference(\"theme\", theme)\n        }\n    }\n\n    private fun saveBlackTheme(blackTheme: Boolean) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(blackTheme = blackTheme)\n            }\n            preferenceRepository.saveBooleanPreference(\"black_theme\", blackTheme)\n        }\n    }\n\n    private fun saveAodEnabled(aodEnabled: Boolean) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(aodEnabled = aodEnabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"aod_enabled\", aodEnabled)\n        }\n    }\n\n    suspend fun reloadSettings() {\n        val theme = preferenceRepository.getStringPreference(\"theme\")\n            ?: preferenceRepository.saveStringPreference(\"theme\", \"auto\")\n        val colorScheme = preferenceRepository.getStringPreference(\"color_scheme\")\n            ?: preferenceRepository.saveStringPreference(\"color_scheme\", Color.White.toString())\n        val blackTheme = preferenceRepository.getBooleanPreference(\"black_theme\")\n            ?: preferenceRepository.saveBooleanPreference(\"black_theme\", false)\n        val aodEnabled = preferenceRepository.getBooleanPreference(\"aod_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"aod_enabled\", false)\n        val alarmSound = preferenceRepository.getStringPreference(\"alarm_sound\")\n            ?: preferenceRepository.saveStringPreference(\n                \"alarm_sound\",\n                (Settings.System.DEFAULT_ALARM_ALERT_URI\n                    ?: Settings.System.DEFAULT_RINGTONE_URI).toString()\n            )\n        val alarmEnabled = preferenceRepository.getBooleanPreference(\"alarm_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"alarm_enabled\", true)\n        val vibrateEnabled = preferenceRepository.getBooleanPreference(\"vibrate_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", true)\n        val dndEnabled = preferenceRepository.getBooleanPreference(\"dnd_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"dnd_enabled\", false)\n\n        _settingsState.update { currentState ->\n            currentState.copy(\n                theme = theme,\n                colorScheme = colorScheme,\n                alarmSound = alarmSound,\n                blackTheme = blackTheme,\n                aodEnabled = aodEnabled,\n                alarmEnabled = alarmEnabled,\n                vibrateEnabled = vibrateEnabled,\n                dndEnabled = dndEnabled\n            )\n        }\n    }\n\n    private fun refreshTimer() {\n        if (!serviceRunning.value) {\n            time.update { timerRepository.focusTime }\n\n            timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = TimerMode.FOCUS,\n                    timeStr = millisecondsToStr(time.value),\n                    totalTime = time.value,\n                    nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                    nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                    currentFocusCount = 1,\n                    totalFocusCount = timerRepository.sessionLength\n                )\n            }\n        }\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appBillingManager = application.container.billingManager\n                val appPreferenceRepository = application.container.appPreferenceRepository\n                val appTimerRepository = application.container.appTimerRepository\n                val serviceHelper = application.container.serviceHelper\n                val time = application.container.time\n                val timerState = application.container.timerState\n\n                SettingsViewModel(\n                    billingManager = appBillingManager,\n                    preferenceRepository = appPreferenceRepository,\n                    serviceHelper = serviceHelper,\n                    time = time,\n                    timerRepository = appTimerRepository,\n                    timerState = timerState\n                )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\ProductivityGraph.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.ColumnScope\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.utils.millisecondsToHoursMinutes\n\n@Composable\nfun ColumnScope.ProductivityGraph(\n    expanded: Boolean,\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    label: String = stringResource(R.string.productivity_analysis)\n) {\n    AnimatedVisibility(expanded) {\n        Column(modifier = modifier) {\n            Text(label, style = typography.titleMedium)\n            Text(\n                stringResource(R.string.productivity_analysis_desc),\n                style = typography.bodySmall\n            )\n            Spacer(Modifier.height(8.dp))\n            TimeColumnChart(\n                modelProducer,\n                xValueFormatter = CartesianValueFormatter { _, value, _ ->\n                    when (value) {\n                        0.0 -> \"0 - 6\"\n                        1.0 -> \"6 - 12\"\n                        2.0 -> \"12 - 18\"\n                        3.0 -> \"18 - 24\"\n                        else -> \"\"\n                    }\n                },\n                yValueFormatter = CartesianValueFormatter { _, value, _ ->\n                    millisecondsToHoursMinutes(value.toLong())\n                }\n            )\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\StatsScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "STATE",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.animateFloatAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.PaddingValues\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.WindowInsets\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.text.TextAutoSize\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledTonalIconToggleButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.LocalTextStyle\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Surface\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.saveable.rememberSaveable\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.rotate\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.common.data.ExtraStore\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.ui.statsScreen.viewModel.StatsViewModel\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHoursMinutes\n\n@Composable\nfun StatsScreenRoot(\n    contentPadding: PaddingValues,\n    modifier: Modifier = Modifier,\n    viewModel: StatsViewModel = viewModel(factory = StatsViewModel.Factory)\n) {\n    val todayStat by viewModel.todayStat.collectAsStateWithLifecycle(null)\n\n    val lastWeekSummaryChartData by viewModel.lastWeekSummaryChartData.collectAsStateWithLifecycle()\n    val lastWeekAnalysisValues by viewModel.lastWeekAverageFocusTimes.collectAsStateWithLifecycle()\n\n    val lastMonthSummaryChartData by viewModel.lastMonthSummaryChartData.collectAsStateWithLifecycle()\n    val lastMonthAnalysisValues by viewModel.lastMonthAverageFocusTimes.collectAsStateWithLifecycle()\n\n    val lastYearSummaryChartData by viewModel.lastYearSummaryChartData.collectAsStateWithLifecycle()\n    val lastYearAnalysisValues by viewModel.lastYearAverageFocusTimes.collectAsStateWithLifecycle()\n\n    StatsScreen(\n        contentPadding = contentPadding,\n        lastWeekSummaryChartData = lastWeekSummaryChartData,\n        lastMonthSummaryChartData = lastMonthSummaryChartData,\n        lastYearSummaryChartData = lastYearSummaryChartData,\n        todayStat = todayStat,\n        lastWeekAverageFocusTimes = lastWeekAnalysisValues,\n        lastMonthAverageFocusTimes = lastMonthAnalysisValues,\n        lastYearAverageFocusTimes = lastYearAnalysisValues,\n        generateSampleData = viewModel::generateSampleData,\n        modifier = modifier\n    )\n}\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun StatsScreen(\n    contentPadding: PaddingValues,\n    lastWeekSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    lastMonthSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    lastYearSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    todayStat: Stat?,\n    lastWeekAverageFocusTimes: List<Int>,\n    lastMonthAverageFocusTimes: List<Int>,\n    lastYearAverageFocusTimes: List<Int>,\n    generateSampleData: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    var lastWeekStatExpanded by rememberSaveable { mutableStateOf(false) }\n    var lastMonthStatExpanded by rememberSaveable { mutableStateOf(false) }\n\n    val lastWeekSummaryAnalysisModelProducer = remember { CartesianChartModelProducer() }\n    val lastMonthSummaryAnalysisModelProducer = remember { CartesianChartModelProducer() }\n\n    LaunchedEffect(lastWeekAverageFocusTimes) {\n        lastWeekSummaryAnalysisModelProducer.runTransaction {\n            columnSeries {\n                series(lastWeekAverageFocusTimes)\n            }\n        }\n    }\n\n    LaunchedEffect(lastMonthAverageFocusTimes) {\n        lastMonthSummaryAnalysisModelProducer.runTransaction {\n            columnSeries {\n                series(lastMonthAverageFocusTimes)\n            }\n        }\n    }\n\n    Column(\n        horizontalAlignment = Alignment.CenterHorizontally,\n        modifier = modifier.nestedScroll(scrollBehavior.nestedScrollConnection)\n    ) {\n        TopAppBar(\n            title = {\n                Text(\n                    stringResource(R.string.stats),\n                    style = LocalTextStyle.current.copy(\n                        fontFamily = robotoFlexTopBar,\n                        fontSize = 32.sp,\n                        lineHeight = 32.sp\n                    ),\n                    modifier = Modifier\n                        .padding(top = contentPadding.calculateTopPadding())\n                        .padding(vertical = 14.dp)\n                )\n            },\n            actions = if (BuildConfig.DEBUG) {\n                {\n                    IconButton(\n                        onClick = generateSampleData\n                    ) {\n                        Spacer(Modifier.size(24.dp))\n                    }\n                }\n            } else {\n                {}\n            },\n            subtitle = {},\n            titleHorizontalAlignment = Alignment.CenterHorizontally,\n            scrollBehavior = scrollBehavior,\n            windowInsets = WindowInsets()\n        )\n\n        LazyColumn(\n            horizontalAlignment = Alignment.CenterHorizontally,\n            verticalArrangement = Arrangement.spacedBy(16.dp)\n        ) {\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.today),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(modifier = Modifier.padding(horizontal = 16.dp)) {\n                    Box(\n                        modifier = Modifier\n                            .background(\n                                colorScheme.primaryContainer,\n                                MaterialTheme.shapes.largeIncreased\n                            )\n                            .weight(1f)\n                    ) {\n                        Column(Modifier.padding(16.dp)) {\n                            Text(\n                                stringResource(R.string.focus),\n                                style = typography.titleMedium,\n                                color = colorScheme.onPrimaryContainer\n                            )\n                            Text(\n                                remember(todayStat) {\n                                    millisecondsToHoursMinutes(todayStat?.totalFocusTime() ?: 0)\n                                },\n                                style = typography.displaySmall,\n                                fontFamily = interClock,\n                                color = colorScheme.onPrimaryContainer,\n                                maxLines = 1,\n                                autoSize = TextAutoSize.StepBased(maxFontSize = typography.displaySmall.fontSize)\n                            )\n                        }\n                    }\n                    Spacer(Modifier.width(8.dp))\n                    Box(\n                        modifier = Modifier\n                            .background(\n                                colorScheme.tertiaryContainer,\n                                MaterialTheme.shapes.largeIncreased\n                            )\n                            .weight(1f)\n                    ) {\n                        Column(Modifier.padding(16.dp)) {\n                            Text(\n                                stringResource(R.string.break_),\n                                style = typography.titleMedium,\n                                color = colorScheme.onTertiaryContainer\n                            )\n                            Text(\n                                remember(todayStat) {\n                                    millisecondsToHoursMinutes(todayStat?.breakTime ?: 0)\n                                },\n                                style = typography.displaySmall,\n                                fontFamily = interClock,\n                                color = colorScheme.onTertiaryContainer,\n                                maxLines = 1,\n                                autoSize = TextAutoSize.StepBased(maxFontSize = typography.displaySmall.fontSize)\n                            )\n                        }\n                    }\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_week),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastWeekAverageFocusTimes) {\n                                lastWeekAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeColumnChart(\n                    lastWeekSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastWeekSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item {\n                val iconRotation by animateFloatAsState(\n                    if (lastWeekStatExpanded) 180f else 0f,\n                    animationSpec = motionScheme.defaultSpatialSpec()\n                )\n                Column(\n                    horizontalAlignment = Alignment.CenterHorizontally,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    Spacer(Modifier.height(2.dp))\n                    FilledTonalIconToggleButton(\n                        checked = lastWeekStatExpanded,\n                        onCheckedChange = { lastWeekStatExpanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier\n                            .padding(horizontal = 16.dp)\n                            .width(52.dp)\n                            .align(Alignment.End)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.arrow_down),\n                            stringResource(R.string.more_info),\n                            modifier = Modifier.rotate(iconRotation)\n                        )\n                    }\n                    ProductivityGraph(\n                        lastWeekStatExpanded,\n                        lastWeekSummaryAnalysisModelProducer,\n                        label = stringResource(R.string.weekly_productivity_analysis),\n                        modifier = Modifier.padding(horizontal = 32.dp)\n                    )\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_month),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastMonthAverageFocusTimes) {\n                                lastMonthAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        text = stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeColumnChart(\n                    lastMonthSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    thickness = 8.dp,\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastMonthSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item {\n                val iconRotation by animateFloatAsState(\n                    if (lastMonthStatExpanded) 180f else 0f,\n                    animationSpec = motionScheme.defaultSpatialSpec()\n                )\n                Column(\n                    horizontalAlignment = Alignment.CenterHorizontally,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    Spacer(Modifier.height(2.dp))\n                    FilledTonalIconToggleButton(\n                        checked = lastMonthStatExpanded,\n                        onCheckedChange = { lastMonthStatExpanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier\n                            .padding(horizontal = 16.dp)\n                            .width(52.dp)\n                            .align(Alignment.End)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.arrow_down),\n                            stringResource(R.string.more_info),\n                            modifier = Modifier.rotate(iconRotation)\n                        )\n                    }\n                    ProductivityGraph(\n                        lastMonthStatExpanded,\n                        lastMonthSummaryAnalysisModelProducer,\n                        label = stringResource(R.string.monthly_productivity_analysis),\n                        modifier = Modifier.padding(horizontal = 32.dp)\n                    )\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_year),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastYearAverageFocusTimes) {\n                                lastYearAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        text = stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeLineChart(\n                    lastYearSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastYearSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item { Spacer(Modifier.height(16.dp)) }\n        }\n    }\n}\n\n@Preview(\n    widthDp = 400\n)\n@Composable\nfun StatsScreenPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val keys = remember { ExtraStore.Key<List<String>>() }\n\n    LaunchedEffect(Unit) {\n        modelProducer.runTransaction {\n            columnSeries {\n                series(5, 6, 5, 2, 11, 8, 5)\n            }\n            lineSeries {}\n            extras { it[keys] = listOf(\"M\", \"T\", \"W\", \"T\", \"F\", \"S\", \"S\") }\n        }\n    }\n\n    TomatoTheme {\n        Surface {\n            StatsScreen(\n                PaddingValues(),\n                Pair(modelProducer, keys),\n                Pair(modelProducer, keys),\n                Pair(modelProducer, keys),\n                null,\n                listOf(0, 0, 0, 0),\n                listOf(0, 0, 0, 0),\n                listOf(0, 0, 0, 0),\n                {}\n            )\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\TimeColumnChart.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.AnimationSpec\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Surface\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.compose.cartesian.CartesianChartHost\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberBottom\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberStart\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberColumnCartesianLayer\nimport com.patrykandpatrick.vico.compose.cartesian.rememberCartesianChart\nimport com.patrykandpatrick.vico.compose.cartesian.rememberVicoZoomState\nimport com.patrykandpatrick.vico.compose.common.ProvideVicoTheme\nimport com.patrykandpatrick.vico.compose.common.component.rememberLineComponent\nimport com.patrykandpatrick.vico.compose.common.fill\nimport com.patrykandpatrick.vico.compose.common.vicoTheme\nimport com.patrykandpatrick.vico.compose.m3.common.rememberM3VicoTheme\nimport com.patrykandpatrick.vico.core.cartesian.FadingEdges\nimport com.patrykandpatrick.vico.core.cartesian.Zoom\nimport com.patrykandpatrick.vico.core.cartesian.axis.HorizontalAxis\nimport com.patrykandpatrick.vico.core.cartesian.axis.VerticalAxis\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.layer.ColumnCartesianLayer\nimport com.patrykandpatrick.vico.core.common.Fill\nimport com.patrykandpatrick.vico.core.common.shape.CorneredShape\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHours\nimport org.nsh07.pomodoro.utils.millisecondsToMinutes\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimeColumnChart(\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    thickness: Dp = 40.dp,\n    columnCollectionSpacing: Dp = 4.dp,\n    xValueFormatter: CartesianValueFormatter = CartesianValueFormatter.Default,\n    yValueFormatter: CartesianValueFormatter = CartesianValueFormatter { _, value, _ ->\n        if (value >= 60 * 60 * 1000) {\n            millisecondsToHours(value.toLong())\n        } else {\n            millisecondsToMinutes(value.toLong())\n        }\n    },\n    animationSpec: AnimationSpec<Float>? = motionScheme.slowEffectsSpec()\n) {\n    ProvideVicoTheme(rememberM3VicoTheme()) {\n        CartesianChartHost(\n            chart =\n                rememberCartesianChart(\n                    rememberColumnCartesianLayer(\n                        ColumnCartesianLayer.ColumnProvider.series(\n                            vicoTheme.columnCartesianLayerColors.map { color ->\n                                rememberLineComponent(\n                                    fill = fill(color),\n                                    thickness = thickness,\n                                    shape = CorneredShape.Pill\n                                )\n                            }\n                        ),\n                        columnCollectionSpacing = columnCollectionSpacing\n                    ),\n                    startAxis = VerticalAxis.rememberStart(\n                        line = rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = yValueFormatter\n                    ),\n                    bottomAxis = HorizontalAxis.rememberBottom(\n                        rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = xValueFormatter\n                    ),\n                    fadingEdges = FadingEdges()\n                ),\n            modelProducer = modelProducer,\n            zoomState = rememberVicoZoomState(\n                zoomEnabled = false,\n                initialZoom = Zoom.fixed(),\n                minZoom = Zoom.min(Zoom.Content, Zoom.fixed())\n            ),\n            animationSpec = animationSpec,\n            modifier = modifier,\n        )\n    }\n}\n\n@Preview\n@Composable\nprivate fun TimeColumnChartPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val values = mutableListOf<Int>()\n    LaunchedEffect(Unit) {\n        repeat(30) {\n            values.add((0..120).random() * 60 * 1000)\n        }\n        modelProducer.runTransaction {\n            columnSeries {\n                series(values)\n            }\n        }\n    }\n    TomatoTheme {\n        Surface {\n            TimeColumnChart(thickness = 8.dp, modelProducer = modelProducer)\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\TimeLineChart.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.AnimationSpec\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Surface\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.compose.cartesian.CartesianChartHost\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberBottom\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberStart\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberLine\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberLineCartesianLayer\nimport com.patrykandpatrick.vico.compose.cartesian.rememberCartesianChart\nimport com.patrykandpatrick.vico.compose.cartesian.rememberVicoZoomState\nimport com.patrykandpatrick.vico.compose.common.ProvideVicoTheme\nimport com.patrykandpatrick.vico.compose.common.component.rememberLineComponent\nimport com.patrykandpatrick.vico.compose.common.fill\nimport com.patrykandpatrick.vico.compose.common.vicoTheme\nimport com.patrykandpatrick.vico.compose.m3.common.rememberM3VicoTheme\nimport com.patrykandpatrick.vico.core.cartesian.FadingEdges\nimport com.patrykandpatrick.vico.core.cartesian.Zoom\nimport com.patrykandpatrick.vico.core.cartesian.axis.HorizontalAxis\nimport com.patrykandpatrick.vico.core.cartesian.axis.VerticalAxis\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.cartesian.layer.LineCartesianLayer\nimport com.patrykandpatrick.vico.core.cartesian.layer.LineCartesianLayer.LineFill.Companion.single\nimport com.patrykandpatrick.vico.core.common.Fill\nimport com.patrykandpatrick.vico.core.common.shader.ShaderProvider\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHours\nimport org.nsh07.pomodoro.utils.millisecondsToMinutes\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimeLineChart(\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    thickness: Float = 2f,\n    pointSpacing: Dp = 12.dp,\n    xValueFormatter: CartesianValueFormatter = CartesianValueFormatter.Default,\n    yValueFormatter: CartesianValueFormatter = CartesianValueFormatter { _, value, _ ->\n        if (value >= 60 * 60 * 1000) {\n            millisecondsToHours(value.toLong())\n        } else {\n            millisecondsToMinutes(value.toLong())\n        }\n    },\n    animationSpec: AnimationSpec<Float>? = motionScheme.slowEffectsSpec()\n) {\n    ProvideVicoTheme(rememberM3VicoTheme()) {\n        CartesianChartHost(\n            chart =\n                rememberCartesianChart(\n                    rememberLineCartesianLayer(\n                        LineCartesianLayer.LineProvider.series(\n                            vicoTheme.lineCartesianLayerColors.map { color ->\n                                LineCartesianLayer.rememberLine(\n                                    fill = single(fill(color)),\n                                    stroke = LineCartesianLayer.LineStroke.Continuous(\n                                        thicknessDp = thickness,\n                                    ),\n                                    areaFill = LineCartesianLayer.AreaFill.single(\n                                        fill(\n                                            ShaderProvider.verticalGradient(\n                                                color.toArgb(),\n                                                Color.Transparent.toArgb()\n                                            )\n                                        )\n                                    ),\n                                    pointConnector = LineCartesianLayer.PointConnector.cubic(0.5f)\n                                )\n                            }\n                        ),\n                        pointSpacing = pointSpacing\n                    ),\n                    startAxis = VerticalAxis.rememberStart(\n                        line = rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = yValueFormatter\n                    ),\n                    bottomAxis = HorizontalAxis.rememberBottom(\n                        rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = xValueFormatter\n                    ),\n                    fadingEdges = FadingEdges()\n                ),\n            modelProducer = modelProducer,\n            zoomState = rememberVicoZoomState(\n                zoomEnabled = true,\n                initialZoom = Zoom.fixed(),\n                minZoom = Zoom.min(Zoom.Content, Zoom.fixed())\n            ),\n            animationSpec = animationSpec,\n            modifier = modifier,\n        )\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nprivate fun TimeLineChartPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val values = mutableListOf<Int>()\n    LaunchedEffect(Unit) {\n        repeat(365) {\n            values.add((0..120).random() * 60 * 1000)\n        }\n        modelProducer.runTransaction {\n            lineSeries {\n                series(values)\n            }\n        }\n    }\n    TomatoTheme {\n        Surface {\n            TimeLineChart(modelProducer = modelProducer)\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\viewModel\\StatsViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen.viewModel\n\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.common.data.ExtraStore\nimport kotlinx.coroutines.flow.SharingStarted\nimport kotlinx.coroutines.flow.StateFlow\nimport kotlinx.coroutines.flow.distinctUntilChanged\nimport kotlinx.coroutines.flow.map\nimport kotlinx.coroutines.flow.stateIn\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.data.StatRepository\nimport java.time.LocalDate\nimport java.time.format.DateTimeFormatter\nimport java.time.format.TextStyle\nimport java.util.Locale\n\nclass StatsViewModel(\n    private val statRepository: StatRepository\n) : ViewModel() {\n\n    val todayStat = statRepository.getTodayStat().distinctUntilChanged()\n\n    private val lastWeekSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n    private val lastMonthSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n    private val lastYearSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n\n    private val yearDayFormatter = DateTimeFormatter.ofPattern(\"d MMM\")\n\n    val lastWeekSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(7)\n            .map { list ->\n                // reversing is required because we need ascending order while the DB returns descending order\n                val reversed = list.reversed()\n                val keys = reversed.map {\n                    it.date.dayOfWeek.getDisplayName(\n                        TextStyle.NARROW,\n                        Locale.getDefault()\n                    )\n                }\n                val values = reversed.map { it.focusTime }\n                lastWeekSummary.first.runTransaction {\n                    columnSeries { series(values) }\n                    extras { it[lastWeekSummary.second] = keys }\n                }\n                lastWeekSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastWeekSummary\n            )\n\n    val lastWeekAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(7)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    val lastMonthSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(30)\n            .map { list ->\n                val reversed = list.reversed()\n                val keys = reversed.map { it.date.dayOfMonth.toString() }\n                val values = reversed.map { it.focusTime }\n                lastMonthSummary.first.runTransaction {\n                    columnSeries { series(values) }\n                    extras { it[lastMonthSummary.second] = keys }\n                }\n                lastMonthSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastMonthSummary\n            )\n\n    val lastMonthAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(30)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    val lastYearSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(365)\n            .map { list ->\n                val reversed = list.reversed()\n                val keys = reversed.map { it.date.format(yearDayFormatter) }\n                val values = reversed.map { it.focusTime }\n                lastYearSummary.first.runTransaction {\n                    lineSeries { series(values) }\n                    extras { it[lastYearSummary.second] = keys }\n                }\n                lastYearSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastYearSummary\n            )\n\n    val lastYearAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(365)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    fun generateSampleData() {\n        if (BuildConfig.DEBUG) {\n            viewModelScope.launch {\n                val today = LocalDate.now().plusDays(1)\n                var it = today.minusDays(40)\n\n                while (it.isBefore(today)) {\n                    statRepository.insertStat(\n                        Stat(\n                            it,\n                            (0..30 * 60 * 1000L).random(),\n                            (1 * 60 * 60 * 1000L..3 * 60 * 60 * 1000L).random(),\n                            (0..3 * 60 * 60 * 1000L).random(),\n                            (0..1 * 60 * 60 * 1000L).random(),\n                            0\n                        )\n                    )\n                    it = it.plusDays(1)\n                }\n\n                statRepository.addBreakTime((0..30 * 60 * 60 * 1000L).random())\n            }\n        }\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appStatRepository = application.container.appStatRepository\n\n                StatsViewModel(appStatRepository)\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Color.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ListItemColors\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.SwitchColors\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.TopAppBarColors\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.graphics.Color\n\nval primaryLight = Color(0xFF4C662B)\nval onPrimaryLight = Color(0xFFFFFFFF)\nval primaryContainerLight = Color(0xFFCDEDA3)\nval onPrimaryContainerLight = Color(0xFF354E16)\nval secondaryLight = Color(0xFF586249)\nval onSecondaryLight = Color(0xFFFFFFFF)\nval secondaryContainerLight = Color(0xFFDCE7C8)\nval onSecondaryContainerLight = Color(0xFF404A33)\nval tertiaryLight = Color(0xFF386663)\nval onTertiaryLight = Color(0xFFFFFFFF)\nval tertiaryContainerLight = Color(0xFFBCECE7)\nval onTertiaryContainerLight = Color(0xFF1F4E4B)\nval errorLight = Color(0xFFBA1A1A)\nval onErrorLight = Color(0xFFFFFFFF)\nval errorContainerLight = Color(0xFFFFDAD6)\nval onErrorContainerLight = Color(0xFF93000A)\nval backgroundLight = Color(0xFFF9FAEF)\nval onBackgroundLight = Color(0xFF1A1C16)\nval surfaceLight = Color(0xFFF9FAEF)\nval onSurfaceLight = Color(0xFF1A1C16)\nval surfaceVariantLight = Color(0xFFE1E4D5)\nval onSurfaceVariantLight = Color(0xFF44483D)\nval outlineLight = Color(0xFF75796C)\nval outlineVariantLight = Color(0xFFC5C8BA)\nval scrimLight = Color(0xFF000000)\nval inverseSurfaceLight = Color(0xFF2F312A)\nval inverseOnSurfaceLight = Color(0xFFF1F2E6)\nval inversePrimaryLight = Color(0xFFB1D18A)\nval surfaceDimLight = Color(0xFFDADBD0)\nval surfaceBrightLight = Color(0xFFF9FAEF)\nval surfaceContainerLowestLight = Color(0xFFFFFFFF)\nval surfaceContainerLowLight = Color(0xFFF3F4E9)\nval surfaceContainerLight = Color(0xFFEEEFE3)\nval surfaceContainerHighLight = Color(0xFFE8E9DE)\nval surfaceContainerHighestLight = Color(0xFFE2E3D8)\n\nval primaryDark = Color(0xFFB1D18A)\nval onPrimaryDark = Color(0xFF1F3701)\nval primaryContainerDark = Color(0xFF354E16)\nval onPrimaryContainerDark = Color(0xFFCDEDA3)\nval secondaryDark = Color(0xFFBFCBAD)\nval onSecondaryDark = Color(0xFF2A331E)\nval secondaryContainerDark = Color(0xFF404A33)\nval onSecondaryContainerDark = Color(0xFFDCE7C8)\nval tertiaryDark = Color(0xFFA0D0CB)\nval onTertiaryDark = Color(0xFF003735)\nval tertiaryContainerDark = Color(0xFF1F4E4B)\nval onTertiaryContainerDark = Color(0xFFBCECE7)\nval errorDark = Color(0xFFFFB4AB)\nval onErrorDark = Color(0xFF690005)\nval errorContainerDark = Color(0xFF93000A)\nval onErrorContainerDark = Color(0xFFFFDAD6)\nval backgroundDark = Color(0xFF12140E)\nval onBackgroundDark = Color(0xFFE2E3D8)\nval surfaceDark = Color(0xFF12140E)\nval onSurfaceDark = Color(0xFFE2E3D8)\nval surfaceVariantDark = Color(0xFF44483D)\nval onSurfaceVariantDark = Color(0xFFC5C8BA)\nval outlineDark = Color(0xFF8F9285)\nval outlineVariantDark = Color(0xFF44483D)\nval scrimDark = Color(0xFF000000)\nval inverseSurfaceDark = Color(0xFFE2E3D8)\nval inverseOnSurfaceDark = Color(0xFF2F312A)\nval inversePrimaryDark = Color(0xFF4C662B)\nval surfaceDimDark = Color(0xFF12140E)\nval surfaceBrightDark = Color(0xFF383A32)\nval surfaceContainerLowestDark = Color(0xFF0C0F09)\nval surfaceContainerLowDark = Color(0xFF1A1C16)\nval surfaceContainerDark = Color(0xFF1E201A)\nval surfaceContainerHighDark = Color(0xFF282B24)\nval surfaceContainerHighestDark = Color(0xFF33362E)\n\nobject CustomColors {\n    var black = false\n\n    @OptIn(ExperimentalMaterial3Api::class)\n    val topBarColors: TopAppBarColors\n        @Composable get() =\n            TopAppBarDefaults.topAppBarColors(\n                containerColor = if (!black) colorScheme.surfaceContainer else colorScheme.surface,\n                scrolledContainerColor = if (!black) colorScheme.surfaceContainer else colorScheme.surface\n            )\n\n    val listItemColors: ListItemColors\n        @Composable get() =\n            ListItemDefaults.colors(containerColor = if (!black) colorScheme.surfaceBright else colorScheme.surfaceContainerHigh)\n\n    val selectedListItemColors: ListItemColors\n        @Composable get() =\n            ListItemDefaults.colors(\n                containerColor = colorScheme.secondaryContainer,\n                headlineColor = colorScheme.secondary,\n                leadingIconColor = colorScheme.onSecondaryContainer,\n                supportingColor = colorScheme.onSecondaryFixedVariant,\n                trailingIconColor = colorScheme.onSecondaryFixedVariant\n            )\n\n    val switchColors: SwitchColors\n        @Composable get() = SwitchDefaults.colors(\n            checkedIconColor = colorScheme.primary,\n        )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Shape.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.foundation.shape.CornerBasedShape\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.runtime.Composable\n\nobject TomatoShapeDefaults {\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val topListItemShape: RoundedCornerShape\n        @Composable get() =\n            RoundedCornerShape(\n                topStart = shapes.largeIncreased.topStart,\n                topEnd = shapes.largeIncreased.topEnd,\n                bottomStart = shapes.extraSmall.bottomStart,\n                bottomEnd = shapes.extraSmall.bottomStart\n            )\n\n    val middleListItemShape: RoundedCornerShape\n        @Composable get() = RoundedCornerShape(shapes.extraSmall.topStart)\n\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val bottomListItemShape: RoundedCornerShape\n        @Composable get() =\n            RoundedCornerShape(\n                topStart = shapes.extraSmall.topStart,\n                topEnd = shapes.extraSmall.topEnd,\n                bottomStart = shapes.largeIncreased.bottomStart,\n                bottomEnd = shapes.largeIncreased.bottomEnd\n            )\n\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val cardShape: CornerBasedShape\n        @Composable get() = shapes.largeIncreased\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Theme.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport android.app.Activity\nimport android.os.Build\nimport androidx.compose.foundation.isSystemInDarkTheme\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialExpressiveTheme\nimport androidx.compose.material3.MotionScheme\nimport androidx.compose.material3.darkColorScheme\nimport androidx.compose.material3.dynamicDarkColorScheme\nimport androidx.compose.material3.dynamicLightColorScheme\nimport androidx.compose.material3.lightColorScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.SideEffect\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalView\nimport androidx.core.view.WindowCompat\nimport com.materialkolor.dynamiccolor.ColorSpec\nimport com.materialkolor.rememberDynamicColorScheme\n\nprivate val lightScheme = lightColorScheme(\n    primary = primaryLight,\n    onPrimary = onPrimaryLight,\n    primaryContainer = primaryContainerLight,\n    onPrimaryContainer = onPrimaryContainerLight,\n    secondary = secondaryLight,\n    onSecondary = onSecondaryLight,\n    secondaryContainer = secondaryContainerLight,\n    onSecondaryContainer = onSecondaryContainerLight,\n    tertiary = tertiaryLight,\n    onTertiary = onTertiaryLight,\n    tertiaryContainer = tertiaryContainerLight,\n    onTertiaryContainer = onTertiaryContainerLight,\n    error = errorLight,\n    onError = onErrorLight,\n    errorContainer = errorContainerLight,\n    onErrorContainer = onErrorContainerLight,\n    background = backgroundLight,\n    onBackground = onBackgroundLight,\n    surface = surfaceLight,\n    onSurface = onSurfaceLight,\n    surfaceVariant = surfaceVariantLight,\n    onSurfaceVariant = onSurfaceVariantLight,\n    outline = outlineLight,\n    outlineVariant = outlineVariantLight,\n    scrim = scrimLight,\n    inverseSurface = inverseSurfaceLight,\n    inverseOnSurface = inverseOnSurfaceLight,\n    inversePrimary = inversePrimaryLight,\n    surfaceDim = surfaceDimLight,\n    surfaceBright = surfaceBrightLight,\n    surfaceContainerLowest = surfaceContainerLowestLight,\n    surfaceContainerLow = surfaceContainerLowLight,\n    surfaceContainer = surfaceContainerLight,\n    surfaceContainerHigh = surfaceContainerHighLight,\n    surfaceContainerHighest = surfaceContainerHighestLight,\n)\n\nprivate val darkScheme = darkColorScheme(\n    primary = primaryDark,\n    onPrimary = onPrimaryDark,\n    primaryContainer = primaryContainerDark,\n    onPrimaryContainer = onPrimaryContainerDark,\n    secondary = secondaryDark,\n    onSecondary = onSecondaryDark,\n    secondaryContainer = secondaryContainerDark,\n    onSecondaryContainer = onSecondaryContainerDark,\n    tertiary = tertiaryDark,\n    onTertiary = onTertiaryDark,\n    tertiaryContainer = tertiaryContainerDark,\n    onTertiaryContainer = onTertiaryContainerDark,\n    error = errorDark,\n    onError = onErrorDark,\n    errorContainer = errorContainerDark,\n    onErrorContainer = onErrorContainerDark,\n    background = backgroundDark,\n    onBackground = onBackgroundDark,\n    surface = surfaceDark,\n    onSurface = onSurfaceDark,\n    surfaceVariant = surfaceVariantDark,\n    onSurfaceVariant = onSurfaceVariantDark,\n    outline = outlineDark,\n    outlineVariant = outlineVariantDark,\n    scrim = scrimDark,\n    inverseSurface = inverseSurfaceDark,\n    inverseOnSurface = inverseOnSurfaceDark,\n    inversePrimary = inversePrimaryDark,\n    surfaceDim = surfaceDimDark,\n    surfaceBright = surfaceBrightDark,\n    surfaceContainerLowest = surfaceContainerLowestDark,\n    surfaceContainerLow = surfaceContainerLowDark,\n    surfaceContainer = surfaceContainerDark,\n    surfaceContainerHigh = surfaceContainerHighDark,\n    surfaceContainerHighest = surfaceContainerHighestDark,\n)\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TomatoTheme(\n    darkTheme: Boolean = isSystemInDarkTheme(),\n    seedColor: Color = Color.White,\n    dynamicColor: Boolean = true,\n    blackTheme: Boolean = false,\n    content: @Composable () -> Unit\n) {\n    val colorScheme = when {\n        dynamicColor && Build.VERSION.SDK_INT >= Build.VERSION_CODES.S -> {\n            val context = LocalContext.current\n            if (darkTheme) dynamicDarkColorScheme(context) else dynamicLightColorScheme(context)\n        }\n\n        darkTheme -> darkScheme\n        else -> lightScheme\n    }\n\n    val view = LocalView.current\n    if (!view.isInEditMode) {\n        SideEffect {\n            val window = (view.context as Activity).window\n            WindowCompat.getInsetsController(window, view).isAppearanceLightStatusBars = !darkTheme\n        }\n    }\n    CustomColors.black = blackTheme && darkTheme\n\n    val dynamicColorScheme = rememberDynamicColorScheme(\n        seedColor = when (seedColor) {\n            Color.White -> colorScheme.primary\n            else -> seedColor\n        },\n        isDark = darkTheme,\n        specVersion = if (blackTheme && darkTheme) ColorSpec.SpecVersion.SPEC_2021 else ColorSpec.SpecVersion.SPEC_2025,\n        isAmoled = blackTheme && darkTheme\n    )\n\n    val scheme =\n        if (seedColor == Color.White && !(blackTheme && darkTheme)) colorScheme\n        else dynamicColorScheme\n\n    MaterialExpressiveTheme(\n        colorScheme = scheme,\n        typography = Typography,\n        motionScheme = MotionScheme.expressive(),\n        content = content\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Type.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.material3.Typography\nimport androidx.compose.ui.text.ExperimentalTextApi\nimport androidx.compose.ui.text.font.Font\nimport androidx.compose.ui.text.font.FontFamily\nimport androidx.compose.ui.text.font.FontStyle\nimport androidx.compose.ui.text.font.FontVariation\nimport androidx.compose.ui.text.font.FontWeight\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interBody\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interLabel\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexHeadline\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTitle\n\nval TYPOGRAPHY = Typography()\n\n// Set of Material typography styles to start with\nval Typography = Typography(\n    displayLarge = TYPOGRAPHY.displayLarge.copy(fontFamily = robotoFlexHeadline),\n    displayMedium = TYPOGRAPHY.displayMedium.copy(fontFamily = robotoFlexHeadline),\n    displaySmall = TYPOGRAPHY.displaySmall.copy(fontFamily = robotoFlexHeadline),\n    headlineLarge = TYPOGRAPHY.headlineLarge.copy(fontFamily = robotoFlexHeadline),\n    headlineMedium = TYPOGRAPHY.headlineMedium.copy(fontFamily = robotoFlexHeadline),\n    headlineSmall = TYPOGRAPHY.headlineSmall.copy(fontFamily = robotoFlexHeadline),\n    titleLarge = TYPOGRAPHY.titleLarge.copy(fontFamily = robotoFlexTitle),\n    titleMedium = TYPOGRAPHY.titleMedium.copy(fontFamily = robotoFlexTitle),\n    titleSmall = TYPOGRAPHY.titleSmall.copy(fontFamily = robotoFlexTitle),\n    bodyLarge = TYPOGRAPHY.bodyLarge.copy(fontFamily = interBody),\n    bodyMedium = TYPOGRAPHY.bodyMedium.copy(fontFamily = interBody),\n    bodySmall = TYPOGRAPHY.bodySmall.copy(fontFamily = interBody),\n    labelLarge = TYPOGRAPHY.labelLarge.copy(fontFamily = interLabel),\n    labelMedium = TYPOGRAPHY.labelMedium.copy(fontFamily = interLabel),\n    labelSmall = TYPOGRAPHY.labelSmall.copy(fontFamily = interLabel)\n)\n\n@OptIn(ExperimentalTextApi::class)\nobject AppFonts {\n    val interClock = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Bold,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val interBody = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Normal,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val interLabel = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Medium,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val robotoFlexTopBar = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(125f),\n                FontVariation.weight(1000),\n                FontVariation.grade(0),\n                FontVariation.Setting(\"XOPQ\", 96F),\n                FontVariation.Setting(\"XTRA\", 500F),\n                FontVariation.Setting(\"YOPQ\", 79F),\n                FontVariation.Setting(\"YTAS\", 750F),\n                FontVariation.Setting(\"YTDE\", -203F),\n                FontVariation.Setting(\"YTFI\", 738F),\n                FontVariation.Setting(\"YTLC\", 514F),\n                FontVariation.Setting(\"YTUC\", 712F)\n            )\n        )\n    )\n\n    val robotoFlexHeadline = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(130f),\n                FontVariation.weight(600),\n                FontVariation.grade(0)\n            )\n        )\n    )\n\n    val robotoFlexTitle = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(130f),\n                FontVariation.weight(700),\n                FontVariation.grade(0)\n            )\n        )\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\AlarmDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.LocalContentColor\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.CompositionLocalProvider\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.window.Dialog\nimport androidx.compose.ui.window.DialogProperties\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Composable\nfun AlarmDialog(\n    modifier: Modifier = Modifier,\n    stopAlarm: () -> Unit\n) {\n    Dialog(\n        onDismissRequest = stopAlarm,\n        properties = DialogProperties(\n            usePlatformDefaultWidth = false,\n            decorFitsSystemWindows = false\n        )\n    ) {\n        Box(\n            contentAlignment = Alignment.Center,\n            modifier = modifier\n                .fillMaxSize()\n                .background(colorScheme.primaryContainer)\n                .clickable(onClick = stopAlarm)\n        ) {\n            CompositionLocalProvider(LocalContentColor provides colorScheme.onPrimaryContainer) {\n                Column(modifier = Modifier.padding(24.dp)) {\n                    Icon(\n                        painter = painterResource(R.drawable.alarm),\n                        contentDescription = stringResource(R.string.alarm),\n                        modifier = Modifier\n                            .align(Alignment.CenterHorizontally)\n                            .size(40.dp)\n                    )\n                    Spacer(Modifier.height(16.dp))\n                    Text(\n                        text = stringResource(R.string.stop_alarm_question),\n                        style = typography.headlineSmall,\n                        modifier = Modifier.align(Alignment.CenterHorizontally)\n                    )\n                    Spacer(Modifier.height(16.dp))\n                    Text(\n                        text = stringResource(R.string.stop_alarm_dialog_text),\n                        textAlign = TextAlign.Center\n                    )\n                    Spacer(modifier = Modifier.height(24.dp))\n                    Button(\n                        onClick = stopAlarm,\n                        modifier = Modifier.align(Alignment.End),\n                    ) {\n                        Text(stringResource(R.string.stop_alarm))\n                    }\n                }\n            }\n        }\n    }\n}\n\n@Preview\n@Composable\nfun AlarmDialogPreview() {\n    TomatoTheme {\n        AlarmDialog(stopAlarm = {})\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\TimerScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen\n\nimport android.Manifest\nimport android.os.Build\nimport androidx.activity.compose.rememberLauncherForActivityResult\nimport androidx.activity.result.contract.ActivityResultContracts\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.SharedTransitionScope\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.animation.expandVertically\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.shrinkVertically\nimport androidx.compose.animation.slideInVertically\nimport androidx.compose.animation.slideOutVertically\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.interaction.MutableInteractionSource\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.aspectRatio\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.layout.widthIn\nimport androidx.compose.foundation.rememberScrollState\nimport androidx.compose.foundation.verticalScroll\nimport androidx.compose.material3.ButtonGroup\nimport androidx.compose.material3.ButtonGroupDefaults\nimport androidx.compose.material3.CircularProgressIndicator\nimport androidx.compose.material3.CircularWavyProgressIndicator\nimport androidx.compose.material3.DropdownMenuItem\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledIconToggleButton\nimport androidx.compose.material3.FilledTonalIconButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Surface\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Alignment.Companion.CenterHorizontally\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.graphics.StrokeCap\nimport androidx.compose.ui.graphics.drawscope.Stroke\nimport androidx.compose.ui.hapticfeedback.HapticFeedbackType\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalDensity\nimport androidx.compose.ui.platform.LocalHapticFeedback\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Devices\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.navigation3.ui.LocalNavAnimatedContentScope\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\n\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun SharedTransitionScope.TimerScreen(\n    timerState: TimerState,\n    isPlus: Boolean,\n    progress: () -> Float,\n    onAction: (TimerAction) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val motionScheme = motionScheme\n    val haptic = LocalHapticFeedback.current\n\n    val color by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.primary\n        else colorScheme.tertiary,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val onColor by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.onPrimary\n        else colorScheme.onTertiary,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val colorContainer by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.secondaryContainer\n        else colorScheme.tertiaryContainer,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n\n    val permissionLauncher = rememberLauncherForActivityResult(\n        contract = ActivityResultContracts.RequestPermission(),\n        onResult = {}\n    )\n\n    val scrollBehavior = TopAppBarDefaults.exitUntilCollapsedScrollBehavior()\n\n    Column(modifier = modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        TopAppBar(\n            title = {\n                AnimatedContent(\n                    if (!timerState.showBrandTitle) timerState.timerMode else TimerMode.BRAND,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    },\n                    contentAlignment = Alignment.Center,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    when (it) {\n                        TimerMode.BRAND ->\n                            Text(\n                                if (!isPlus) stringResource(R.string.app_name)\n                                else stringResource(R.string.app_name_plus),\n                                style = TextStyle(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp,\n                                    color = colorScheme.error\n                                ),\n                                textAlign = TextAlign.Center\n                            )\n\n                        TimerMode.FOCUS ->\n                            Text(\n                                stringResource(R.string.focus),\n                                style = TextStyle(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp,\n                                    color = colorScheme.primary\n                                ),\n                                textAlign = TextAlign.Center\n                            )\n\n                        TimerMode.SHORT_BREAK -> Text(\n                            stringResource(R.string.short_break),\n                            style = TextStyle(\n                                fontFamily = robotoFlexTopBar,\n                                fontSize = 32.sp,\n                                lineHeight = 32.sp,\n                                color = colorScheme.tertiary\n                            ),\n                            textAlign = TextAlign.Center\n                        )\n\n                        TimerMode.LONG_BREAK -> Text(\n                            stringResource(R.string.long_break),\n                            style = TextStyle(\n                                fontFamily = robotoFlexTopBar,\n                                fontSize = 32.sp,\n                                lineHeight = 32.sp,\n                                color = colorScheme.tertiary\n                            ),\n                            textAlign = TextAlign.Center\n                        )\n                    }\n                }\n            },\n            subtitle = {},\n            titleHorizontalAlignment = CenterHorizontally,\n            scrollBehavior = scrollBehavior\n        )\n\n        Column(\n            verticalArrangement = Arrangement.Center,\n            horizontalAlignment = CenterHorizontally,\n            modifier = Modifier\n                .fillMaxSize()\n                .verticalScroll(rememberScrollState())\n        ) {\n            Column(horizontalAlignment = CenterHorizontally) {\n                Box(contentAlignment = Alignment.Center) {\n                    if (timerState.timerMode == TimerMode.FOCUS) {\n                        CircularProgressIndicator(\n                            progress = progress,\n                            modifier = Modifier\n                                .sharedBounds(\n                                    sharedContentState = this@TimerScreen.rememberSharedContentState(\n                                        \"focus progress\"\n                                    ),\n                                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                                )\n                                .widthIn(max = 350.dp)\n                                .fillMaxWidth(0.9f)\n                                .aspectRatio(1f),\n                            color = color,\n                            trackColor = colorContainer,\n                            strokeWidth = 16.dp,\n                            gapSize = 8.dp\n                        )\n                    } else {\n                        CircularWavyProgressIndicator(\n                            progress = progress,\n                            modifier = Modifier\n                                .sharedBounds(\n                                    sharedContentState = this@TimerScreen.rememberSharedContentState(\n                                        \"break progress\"\n                                    ),\n                                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                                )\n                                .widthIn(max = 350.dp)\n                                .fillMaxWidth(0.9f)\n                                .aspectRatio(1f),\n                            color = color,\n                            trackColor = colorContainer,\n                            stroke = Stroke(\n                                width = with(LocalDensity.current) {\n                                    16.dp.toPx()\n                                },\n                                cap = StrokeCap.Round,\n                            ),\n                            trackStroke = Stroke(\n                                width = with(LocalDensity.current) {\n                                    16.dp.toPx()\n                                },\n                                cap = StrokeCap.Round,\n                            ),\n                            wavelength = 60.dp,\n                            gapSize = 8.dp\n                        )\n                    }\n                    var expanded by remember { mutableStateOf(timerState.showBrandTitle) }\n                    Column(\n                        horizontalAlignment = CenterHorizontally,\n                        modifier = Modifier\n                            .clip(shapes.largeIncreased)\n                            .clickable(onClick = { expanded = !expanded })\n                    ) {\n                        LaunchedEffect(timerState.showBrandTitle) {\n                            expanded = timerState.showBrandTitle\n                        }\n                        Text(\n                            text = timerState.timeStr,\n                            style = TextStyle(\n                                fontFamily = interClock,\n                                fontSize = 72.sp,\n                                letterSpacing = (-2).sp,\n                                fontFeatureSettings = \"tnum\"\n                            ),\n                            textAlign = TextAlign.Center,\n                            maxLines = 1,\n                            modifier = Modifier.sharedBounds(\n                                sharedContentState = this@TimerScreen.rememberSharedContentState(\"clock\"),\n                                animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                            )\n                        )\n                        AnimatedVisibility(\n                            expanded,\n                            enter = fadeIn(motionScheme.defaultEffectsSpec()) +\n                                    expandVertically(motionScheme.defaultSpatialSpec()),\n                            exit = fadeOut(motionScheme.defaultEffectsSpec()) +\n                                    shrinkVertically(motionScheme.defaultSpatialSpec())\n                        ) {\n                            Text(\n                                stringResource(\n                                    R.string.timer_session_count,\n                                    timerState.currentFocusCount,\n                                    timerState.totalFocusCount\n                                ),\n                                fontFamily = interClock,\n                                style = typography.titleLarge,\n                                color = colorScheme.outline\n                            )\n                        }\n                    }\n                }\n                val interactionSources = remember { List(3) { MutableInteractionSource() } }\n                ButtonGroup(\n                    overflowIndicator = { state ->\n                        ButtonGroupDefaults.OverflowIndicator(\n                            state,\n                            colors = IconButtonDefaults.filledTonalIconButtonColors(),\n                            modifier = Modifier.size(64.dp, 96.dp)\n                        )\n                    },\n                    modifier = Modifier.padding(16.dp)\n                ) {\n                    customItem(\n                        {\n                            FilledIconToggleButton(\n                                onCheckedChange = { checked ->\n                                    onAction(TimerAction.ToggleTimer)\n\n                                    if (checked) haptic.performHapticFeedback(HapticFeedbackType.ToggleOn)\n                                    else haptic.performHapticFeedback(HapticFeedbackType.ToggleOff)\n\n                                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU && checked) {\n                                        permissionLauncher.launch(Manifest.permission.POST_NOTIFICATIONS)\n                                    }\n                                },\n                                checked = timerState.timerRunning,\n                                colors = IconButtonDefaults.filledIconToggleButtonColors(\n                                    checkedContainerColor = color,\n                                    checkedContentColor = onColor\n                                ),\n                                shapes = IconButtonDefaults.toggleableShapes(),\n                                interactionSource = interactionSources[0],\n                                modifier = Modifier\n                                    .size(width = 128.dp, height = 96.dp)\n                                    .animateWidth(interactionSources[0])\n                            ) {\n                                if (timerState.timerRunning) {\n                                    Icon(\n                                        painterResource(R.drawable.pause_large),\n                                        contentDescription = stringResource(R.string.pause),\n                                        modifier = Modifier.size(32.dp)\n                                    )\n                                } else {\n                                    Icon(\n                                        painterResource(R.drawable.play_large),\n                                        contentDescription = stringResource(R.string.play),\n                                        modifier = Modifier.size(32.dp)\n                                    )\n                                }\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    if (timerState.timerRunning) {\n                                        Icon(\n                                            painterResource(R.drawable.pause),\n                                            contentDescription = stringResource(R.string.pause)\n                                        )\n                                    } else {\n                                        Icon(\n                                            painterResource(R.drawable.play),\n                                            contentDescription = stringResource(R.string.play)\n                                        )\n                                    }\n                                },\n                                text = {\n                                    Text(\n                                        if (timerState.timerRunning) stringResource(R.string.pause) else stringResource(\n                                            R.string.play\n                                        )\n                                    )\n                                },\n                                onClick = {\n                                    onAction(TimerAction.ToggleTimer)\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n\n                    customItem(\n                        {\n                            FilledTonalIconButton(\n                                onClick = {\n                                    onAction(TimerAction.ResetTimer)\n                                    haptic.performHapticFeedback(HapticFeedbackType.VirtualKey)\n                                },\n                                colors = IconButtonDefaults.filledTonalIconButtonColors(\n                                    containerColor = colorContainer\n                                ),\n                                shapes = IconButtonDefaults.shapes(),\n                                interactionSource = interactionSources[1],\n                                modifier = Modifier\n                                    .size(96.dp)\n                                    .animateWidth(interactionSources[1])\n                            ) {\n                                Icon(\n                                    painterResource(R.drawable.restart_large),\n                                    contentDescription = stringResource(R.string.restart),\n                                    modifier = Modifier.size(32.dp)\n                                )\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    Icon(\n                                        painterResource(R.drawable.restart),\n                                        stringResource(R.string.restart)\n                                    )\n                                },\n                                text = { Text(stringResource(R.string.restart)) },\n                                onClick = {\n                                    onAction(TimerAction.ResetTimer)\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n\n                    customItem(\n                        {\n                            FilledTonalIconButton(\n                                onClick = {\n                                    onAction(TimerAction.SkipTimer(fromButton = true))\n                                    haptic.performHapticFeedback(HapticFeedbackType.VirtualKey)\n                                },\n                                colors = IconButtonDefaults.filledTonalIconButtonColors(\n                                    containerColor = colorContainer\n                                ),\n                                shapes = IconButtonDefaults.shapes(),\n                                interactionSource = interactionSources[2],\n                                modifier = Modifier\n                                    .size(64.dp, 96.dp)\n                                    .animateWidth(interactionSources[2])\n                            ) {\n                                Icon(\n                                    painterResource(R.drawable.skip_next_large),\n                                    contentDescription = stringResource(R.string.skip_to_next),\n                                    modifier = Modifier.size(32.dp)\n                                )\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    Icon(\n                                        painterResource(R.drawable.skip_next),\n                                        stringResource(R.string.skip_to_next)\n                                    )\n                                },\n                                text = { Text(stringResource(R.string.skip_to_next)) },\n                                onClick = {\n                                    onAction(TimerAction.SkipTimer(fromButton = true))\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n                }\n            }\n\n            Spacer(Modifier.height(32.dp))\n\n            Column(horizontalAlignment = CenterHorizontally) {\n                Text(stringResource(R.string.up_next), style = typography.titleSmall)\n                AnimatedContent(\n                    timerState.nextTimeStr,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    }\n                ) {\n                    Text(\n                        it,\n                        style = TextStyle(\n                            fontFamily = interClock,\n                            fontSize = 22.sp,\n                            lineHeight = 28.sp,\n                            color = if (timerState.nextTimerMode == TimerMode.FOCUS) colorScheme.primary else colorScheme.tertiary,\n                            textAlign = TextAlign.Center\n                        ),\n                        modifier = Modifier.width(200.dp)\n                    )\n                }\n                AnimatedContent(\n                    timerState.nextTimerMode,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    }\n                ) {\n                    Text(\n                        when (it) {\n                            TimerMode.FOCUS -> stringResource(R.string.focus)\n                            TimerMode.SHORT_BREAK -> stringResource(R.string.short_break)\n                            else -> stringResource(R.string.long_break)\n                        },\n                        style = typography.titleMediumEmphasized,\n                        textAlign = TextAlign.Center,\n                        modifier = Modifier.width(200.dp)\n                    )\n                }\n            }\n\n            Spacer(Modifier.height(16.dp))\n        }\n    }\n}\n\n@Preview(\n    showSystemUi = true,\n    device = Devices.PIXEL_9_PRO\n)\n@Composable\nfun TimerScreenPreview() {\n    val timerState = TimerState(\n        timeStr = \"03:34\", nextTimeStr = \"5:00\", timerMode = TimerMode.FOCUS, timerRunning = true\n    )\n    TomatoTheme {\n        Surface {\n            SharedTransitionLayout {\n                TimerScreen(\n                    timerState,\n                    isPlus = true,\n                    { 0.3f },\n                    {}\n                )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\nimport android.provider.Settings\nimport androidx.core.net.toUri\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.FlowPreview\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.SharingStarted\nimport kotlinx.coroutines.flow.StateFlow\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.combine\nimport kotlinx.coroutines.flow.stateIn\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.data.PreferenceRepository\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.data.StatRepository\nimport org.nsh07.pomodoro.data.TimerRepository\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.utils.millisecondsToStr\nimport java.time.LocalDate\nimport java.time.temporal.ChronoUnit\n\n@OptIn(FlowPreview::class)\nclass TimerViewModel(\n    private val preferenceRepository: PreferenceRepository,\n    private val serviceHelper: ServiceHelper,\n    private val statRepository: StatRepository,\n    private val timerRepository: TimerRepository,\n    private val _timerState: MutableStateFlow<TimerState>,\n    private val _time: MutableStateFlow<Long>\n) : ViewModel() {\n    val timerState: StateFlow<TimerState> = _timerState.asStateFlow()\n\n    val time: StateFlow<Long> = _time.asStateFlow()\n\n    val progress = _time.combine(_timerState) { remainingTime, uiState ->\n        (uiState.totalTime.toFloat() - remainingTime) / uiState.totalTime\n    }.stateIn(viewModelScope, SharingStarted.WhileSubscribed(5000), 0f)\n\n    private var cycles = 0\n\n    private var startTime = 0L\n    private var pauseTime = 0L\n    private var pauseDuration = 0L\n\n    init {\n        if (!timerRepository.serviceRunning.value)\n            viewModelScope.launch(Dispatchers.IO) {\n                timerRepository.focusTime =\n                    preferenceRepository.getIntPreference(\"focus_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"focus_time\",\n                            timerRepository.focusTime.toInt()\n                        ).toLong()\n                timerRepository.shortBreakTime =\n                    preferenceRepository.getIntPreference(\"short_break_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"short_break_time\",\n                            timerRepository.shortBreakTime.toInt()\n                        ).toLong()\n                timerRepository.longBreakTime =\n                    preferenceRepository.getIntPreference(\"long_break_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"long_break_time\",\n                            timerRepository.longBreakTime.toInt()\n                        ).toLong()\n                timerRepository.sessionLength =\n                    preferenceRepository.getIntPreference(\"session_length\")\n                        ?: preferenceRepository.saveIntPreference(\n                            \"session_length\",\n                            timerRepository.sessionLength\n                        )\n\n                timerRepository.alarmEnabled =\n                    preferenceRepository.getBooleanPreference(\"alarm_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"alarm_enabled\", true)\n                timerRepository.vibrateEnabled =\n                    preferenceRepository.getBooleanPreference(\"vibrate_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", true)\n                timerRepository.dndEnabled =\n                    preferenceRepository.getBooleanPreference(\"dnd_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"dnd_enabled\", false)\n\n                timerRepository.alarmSoundUri = (\n                        preferenceRepository.getStringPreference(\"alarm_sound\")\n                            ?: preferenceRepository.saveStringPreference(\n                                \"alarm_sound\",\n                                (Settings.System.DEFAULT_ALARM_ALERT_URI\n                                    ?: Settings.System.DEFAULT_RINGTONE_URI).toString()\n                            )\n                        ).toUri()\n\n                _time.update { timerRepository.focusTime }\n                cycles = 0\n                startTime = 0L\n                pauseTime = 0L\n                pauseDuration = 0L\n\n                _timerState.update { currentState ->\n                    currentState.copy(\n                        timerMode = TimerMode.FOCUS,\n                        timeStr = millisecondsToStr(time.value),\n                        totalTime = time.value,\n                        nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                        nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                        currentFocusCount = 1,\n                        totalFocusCount = timerRepository.sessionLength\n                    )\n                }\n\n                var lastDate = statRepository.getLastDate()\n                val today = LocalDate.now()\n\n                // Fills dates between today and lastDate with 0s to ensure continuous history\n                if (lastDate != null) {\n                    while (ChronoUnit.DAYS.between(lastDate, today) > 0) {\n                        lastDate = lastDate?.plusDays(1)\n                        statRepository.insertStat(Stat(lastDate!!, 0, 0, 0, 0, 0))\n                    }\n                } else {\n                    statRepository.insertStat(Stat(today, 0, 0, 0, 0, 0))\n                }\n\n                delay(1500)\n\n                _timerState.update { currentState ->\n                    currentState.copy(showBrandTitle = false)\n                }\n            }\n    }\n\n    fun onAction(action: TimerAction) {\n        serviceHelper.startService(action)\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appPreferenceRepository = application.container.appPreferenceRepository\n                val appStatRepository = application.container.appStatRepository\n                val appTimerRepository = application.container.appTimerRepository\n                val serviceHelper = application.container.serviceHelper\n                val timerState = application.container.timerState\n                val time = application.container.time\n\n                TimerViewModel(\n                    preferenceRepository = appPreferenceRepository,\n                    serviceHelper = serviceHelper,\n                    statRepository = appStatRepository,\n                    timerRepository = appTimerRepository,\n                    _timerState = timerState,\n                    _time = time\n                )\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\utils\\Utils.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.utils\n\nimport androidx.compose.ui.graphics.Color\nimport java.util.Locale\nimport java.util.concurrent.TimeUnit\n\nfun millisecondsToStr(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%02d:%02d\",\n        TimeUnit.MILLISECONDS.toMinutes(t),\n        TimeUnit.MILLISECONDS.toSeconds(t) % TimeUnit.MINUTES.toSeconds(1)\n    )\n}\n\nfun millisecondsToHours(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dh\",\n        TimeUnit.MILLISECONDS.toHours(t)\n    )\n}\n\nfun millisecondsToMinutes(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dm\",\n        TimeUnit.MILLISECONDS.toMinutes(t)\n    )\n}\n\nfun millisecondsToHoursMinutes(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dh %dm\", TimeUnit.MILLISECONDS.toHours(t),\n        TimeUnit.MILLISECONDS.toMinutes(t) % TimeUnit.HOURS.toMinutes(1)\n    )\n}\n\n/**\n * Extension function for [String] to convert it to a [androidx.compose.ui.graphics.Color]\n *\n * The base string must be of the format produced by [androidx.compose.ui.graphics.Color.toString],\n * i.e, the color black with 100% opacity in sRGB would be represented by:\n *\n *      Color(0.0, 0.0, 0.0, 1.0, sRGB IEC61966-2.1)\n */\nfun String.toColor(): Color {\n    // Sample string: Color(0.0, 0.0, 0.0, 1.0, sRGB IEC61966-2.1)\n    val comma1 = this.indexOf(',')\n    val comma2 = this.indexOf(',', comma1 + 1)\n    val comma3 = this.indexOf(',', comma2 + 1)\n    val comma4 = this.indexOf(',', comma3 + 1)\n\n    val r = this.substringAfter('(').substringBefore(',').toFloat()\n    val g = this.slice(comma1 + 1..comma2 - 1).toFloat()\n    val b = this.slice(comma2 + 1..comma3 - 1).toFloat()\n    val a = this.slice(comma3 + 1..comma4 - 1).toFloat()\n    return Color(r, g, b, a)\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\play\\java\\org\\nsh07\\pomodoro\\billing\\TomatoPlusPaywallDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.FilledTonalIconButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Scaffold\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.unit.dp\nimport com.revenuecat.purchases.ui.revenuecatui.Paywall\nimport com.revenuecat.purchases.ui.revenuecatui.PaywallOptions\nimport com.revenuecat.purchases.ui.revenuecatui.customercenter.CustomerCenter\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TomatoPlusPaywallDialog(\n    isPlus: Boolean,\n    onDismiss: () -> Unit\n) {\n    val paywallOptions = remember {\n        PaywallOptions.Builder(dismissRequest = onDismiss).build()\n    }\n\n    Scaffold { innerPadding ->\n        if (!isPlus) {\n            Paywall(paywallOptions)\n\n            FilledTonalIconButton(\n                onClick = onDismiss,\n                modifier = Modifier\n                    .padding(innerPadding)\n                    .padding(16.dp)\n            ) {\n                Icon(\n                    painterResource(R.drawable.arrow_back),\n                    null\n                )\n            }\n        } else {\n            CustomerCenter(onDismiss = onDismiss)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\play\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutButtons.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ButtonColors\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TopButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://hosted.weblate.org/engage/tomato/\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.weblate),\n                contentDescription = null,\n                modifier = Modifier.size(24.dp)\n            )\n\n            Text(text = stringResource(R.string.help_with_translation))\n        }\n    }\n}\n\n@Composable\nfun BottomButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://play.google.com/store/apps/details?id=org.nsh07.pomodoro\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.play_store),\n                contentDescription = null,\n                modifier = Modifier.size(24.dp)\n            )\n\n            Text(text = stringResource(R.string.rate_on_google_play))\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\TomatoPlusPaywallDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "THREADING",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport androidx.activity.compose.BackHandler\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n@Composable\nfun TomatoPlusPaywallDialog(\n    isPlus: Boolean,\n    onDismiss: () -> Unit\n) {\n    val uriHandler = LocalUriHandler.current\n\n    BackHandler(enabled = true, onDismiss)\n\n    Box(\n        contentAlignment = Alignment.Center,\n        modifier = Modifier\n            .fillMaxSize()\n            .background(colorScheme.surface)\n    ) {\n        Column(horizontalAlignment = Alignment.CenterHorizontally) {\n            Icon(\n                painterResource(R.drawable.bmc),\n                null,\n                tint = colorScheme.onSurface\n            )\n            Spacer(Modifier.height(16.dp))\n            Text(\n                stringResource(R.string.tomato_foss),\n                style = typography.headlineSmall,\n                fontFamily = robotoFlexTopBar,\n                color = colorScheme.onSurface\n            )\n            Spacer(Modifier.height(8.dp))\n            Text(\n                stringResource(R.string.tomato_foss_desc, \"BuyMeACoffee\"),\n                textAlign = TextAlign.Center,\n                color = colorScheme.onSurfaceVariant,\n                modifier = Modifier.padding(horizontal = 24.dp)\n            )\n            Spacer(Modifier.height(16.dp))\n            Button(onClick = { uriHandler.openUri(\"https://coff.ee/nsh07\") }) {\n                Text(stringResource(R.string.bmc))\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\foss\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutButtons.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ButtonColors\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TopButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://coff.ee/nsh07\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.bmc),\n                contentDescription = null,\n                modifier = Modifier.height(24.dp)\n            )\n\n            Text(text = stringResource(R.string.bmc))\n        }\n    }\n}\n\n@Composable\nfun BottomButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://hosted.weblate.org/engage/tomato/\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.weblate),\n                contentDescription = null,\n                modifier = Modifier.size(20.dp)\n            )\n\n            Text(text = stringResource(R.string.help_with_translation))\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\AppContainer.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.app.NotificationManager\nimport android.app.PendingIntent\nimport android.content.Context\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.core.app.NotificationCompat\nimport androidx.core.app.NotificationCompat.VISIBILITY_PUBLIC\nimport androidx.core.app.NotificationManagerCompat\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.billing.BillingManager\nimport org.nsh07.pomodoro.billing.BillingManagerProvider\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.service.addTimerActions\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport org.nsh07.pomodoro.utils.millisecondsToStr\n\ninterface AppContainer {\n    val appPreferenceRepository: AppPreferenceRepository\n    val appStatRepository: AppStatRepository\n    val appTimerRepository: AppTimerRepository\n    val billingManager: BillingManager\n    val notificationManager: NotificationManagerCompat\n    val notificationManagerService: NotificationManager\n    val notificationBuilder: NotificationCompat.Builder\n    val serviceHelper: ServiceHelper\n    val timerState: MutableStateFlow<TimerState>\n    val time: MutableStateFlow<Long>\n    var activityTurnScreenOn: (Boolean) -> Unit\n}\n\nclass DefaultAppContainer(context: Context) : AppContainer {\n\n    override val appPreferenceRepository: AppPreferenceRepository by lazy {\n        AppPreferenceRepository(AppDatabase.getDatabase(context).preferenceDao())\n    }\n\n    override val appStatRepository: AppStatRepository by lazy {\n        AppStatRepository(AppDatabase.getDatabase(context).statDao())\n    }\n\n    override val appTimerRepository: AppTimerRepository by lazy { AppTimerRepository() }\n\n    override val billingManager: BillingManager by lazy { BillingManagerProvider.manager }\n\n    override val notificationManager: NotificationManagerCompat by lazy {\n        NotificationManagerCompat.from(context)\n    }\n\n    override val notificationManagerService: NotificationManager =\n        context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n\n    override val notificationBuilder: NotificationCompat.Builder by lazy {\n        NotificationCompat.Builder(context, \"timer\")\n            .setSmallIcon(R.drawable.tomato_logo_notification)\n            .setColor(Color.Red.toArgb())\n            .setContentIntent(\n                PendingIntent.getActivity(\n                    context,\n                    0,\n                    context.packageManager.getLaunchIntentForPackage(context.packageName),\n                    PendingIntent.FLAG_IMMUTABLE\n                )\n            )\n            .addTimerActions(context, R.drawable.play, context.getString(R.string.start))\n            .setShowWhen(true)\n            .setSilent(true)\n            .setOngoing(true)\n            .setRequestPromotedOngoing(true)\n            .setVisibility(VISIBILITY_PUBLIC)\n    }\n\n    override val serviceHelper: ServiceHelper by lazy {\n        ServiceHelper(context)\n    }\n\n    override val timerState: MutableStateFlow<TimerState> by lazy {\n        MutableStateFlow(\n            TimerState(\n                totalTime = appTimerRepository.focusTime,\n                timeStr = millisecondsToStr(appTimerRepository.focusTime),\n                nextTimeStr = millisecondsToStr(appTimerRepository.shortBreakTime)\n            )\n        )\n    }\n\n    override val time: MutableStateFlow<Long> by lazy {\n        MutableStateFlow(appTimerRepository.focusTime)\n    }\n\n    override var activityTurnScreenOn: (Boolean) -> Unit = {}\n\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\TimerRepository.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.net.Uri\nimport android.provider.Settings\nimport androidx.compose.material3.ColorScheme\nimport androidx.compose.material3.lightColorScheme\nimport kotlinx.coroutines.flow.MutableStateFlow\n\n/**\n * Interface that holds the timer durations for each timer type. This repository maintains a single\n * source of truth for the timer durations for the various ViewModels in the app.\n */\ninterface TimerRepository {\n    var focusTime: Long\n    var shortBreakTime: Long\n    var longBreakTime: Long\n\n    var sessionLength: Int\n\n    var timerFrequency: Float\n\n    var alarmEnabled: Boolean\n    var vibrateEnabled: Boolean\n    var dndEnabled: Boolean\n\n    var colorScheme: ColorScheme\n\n    var alarmSoundUri: Uri?\n\n    var serviceRunning: MutableStateFlow<Boolean>\n}\n\n/**\n * See [TimerRepository] for more details\n */\nclass AppTimerRepository : TimerRepository {\n    override var focusTime = 25 * 60 * 1000L\n    override var shortBreakTime = 5 * 60 * 1000L\n    override var longBreakTime = 15 * 60 * 1000L\n    override var sessionLength = 4\n    override var timerFrequency: Float = 60f\n    override var alarmEnabled = true\n    override var vibrateEnabled = true\n    override var dndEnabled: Boolean = false\n    override var colorScheme = lightColorScheme()\n    override var alarmSoundUri: Uri? =\n        Settings.System.DEFAULT_ALARM_ALERT_URI ?: Settings.System.DEFAULT_RINGTONE_URI\n    override var serviceRunning = MutableStateFlow(false)\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\MainActivity.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro\n\nimport android.os.Bundle\nimport androidx.activity.ComponentActivity\nimport androidx.activity.compose.setContent\nimport androidx.activity.enableEdgeToEdge\nimport androidx.activity.viewModels\nimport androidx.compose.foundation.isSystemInDarkTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport org.nsh07.pomodoro.ui.AppScreen\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsViewModel\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.toColor\n\nclass MainActivity : ComponentActivity() {\n\n    private val settingsViewModel: SettingsViewModel by viewModels(factoryProducer = { SettingsViewModel.Factory })\n\n    private val appContainer by lazy {\n        (application as TomatoApplication).container\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        enableEdgeToEdge()\n\n        appContainer.activityTurnScreenOn = {\n            setShowWhenLocked(it)\n            setTurnScreenOn(it)\n        }\n\n        setContent {\n            val settingsState by settingsViewModel.settingsState.collectAsStateWithLifecycle()\n\n            val darkTheme = when (settingsState.theme) {\n                \"dark\" -> true\n                \"light\" -> false\n                else -> isSystemInDarkTheme()\n            }\n\n            val seed = settingsState.colorScheme.toColor()\n\n            val isPlus by settingsViewModel.isPlus.collectAsStateWithLifecycle()\n\n            TomatoTheme(\n                darkTheme = darkTheme,\n                seedColor = seed,\n                blackTheme = settingsState.blackTheme\n            ) {\n                val colorScheme = colorScheme\n                LaunchedEffect(colorScheme) {\n                    appContainer.appTimerRepository.colorScheme = colorScheme\n                }\n\n                AppScreen(\n                    isPlus = isPlus,\n                    isAODEnabled = settingsState.aodEnabled,\n                    setTimerFrequency = {\n                        appContainer.appTimerRepository.timerFrequency = it\n                    }\n                )\n            }\n        }\n    }\n\n\n    override fun onStop() {\n        super.onStop()\n        // Reduce the timer loop frequency when not visible to save battery power\n        appContainer.appTimerRepository.timerFrequency = 1f\n    }\n\n    override fun onStart() {\n        super.onStart()\n        // Increase the timer loop frequency again when visible to make the progress smoother\n        appContainer.appTimerRepository.timerFrequency = 60f\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\service\\TimerService.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "TIME",
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.annotation.SuppressLint\nimport android.app.NotificationManager\nimport android.app.Service\nimport android.content.Intent\nimport android.media.AudioAttributes\nimport android.media.MediaPlayer\nimport android.os.Build\nimport android.os.IBinder\nimport android.os.SystemClock\nimport android.os.VibrationEffect\nimport android.os.Vibrator\nimport android.os.VibratorManager\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.core.app.NotificationCompat\nimport kotlinx.coroutines.CoroutineScope\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.Job\nimport kotlinx.coroutines.SupervisorJob\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport kotlinx.coroutines.runBlocking\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.utils.millisecondsToStr\nimport kotlin.text.Typography.middleDot\n\nclass TimerService : Service() {\n    private val appContainer by lazy {\n        (application as TomatoApplication).container\n    }\n\n    private val timerRepository by lazy { appContainer.appTimerRepository }\n    private val statRepository by lazy { appContainer.appStatRepository }\n    private val notificationManager by lazy { appContainer.notificationManager }\n    private val notificationManagerService by lazy { appContainer.notificationManagerService }\n    private val notificationBuilder by lazy { appContainer.notificationBuilder }\n    private val _timerState by lazy { appContainer.timerState }\n    private val _time by lazy { appContainer.time }\n\n    private val timeStateFlow by lazy { _time.asStateFlow() }\n\n    private var time: Long\n        get() = timeStateFlow.value\n        set(value) = _time.update { value }\n\n    private val timerState by lazy { _timerState.asStateFlow() }\n\n    private var cycles = 0\n    private var startTime = 0L\n    private var pauseTime = 0L\n    private var pauseDuration = 0L\n\n    private var job = SupervisorJob()\n    private val timerScope = CoroutineScope(Dispatchers.IO + job)\n    private val skipScope = CoroutineScope(Dispatchers.IO + job)\n\n    private var autoAlarmStopScope: Job? = null\n\n    private var alarm: MediaPlayer? = null\n    private val vibrator by lazy {\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {\n            val vibratorManager = getSystemService(VIBRATOR_MANAGER_SERVICE) as VibratorManager\n            vibratorManager.defaultVibrator\n        } else {\n            @Suppress(\"DEPRECATION\") getSystemService(VIBRATOR_SERVICE) as Vibrator\n        }\n    }\n\n    private val cs by lazy { timerRepository.colorScheme }\n\n    private lateinit var notificationStyle: NotificationCompat.ProgressStyle\n\n    override fun onBind(intent: Intent?): IBinder? {\n        return null\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        timerRepository.serviceRunning.update { true }\n        alarm = initializeMediaPlayer()\n    }\n\n    override fun onDestroy() {\n        timerRepository.serviceRunning.update { false }\n        runBlocking {\n            job.cancel()\n            saveTimeToDb()\n            setDoNotDisturb(false)\n            notificationManager.cancel(1)\n            alarm?.release()\n        }\n        super.onDestroy()\n    }\n\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n        when (intent?.action) {\n            Actions.TOGGLE.toString() -> {\n                startForegroundService()\n                toggleTimer()\n            }\n\n            Actions.RESET.toString() -> {\n                if (timerState.value.timerRunning) toggleTimer()\n                skipScope.launch {\n                    resetTimer()\n                    stopForegroundService()\n                }\n            }\n\n            Actions.SKIP.toString() -> skipScope.launch { skipTimer(true) }\n\n            Actions.STOP_ALARM.toString() -> stopAlarm()\n\n            Actions.UPDATE_ALARM_TONE.toString() -> updateAlarmTone()\n        }\n        return super.onStartCommand(intent, flags, startId)\n    }\n\n    private fun toggleTimer() {\n        updateProgressSegments()\n\n        if (timerState.value.timerRunning) {\n            setDoNotDisturb(false)\n            notificationBuilder.clearActions().addTimerActions(\n                this, R.drawable.play, getString(R.string.start)\n            )\n            showTimerNotification(time.toInt(), paused = true)\n            _timerState.update { currentState ->\n                currentState.copy(timerRunning = false)\n            }\n            pauseTime = SystemClock.elapsedRealtime()\n        } else {\n            if (timerState.value.timerMode == TimerMode.FOCUS) setDoNotDisturb(true)\n            else setDoNotDisturb(false)\n            notificationBuilder.clearActions().addTimerActions(\n                this, R.drawable.pause, getString(R.string.stop)\n            )\n            _timerState.update { it.copy(timerRunning = true) }\n            if (pauseTime != 0L) pauseDuration += SystemClock.elapsedRealtime() - pauseTime\n\n            var iterations = -1\n\n            timerScope.launch {\n                while (true) {\n                    if (!timerState.value.timerRunning) break\n                    if (startTime == 0L) startTime = SystemClock.elapsedRealtime()\n\n                    time = when (timerState.value.timerMode) {\n                        TimerMode.FOCUS -> timerRepository.focusTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n\n                        TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n\n                        else -> timerRepository.longBreakTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n                    }\n\n                    iterations =\n                        (iterations + 1) % timerRepository.timerFrequency.toInt().coerceAtLeast(1)\n\n                    if (iterations == 0) showTimerNotification(time.toInt())\n\n                    if (time < 0) {\n                        skipTimer()\n                        _timerState.update { currentState ->\n                            currentState.copy(timerRunning = false)\n                        }\n                        break\n                    } else {\n                        _timerState.update { currentState ->\n                            currentState.copy(\n                                timeStr = millisecondsToStr(time)\n                            )\n                        }\n                    }\n\n                    delay((1000f / timerRepository.timerFrequency).toLong())\n                }\n            }\n        }\n    }\n\n    @SuppressLint(\n        \"MissingPermission\",\n        \"StringFormatInvalid\"\n    ) // We check for the permission when pressing the Play button in the UI\n    fun showTimerNotification(\n        remainingTime: Int, paused: Boolean = false, complete: Boolean = false\n    ) {\n        if (complete) notificationBuilder.clearActions().addStopAlarmAction(this)\n\n        val totalTime = when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n            TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n            else -> timerRepository.longBreakTime.toInt()\n        }\n\n        val currentTimer = when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> getString(R.string.focus)\n            TimerMode.SHORT_BREAK -> getString(R.string.short_break)\n            else -> getString(R.string.long_break)\n        }\n\n        val nextTimer = when (timerState.value.nextTimerMode) {\n            TimerMode.FOCUS -> getString(R.string.focus)\n            TimerMode.SHORT_BREAK -> getString(R.string.short_break)\n            else -> getString(R.string.long_break)\n        }\n\n        val remainingTimeString = if ((remainingTime.toFloat() / 60000f) < 1.0f) \"< 1\"\n        else (remainingTime.toFloat() / 60000f).toInt()\n\n        notificationManager.notify(\n            1,\n            notificationBuilder\n                .setContentTitle(\n                    if (!complete) {\n                        \"$currentTimer  $middleDot  ${\n                            getString(R.string.min_remaining_notification, remainingTimeString)\n                        }\" + if (paused) \"  $middleDot  ${getString(R.string.paused)}\" else \"\"\n                    } else \"$currentTimer $middleDot ${getString(R.string.completed)}\"\n                )\n                .setContentText(\n                    getString(\n                        R.string.up_next_notification,\n                        nextTimer,\n                        timerState.value.nextTimeStr\n                    )\n                )\n                .setStyle(\n                    notificationStyle\n                        .setProgress( // Set the current progress by filling the previous intervals and part of the current interval\n                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.BAKLAVA) {\n                                (totalTime - remainingTime) + ((cycles + 1) / 2) * timerRepository.focusTime.toInt() + (cycles / 2) * timerRepository.shortBreakTime.toInt()\n                            } else (totalTime - remainingTime)\n                        )\n                )\n                .setWhen(System.currentTimeMillis() + remainingTime) // Sets the Live Activity/Now Bar chip time\n                .setShortCriticalText(millisecondsToStr(time.coerceAtLeast(0)))\n                .build()\n        )\n\n        if (complete) {\n            startAlarm()\n            _timerState.update { currentState ->\n                currentState.copy(alarmRinging = true)\n            }\n        }\n    }\n\n    private fun updateProgressSegments() {\n        notificationStyle = NotificationCompat.ProgressStyle()\n            .also {\n                // Add all the Focus, Short break and long break intervals in order\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.BAKLAVA) {\n                    // Android 16 and later supports live updates\n                    // Set progress bar sections if on Baklava or later\n                    for (i in 0..<timerRepository.sessionLength * 2) {\n                        if (i % 2 == 0) it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.focusTime.toInt()\n                            )\n                                .setColor(cs.primary.toArgb())\n                        )\n                        else if (i != (timerRepository.sessionLength * 2 - 1)) it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.shortBreakTime.toInt()\n                            ).setColor(cs.tertiary.toArgb())\n                        )\n                        else it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.longBreakTime.toInt()\n                            ).setColor(cs.tertiary.toArgb())\n                        )\n                    }\n                } else {\n                    it.addProgressSegment(\n                        NotificationCompat.ProgressStyle.Segment(\n                            when (timerState.value.timerMode) {\n                                TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n                                TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n                                else -> timerRepository.longBreakTime.toInt()\n                            }\n                        )\n                    )\n                }\n            }\n    }\n\n    private suspend fun resetTimer() {\n        updateProgressSegments()\n        saveTimeToDb()\n        time = timerRepository.focusTime\n        cycles = 0\n        startTime = 0L\n        pauseTime = 0L\n        pauseDuration = 0L\n\n        _timerState.update { currentState ->\n            currentState.copy(\n                timerMode = TimerMode.FOCUS,\n                timeStr = millisecondsToStr(time),\n                totalTime = time,\n                nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                currentFocusCount = 1,\n                totalFocusCount = timerRepository.sessionLength\n            )\n        }\n    }\n\n    private suspend fun skipTimer(fromButton: Boolean = false) {\n        updateProgressSegments()\n        saveTimeToDb()\n        updateProgressSegments()\n        showTimerNotification(0, paused = true, complete = !fromButton)\n        startTime = 0L\n        pauseTime = 0L\n        pauseDuration = 0L\n\n        cycles = (cycles + 1) % (timerRepository.sessionLength * 2)\n\n        if (cycles % 2 == 0) {\n            if (timerState.value.timerRunning) setDoNotDisturb(true)\n            time = timerRepository.focusTime\n            _timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = TimerMode.FOCUS,\n                    timeStr = millisecondsToStr(time),\n                    totalTime = time,\n                    nextTimerMode = if (cycles == (timerRepository.sessionLength - 1) * 2) TimerMode.LONG_BREAK else TimerMode.SHORT_BREAK,\n                    nextTimeStr = if (cycles == (timerRepository.sessionLength - 1) * 2) millisecondsToStr(\n                        timerRepository.longBreakTime\n                    ) else millisecondsToStr(\n                        timerRepository.shortBreakTime\n                    ),\n                    currentFocusCount = cycles / 2 + 1,\n                    totalFocusCount = timerRepository.sessionLength\n                )\n            }\n        } else {\n            if (timerState.value.timerRunning) setDoNotDisturb(false)\n            val long = cycles == (timerRepository.sessionLength * 2) - 1\n            time = if (long) timerRepository.longBreakTime else timerRepository.shortBreakTime\n\n            _timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = if (long) TimerMode.LONG_BREAK else TimerMode.SHORT_BREAK,\n                    timeStr = millisecondsToStr(time),\n                    totalTime = time,\n                    nextTimerMode = TimerMode.FOCUS,\n                    nextTimeStr = millisecondsToStr(timerRepository.focusTime)\n                )\n            }\n        }\n    }\n\n    fun startAlarm() {\n        if (timerRepository.alarmEnabled) alarm?.start()\n\n        appContainer.activityTurnScreenOn(true)\n\n        autoAlarmStopScope = CoroutineScope(Dispatchers.IO).launch {\n            delay(1 * 60 * 1000)\n            stopAlarm()\n        }\n\n        if (timerRepository.vibrateEnabled) {\n            if (!vibrator.hasVibrator()) {\n                return\n            }\n            val vibrationPattern = longArrayOf(0, 1000, 1000, 1000)\n            val repeat = 2\n            val effect = VibrationEffect.createWaveform(vibrationPattern, repeat)\n            vibrator.vibrate(effect)\n        }\n    }\n\n    fun stopAlarm() {\n        autoAlarmStopScope?.cancel()\n\n        if (timerRepository.alarmEnabled) {\n            alarm?.pause()\n            alarm?.seekTo(0)\n        }\n\n        if (timerRepository.vibrateEnabled) {\n            vibrator.cancel()\n        }\n\n        appContainer.activityTurnScreenOn(false)\n\n        _timerState.update { currentState ->\n            currentState.copy(alarmRinging = false)\n        }\n        notificationBuilder.clearActions().addTimerActions(\n            this, R.drawable.play,\n            getString(R.string.start_next)\n        )\n        showTimerNotification(\n            when (timerState.value.timerMode) {\n                TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n                TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n                else -> timerRepository.longBreakTime.toInt()\n            }, paused = true, complete = false\n        )\n    }\n\n    private fun initializeMediaPlayer(): MediaPlayer? {\n        return try {\n            MediaPlayer().apply {\n                setAudioAttributes(\n                    AudioAttributes.Builder()\n                        .setContentType(AudioAttributes.CONTENT_TYPE_MUSIC)\n                        .setUsage(AudioAttributes.USAGE_ALARM)\n                        .build()\n                )\n                timerRepository.alarmSoundUri?.let {\n                    setDataSource(applicationContext, it)\n                    prepare()\n                }\n            }\n        } catch (e: Exception) {\n            e.printStackTrace()\n            null\n        }\n    }\n\n    private fun setDoNotDisturb(doNotDisturb: Boolean) {\n        if (timerRepository.dndEnabled && notificationManagerService.isNotificationPolicyAccessGranted()) {\n            if (doNotDisturb) {\n                notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALARMS)\n            } else notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALL)\n        }\n    }\n\n    private fun updateAlarmTone() {\n        alarm?.release()\n        alarm = initializeMediaPlayer()\n    }\n\n    suspend fun saveTimeToDb() {\n        when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> statRepository.addFocusTime(\n                (timerState.value.totalTime - time).coerceAtLeast(\n                    0L\n                )\n            )\n\n            else -> statRepository.addBreakTime((timerState.value.totalTime - time).coerceAtLeast(0L))\n        }\n    }\n\n    private fun startForegroundService() {\n        startForeground(1, notificationBuilder.build())\n    }\n\n    private fun stopForegroundService() {\n        notificationManager.cancel(1)\n        stopForeground(STOP_FOREGROUND_REMOVE)\n        stopSelf()\n    }\n\n    enum class Actions {\n        TOGGLE, SKIP, RESET, STOP_ALARM, UPDATE_ALARM_TONE\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\AlwaysOnDisplay.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport android.app.Activity\nimport android.view.WindowManager\nimport androidx.activity.compose.LocalActivity\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.SharedTransitionScope\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.animation.core.animateIntAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.offset\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.CircularProgressIndicator\nimport androidx.compose.material3.CircularWavyProgressIndicator\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.DisposableEffect\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableIntStateOf\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.StrokeCap\nimport androidx.compose.ui.graphics.drawscope.Stroke\nimport androidx.compose.ui.platform.LocalDensity\nimport androidx.compose.ui.platform.LocalView\nimport androidx.compose.ui.platform.LocalWindowInfo\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Density\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.IntOffset\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.core.view.WindowCompat\nimport androidx.core.view.WindowInsetsCompat\nimport androidx.core.view.WindowInsetsControllerCompat\nimport androidx.navigation3.ui.LocalNavAnimatedContentScope\nimport kotlinx.coroutines.delay\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.ui.timerScreen.TimerScreen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport kotlin.random.Random\n\n/**\n * Always On Display composable. Must be called within a [SharedTransitionScope] which allows\n * animating the clock and progress indicator\n *\n * @param timerState [TimerState] instance. This must be the same instance as the one used on the\n * root [TimerScreen] composable\n * @param progress lambda that returns the current progress of the clock\n * randomized offset for the clock to allow smooth motion with sharedBounds\n */\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun SharedTransitionScope.AlwaysOnDisplay(\n    timerState: TimerState,\n    progress: () -> Float,\n    setTimerFrequency: (Float) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    var sharedElementTransitionComplete by remember { mutableStateOf(false) }\n\n    val activity = LocalActivity.current\n    val density = LocalDensity.current\n    val windowInfo = LocalWindowInfo.current\n    val view = LocalView.current\n\n    val window = remember { (view.context as Activity).window }\n    val insetsController = remember { WindowCompat.getInsetsController(window, view) }\n\n    DisposableEffect(Unit) {\n        setTimerFrequency(1f)\n        window.addFlags(\n            WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON or\n                    WindowManager.LayoutParams.FLAG_ALLOW_LOCK_WHILE_SCREEN_ON\n        )\n        activity?.setShowWhenLocked(true)\n        insetsController.apply {\n            hide(WindowInsetsCompat.Type.statusBars())\n            hide(WindowInsetsCompat.Type.navigationBars())\n            systemBarsBehavior =\n                WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE\n        }\n\n        onDispose {\n            setTimerFrequency(60f)\n            window.clearFlags(\n                WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON or\n                        WindowManager.LayoutParams.FLAG_ALLOW_LOCK_WHILE_SCREEN_ON\n            )\n            activity?.setShowWhenLocked(false)\n            insetsController.apply {\n                show(WindowInsetsCompat.Type.statusBars())\n                show(WindowInsetsCompat.Type.navigationBars())\n                systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_DEFAULT\n            }\n        }\n    }\n\n    LaunchedEffect(Unit) {\n        delay(300)\n        sharedElementTransitionComplete = true\n    }\n\n    val primary by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFFA2A2A2)\n        else {\n            if (timerState.timerMode == TimerMode.FOCUS) colorScheme.primary\n            else colorScheme.tertiary\n        },\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val secondaryContainer by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFF1D1D1D)\n        else {\n            if (timerState.timerMode == TimerMode.FOCUS) colorScheme.secondaryContainer\n            else colorScheme.tertiaryContainer\n        },\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val surface by animateColorAsState(\n        if (sharedElementTransitionComplete) Color.Black\n        else colorScheme.surface,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val onSurface by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFFE3E3E3)\n        else colorScheme.onSurface,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n\n    var randomX by remember {\n        mutableIntStateOf(\n            Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.width - 266.dp.toIntPx(density)\n            )\n        )\n    }\n    var randomY by remember {\n        mutableIntStateOf(\n            Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.height - 266.dp.toIntPx(density)\n            )\n        )\n    }\n\n    LaunchedEffect(timerState.timeStr[1]) { // Randomize position every minute\n        if (sharedElementTransitionComplete) {\n            randomX = Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.width - 266.dp.toIntPx(density)\n            )\n            randomY = Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.height - 266.dp.toIntPx(density)\n            )\n        }\n    }\n\n    val x by animateIntAsState(randomX, motionScheme.slowSpatialSpec())\n    val y by animateIntAsState(randomY, motionScheme.slowSpatialSpec())\n\n    Box(\n        modifier = modifier\n            .fillMaxSize()\n            .background(surface)\n    ) {\n        Box(\n            contentAlignment = Alignment.Center,\n            modifier = Modifier.offset {\n                IntOffset(x, y)\n            }\n        ) {\n            if (timerState.timerMode == TimerMode.FOCUS) {\n                CircularProgressIndicator(\n                    progress = progress,\n                    modifier = Modifier\n                        .sharedBounds(\n                            sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"focus progress\"),\n                            animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                        )\n                        .size(250.dp),\n                    color = primary,\n                    trackColor = secondaryContainer,\n                    strokeWidth = 12.dp,\n                    gapSize = 8.dp,\n                )\n            } else {\n                CircularWavyProgressIndicator(\n                    progress = progress,\n                    modifier = Modifier\n                        .sharedBounds(\n                            sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"break progress\"),\n                            animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                        )\n                        .size(250.dp),\n                    color = primary,\n                    trackColor = secondaryContainer,\n                    stroke = Stroke(\n                        width = with(LocalDensity.current) {\n                            12.dp.toPx()\n                        },\n                        cap = StrokeCap.Round,\n                    ),\n                    trackStroke = Stroke(\n                        width = with(LocalDensity.current) {\n                            12.dp.toPx()\n                        },\n                        cap = StrokeCap.Round,\n                    ),\n                    wavelength = 42.dp,\n                    gapSize = 8.dp\n                )\n            }\n\n            Text(\n                text = timerState.timeStr,\n                style = TextStyle(\n                    fontFamily = interClock,\n                    fontSize = 56.sp,\n                    letterSpacing = (-2).sp,\n                    fontFeatureSettings = \"tnum\"\n                ),\n                textAlign = TextAlign.Center,\n                color = onSurface,\n                maxLines = 1,\n                modifier = Modifier.sharedBounds(\n                    sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"clock\"),\n                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                )\n            )\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nprivate fun AlwaysOnDisplayPreview() {\n    val timerState = TimerState()\n    val progress = { 0.5f }\n    TomatoTheme {\n        SharedTransitionLayout {\n            AlwaysOnDisplay(\n                timerState = timerState,\n                progress = progress,\n                setTimerFrequency = {}\n            )\n        }\n    }\n}\n\nfun Dp.toIntPx(density: Density) = with(density) { toPx().toInt() }\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\AppScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport android.content.Intent\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.animation.Crossfade\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.slideInVertically\nimport androidx.compose.animation.slideOutVertically\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.calculateEndPadding\nimport androidx.compose.foundation.layout.calculateStartPadding\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.NavigationItemIconPosition\nimport androidx.compose.material3.Scaffold\nimport androidx.compose.material3.ShortNavigationBar\nimport androidx.compose.material3.ShortNavigationBarArrangement\nimport androidx.compose.material3.ShortNavigationBarItem\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.adaptive.currentWindowAdaptiveInfo\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalLayoutDirection\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport androidx.navigation3.runtime.entryProvider\nimport androidx.navigation3.runtime.rememberNavBackStack\nimport androidx.navigation3.ui.NavDisplay\nimport androidx.window.core.layout.WindowSizeClass\nimport org.nsh07.pomodoro.billing.TomatoPlusPaywallDialog\nimport org.nsh07.pomodoro.service.TimerService\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsScreenRoot\nimport org.nsh07.pomodoro.ui.statsScreen.StatsScreenRoot\nimport org.nsh07.pomodoro.ui.timerScreen.AlarmDialog\nimport org.nsh07.pomodoro.ui.timerScreen.TimerScreen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerViewModel\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AppScreen(\n    isAODEnabled: Boolean,\n    isPlus: Boolean,\n    setTimerFrequency: (Float) -> Unit,\n    modifier: Modifier = Modifier,\n    timerViewModel: TimerViewModel = viewModel(factory = TimerViewModel.Factory)\n) {\n    val context = LocalContext.current\n\n    val uiState by timerViewModel.timerState.collectAsStateWithLifecycle()\n    val progress by timerViewModel.progress.collectAsStateWithLifecycle()\n\n    val layoutDirection = LocalLayoutDirection.current\n    val motionScheme = motionScheme\n    val windowSizeClass = currentWindowAdaptiveInfo().windowSizeClass\n\n    val backStack = rememberNavBackStack(Screen.Timer)\n\n    if (uiState.alarmRinging)\n        AlarmDialog {\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.STOP_ALARM.toString()\n                context.startService(it)\n            }\n        }\n\n    var showPaywall by remember { mutableStateOf(false) }\n\n    Scaffold(\n        bottomBar = {\n            AnimatedVisibility(\n                backStack.last() !is Screen.AOD,\n                enter = fadeIn(),\n                exit = fadeOut()\n            ) {\n                val wide = remember {\n                    windowSizeClass.isWidthAtLeastBreakpoint(\n                        WindowSizeClass.WIDTH_DP_MEDIUM_LOWER_BOUND\n                    )\n                }\n                ShortNavigationBar(\n                    arrangement =\n                        if (wide) ShortNavigationBarArrangement.Centered\n                        else ShortNavigationBarArrangement.EqualWeight\n                ) {\n                    mainScreens.forEach {\n                        val selected = backStack.last() == it.route\n                        ShortNavigationBarItem(\n                            selected = selected,\n                            onClick = if (it.route != Screen.Timer) { // Ensure the backstack does not accumulate screens\n                                {\n                                    if (backStack.size < 2) backStack.add(it.route)\n                                    else backStack[1] = it.route\n                                }\n                            } else {\n                                { if (backStack.size > 1) backStack.removeAt(1) }\n                            },\n                            icon = {\n                                Crossfade(selected) { selected ->\n                                    if (selected) Icon(painterResource(it.selectedIcon), null)\n                                    else Icon(painterResource(it.unselectedIcon), null)\n                                }\n                            },\n                            iconPosition =\n                                if (wide) NavigationItemIconPosition.Start\n                                else NavigationItemIconPosition.Top,\n                            label = { Text(stringResource(it.label)) }\n                        )\n                    }\n                }\n            }\n        }\n    ) { contentPadding ->\n        SharedTransitionLayout {\n            NavDisplay(\n                backStack = backStack,\n                onBack = backStack::removeLastOrNull,\n                transitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                popTransitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                predictivePopTransitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                entryProvider = entryProvider {\n                    entry<Screen.Timer> {\n                        TimerScreen(\n                            timerState = uiState,\n                            isPlus = isPlus,\n                            progress = { progress },\n                            onAction = timerViewModel::onAction,\n                            modifier = modifier\n                                .padding(\n                                    start = contentPadding.calculateStartPadding(layoutDirection),\n                                    end = contentPadding.calculateEndPadding(layoutDirection),\n                                    bottom = contentPadding.calculateBottomPadding()\n                                )\n                                .then(\n                                    if (isAODEnabled) Modifier.clickable {\n                                        if (backStack.size < 2) backStack.add(Screen.AOD)\n                                    }\n                                    else Modifier\n                                ),\n                        )\n                    }\n\n                    entry<Screen.AOD> {\n                        AlwaysOnDisplay(\n                            timerState = uiState,\n                            progress = { progress },\n                            setTimerFrequency = setTimerFrequency,\n                            modifier = Modifier\n                                .then(\n                                    if (isAODEnabled) Modifier.clickable {\n                                        if (backStack.size > 1) backStack.removeLastOrNull()\n                                    }\n                                    else Modifier\n                                )\n                        )\n                    }\n\n                    entry<Screen.Settings.Main> {\n                        SettingsScreenRoot(\n                            setShowPaywall = { showPaywall = it },\n                            modifier = modifier.padding(\n                                start = contentPadding.calculateStartPadding(layoutDirection),\n                                end = contentPadding.calculateEndPadding(layoutDirection),\n                                bottom = contentPadding.calculateBottomPadding()\n                            )\n                        )\n                    }\n\n                    entry<Screen.Stats> {\n                        StatsScreenRoot(\n                            contentPadding = contentPadding,\n                            modifier = modifier.padding(\n                                start = contentPadding.calculateStartPadding(layoutDirection),\n                                end = contentPadding.calculateEndPadding(layoutDirection),\n                                bottom = contentPadding.calculateBottomPadding()\n                            )\n                        )\n                    }\n                }\n            )\n        }\n    }\n\n    AnimatedVisibility(\n        showPaywall,\n        enter = slideInVertically { it },\n        exit = slideOutVertically { it }\n    ) {\n        TomatoPlusPaywallDialog(isPlus = isPlus) { showPaywall = false }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\Screen.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport androidx.annotation.DrawableRes\nimport androidx.annotation.StringRes\nimport androidx.navigation3.runtime.NavKey\nimport kotlinx.serialization.Serializable\n\nsealed class Screen : NavKey {\n    @Serializable\n    object Timer : Screen()\n\n    @Serializable\n    object AOD : Screen()\n\n    @Serializable\n    sealed class Settings : Screen() {\n        @Serializable\n        object Main : Settings()\n\n        @Serializable\n        object Alarm : Settings()\n\n        @Serializable\n        object Appearance : Settings()\n\n        @Serializable\n        object Timer : Settings()\n    }\n\n    @Serializable\n    object Stats : Screen()\n}\n\ndata class NavItem(\n    val route: Screen,\n    @param:DrawableRes val unselectedIcon: Int,\n    @param:DrawableRes val selectedIcon: Int,\n    @param:StringRes val label: Int\n)\n\ndata class SettingsNavItem(\n    val route: Screen.Settings,\n    @param:DrawableRes val icon: Int,\n    @param:StringRes val label: Int,\n    val innerSettings: List<Int>\n)\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutCard.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.widget.Toast\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.FlowRow\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.ButtonDefaults\nimport androidx.compose.material3.Card\nimport androidx.compose.material3.CardDefaults\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n// Taken from https://github.com/shub39/Grit/blob/master/app/src/main/java/com/shub39/grit/core/presentation/settings/ui/component/AboutApp.kt\n@Composable\nfun AboutCard(\n    isPlus: Boolean,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    val context = LocalContext.current\n\n    Card(\n        modifier = modifier.fillMaxWidth(),\n        colors = CardDefaults.cardColors(\n            containerColor = colorScheme.primaryContainer,\n            contentColor = colorScheme.onPrimaryContainer\n        ),\n        shape = shapes.extraLarge\n    ) {\n        val buttonColors = ButtonDefaults.buttonColors(\n            containerColor = colorScheme.onPrimaryContainer,\n            contentColor = colorScheme.primaryContainer\n        )\n\n        Row(\n            modifier = Modifier\n                .padding(16.dp)\n                .fillMaxWidth(),\n            verticalAlignment = Alignment.CenterVertically,\n            horizontalArrangement = Arrangement.spacedBy(8.dp)\n        ) {\n            Column {\n                Text(\n                    if (!isPlus) stringResource(R.string.app_name)\n                    else stringResource(R.string.app_name_plus),\n                    style = MaterialTheme.typography.titleLarge,\n                    fontFamily = robotoFlexTopBar\n                )\n                Text(text = \"${BuildConfig.VERSION_NAME} (${BuildConfig.VERSION_CODE})\")\n            }\n\n            Spacer(modifier = Modifier.weight(1f))\n\n            Row {\n                IconButton(\n                    onClick = {\n                        Toast.makeText(context, \"Coming soon...\", Toast.LENGTH_SHORT).show()\n                    }\n                ) {\n                    Icon(\n                        painterResource(R.drawable.discord),\n                        contentDescription = \"Discord\",\n                        modifier = Modifier.size(24.dp)\n                    )\n                }\n\n                IconButton(\n                    onClick = { uriHandler.openUri(\"https://github.com/nsh07/Tomato\") }\n                ) {\n                    Icon(\n                        painterResource(R.drawable.github),\n                        contentDescription = \"GitHub\",\n                        modifier = Modifier.size(24.dp)\n                    )\n                }\n            }\n        }\n\n        FlowRow(\n            modifier = Modifier.padding(start = 16.dp, end = 16.dp, bottom = 16.dp),\n            horizontalArrangement = Arrangement.spacedBy(8.dp)\n        ) {\n            TopButton(buttonColors)\n            BottomButton(buttonColors)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ClickableListItem.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.core.animateDpAsState\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.interaction.MutableInteractionSource\nimport androidx.compose.foundation.interaction.collectIsPressedAsState\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.ListItemColors\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ClickableListItem(\n    headlineContent: @Composable (() -> Unit),\n    modifier: Modifier = Modifier,\n    overlineContent: @Composable (() -> Unit)? = null,\n    supportingContent: @Composable (() -> Unit)? = null,\n    leadingContent: @Composable (() -> Unit)? = null,\n    trailingContent: @Composable (() -> Unit)? = null,\n    colors: ListItemColors = listItemColors,\n    tonalElevation: Dp = ListItemDefaults.Elevation,\n    shadowElevation: Dp = ListItemDefaults.Elevation,\n    items: Int,\n    index: Int,\n    onClick: () -> Unit\n) {\n    val interactionSource = remember { MutableInteractionSource() }\n    val isPressed by interactionSource.collectIsPressedAsState()\n\n    val top by animateDpAsState(\n        if (isPressed) 40.dp\n        else {\n            if (items == 1 || index == 0) 20.dp\n            else 4.dp\n        },\n        motionScheme.fastSpatialSpec()\n    )\n    val bottom by animateDpAsState(\n        if (isPressed) 40.dp\n        else {\n            if (items == 1 || index == items - 1) 20.dp\n            else 4.dp\n        },\n        motionScheme.fastSpatialSpec()\n    )\n\n    ListItem(\n        headlineContent = headlineContent,\n        modifier = modifier\n            .clip(\n                RoundedCornerShape(\n                    topStart = top,\n                    topEnd = top,\n                    bottomStart = bottom,\n                    bottomEnd = bottom\n                )\n            )\n            .clickable(\n                onClick = onClick,\n                interactionSource = interactionSource,\n            ),\n        overlineContent = overlineContent,\n        supportingContent = supportingContent,\n        leadingContent = leadingContent,\n        trailingContent = trailingContent,\n        colors = colors,\n        tonalElevation = tonalElevation,\n        shadowElevation = shadowElevation\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ColorSchemePickerListItem.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.os.Build\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.PaddingValues\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyRow\nimport androidx.compose.foundation.lazy.items\nimport androidx.compose.foundation.shape.CornerSize\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@Composable\nfun ColorSchemePickerListItem(\n    color: Color,\n    items: Int,\n    index: Int,\n    isPlus: Boolean,\n    onColorChange: (Color) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val colorSchemes = listOf(\n        Color(0xfffeb4a7), Color(0xffffb3c0), Color(0xfffcaaff), Color(0xffb9c3ff),\n        Color(0xff62d3ff), Color(0xff44d9f1), Color(0xff52dbc9), Color(0xff78dd77),\n        Color(0xff9fd75c), Color(0xffc1d02d), Color(0xfffabd00), Color(0xffffb86e),\n        Color.White\n    )\n    val zeroCorner = remember { CornerSize(0) }\n\n    Column(\n        modifier\n            .clip(\n                when (index) {\n                    0 -> topListItemShape\n                    items - 1 -> bottomListItemShape\n                    else -> middleListItemShape\n                }\n            )\n    ) {\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {\n            ListItem(\n                leadingContent = {\n                    Icon(\n                        painterResource(R.drawable.colors),\n                        null\n                    )\n                },\n                headlineContent = { Text(stringResource(R.string.dynamic_color)) },\n                supportingContent = { Text(stringResource(R.string.dynamic_color_desc)) },\n                trailingContent = {\n                    val checked = color == colorSchemes.last()\n                    Switch(\n                        checked = checked,\n                        onCheckedChange = {\n                            if (it) onColorChange(colorSchemes.last())\n                            else onColorChange(colorSchemes.first())\n                        },\n                        enabled = isPlus,\n                        thumbContent = {\n                            if (checked) {\n                                Icon(\n                                    painter = painterResource(R.drawable.check),\n                                    contentDescription = null,\n                                    modifier = Modifier.size(SwitchDefaults.IconSize),\n                                )\n                            } else {\n                                Icon(\n                                    painter = painterResource(R.drawable.clear),\n                                    contentDescription = null,\n                                    modifier = Modifier.size(SwitchDefaults.IconSize),\n                                )\n                            }\n                        },\n                        colors = switchColors\n                    )\n                },\n                colors = listItemColors,\n                modifier = Modifier.clip(middleListItemShape)\n            )\n            Spacer(Modifier.height(2.dp))\n        }\n\n        ListItem(\n            leadingContent = {\n                Icon(\n                    painter = painterResource(R.drawable.palette),\n                    contentDescription = null,\n                    tint = colorScheme.primary\n                )\n            },\n            headlineContent = { Text(stringResource(R.string.color_scheme)) },\n            supportingContent = {\n                Text(\n                    if (color == Color.White) stringResource(R.string.dynamic)\n                    else stringResource(R.string.color)\n                )\n            },\n            colors = listItemColors,\n            modifier = Modifier.clip(\n                RoundedCornerShape(\n                    topStart = middleListItemShape.topStart,\n                    topEnd = middleListItemShape.topEnd,\n                    zeroCorner,\n                    zeroCorner\n                )\n            )\n        )\n\n        LazyRow(\n            contentPadding = PaddingValues(horizontal = 48.dp),\n            userScrollEnabled = isPlus,\n            modifier = Modifier\n                .background(listItemColors.containerColor)\n                .padding(bottom = 8.dp)\n        ) {\n            items(colorSchemes.dropLast(1)) {\n                ColorPickerButton(\n                    color = it,\n                    isSelected = it == color,\n                    enabled = isPlus,\n                    modifier = Modifier.padding(4.dp)\n                ) {\n                    onColorChange(it)\n                }\n            }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ColorPickerButton(\n    color: Color,\n    isSelected: Boolean,\n    enabled: Boolean,\n    modifier: Modifier = Modifier,\n    onClick: () -> Unit\n) {\n    IconButton(\n        shapes = IconButtonDefaults.shapes(),\n        colors = IconButtonDefaults.iconButtonColors(\n            containerColor = color,\n            disabledContainerColor = color.copy(0.3f)\n        ),\n        enabled = enabled,\n        modifier = modifier.size(48.dp),\n        onClick = onClick\n    ) {\n        AnimatedContent(isSelected) { isSelected ->\n            when (isSelected) {\n                true -> Icon(\n                    painterResource(R.drawable.check),\n                    tint = Color.Black,\n                    contentDescription = null\n                )\n\n                else ->\n                    if (color == Color.White) Icon(\n                        painterResource(R.drawable.colors),\n                        tint = Color.Black,\n                        contentDescription = null\n                    )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\LocaleBottomSheet.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.app.LocaleConfig\nimport android.app.LocaleManager\nimport android.os.Build\nimport android.os.LocaleList\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.lazy.rememberLazyListState\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.ModalBottomSheet\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.rememberModalBottomSheetState\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.rememberCoroutineScope\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\nimport java.util.Locale\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun LocaleBottomSheet(\n    currentLocales: LocaleList,\n    setShowSheet: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val context = LocalContext.current\n    val scope = rememberCoroutineScope()\n\n    val supportedLocales = remember {\n        if (Build.VERSION.SDK_INT >= 33) {\n            LocaleConfig(context).supportedLocales\n        } else null\n    }\n    val supportedLocalesSize = supportedLocales?.size() ?: 0\n\n    val supportedLocalesList: List<AppLocale>? = remember {\n        if (supportedLocales != null) {\n            buildList {\n                for (i in 0 until supportedLocalesSize) {\n                    add(AppLocale(supportedLocales.get(i), supportedLocales.get(i).displayName))\n                }\n                sortWith(compareBy { it.name })\n            }\n        } else null\n    }\n\n    val bottomSheetState = rememberModalBottomSheetState()\n    val listState = rememberLazyListState()\n\n    ModalBottomSheet(\n        onDismissRequest = { setShowSheet(false) },\n        sheetState = bottomSheetState,\n        modifier = modifier\n    ) {\n        Column(horizontalAlignment = Alignment.CenterHorizontally) {\n            Text(\n                text = stringResource(R.string.choose_language),\n                style = MaterialTheme.typography.labelLarge,\n                modifier = Modifier.padding(bottom = 16.dp)\n            )\n            if (supportedLocalesList != null) {\n                LazyColumn(\n                    verticalArrangement = Arrangement.spacedBy(2.dp),\n                    state = listState,\n                    modifier = Modifier\n                        .padding(horizontal = 16.dp)\n                        .clip(shapes.largeIncreased)\n                ) {\n                    item {\n                        ListItem(\n                            headlineContent = {\n                                Text(stringResource(R.string.system_default))\n                            },\n                            trailingContent = {\n                                if (currentLocales.isEmpty)\n                                    Icon(\n                                        painterResource(R.drawable.check),\n                                        contentDescription = stringResource(R.string.selected)\n                                    )\n                            },\n                            colors =\n                                if (currentLocales.isEmpty)\n                                    ListItemDefaults.colors(\n                                        containerColor = colorScheme.primaryContainer.copy(\n                                            0.3f\n                                        )\n                                    )\n                                else listItemColors,\n                            modifier = Modifier\n                                .clip(if (currentLocales.isEmpty) CircleShape else shapes.largeIncreased)\n                                .clickable(\n                                    onClick = {\n                                        scope\n                                            .launch { bottomSheetState.hide() }\n                                            .invokeOnCompletion {\n                                                if (Build.VERSION.SDK_INT >= 33) {\n                                                    context\n                                                        .getSystemService(LocaleManager::class.java)\n                                                        .applicationLocales = LocaleList()\n                                                }\n                                                setShowSheet(false)\n                                            }\n                                    }\n                                )\n                        )\n                    }\n                    item {\n                        Spacer(Modifier.height(12.dp))\n                    }\n                    itemsIndexed(\n                        supportedLocalesList,\n                        key = { _: Int, it: AppLocale -> it.name }\n                    ) { index, it ->\n                        ListItem(\n                            headlineContent = {\n                                Text(it.name)\n                            },\n                            trailingContent = {\n                                if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                    Icon(\n                                        painterResource(R.drawable.check),\n                                        tint = colorScheme.primary,\n                                        contentDescription = stringResource(R.string.selected)\n                                    )\n                            },\n                            colors =\n                                if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                    ListItemDefaults.colors(containerColor = colorScheme.primaryContainer)\n                                else listItemColors,\n                            modifier = Modifier\n                                .clip(\n                                    if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                        CircleShape\n                                    else when (index) {\n                                        0 -> topListItemShape\n                                        supportedLocalesSize - 1 -> bottomListItemShape\n                                        else -> middleListItemShape\n                                    }\n                                )\n                                .clickable(\n                                    onClick = {\n                                        scope\n                                            .launch { bottomSheetState.hide() }\n                                            .invokeOnCompletion { _ ->\n                                                if (Build.VERSION.SDK_INT >= 33) {\n                                                    context.getSystemService(LocaleManager::class.java)\n                                                        .applicationLocales =\n                                                        LocaleList(it.locale)\n                                                }\n                                                setShowSheet(false)\n                                            }\n                                    }\n                                )\n                        )\n                    }\n                }\n            }\n        }\n    }\n}\n\ndata class AppLocale(\n    val locale: Locale,\n    val name: String\n)"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\MinuteInputField.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.text.BasicTextField\nimport androidx.compose.foundation.text.KeyboardOptions\nimport androidx.compose.foundation.text.input.TextFieldLineLimits\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Shape\nimport androidx.compose.ui.graphics.SolidColor\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.input.ImeAction\nimport androidx.compose.ui.text.input.KeyboardType\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun MinuteInputField(\n    state: TextFieldState,\n    enabled: Boolean,\n    shape: Shape,\n    modifier: Modifier = Modifier,\n    imeAction: ImeAction = ImeAction.Next\n) {\n    BasicTextField(\n        state = state,\n        enabled = enabled,\n        lineLimits = TextFieldLineLimits.SingleLine,\n        inputTransformation = MinutesInputTransformation,\n//        outputTransformation = MinutesOutputTransformation,\n        keyboardOptions = KeyboardOptions(\n            keyboardType = KeyboardType.NumberPassword,\n            imeAction = imeAction\n        ),\n        textStyle = TextStyle(\n            fontFamily = interClock,\n            fontSize = 57.sp,\n            letterSpacing = (-2).sp,\n            color = if (enabled) colorScheme.onSurfaceVariant else colorScheme.outlineVariant,\n            textAlign = TextAlign.Center\n        ),\n        cursorBrush = SolidColor(colorScheme.onSurface),\n        decorator = { innerTextField ->\n            Box(\n                contentAlignment = Alignment.Center,\n                modifier = modifier\n                    .size(112.dp, 100.dp)\n                    .background(\n                        animateColorAsState(\n                            if (state.text.isNotEmpty())\n                                listItemColors.containerColor\n                            else colorScheme.errorContainer,\n                            motionScheme.defaultEffectsSpec()\n                        ).value,\n                        shape\n                    )\n            ) { innerTextField() }\n        }\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\MinutesTransformation.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.text.input.InputTransformation\nimport androidx.compose.foundation.text.input.TextFieldBuffer\nimport androidx.core.text.isDigitsOnly\n\nobject MinutesInputTransformation : InputTransformation {\n    override fun TextFieldBuffer.transformInput() {\n        if (!this.asCharSequence().isDigitsOnly() || this.length > 2) {\n            revertAllChanges()\n        }\n    }\n}\n\n//object MinutesOutputTransformation : OutputTransformation {\n//    override fun TextFieldBuffer.transformOutput() {\n//        when (this.length) {\n//            0 -> insert(0, \"00\")\n//            1 -> insert(0, \"0\")\n//        }\n//    }\n//}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\PlusDivider.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.HorizontalDivider\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.unit.dp\n\n@Composable\nfun PlusDivider(\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    Box(contentAlignment = Alignment.Center, modifier = modifier.padding(vertical = 14.dp)) {\n        HorizontalDivider(modifier = Modifier.clip(CircleShape), thickness = 4.dp)\n        Button(\n            onClick = { setShowPaywall(true) },\n            modifier = Modifier\n                .background(colorScheme.surfaceContainer)\n                .padding(horizontal = 8.dp)\n        ) {\n            Text(\"Customize further with Tomato+\", style = typography.titleSmall)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\PlusPromo.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n@Composable\nfun PlusPromo(\n    isPlus: Boolean,\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val container = if (isPlus) colorScheme.surfaceBright else colorScheme.primary\n    val onContainer = if (isPlus) colorScheme.onSurface else colorScheme.onPrimary\n    val onContainerVariant = if (isPlus) colorScheme.onSurfaceVariant else colorScheme.onPrimary\n\n    Row(\n        verticalAlignment = Alignment.CenterVertically,\n        modifier = modifier\n            .clip(CircleShape)\n            .background(container)\n            .padding(16.dp)\n            .clickable { setShowPaywall(true) }\n    ) {\n        Icon(\n            painterResource(R.drawable.tomato_logo_notification),\n            null,\n            tint = onContainerVariant,\n            modifier = Modifier\n                .size(24.dp)\n        )\n        Spacer(Modifier.width(8.dp))\n        Text(\n            if (!isPlus) stringResource(R.string.get_plus)\n            else stringResource(R.string.app_name_plus),\n            style = typography.titleLarge,\n            fontFamily = robotoFlexTopBar,\n            color = onContainer\n        )\n        Spacer(Modifier.weight(1f))\n        Icon(\n            painterResource(R.drawable.arrow_forward_big),\n            null,\n            tint = onContainerVariant\n        )\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ThemePickerListItem.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.ButtonGroupDefaults\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.ToggleButton\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.semantics.Role\nimport androidx.compose.ui.semantics.role\nimport androidx.compose.ui.semantics.semantics\nimport androidx.compose.ui.text.style.TextOverflow\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.cardShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ThemePickerListItem(\n    theme: String,\n    items: Int,\n    index: Int,\n    onThemeChange: (String) -> Unit,\n    modifier: Modifier = Modifier,\n) {\n    val themeMap: Map<String, Pair<Int, Int>> = remember {\n        mapOf(\n            \"auto\" to Pair(\n                R.drawable.brightness_auto,\n                R.string.system_default\n            ),\n            \"light\" to Pair(R.drawable.light_mode, R.string.light),\n            \"dark\" to Pair(R.drawable.dark_mode, R.string.dark)\n        )\n    }\n\n    Column(\n        modifier\n            .clip(\n                if (items > 1)\n                    when (index) {\n                        0 -> topListItemShape\n                        items - 1 -> bottomListItemShape\n                        else -> middleListItemShape\n                    }\n                else cardShape,\n            ),\n    ) {\n        ListItem(\n            leadingContent = {\n                AnimatedContent(themeMap[theme]!!.first) {\n                    Icon(\n                        painter = painterResource(it),\n                        contentDescription = null,\n                    )\n                }\n            },\n            headlineContent = { Text(stringResource(R.string.theme)) },\n            colors = listItemColors,\n        )\n\n        val options = themeMap.toList()\n        val selectedIndex = options.indexOf(Pair(theme, themeMap[theme]))\n\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(ButtonGroupDefaults.ConnectedSpaceBetween),\n            modifier = Modifier\n                .background(listItemColors.containerColor)\n                .padding(start = 52.dp, end = 16.dp, bottom = 8.dp)\n        ) {\n            options.forEachIndexed { index, theme ->\n                val isSelected = selectedIndex == index\n                ToggleButton(\n                    checked = isSelected,\n                    onCheckedChange = { onThemeChange(theme.first) },\n                    modifier = Modifier\n                        .weight(1f)\n                        .semantics { role = Role.RadioButton },\n                    shapes =\n                        when (index) {\n                            0 -> ButtonGroupDefaults.connectedLeadingButtonShapes()\n                            options.lastIndex -> ButtonGroupDefaults.connectedTrailingButtonShapes()\n                            else -> ButtonGroupDefaults.connectedMiddleButtonShapes()\n                        },\n                ) {\n                    Text(\n                        stringResource(theme.second.second),\n                        maxLines = 1,\n                        overflow = TextOverflow.Ellipsis\n                    )\n                }\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\AlarmSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport android.annotation.SuppressLint\nimport android.app.Activity\nimport android.content.Intent\nimport android.media.RingtoneManager\nimport android.net.Uri\nimport android.os.Build\nimport androidx.activity.compose.rememberLauncherForActivityResult\nimport androidx.activity.result.contract.ActivityResultContracts\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.core.net.toUri\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.withContext\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AlarmSettings(\n    settingsState: SettingsState,\n    onAction: (SettingsAction) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n    val context = LocalContext.current\n\n    var alarmName by remember { mutableStateOf(\"...\") }\n\n    LaunchedEffect(settingsState.alarmSound) {\n        withContext(Dispatchers.IO) {\n            alarmName =\n                RingtoneManager.getRingtone(context, settingsState.alarmSound.toUri())\n                    ?.getTitle(context) ?: \"\"\n        }\n    }\n\n    val ringtonePickerLauncher = rememberLauncherForActivityResult(\n        contract = ActivityResultContracts.StartActivityForResult()\n    ) { result ->\n        if (result.resultCode == Activity.RESULT_OK) {\n            val uri =\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU) {\n                    result.data?.getParcelableExtra(\n                        RingtoneManager.EXTRA_RINGTONE_PICKED_URI,\n                        Uri::class.java\n                    )\n                } else {\n                    @Suppress(\"DEPRECATION\")\n                    result.data?.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI)\n                }\n            onAction(SettingsAction.SaveAlarmSound(uri))\n        }\n    }\n\n    @SuppressLint(\"LocalContextGetResourceValueCall\")\n    val ringtonePickerIntent = remember(settingsState.alarmSound) {\n        Intent(RingtoneManager.ACTION_RINGTONE_PICKER).apply {\n            putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_ALARM)\n            putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, context.getString(R.string.alarm_sound))\n            putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, settingsState.alarmSound.toUri())\n        }\n    }\n\n    val switchItems = remember(\n        settingsState.blackTheme,\n        settingsState.aodEnabled,\n        settingsState.alarmEnabled,\n        settingsState.vibrateEnabled\n    ) {\n        listOf(\n            SettingsSwitchItem(\n                checked = settingsState.alarmEnabled,\n                icon = R.drawable.alarm_on,\n                label = R.string.sound,\n                description = R.string.alarm_desc,\n                onClick = { onAction(SettingsAction.SaveAlarmEnabled(it)) }\n            ),\n            SettingsSwitchItem(\n                checked = settingsState.vibrateEnabled,\n                icon = R.drawable.mobile_vibrate,\n                label = R.string.vibrate,\n                description = R.string.vibrate_desc,\n                onClick = { onAction(SettingsAction.SaveVibrateEnabled(it)) }\n            )\n        )\n    }\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.alarm), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                Spacer(Modifier.height(14.dp))\n            }\n\n            item {\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(R.drawable.alarm), null)\n                    },\n                    headlineContent = { Text(stringResource(R.string.alarm_sound)) },\n                    supportingContent = { Text(alarmName) },\n                    colors = listItemColors,\n                    modifier = Modifier\n                        .clip(topListItemShape)\n                        .clickable(onClick = { ringtonePickerLauncher.launch(ringtonePickerIntent) })\n                )\n            }\n            itemsIndexed(switchItems) { index, item ->\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(item.icon), contentDescription = null)\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            onCheckedChange = { item.onClick(it) },\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier\n                        .clip(\n                            when (index) {\n                                switchItems.lastIndex -> bottomListItemShape\n                                else -> middleListItemShape\n                            }\n                        )\n                )\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nfun AlarmSettingsPreview() {\n    val settingsState = SettingsState()\n    AlarmSettings(\n        settingsState = settingsState,\n        onAction = {},\n        onBack = {}\n    )\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\AppearanceSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ColorSchemePickerListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusDivider\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ThemePickerListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.toColor\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AppearanceSettings(\n    settingsState: SettingsState,\n    isPlus: Boolean,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.appearance), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                Spacer(Modifier.height(14.dp))\n            }\n            item {\n                ThemePickerListItem(\n                    theme = settingsState.theme,\n                    onThemeChange = { onAction(SettingsAction.SaveTheme(it)) },\n                    items = if (isPlus) 3 else 1,\n                    index = 0\n                )\n            }\n\n            if (!isPlus) {\n                item { PlusDivider(setShowPaywall) }\n            }\n\n            item {\n                ColorSchemePickerListItem(\n                    color = settingsState.colorScheme.toColor(),\n                    items = 3,\n                    index = if (isPlus) 1 else 0,\n                    isPlus = isPlus,\n                    onColorChange = { onAction(SettingsAction.SaveColorScheme(it)) },\n                )\n            }\n            item {\n                val item = SettingsSwitchItem(\n                    checked = settingsState.blackTheme,\n                    icon = R.drawable.contrast,\n                    label = R.string.black_theme,\n                    description = R.string.black_theme_desc,\n                    onClick = { onAction(SettingsAction.SaveBlackTheme(it)) }\n                )\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(item.icon), contentDescription = null)\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            onCheckedChange = { item.onClick(it) },\n                            enabled = isPlus,\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(bottomListItemShape)\n                )\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@Preview\n@Composable\nfun AppearanceSettingsPreview() {\n    val settingsState = SettingsState()\n    TomatoTheme(dynamicColor = false) {\n        AppearanceSettings(\n            settingsState = settingsState,\n            isPlus = false,\n            onAction = {},\n            setShowPaywall = {},\n            onBack = {}\n        )\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\TimerSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport android.app.NotificationManager\nimport android.content.Context\nimport android.content.Intent\nimport android.provider.Settings\nimport android.widget.Toast\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.horizontalScroll\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.items\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.rememberScrollState\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.foundation.text.input.rememberTextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledTonalIconToggleButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.LocalContentColor\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Slider\nimport androidx.compose.material3.SliderState\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.material3.rememberSliderState\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.CompositionLocalProvider\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.input.ImeAction\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.MinuteInputField\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusDivider\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.cardShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimerSettings(\n    isPlus: Boolean,\n    serviceRunning: Boolean,\n    settingsState: SettingsState,\n    focusTimeInputFieldState: TextFieldState,\n    shortBreakTimeInputFieldState: TextFieldState,\n    longBreakTimeInputFieldState: TextFieldState,\n    sessionsSliderState: SliderState,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n    val context = LocalContext.current\n    val appName = stringResource(R.string.app_name)\n    val notificationManagerService =\n        remember { context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager }\n\n    val switchItems = listOf(\n        SettingsSwitchItem(\n            checked = settingsState.dndEnabled,\n            enabled = !serviceRunning,\n            icon = R.drawable.dnd,\n            label = R.string.dnd,\n            description = R.string.dnd_desc,\n            onClick = {\n                if (it && !notificationManagerService.isNotificationPolicyAccessGranted()) {\n                    val intent = Intent(Settings.ACTION_NOTIFICATION_POLICY_ACCESS_SETTINGS)\n                    Toast.makeText(context, \"Enable permission for \\\"$appName\\\"\", Toast.LENGTH_LONG)\n                        .show()\n                    context.startActivity(intent)\n                } else if (!it && notificationManagerService.isNotificationPolicyAccessGranted()) {\n                    notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALL)\n                }\n                onAction(SettingsAction.SaveDndEnabled(it))\n            }\n        ),\n        SettingsSwitchItem(\n            checked = settingsState.aodEnabled,\n            icon = R.drawable.aod,\n            label = R.string.always_on_display,\n            description = R.string.always_on_display_desc,\n            onClick = { onAction(SettingsAction.SaveAodEnabled(it)) }\n        )\n    )\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.timer), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                CompositionLocalProvider(LocalContentColor provides colorScheme.error) {\n                    AnimatedVisibility(serviceRunning) {\n                        Column {\n                            Spacer(Modifier.height(8.dp))\n                            Row(\n                                verticalAlignment = Alignment.CenterVertically,\n                                horizontalArrangement = Arrangement.spacedBy(8.dp)\n                            ) {\n                                Icon(painterResource(R.drawable.info), null)\n                                Text(stringResource(R.string.timer_settings_reset_info))\n                            }\n                        }\n                    }\n                }\n                Spacer(Modifier.height(14.dp))\n            }\n            item {\n                Row(\n                    horizontalArrangement = Arrangement.Center,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .horizontalScroll(rememberScrollState())\n                ) {\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.focus),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = focusTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(\n                                topStart = topListItemShape.topStart,\n                                bottomStart = topListItemShape.topStart,\n                                topEnd = topListItemShape.bottomStart,\n                                bottomEnd = topListItemShape.bottomStart\n                            ),\n                            imeAction = ImeAction.Next\n                        )\n                    }\n                    Spacer(Modifier.width(2.dp))\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.short_break),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = shortBreakTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(middleListItemShape.topStart),\n                            imeAction = ImeAction.Next\n                        )\n                    }\n                    Spacer(Modifier.width(2.dp))\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.long_break),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = longBreakTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(\n                                topStart = bottomListItemShape.topStart,\n                                bottomStart = bottomListItemShape.topStart,\n                                topEnd = bottomListItemShape.bottomStart,\n                                bottomEnd = bottomListItemShape.bottomStart\n                            ),\n                            imeAction = ImeAction.Done\n                        )\n                    }\n                }\n            }\n            item {\n                Spacer(Modifier.height(12.dp))\n            }\n            item {\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(R.drawable.clocks), null)\n                    },\n                    headlineContent = {\n                        Text(stringResource(R.string.session_length))\n                    },\n                    supportingContent = {\n                        Column {\n                            Text(\n                                stringResource(\n                                    R.string.session_length_desc,\n                                    sessionsSliderState.value.toInt()\n                                )\n                            )\n                            Slider(\n                                state = sessionsSliderState,\n                                enabled = !serviceRunning,\n                                modifier = Modifier.padding(vertical = 4.dp)\n                            )\n                        }\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(cardShape)\n                )\n            }\n            item { Spacer(Modifier.height(12.dp)) }\n\n            itemsIndexed(if (isPlus) switchItems else switchItems.take(1)) { index, item ->\n                ListItem(\n                    leadingContent = {\n                        Icon(\n                            painterResource(item.icon),\n                            contentDescription = null,\n                            modifier = Modifier.padding(top = 4.dp)\n                        )\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            enabled = item.enabled,\n                            onCheckedChange = { item.onClick(it) },\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(\n                        if (isPlus) when (index) {\n                            0 -> topListItemShape\n                            switchItems.size - 1 -> bottomListItemShape\n                            else -> middleListItemShape\n                        }\n                        else cardShape\n                    )\n                )\n            }\n\n            if (!isPlus) {\n                item {\n                    PlusDivider(setShowPaywall)\n                }\n                items(switchItems.drop(1)) { item ->\n                    ListItem(\n                        leadingContent = {\n                            Icon(\n                                painterResource(item.icon),\n                                contentDescription = null,\n                                modifier = Modifier.padding(top = 4.dp)\n                            )\n                        },\n                        headlineContent = { Text(stringResource(item.label)) },\n                        supportingContent = { Text(stringResource(item.description)) },\n                        trailingContent = {\n                            Switch(\n                                checked = item.checked,\n                                onCheckedChange = { item.onClick(it) },\n                                enabled = isPlus,\n                                thumbContent = {\n                                    if (item.checked) {\n                                        Icon(\n                                            painter = painterResource(R.drawable.check),\n                                            contentDescription = null,\n                                            modifier = Modifier.size(SwitchDefaults.IconSize),\n                                        )\n                                    } else {\n                                        Icon(\n                                            painter = painterResource(R.drawable.clear),\n                                            contentDescription = null,\n                                            modifier = Modifier.size(SwitchDefaults.IconSize),\n                                        )\n                                    }\n                                },\n                                colors = switchColors\n                            )\n                        },\n                        colors = listItemColors,\n                        modifier = Modifier.clip(cardShape)\n                    )\n                }\n            }\n\n            item {\n                var expanded by remember { mutableStateOf(false) }\n                Column(\n                    horizontalAlignment = Alignment.End,\n                    modifier = Modifier\n                        .padding(vertical = 6.dp)\n                        .fillMaxWidth()\n                ) {\n                    FilledTonalIconToggleButton(\n                        checked = expanded,\n                        onCheckedChange = { expanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier.width(52.dp)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.info),\n                            null\n                        )\n                    }\n                    AnimatedVisibility(expanded) {\n                        Text(\n                            stringResource(R.string.pomodoro_info),\n                            style = typography.bodyMedium,\n                            color = colorScheme.onSurfaceVariant,\n                            modifier = Modifier.padding(8.dp)\n                        )\n                    }\n                }\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Preview\n@Composable\nprivate fun TimerSettingsPreview() {\n    val focusTimeInputFieldState = rememberTextFieldState(\"25\")\n    val shortBreakTimeInputFieldState = rememberTextFieldState(\"5\")\n    val longBreakTimeInputFieldState = rememberTextFieldState(\"15\")\n    val sessionsSliderState = rememberSliderState(\n        value = 4f,\n        valueRange = 1f..8f,\n        steps = 6\n    )\n    TimerSettings(\n        isPlus = false,\n        serviceRunning = true,\n        settingsState = remember { SettingsState() },\n        focusTimeInputFieldState = focusTimeInputFieldState,\n        shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n        longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n        sessionsSliderState = sessionsSliderState,\n        onAction = {},\n        setShowPaywall = {},\n        onBack = {}\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\SettingsScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen\n\nimport android.annotation.SuppressLint\nimport android.app.LocaleManager\nimport android.os.Build\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.slideInHorizontally\nimport androidx.compose.animation.slideOutHorizontally\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.LocalTextStyle\nimport androidx.compose.material3.SliderState\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.DisposableEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.saveable.rememberSaveable\nimport androidx.compose.runtime.setValue\nimport androidx.compose.runtime.snapshots.SnapshotStateList\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextOverflow\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport androidx.navigation3.runtime.entryProvider\nimport androidx.navigation3.ui.NavDisplay\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.Screen\nimport org.nsh07.pomodoro.ui.settingsScreen.components.AboutCard\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ClickableListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.LocaleBottomSheet\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusPromo\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.AlarmSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.AppearanceSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.TimerSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsViewModel\nimport org.nsh07.pomodoro.ui.settingsScreens\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\n\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Composable\nfun SettingsScreenRoot(\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier,\n    viewModel: SettingsViewModel = viewModel(factory = SettingsViewModel.Factory)\n) {\n    val backStack = viewModel.backStack\n\n    DisposableEffect(Unit) {\n        viewModel.runTextFieldFlowCollection()\n        onDispose { viewModel.cancelTextFieldFlowCollection() }\n    }\n\n    val focusTimeInputFieldState = viewModel.focusTimeTextFieldState\n    val shortBreakTimeInputFieldState = viewModel.shortBreakTimeTextFieldState\n    val longBreakTimeInputFieldState = viewModel.longBreakTimeTextFieldState\n\n    val isPlus by viewModel.isPlus.collectAsStateWithLifecycle()\n    val serviceRunning by viewModel.serviceRunning.collectAsStateWithLifecycle()\n\n    val settingsState by viewModel.settingsState.collectAsStateWithLifecycle()\n\n    val sessionsSliderState = rememberSaveable(\n        saver = SliderState.Saver(\n            viewModel.sessionsSliderState.onValueChangeFinished,\n            viewModel.sessionsSliderState.valueRange\n        )\n    ) {\n        viewModel.sessionsSliderState\n    }\n\n    SettingsScreen(\n        isPlus = isPlus,\n        serviceRunning = serviceRunning,\n        settingsState = settingsState,\n        backStack = backStack,\n        focusTimeInputFieldState = focusTimeInputFieldState,\n        shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n        longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n        sessionsSliderState = sessionsSliderState,\n        onAction = viewModel::onAction,\n        setShowPaywall = setShowPaywall,\n        modifier = modifier\n    )\n}\n\n@SuppressLint(\"LocalContextGetResourceValueCall\")\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nprivate fun SettingsScreen(\n    isPlus: Boolean,\n    serviceRunning: Boolean,\n    settingsState: SettingsState,\n    backStack: SnapshotStateList<Screen.Settings>,\n    focusTimeInputFieldState: TextFieldState,\n    shortBreakTimeInputFieldState: TextFieldState,\n    longBreakTimeInputFieldState: TextFieldState,\n    sessionsSliderState: SliderState,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val context = LocalContext.current\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    val currentLocales =\n        if (Build.VERSION.SDK_INT >= 33) {\n            context\n                .getSystemService(LocaleManager::class.java)\n                .applicationLocales\n        } else null\n    val currentLocalesSize = currentLocales?.size() ?: 0\n\n    var showLocaleSheet by remember { mutableStateOf(false) }\n\n    if (showLocaleSheet && currentLocales != null)\n        LocaleBottomSheet(\n            currentLocales = currentLocales,\n            setShowSheet = { showLocaleSheet = it }\n        )\n\n    NavDisplay(\n        backStack = backStack,\n        onBack = backStack::removeLastOrNull,\n        transitionSpec = {\n            (slideInHorizontally(initialOffsetX = { it }))\n                .togetherWith(slideOutHorizontally(targetOffsetX = { -it / 4 }) + fadeOut())\n        },\n        popTransitionSpec = {\n            (slideInHorizontally(initialOffsetX = { -it / 4 }) + fadeIn())\n                .togetherWith(slideOutHorizontally(targetOffsetX = { it }))\n        },\n        predictivePopTransitionSpec = {\n            (slideInHorizontally(initialOffsetX = { -it / 4 }) + fadeIn())\n                .togetherWith(slideOutHorizontally(targetOffsetX = { it }))\n        },\n        entryProvider = entryProvider {\n            entry<Screen.Settings.Main> {\n                Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n                    TopAppBar(\n                        title = {\n                            Text(\n                                stringResource(R.string.settings),\n                                style = LocalTextStyle.current.copy(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp\n                                )\n                            )\n                        },\n                        subtitle = {},\n                        colors = topBarColors,\n                        titleHorizontalAlignment = Alignment.CenterHorizontally,\n                        scrollBehavior = scrollBehavior\n                    )\n\n                    LazyColumn(\n                        verticalArrangement = Arrangement.spacedBy(2.dp),\n                        modifier = Modifier\n                            .background(topBarColors.containerColor)\n                            .fillMaxSize()\n                            .padding(horizontal = 16.dp)\n                    ) {\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (!isPlus) item {\n                            PlusPromo(isPlus, setShowPaywall)\n                            Spacer(Modifier.height(14.dp))\n                        }\n\n                        item { AboutCard(isPlus) }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (isPlus) item {\n                            PlusPromo(isPlus, setShowPaywall)\n                            Spacer(Modifier.height(14.dp))\n                        }\n\n                        itemsIndexed(settingsScreens) { index, item ->\n                            ClickableListItem(\n                                leadingContent = {\n                                    Icon(painterResource(item.icon), null)\n                                },\n                                headlineContent = { Text(stringResource(item.label)) },\n                                supportingContent = {\n                                    Text(\n                                        remember {\n                                            item.innerSettings.joinToString(\", \") {\n                                                context.getString(it)\n                                            }\n                                        },\n                                        maxLines = 1,\n                                        overflow = TextOverflow.Ellipsis\n                                    )\n                                },\n                                trailingContent = {\n                                    Icon(painterResource(R.drawable.arrow_forward_big), null)\n                                },\n                                items = settingsScreens.size,\n                                index = index\n                            ) { backStack.add(item.route) }\n                        }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (currentLocales != null)\n                            item {\n                                ClickableListItem(\n                                    leadingContent = {\n                                        Icon(\n                                            painterResource(R.drawable.language),\n                                            contentDescription = null\n                                        )\n                                    },\n                                    headlineContent = { Text(stringResource(R.string.language)) },\n                                    supportingContent = {\n                                        Text(\n                                            if (currentLocalesSize > 0) currentLocales.get(0).displayName\n                                            else stringResource(R.string.system_default)\n                                        )\n                                    },\n                                    colors = listItemColors,\n                                    items = 1,\n                                    index = 0\n                                ) { showLocaleSheet = true }\n                            }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n                    }\n                }\n            }\n\n            entry<Screen.Settings.Alarm> {\n                AlarmSettings(\n                    settingsState = settingsState,\n                    onAction = onAction,\n                    onBack = backStack::removeLastOrNull\n                )\n            }\n            entry<Screen.Settings.Appearance> {\n                AppearanceSettings(\n                    settingsState = settingsState,\n                    isPlus = isPlus,\n                    onAction = onAction,\n                    setShowPaywall = setShowPaywall,\n                    onBack = backStack::removeLastOrNull\n                )\n            }\n            entry<Screen.Settings.Timer> {\n                TimerSettings(\n                    isPlus = isPlus,\n                    serviceRunning = serviceRunning,\n                    settingsState = settingsState,\n                    focusTimeInputFieldState = focusTimeInputFieldState,\n                    shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n                    longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n                    sessionsSliderState = sessionsSliderState,\n                    onAction = onAction,\n                    setShowPaywall = setShowPaywall,\n                    onBack = backStack::removeLastOrNull,\n                )\n            }\n        }\n    )\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\SettingsSwitchItem.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen\n\nimport androidx.annotation.DrawableRes\nimport androidx.annotation.StringRes\n\ndata class SettingsSwitchItem(\n    val checked: Boolean,\n    val enabled: Boolean = true,\n    @param:DrawableRes val icon: Int,\n    @param:StringRes val label: Int,\n    @param:StringRes val description: Int,\n    val onClick: (Boolean) -> Unit\n)\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsAction.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport android.net.Uri\nimport androidx.compose.ui.graphics.Color\n\nsealed interface SettingsAction {\n    data class SaveAlarmEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveVibrateEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveBlackTheme(val enabled: Boolean) : SettingsAction\n    data class SaveAodEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveDndEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveAlarmSound(val uri: Uri?) : SettingsAction\n    data class SaveTheme(val theme: String) : SettingsAction\n    data class SaveColorScheme(val color: Color) : SettingsAction\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsState.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport androidx.compose.runtime.Immutable\nimport androidx.compose.ui.graphics.Color\n\n@Immutable\ndata class SettingsState(\n    val theme: String = \"auto\",\n    val alarmSound: String = \"\",\n    val colorScheme: String = Color.White.toString(),\n    val blackTheme: Boolean = false,\n    val aodEnabled: Boolean = false,\n    val alarmEnabled: Boolean = true,\n    val vibrateEnabled: Boolean = true,\n    val dndEnabled: Boolean = false\n)\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport android.net.Uri\nimport android.provider.Settings\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.SliderState\nimport androidx.compose.runtime.mutableStateListOf\nimport androidx.compose.runtime.snapshotFlow\nimport androidx.compose.ui.graphics.Color\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.FlowPreview\nimport kotlinx.coroutines.Job\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.debounce\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.billing.BillingManager\nimport org.nsh07.pomodoro.data.AppPreferenceRepository\nimport org.nsh07.pomodoro.data.TimerRepository\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.ui.Screen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport org.nsh07.pomodoro.utils.millisecondsToStr\n\n@OptIn(FlowPreview::class, ExperimentalMaterial3Api::class)\nclass SettingsViewModel(\n    private val billingManager: BillingManager,\n    private val preferenceRepository: AppPreferenceRepository,\n    private val serviceHelper: ServiceHelper,\n    private val time: MutableStateFlow<Long>,\n    private val timerRepository: TimerRepository,\n    private val timerState: MutableStateFlow<TimerState>\n) : ViewModel() {\n    val backStack = mutableStateListOf<Screen.Settings>(Screen.Settings.Main)\n\n    val isPlus = billingManager.isPlus\n    val serviceRunning = timerRepository.serviceRunning.asStateFlow()\n\n    private val _settingsState = MutableStateFlow(SettingsState())\n    val settingsState = _settingsState.asStateFlow()\n\n    val focusTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.focusTime / 60000).toString())\n    }\n    val shortBreakTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.shortBreakTime / 60000).toString())\n    }\n    val longBreakTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.longBreakTime / 60000).toString())\n    }\n\n    val sessionsSliderState by lazy {\n        SliderState(\n            value = timerRepository.sessionLength.toFloat(),\n            steps = 4,\n            valueRange = 1f..6f,\n            onValueChangeFinished = ::updateSessionLength\n        )\n    }\n\n    private var focusFlowCollectionJob: Job? = null\n    private var shortBreakFlowCollectionJob: Job? = null\n    private var longBreakFlowCollectionJob: Job? = null\n\n    init {\n        viewModelScope.launch {\n            reloadSettings()\n        }\n    }\n\n    fun onAction(action: SettingsAction) {\n        when (action) {\n            is SettingsAction.SaveAlarmSound -> saveAlarmSound(action.uri)\n            is SettingsAction.SaveAlarmEnabled -> saveAlarmEnabled(action.enabled)\n            is SettingsAction.SaveVibrateEnabled -> saveVibrateEnabled(action.enabled)\n            is SettingsAction.SaveDndEnabled -> saveDndEnabled(action.enabled)\n            is SettingsAction.SaveColorScheme -> saveColorScheme(action.color)\n            is SettingsAction.SaveTheme -> saveTheme(action.theme)\n            is SettingsAction.SaveBlackTheme -> saveBlackTheme(action.enabled)\n            is SettingsAction.SaveAodEnabled -> saveAodEnabled(action.enabled)\n        }\n    }\n\n    private fun updateSessionLength() {\n        viewModelScope.launch {\n            timerRepository.sessionLength = preferenceRepository.saveIntPreference(\n                \"session_length\",\n                sessionsSliderState.value.toInt()\n            )\n            refreshTimer()\n        }\n    }\n\n    fun runTextFieldFlowCollection() {\n        focusFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { focusTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.focusTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"focus_time\",\n                            timerRepository.focusTime.toInt()\n                        )\n                    }\n                }\n        }\n        shortBreakFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { shortBreakTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.shortBreakTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"short_break_time\",\n                            timerRepository.shortBreakTime.toInt()\n                        )\n                    }\n                }\n        }\n        longBreakFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { longBreakTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.longBreakTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"long_break_time\",\n                            timerRepository.longBreakTime.toInt()\n                        )\n                    }\n                }\n        }\n    }\n\n    fun cancelTextFieldFlowCollection() {\n        if (!serviceRunning.value) serviceHelper.startService(TimerAction.ResetTimer)\n        focusFlowCollectionJob?.cancel()\n        shortBreakFlowCollectionJob?.cancel()\n        longBreakFlowCollectionJob?.cancel()\n    }\n\n    private fun saveAlarmEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.alarmEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(alarmEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"alarm_enabled\", enabled)\n        }\n    }\n\n    private fun saveVibrateEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.vibrateEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(vibrateEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", enabled)\n        }\n    }\n\n    private fun saveDndEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.dndEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(dndEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"dnd_enabled\", enabled)\n        }\n    }\n\n    private fun saveAlarmSound(uri: Uri?) {\n        viewModelScope.launch {\n            timerRepository.alarmSoundUri = uri\n            _settingsState.update { currentState ->\n                currentState.copy(alarmSound = uri.toString())\n            }\n            preferenceRepository.saveStringPreference(\"alarm_sound\", uri.toString())\n        }\n    }\n\n    private fun saveColorScheme(colorScheme: Color) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(colorScheme = colorScheme.toString())\n            }\n            preferenceRepository.saveStringPreference(\"color_scheme\", colorScheme.toString())\n        }\n    }\n\n    private fun saveTheme(theme: String) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(theme = theme)\n            }\n            preferenceRepository.saveStringPreference(\"theme\", theme)\n        }\n    }\n\n    private fun saveBlackTheme(blackTheme: Boolean) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(blackTheme = blackTheme)\n            }\n            preferenceRepository.saveBooleanPreference(\"black_theme\", blackTheme)\n        }\n    }\n\n    private fun saveAodEnabled(aodEnabled: Boolean) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(aodEnabled = aodEnabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"aod_enabled\", aodEnabled)\n        }\n    }\n\n    suspend fun reloadSettings() {\n        val theme = preferenceRepository.getStringPreference(\"theme\")\n            ?: preferenceRepository.saveStringPreference(\"theme\", \"auto\")\n        val colorScheme = preferenceRepository.getStringPreference(\"color_scheme\")\n            ?: preferenceRepository.saveStringPreference(\"color_scheme\", Color.White.toString())\n        val blackTheme = preferenceRepository.getBooleanPreference(\"black_theme\")\n            ?: preferenceRepository.saveBooleanPreference(\"black_theme\", false)\n        val aodEnabled = preferenceRepository.getBooleanPreference(\"aod_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"aod_enabled\", false)\n        val alarmSound = preferenceRepository.getStringPreference(\"alarm_sound\")\n            ?: preferenceRepository.saveStringPreference(\n                \"alarm_sound\",\n                (Settings.System.DEFAULT_ALARM_ALERT_URI\n                    ?: Settings.System.DEFAULT_RINGTONE_URI).toString()\n            )\n        val alarmEnabled = preferenceRepository.getBooleanPreference(\"alarm_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"alarm_enabled\", true)\n        val vibrateEnabled = preferenceRepository.getBooleanPreference(\"vibrate_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", true)\n        val dndEnabled = preferenceRepository.getBooleanPreference(\"dnd_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"dnd_enabled\", false)\n\n        _settingsState.update { currentState ->\n            currentState.copy(\n                theme = theme,\n                colorScheme = colorScheme,\n                alarmSound = alarmSound,\n                blackTheme = blackTheme,\n                aodEnabled = aodEnabled,\n                alarmEnabled = alarmEnabled,\n                vibrateEnabled = vibrateEnabled,\n                dndEnabled = dndEnabled\n            )\n        }\n    }\n\n    private fun refreshTimer() {\n        if (!serviceRunning.value) {\n            time.update { timerRepository.focusTime }\n\n            timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = TimerMode.FOCUS,\n                    timeStr = millisecondsToStr(time.value),\n                    totalTime = time.value,\n                    nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                    nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                    currentFocusCount = 1,\n                    totalFocusCount = timerRepository.sessionLength\n                )\n            }\n        }\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appBillingManager = application.container.billingManager\n                val appPreferenceRepository = application.container.appPreferenceRepository\n                val appTimerRepository = application.container.appTimerRepository\n                val serviceHelper = application.container.serviceHelper\n                val time = application.container.time\n                val timerState = application.container.timerState\n\n                SettingsViewModel(\n                    billingManager = appBillingManager,\n                    preferenceRepository = appPreferenceRepository,\n                    serviceHelper = serviceHelper,\n                    time = time,\n                    timerRepository = appTimerRepository,\n                    timerState = timerState\n                )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\ProductivityGraph.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.ColumnScope\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.utils.millisecondsToHoursMinutes\n\n@Composable\nfun ColumnScope.ProductivityGraph(\n    expanded: Boolean,\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    label: String = stringResource(R.string.productivity_analysis)\n) {\n    AnimatedVisibility(expanded) {\n        Column(modifier = modifier) {\n            Text(label, style = typography.titleMedium)\n            Text(\n                stringResource(R.string.productivity_analysis_desc),\n                style = typography.bodySmall\n            )\n            Spacer(Modifier.height(8.dp))\n            TimeColumnChart(\n                modelProducer,\n                xValueFormatter = CartesianValueFormatter { _, value, _ ->\n                    when (value) {\n                        0.0 -> \"0 - 6\"\n                        1.0 -> \"6 - 12\"\n                        2.0 -> \"12 - 18\"\n                        3.0 -> \"18 - 24\"\n                        else -> \"\"\n                    }\n                },\n                yValueFormatter = CartesianValueFormatter { _, value, _ ->\n                    millisecondsToHoursMinutes(value.toLong())\n                }\n            )\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\StatsScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "STATE",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.animateFloatAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.PaddingValues\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.WindowInsets\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.text.TextAutoSize\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledTonalIconToggleButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.LocalTextStyle\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Surface\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.saveable.rememberSaveable\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.rotate\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.common.data.ExtraStore\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.ui.statsScreen.viewModel.StatsViewModel\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHoursMinutes\n\n@Composable\nfun StatsScreenRoot(\n    contentPadding: PaddingValues,\n    modifier: Modifier = Modifier,\n    viewModel: StatsViewModel = viewModel(factory = StatsViewModel.Factory)\n) {\n    val todayStat by viewModel.todayStat.collectAsStateWithLifecycle(null)\n\n    val lastWeekSummaryChartData by viewModel.lastWeekSummaryChartData.collectAsStateWithLifecycle()\n    val lastWeekAnalysisValues by viewModel.lastWeekAverageFocusTimes.collectAsStateWithLifecycle()\n\n    val lastMonthSummaryChartData by viewModel.lastMonthSummaryChartData.collectAsStateWithLifecycle()\n    val lastMonthAnalysisValues by viewModel.lastMonthAverageFocusTimes.collectAsStateWithLifecycle()\n\n    val lastYearSummaryChartData by viewModel.lastYearSummaryChartData.collectAsStateWithLifecycle()\n    val lastYearAnalysisValues by viewModel.lastYearAverageFocusTimes.collectAsStateWithLifecycle()\n\n    StatsScreen(\n        contentPadding = contentPadding,\n        lastWeekSummaryChartData = lastWeekSummaryChartData,\n        lastMonthSummaryChartData = lastMonthSummaryChartData,\n        lastYearSummaryChartData = lastYearSummaryChartData,\n        todayStat = todayStat,\n        lastWeekAverageFocusTimes = lastWeekAnalysisValues,\n        lastMonthAverageFocusTimes = lastMonthAnalysisValues,\n        lastYearAverageFocusTimes = lastYearAnalysisValues,\n        generateSampleData = viewModel::generateSampleData,\n        modifier = modifier\n    )\n}\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun StatsScreen(\n    contentPadding: PaddingValues,\n    lastWeekSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    lastMonthSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    lastYearSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    todayStat: Stat?,\n    lastWeekAverageFocusTimes: List<Int>,\n    lastMonthAverageFocusTimes: List<Int>,\n    lastYearAverageFocusTimes: List<Int>,\n    generateSampleData: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    var lastWeekStatExpanded by rememberSaveable { mutableStateOf(false) }\n    var lastMonthStatExpanded by rememberSaveable { mutableStateOf(false) }\n\n    val lastWeekSummaryAnalysisModelProducer = remember { CartesianChartModelProducer() }\n    val lastMonthSummaryAnalysisModelProducer = remember { CartesianChartModelProducer() }\n\n    LaunchedEffect(lastWeekAverageFocusTimes) {\n        lastWeekSummaryAnalysisModelProducer.runTransaction {\n            columnSeries {\n                series(lastWeekAverageFocusTimes)\n            }\n        }\n    }\n\n    LaunchedEffect(lastMonthAverageFocusTimes) {\n        lastMonthSummaryAnalysisModelProducer.runTransaction {\n            columnSeries {\n                series(lastMonthAverageFocusTimes)\n            }\n        }\n    }\n\n    Column(\n        horizontalAlignment = Alignment.CenterHorizontally,\n        modifier = modifier.nestedScroll(scrollBehavior.nestedScrollConnection)\n    ) {\n        TopAppBar(\n            title = {\n                Text(\n                    stringResource(R.string.stats),\n                    style = LocalTextStyle.current.copy(\n                        fontFamily = robotoFlexTopBar,\n                        fontSize = 32.sp,\n                        lineHeight = 32.sp\n                    ),\n                    modifier = Modifier\n                        .padding(top = contentPadding.calculateTopPadding())\n                        .padding(vertical = 14.dp)\n                )\n            },\n            actions = if (BuildConfig.DEBUG) {\n                {\n                    IconButton(\n                        onClick = generateSampleData\n                    ) {\n                        Spacer(Modifier.size(24.dp))\n                    }\n                }\n            } else {\n                {}\n            },\n            subtitle = {},\n            titleHorizontalAlignment = Alignment.CenterHorizontally,\n            scrollBehavior = scrollBehavior,\n            windowInsets = WindowInsets()\n        )\n\n        LazyColumn(\n            horizontalAlignment = Alignment.CenterHorizontally,\n            verticalArrangement = Arrangement.spacedBy(16.dp)\n        ) {\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.today),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(modifier = Modifier.padding(horizontal = 16.dp)) {\n                    Box(\n                        modifier = Modifier\n                            .background(\n                                colorScheme.primaryContainer,\n                                MaterialTheme.shapes.largeIncreased\n                            )\n                            .weight(1f)\n                    ) {\n                        Column(Modifier.padding(16.dp)) {\n                            Text(\n                                stringResource(R.string.focus),\n                                style = typography.titleMedium,\n                                color = colorScheme.onPrimaryContainer\n                            )\n                            Text(\n                                remember(todayStat) {\n                                    millisecondsToHoursMinutes(todayStat?.totalFocusTime() ?: 0)\n                                },\n                                style = typography.displaySmall,\n                                fontFamily = interClock,\n                                color = colorScheme.onPrimaryContainer,\n                                maxLines = 1,\n                                autoSize = TextAutoSize.StepBased(maxFontSize = typography.displaySmall.fontSize)\n                            )\n                        }\n                    }\n                    Spacer(Modifier.width(8.dp))\n                    Box(\n                        modifier = Modifier\n                            .background(\n                                colorScheme.tertiaryContainer,\n                                MaterialTheme.shapes.largeIncreased\n                            )\n                            .weight(1f)\n                    ) {\n                        Column(Modifier.padding(16.dp)) {\n                            Text(\n                                stringResource(R.string.break_),\n                                style = typography.titleMedium,\n                                color = colorScheme.onTertiaryContainer\n                            )\n                            Text(\n                                remember(todayStat) {\n                                    millisecondsToHoursMinutes(todayStat?.breakTime ?: 0)\n                                },\n                                style = typography.displaySmall,\n                                fontFamily = interClock,\n                                color = colorScheme.onTertiaryContainer,\n                                maxLines = 1,\n                                autoSize = TextAutoSize.StepBased(maxFontSize = typography.displaySmall.fontSize)\n                            )\n                        }\n                    }\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_week),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastWeekAverageFocusTimes) {\n                                lastWeekAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeColumnChart(\n                    lastWeekSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastWeekSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item {\n                val iconRotation by animateFloatAsState(\n                    if (lastWeekStatExpanded) 180f else 0f,\n                    animationSpec = motionScheme.defaultSpatialSpec()\n                )\n                Column(\n                    horizontalAlignment = Alignment.CenterHorizontally,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    Spacer(Modifier.height(2.dp))\n                    FilledTonalIconToggleButton(\n                        checked = lastWeekStatExpanded,\n                        onCheckedChange = { lastWeekStatExpanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier\n                            .padding(horizontal = 16.dp)\n                            .width(52.dp)\n                            .align(Alignment.End)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.arrow_down),\n                            stringResource(R.string.more_info),\n                            modifier = Modifier.rotate(iconRotation)\n                        )\n                    }\n                    ProductivityGraph(\n                        lastWeekStatExpanded,\n                        lastWeekSummaryAnalysisModelProducer,\n                        label = stringResource(R.string.weekly_productivity_analysis),\n                        modifier = Modifier.padding(horizontal = 32.dp)\n                    )\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_month),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastMonthAverageFocusTimes) {\n                                lastMonthAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        text = stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeColumnChart(\n                    lastMonthSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    thickness = 8.dp,\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastMonthSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item {\n                val iconRotation by animateFloatAsState(\n                    if (lastMonthStatExpanded) 180f else 0f,\n                    animationSpec = motionScheme.defaultSpatialSpec()\n                )\n                Column(\n                    horizontalAlignment = Alignment.CenterHorizontally,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    Spacer(Modifier.height(2.dp))\n                    FilledTonalIconToggleButton(\n                        checked = lastMonthStatExpanded,\n                        onCheckedChange = { lastMonthStatExpanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier\n                            .padding(horizontal = 16.dp)\n                            .width(52.dp)\n                            .align(Alignment.End)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.arrow_down),\n                            stringResource(R.string.more_info),\n                            modifier = Modifier.rotate(iconRotation)\n                        )\n                    }\n                    ProductivityGraph(\n                        lastMonthStatExpanded,\n                        lastMonthSummaryAnalysisModelProducer,\n                        label = stringResource(R.string.monthly_productivity_analysis),\n                        modifier = Modifier.padding(horizontal = 32.dp)\n                    )\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_year),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastYearAverageFocusTimes) {\n                                lastYearAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        text = stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeLineChart(\n                    lastYearSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastYearSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item { Spacer(Modifier.height(16.dp)) }\n        }\n    }\n}\n\n@Preview(\n    widthDp = 400\n)\n@Composable\nfun StatsScreenPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val keys = remember { ExtraStore.Key<List<String>>() }\n\n    LaunchedEffect(Unit) {\n        modelProducer.runTransaction {\n            columnSeries {\n                series(5, 6, 5, 2, 11, 8, 5)\n            }\n            lineSeries {}\n            extras { it[keys] = listOf(\"M\", \"T\", \"W\", \"T\", \"F\", \"S\", \"S\") }\n        }\n    }\n\n    TomatoTheme {\n        Surface {\n            StatsScreen(\n                PaddingValues(),\n                Pair(modelProducer, keys),\n                Pair(modelProducer, keys),\n                Pair(modelProducer, keys),\n                null,\n                listOf(0, 0, 0, 0),\n                listOf(0, 0, 0, 0),\n                listOf(0, 0, 0, 0),\n                {}\n            )\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\TimeColumnChart.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.AnimationSpec\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Surface\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.compose.cartesian.CartesianChartHost\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberBottom\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberStart\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberColumnCartesianLayer\nimport com.patrykandpatrick.vico.compose.cartesian.rememberCartesianChart\nimport com.patrykandpatrick.vico.compose.cartesian.rememberVicoZoomState\nimport com.patrykandpatrick.vico.compose.common.ProvideVicoTheme\nimport com.patrykandpatrick.vico.compose.common.component.rememberLineComponent\nimport com.patrykandpatrick.vico.compose.common.fill\nimport com.patrykandpatrick.vico.compose.common.vicoTheme\nimport com.patrykandpatrick.vico.compose.m3.common.rememberM3VicoTheme\nimport com.patrykandpatrick.vico.core.cartesian.FadingEdges\nimport com.patrykandpatrick.vico.core.cartesian.Zoom\nimport com.patrykandpatrick.vico.core.cartesian.axis.HorizontalAxis\nimport com.patrykandpatrick.vico.core.cartesian.axis.VerticalAxis\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.layer.ColumnCartesianLayer\nimport com.patrykandpatrick.vico.core.common.Fill\nimport com.patrykandpatrick.vico.core.common.shape.CorneredShape\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHours\nimport org.nsh07.pomodoro.utils.millisecondsToMinutes\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimeColumnChart(\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    thickness: Dp = 40.dp,\n    columnCollectionSpacing: Dp = 4.dp,\n    xValueFormatter: CartesianValueFormatter = CartesianValueFormatter.Default,\n    yValueFormatter: CartesianValueFormatter = CartesianValueFormatter { _, value, _ ->\n        if (value >= 60 * 60 * 1000) {\n            millisecondsToHours(value.toLong())\n        } else {\n            millisecondsToMinutes(value.toLong())\n        }\n    },\n    animationSpec: AnimationSpec<Float>? = motionScheme.slowEffectsSpec()\n) {\n    ProvideVicoTheme(rememberM3VicoTheme()) {\n        CartesianChartHost(\n            chart =\n                rememberCartesianChart(\n                    rememberColumnCartesianLayer(\n                        ColumnCartesianLayer.ColumnProvider.series(\n                            vicoTheme.columnCartesianLayerColors.map { color ->\n                                rememberLineComponent(\n                                    fill = fill(color),\n                                    thickness = thickness,\n                                    shape = CorneredShape.Pill\n                                )\n                            }\n                        ),\n                        columnCollectionSpacing = columnCollectionSpacing\n                    ),\n                    startAxis = VerticalAxis.rememberStart(\n                        line = rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = yValueFormatter\n                    ),\n                    bottomAxis = HorizontalAxis.rememberBottom(\n                        rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = xValueFormatter\n                    ),\n                    fadingEdges = FadingEdges()\n                ),\n            modelProducer = modelProducer,\n            zoomState = rememberVicoZoomState(\n                zoomEnabled = false,\n                initialZoom = Zoom.fixed(),\n                minZoom = Zoom.min(Zoom.Content, Zoom.fixed())\n            ),\n            animationSpec = animationSpec,\n            modifier = modifier,\n        )\n    }\n}\n\n@Preview\n@Composable\nprivate fun TimeColumnChartPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val values = mutableListOf<Int>()\n    LaunchedEffect(Unit) {\n        repeat(30) {\n            values.add((0..120).random() * 60 * 1000)\n        }\n        modelProducer.runTransaction {\n            columnSeries {\n                series(values)\n            }\n        }\n    }\n    TomatoTheme {\n        Surface {\n            TimeColumnChart(thickness = 8.dp, modelProducer = modelProducer)\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\TimeLineChart.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.AnimationSpec\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Surface\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.compose.cartesian.CartesianChartHost\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberBottom\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberStart\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberLine\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberLineCartesianLayer\nimport com.patrykandpatrick.vico.compose.cartesian.rememberCartesianChart\nimport com.patrykandpatrick.vico.compose.cartesian.rememberVicoZoomState\nimport com.patrykandpatrick.vico.compose.common.ProvideVicoTheme\nimport com.patrykandpatrick.vico.compose.common.component.rememberLineComponent\nimport com.patrykandpatrick.vico.compose.common.fill\nimport com.patrykandpatrick.vico.compose.common.vicoTheme\nimport com.patrykandpatrick.vico.compose.m3.common.rememberM3VicoTheme\nimport com.patrykandpatrick.vico.core.cartesian.FadingEdges\nimport com.patrykandpatrick.vico.core.cartesian.Zoom\nimport com.patrykandpatrick.vico.core.cartesian.axis.HorizontalAxis\nimport com.patrykandpatrick.vico.core.cartesian.axis.VerticalAxis\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.cartesian.layer.LineCartesianLayer\nimport com.patrykandpatrick.vico.core.cartesian.layer.LineCartesianLayer.LineFill.Companion.single\nimport com.patrykandpatrick.vico.core.common.Fill\nimport com.patrykandpatrick.vico.core.common.shader.ShaderProvider\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHours\nimport org.nsh07.pomodoro.utils.millisecondsToMinutes\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimeLineChart(\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    thickness: Float = 2f,\n    pointSpacing: Dp = 12.dp,\n    xValueFormatter: CartesianValueFormatter = CartesianValueFormatter.Default,\n    yValueFormatter: CartesianValueFormatter = CartesianValueFormatter { _, value, _ ->\n        if (value >= 60 * 60 * 1000) {\n            millisecondsToHours(value.toLong())\n        } else {\n            millisecondsToMinutes(value.toLong())\n        }\n    },\n    animationSpec: AnimationSpec<Float>? = motionScheme.slowEffectsSpec()\n) {\n    ProvideVicoTheme(rememberM3VicoTheme()) {\n        CartesianChartHost(\n            chart =\n                rememberCartesianChart(\n                    rememberLineCartesianLayer(\n                        LineCartesianLayer.LineProvider.series(\n                            vicoTheme.lineCartesianLayerColors.map { color ->\n                                LineCartesianLayer.rememberLine(\n                                    fill = single(fill(color)),\n                                    stroke = LineCartesianLayer.LineStroke.Continuous(\n                                        thicknessDp = thickness,\n                                    ),\n                                    areaFill = LineCartesianLayer.AreaFill.single(\n                                        fill(\n                                            ShaderProvider.verticalGradient(\n                                                color.toArgb(),\n                                                Color.Transparent.toArgb()\n                                            )\n                                        )\n                                    ),\n                                    pointConnector = LineCartesianLayer.PointConnector.cubic(0.5f)\n                                )\n                            }\n                        ),\n                        pointSpacing = pointSpacing\n                    ),\n                    startAxis = VerticalAxis.rememberStart(\n                        line = rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = yValueFormatter\n                    ),\n                    bottomAxis = HorizontalAxis.rememberBottom(\n                        rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = xValueFormatter\n                    ),\n                    fadingEdges = FadingEdges()\n                ),\n            modelProducer = modelProducer,\n            zoomState = rememberVicoZoomState(\n                zoomEnabled = true,\n                initialZoom = Zoom.fixed(),\n                minZoom = Zoom.min(Zoom.Content, Zoom.fixed())\n            ),\n            animationSpec = animationSpec,\n            modifier = modifier,\n        )\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nprivate fun TimeLineChartPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val values = mutableListOf<Int>()\n    LaunchedEffect(Unit) {\n        repeat(365) {\n            values.add((0..120).random() * 60 * 1000)\n        }\n        modelProducer.runTransaction {\n            lineSeries {\n                series(values)\n            }\n        }\n    }\n    TomatoTheme {\n        Surface {\n            TimeLineChart(modelProducer = modelProducer)\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\viewModel\\StatsViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen.viewModel\n\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.common.data.ExtraStore\nimport kotlinx.coroutines.flow.SharingStarted\nimport kotlinx.coroutines.flow.StateFlow\nimport kotlinx.coroutines.flow.distinctUntilChanged\nimport kotlinx.coroutines.flow.map\nimport kotlinx.coroutines.flow.stateIn\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.data.StatRepository\nimport java.time.LocalDate\nimport java.time.format.DateTimeFormatter\nimport java.time.format.TextStyle\nimport java.util.Locale\n\nclass StatsViewModel(\n    private val statRepository: StatRepository\n) : ViewModel() {\n\n    val todayStat = statRepository.getTodayStat().distinctUntilChanged()\n\n    private val lastWeekSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n    private val lastMonthSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n    private val lastYearSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n\n    private val yearDayFormatter = DateTimeFormatter.ofPattern(\"d MMM\")\n\n    val lastWeekSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(7)\n            .map { list ->\n                // reversing is required because we need ascending order while the DB returns descending order\n                val reversed = list.reversed()\n                val keys = reversed.map {\n                    it.date.dayOfWeek.getDisplayName(\n                        TextStyle.NARROW,\n                        Locale.getDefault()\n                    )\n                }\n                val values = reversed.map { it.focusTime }\n                lastWeekSummary.first.runTransaction {\n                    columnSeries { series(values) }\n                    extras { it[lastWeekSummary.second] = keys }\n                }\n                lastWeekSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastWeekSummary\n            )\n\n    val lastWeekAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(7)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    val lastMonthSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(30)\n            .map { list ->\n                val reversed = list.reversed()\n                val keys = reversed.map { it.date.dayOfMonth.toString() }\n                val values = reversed.map { it.focusTime }\n                lastMonthSummary.first.runTransaction {\n                    columnSeries { series(values) }\n                    extras { it[lastMonthSummary.second] = keys }\n                }\n                lastMonthSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastMonthSummary\n            )\n\n    val lastMonthAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(30)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    val lastYearSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(365)\n            .map { list ->\n                val reversed = list.reversed()\n                val keys = reversed.map { it.date.format(yearDayFormatter) }\n                val values = reversed.map { it.focusTime }\n                lastYearSummary.first.runTransaction {\n                    lineSeries { series(values) }\n                    extras { it[lastYearSummary.second] = keys }\n                }\n                lastYearSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastYearSummary\n            )\n\n    val lastYearAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(365)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    fun generateSampleData() {\n        if (BuildConfig.DEBUG) {\n            viewModelScope.launch {\n                val today = LocalDate.now().plusDays(1)\n                var it = today.minusDays(40)\n\n                while (it.isBefore(today)) {\n                    statRepository.insertStat(\n                        Stat(\n                            it,\n                            (0..30 * 60 * 1000L).random(),\n                            (1 * 60 * 60 * 1000L..3 * 60 * 60 * 1000L).random(),\n                            (0..3 * 60 * 60 * 1000L).random(),\n                            (0..1 * 60 * 60 * 1000L).random(),\n                            0\n                        )\n                    )\n                    it = it.plusDays(1)\n                }\n\n                statRepository.addBreakTime((0..30 * 60 * 60 * 1000L).random())\n            }\n        }\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appStatRepository = application.container.appStatRepository\n\n                StatsViewModel(appStatRepository)\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Color.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ListItemColors\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.SwitchColors\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.TopAppBarColors\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.graphics.Color\n\nval primaryLight = Color(0xFF4C662B)\nval onPrimaryLight = Color(0xFFFFFFFF)\nval primaryContainerLight = Color(0xFFCDEDA3)\nval onPrimaryContainerLight = Color(0xFF354E16)\nval secondaryLight = Color(0xFF586249)\nval onSecondaryLight = Color(0xFFFFFFFF)\nval secondaryContainerLight = Color(0xFFDCE7C8)\nval onSecondaryContainerLight = Color(0xFF404A33)\nval tertiaryLight = Color(0xFF386663)\nval onTertiaryLight = Color(0xFFFFFFFF)\nval tertiaryContainerLight = Color(0xFFBCECE7)\nval onTertiaryContainerLight = Color(0xFF1F4E4B)\nval errorLight = Color(0xFFBA1A1A)\nval onErrorLight = Color(0xFFFFFFFF)\nval errorContainerLight = Color(0xFFFFDAD6)\nval onErrorContainerLight = Color(0xFF93000A)\nval backgroundLight = Color(0xFFF9FAEF)\nval onBackgroundLight = Color(0xFF1A1C16)\nval surfaceLight = Color(0xFFF9FAEF)\nval onSurfaceLight = Color(0xFF1A1C16)\nval surfaceVariantLight = Color(0xFFE1E4D5)\nval onSurfaceVariantLight = Color(0xFF44483D)\nval outlineLight = Color(0xFF75796C)\nval outlineVariantLight = Color(0xFFC5C8BA)\nval scrimLight = Color(0xFF000000)\nval inverseSurfaceLight = Color(0xFF2F312A)\nval inverseOnSurfaceLight = Color(0xFFF1F2E6)\nval inversePrimaryLight = Color(0xFFB1D18A)\nval surfaceDimLight = Color(0xFFDADBD0)\nval surfaceBrightLight = Color(0xFFF9FAEF)\nval surfaceContainerLowestLight = Color(0xFFFFFFFF)\nval surfaceContainerLowLight = Color(0xFFF3F4E9)\nval surfaceContainerLight = Color(0xFFEEEFE3)\nval surfaceContainerHighLight = Color(0xFFE8E9DE)\nval surfaceContainerHighestLight = Color(0xFFE2E3D8)\n\nval primaryDark = Color(0xFFB1D18A)\nval onPrimaryDark = Color(0xFF1F3701)\nval primaryContainerDark = Color(0xFF354E16)\nval onPrimaryContainerDark = Color(0xFFCDEDA3)\nval secondaryDark = Color(0xFFBFCBAD)\nval onSecondaryDark = Color(0xFF2A331E)\nval secondaryContainerDark = Color(0xFF404A33)\nval onSecondaryContainerDark = Color(0xFFDCE7C8)\nval tertiaryDark = Color(0xFFA0D0CB)\nval onTertiaryDark = Color(0xFF003735)\nval tertiaryContainerDark = Color(0xFF1F4E4B)\nval onTertiaryContainerDark = Color(0xFFBCECE7)\nval errorDark = Color(0xFFFFB4AB)\nval onErrorDark = Color(0xFF690005)\nval errorContainerDark = Color(0xFF93000A)\nval onErrorContainerDark = Color(0xFFFFDAD6)\nval backgroundDark = Color(0xFF12140E)\nval onBackgroundDark = Color(0xFFE2E3D8)\nval surfaceDark = Color(0xFF12140E)\nval onSurfaceDark = Color(0xFFE2E3D8)\nval surfaceVariantDark = Color(0xFF44483D)\nval onSurfaceVariantDark = Color(0xFFC5C8BA)\nval outlineDark = Color(0xFF8F9285)\nval outlineVariantDark = Color(0xFF44483D)\nval scrimDark = Color(0xFF000000)\nval inverseSurfaceDark = Color(0xFFE2E3D8)\nval inverseOnSurfaceDark = Color(0xFF2F312A)\nval inversePrimaryDark = Color(0xFF4C662B)\nval surfaceDimDark = Color(0xFF12140E)\nval surfaceBrightDark = Color(0xFF383A32)\nval surfaceContainerLowestDark = Color(0xFF0C0F09)\nval surfaceContainerLowDark = Color(0xFF1A1C16)\nval surfaceContainerDark = Color(0xFF1E201A)\nval surfaceContainerHighDark = Color(0xFF282B24)\nval surfaceContainerHighestDark = Color(0xFF33362E)\n\nobject CustomColors {\n    var black = false\n\n    @OptIn(ExperimentalMaterial3Api::class)\n    val topBarColors: TopAppBarColors\n        @Composable get() =\n            TopAppBarDefaults.topAppBarColors(\n                containerColor = if (!black) colorScheme.surfaceContainer else colorScheme.surface,\n                scrolledContainerColor = if (!black) colorScheme.surfaceContainer else colorScheme.surface\n            )\n\n    val listItemColors: ListItemColors\n        @Composable get() =\n            ListItemDefaults.colors(containerColor = if (!black) colorScheme.surfaceBright else colorScheme.surfaceContainerHigh)\n\n    val selectedListItemColors: ListItemColors\n        @Composable get() =\n            ListItemDefaults.colors(\n                containerColor = colorScheme.secondaryContainer,\n                headlineColor = colorScheme.secondary,\n                leadingIconColor = colorScheme.onSecondaryContainer,\n                supportingColor = colorScheme.onSecondaryFixedVariant,\n                trailingIconColor = colorScheme.onSecondaryFixedVariant\n            )\n\n    val switchColors: SwitchColors\n        @Composable get() = SwitchDefaults.colors(\n            checkedIconColor = colorScheme.primary,\n        )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Shape.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.foundation.shape.CornerBasedShape\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.runtime.Composable\n\nobject TomatoShapeDefaults {\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val topListItemShape: RoundedCornerShape\n        @Composable get() =\n            RoundedCornerShape(\n                topStart = shapes.largeIncreased.topStart,\n                topEnd = shapes.largeIncreased.topEnd,\n                bottomStart = shapes.extraSmall.bottomStart,\n                bottomEnd = shapes.extraSmall.bottomStart\n            )\n\n    val middleListItemShape: RoundedCornerShape\n        @Composable get() = RoundedCornerShape(shapes.extraSmall.topStart)\n\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val bottomListItemShape: RoundedCornerShape\n        @Composable get() =\n            RoundedCornerShape(\n                topStart = shapes.extraSmall.topStart,\n                topEnd = shapes.extraSmall.topEnd,\n                bottomStart = shapes.largeIncreased.bottomStart,\n                bottomEnd = shapes.largeIncreased.bottomEnd\n            )\n\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val cardShape: CornerBasedShape\n        @Composable get() = shapes.largeIncreased\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Theme.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport android.app.Activity\nimport android.os.Build\nimport androidx.compose.foundation.isSystemInDarkTheme\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialExpressiveTheme\nimport androidx.compose.material3.MotionScheme\nimport androidx.compose.material3.darkColorScheme\nimport androidx.compose.material3.dynamicDarkColorScheme\nimport androidx.compose.material3.dynamicLightColorScheme\nimport androidx.compose.material3.lightColorScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.SideEffect\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalView\nimport androidx.core.view.WindowCompat\nimport com.materialkolor.dynamiccolor.ColorSpec\nimport com.materialkolor.rememberDynamicColorScheme\n\nprivate val lightScheme = lightColorScheme(\n    primary = primaryLight,\n    onPrimary = onPrimaryLight,\n    primaryContainer = primaryContainerLight,\n    onPrimaryContainer = onPrimaryContainerLight,\n    secondary = secondaryLight,\n    onSecondary = onSecondaryLight,\n    secondaryContainer = secondaryContainerLight,\n    onSecondaryContainer = onSecondaryContainerLight,\n    tertiary = tertiaryLight,\n    onTertiary = onTertiaryLight,\n    tertiaryContainer = tertiaryContainerLight,\n    onTertiaryContainer = onTertiaryContainerLight,\n    error = errorLight,\n    onError = onErrorLight,\n    errorContainer = errorContainerLight,\n    onErrorContainer = onErrorContainerLight,\n    background = backgroundLight,\n    onBackground = onBackgroundLight,\n    surface = surfaceLight,\n    onSurface = onSurfaceLight,\n    surfaceVariant = surfaceVariantLight,\n    onSurfaceVariant = onSurfaceVariantLight,\n    outline = outlineLight,\n    outlineVariant = outlineVariantLight,\n    scrim = scrimLight,\n    inverseSurface = inverseSurfaceLight,\n    inverseOnSurface = inverseOnSurfaceLight,\n    inversePrimary = inversePrimaryLight,\n    surfaceDim = surfaceDimLight,\n    surfaceBright = surfaceBrightLight,\n    surfaceContainerLowest = surfaceContainerLowestLight,\n    surfaceContainerLow = surfaceContainerLowLight,\n    surfaceContainer = surfaceContainerLight,\n    surfaceContainerHigh = surfaceContainerHighLight,\n    surfaceContainerHighest = surfaceContainerHighestLight,\n)\n\nprivate val darkScheme = darkColorScheme(\n    primary = primaryDark,\n    onPrimary = onPrimaryDark,\n    primaryContainer = primaryContainerDark,\n    onPrimaryContainer = onPrimaryContainerDark,\n    secondary = secondaryDark,\n    onSecondary = onSecondaryDark,\n    secondaryContainer = secondaryContainerDark,\n    onSecondaryContainer = onSecondaryContainerDark,\n    tertiary = tertiaryDark,\n    onTertiary = onTertiaryDark,\n    tertiaryContainer = tertiaryContainerDark,\n    onTertiaryContainer = onTertiaryContainerDark,\n    error = errorDark,\n    onError = onErrorDark,\n    errorContainer = errorContainerDark,\n    onErrorContainer = onErrorContainerDark,\n    background = backgroundDark,\n    onBackground = onBackgroundDark,\n    surface = surfaceDark,\n    onSurface = onSurfaceDark,\n    surfaceVariant = surfaceVariantDark,\n    onSurfaceVariant = onSurfaceVariantDark,\n    outline = outlineDark,\n    outlineVariant = outlineVariantDark,\n    scrim = scrimDark,\n    inverseSurface = inverseSurfaceDark,\n    inverseOnSurface = inverseOnSurfaceDark,\n    inversePrimary = inversePrimaryDark,\n    surfaceDim = surfaceDimDark,\n    surfaceBright = surfaceBrightDark,\n    surfaceContainerLowest = surfaceContainerLowestDark,\n    surfaceContainerLow = surfaceContainerLowDark,\n    surfaceContainer = surfaceContainerDark,\n    surfaceContainerHigh = surfaceContainerHighDark,\n    surfaceContainerHighest = surfaceContainerHighestDark,\n)\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TomatoTheme(\n    darkTheme: Boolean = isSystemInDarkTheme(),\n    seedColor: Color = Color.White,\n    dynamicColor: Boolean = true,\n    blackTheme: Boolean = false,\n    content: @Composable () -> Unit\n) {\n    val colorScheme = when {\n        dynamicColor && Build.VERSION.SDK_INT >= Build.VERSION_CODES.S -> {\n            val context = LocalContext.current\n            if (darkTheme) dynamicDarkColorScheme(context) else dynamicLightColorScheme(context)\n        }\n\n        darkTheme -> darkScheme\n        else -> lightScheme\n    }\n\n    val view = LocalView.current\n    if (!view.isInEditMode) {\n        SideEffect {\n            val window = (view.context as Activity).window\n            WindowCompat.getInsetsController(window, view).isAppearanceLightStatusBars = !darkTheme\n        }\n    }\n    CustomColors.black = blackTheme && darkTheme\n\n    val dynamicColorScheme = rememberDynamicColorScheme(\n        seedColor = when (seedColor) {\n            Color.White -> colorScheme.primary\n            else -> seedColor\n        },\n        isDark = darkTheme,\n        specVersion = if (blackTheme && darkTheme) ColorSpec.SpecVersion.SPEC_2021 else ColorSpec.SpecVersion.SPEC_2025,\n        isAmoled = blackTheme && darkTheme\n    )\n\n    val scheme =\n        if (seedColor == Color.White && !(blackTheme && darkTheme)) colorScheme\n        else dynamicColorScheme\n\n    MaterialExpressiveTheme(\n        colorScheme = scheme,\n        typography = Typography,\n        motionScheme = MotionScheme.expressive(),\n        content = content\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Type.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.material3.Typography\nimport androidx.compose.ui.text.ExperimentalTextApi\nimport androidx.compose.ui.text.font.Font\nimport androidx.compose.ui.text.font.FontFamily\nimport androidx.compose.ui.text.font.FontStyle\nimport androidx.compose.ui.text.font.FontVariation\nimport androidx.compose.ui.text.font.FontWeight\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interBody\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interLabel\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexHeadline\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTitle\n\nval TYPOGRAPHY = Typography()\n\n// Set of Material typography styles to start with\nval Typography = Typography(\n    displayLarge = TYPOGRAPHY.displayLarge.copy(fontFamily = robotoFlexHeadline),\n    displayMedium = TYPOGRAPHY.displayMedium.copy(fontFamily = robotoFlexHeadline),\n    displaySmall = TYPOGRAPHY.displaySmall.copy(fontFamily = robotoFlexHeadline),\n    headlineLarge = TYPOGRAPHY.headlineLarge.copy(fontFamily = robotoFlexHeadline),\n    headlineMedium = TYPOGRAPHY.headlineMedium.copy(fontFamily = robotoFlexHeadline),\n    headlineSmall = TYPOGRAPHY.headlineSmall.copy(fontFamily = robotoFlexHeadline),\n    titleLarge = TYPOGRAPHY.titleLarge.copy(fontFamily = robotoFlexTitle),\n    titleMedium = TYPOGRAPHY.titleMedium.copy(fontFamily = robotoFlexTitle),\n    titleSmall = TYPOGRAPHY.titleSmall.copy(fontFamily = robotoFlexTitle),\n    bodyLarge = TYPOGRAPHY.bodyLarge.copy(fontFamily = interBody),\n    bodyMedium = TYPOGRAPHY.bodyMedium.copy(fontFamily = interBody),\n    bodySmall = TYPOGRAPHY.bodySmall.copy(fontFamily = interBody),\n    labelLarge = TYPOGRAPHY.labelLarge.copy(fontFamily = interLabel),\n    labelMedium = TYPOGRAPHY.labelMedium.copy(fontFamily = interLabel),\n    labelSmall = TYPOGRAPHY.labelSmall.copy(fontFamily = interLabel)\n)\n\n@OptIn(ExperimentalTextApi::class)\nobject AppFonts {\n    val interClock = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Bold,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val interBody = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Normal,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val interLabel = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Medium,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val robotoFlexTopBar = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(125f),\n                FontVariation.weight(1000),\n                FontVariation.grade(0),\n                FontVariation.Setting(\"XOPQ\", 96F),\n                FontVariation.Setting(\"XTRA\", 500F),\n                FontVariation.Setting(\"YOPQ\", 79F),\n                FontVariation.Setting(\"YTAS\", 750F),\n                FontVariation.Setting(\"YTDE\", -203F),\n                FontVariation.Setting(\"YTFI\", 738F),\n                FontVariation.Setting(\"YTLC\", 514F),\n                FontVariation.Setting(\"YTUC\", 712F)\n            )\n        )\n    )\n\n    val robotoFlexHeadline = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(130f),\n                FontVariation.weight(600),\n                FontVariation.grade(0)\n            )\n        )\n    )\n\n    val robotoFlexTitle = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(130f),\n                FontVariation.weight(700),\n                FontVariation.grade(0)\n            )\n        )\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\AlarmDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.LocalContentColor\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.CompositionLocalProvider\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.window.Dialog\nimport androidx.compose.ui.window.DialogProperties\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Composable\nfun AlarmDialog(\n    modifier: Modifier = Modifier,\n    stopAlarm: () -> Unit\n) {\n    Dialog(\n        onDismissRequest = stopAlarm,\n        properties = DialogProperties(\n            usePlatformDefaultWidth = false,\n            decorFitsSystemWindows = false\n        )\n    ) {\n        Box(\n            contentAlignment = Alignment.Center,\n            modifier = modifier\n                .fillMaxSize()\n                .background(colorScheme.primaryContainer)\n                .clickable(onClick = stopAlarm)\n        ) {\n            CompositionLocalProvider(LocalContentColor provides colorScheme.onPrimaryContainer) {\n                Column(modifier = Modifier.padding(24.dp)) {\n                    Icon(\n                        painter = painterResource(R.drawable.alarm),\n                        contentDescription = stringResource(R.string.alarm),\n                        modifier = Modifier\n                            .align(Alignment.CenterHorizontally)\n                            .size(40.dp)\n                    )\n                    Spacer(Modifier.height(16.dp))\n                    Text(\n                        text = stringResource(R.string.stop_alarm_question),\n                        style = typography.headlineSmall,\n                        modifier = Modifier.align(Alignment.CenterHorizontally)\n                    )\n                    Spacer(Modifier.height(16.dp))\n                    Text(\n                        text = stringResource(R.string.stop_alarm_dialog_text),\n                        textAlign = TextAlign.Center\n                    )\n                    Spacer(modifier = Modifier.height(24.dp))\n                    Button(\n                        onClick = stopAlarm,\n                        modifier = Modifier.align(Alignment.End),\n                    ) {\n                        Text(stringResource(R.string.stop_alarm))\n                    }\n                }\n            }\n        }\n    }\n}\n\n@Preview\n@Composable\nfun AlarmDialogPreview() {\n    TomatoTheme {\n        AlarmDialog(stopAlarm = {})\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\TimerScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen\n\nimport android.Manifest\nimport android.os.Build\nimport androidx.activity.compose.rememberLauncherForActivityResult\nimport androidx.activity.result.contract.ActivityResultContracts\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.SharedTransitionScope\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.animation.expandVertically\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.shrinkVertically\nimport androidx.compose.animation.slideInVertically\nimport androidx.compose.animation.slideOutVertically\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.interaction.MutableInteractionSource\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.aspectRatio\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.layout.widthIn\nimport androidx.compose.foundation.rememberScrollState\nimport androidx.compose.foundation.verticalScroll\nimport androidx.compose.material3.ButtonGroup\nimport androidx.compose.material3.ButtonGroupDefaults\nimport androidx.compose.material3.CircularProgressIndicator\nimport androidx.compose.material3.CircularWavyProgressIndicator\nimport androidx.compose.material3.DropdownMenuItem\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledIconToggleButton\nimport androidx.compose.material3.FilledTonalIconButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Surface\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Alignment.Companion.CenterHorizontally\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.graphics.StrokeCap\nimport androidx.compose.ui.graphics.drawscope.Stroke\nimport androidx.compose.ui.hapticfeedback.HapticFeedbackType\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalDensity\nimport androidx.compose.ui.platform.LocalHapticFeedback\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Devices\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.navigation3.ui.LocalNavAnimatedContentScope\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\n\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun SharedTransitionScope.TimerScreen(\n    timerState: TimerState,\n    isPlus: Boolean,\n    progress: () -> Float,\n    onAction: (TimerAction) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val motionScheme = motionScheme\n    val haptic = LocalHapticFeedback.current\n\n    val color by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.primary\n        else colorScheme.tertiary,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val onColor by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.onPrimary\n        else colorScheme.onTertiary,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val colorContainer by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.secondaryContainer\n        else colorScheme.tertiaryContainer,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n\n    val permissionLauncher = rememberLauncherForActivityResult(\n        contract = ActivityResultContracts.RequestPermission(),\n        onResult = {}\n    )\n\n    val scrollBehavior = TopAppBarDefaults.exitUntilCollapsedScrollBehavior()\n\n    Column(modifier = modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        TopAppBar(\n            title = {\n                AnimatedContent(\n                    if (!timerState.showBrandTitle) timerState.timerMode else TimerMode.BRAND,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    },\n                    contentAlignment = Alignment.Center,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    when (it) {\n                        TimerMode.BRAND ->\n                            Text(\n                                if (!isPlus) stringResource(R.string.app_name)\n                                else stringResource(R.string.app_name_plus),\n                                style = TextStyle(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp,\n                                    color = colorScheme.error\n                                ),\n                                textAlign = TextAlign.Center\n                            )\n\n                        TimerMode.FOCUS ->\n                            Text(\n                                stringResource(R.string.focus),\n                                style = TextStyle(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp,\n                                    color = colorScheme.primary\n                                ),\n                                textAlign = TextAlign.Center\n                            )\n\n                        TimerMode.SHORT_BREAK -> Text(\n                            stringResource(R.string.short_break),\n                            style = TextStyle(\n                                fontFamily = robotoFlexTopBar,\n                                fontSize = 32.sp,\n                                lineHeight = 32.sp,\n                                color = colorScheme.tertiary\n                            ),\n                            textAlign = TextAlign.Center\n                        )\n\n                        TimerMode.LONG_BREAK -> Text(\n                            stringResource(R.string.long_break),\n                            style = TextStyle(\n                                fontFamily = robotoFlexTopBar,\n                                fontSize = 32.sp,\n                                lineHeight = 32.sp,\n                                color = colorScheme.tertiary\n                            ),\n                            textAlign = TextAlign.Center\n                        )\n                    }\n                }\n            },\n            subtitle = {},\n            titleHorizontalAlignment = CenterHorizontally,\n            scrollBehavior = scrollBehavior\n        )\n\n        Column(\n            verticalArrangement = Arrangement.Center,\n            horizontalAlignment = CenterHorizontally,\n            modifier = Modifier\n                .fillMaxSize()\n                .verticalScroll(rememberScrollState())\n        ) {\n            Column(horizontalAlignment = CenterHorizontally) {\n                Box(contentAlignment = Alignment.Center) {\n                    if (timerState.timerMode == TimerMode.FOCUS) {\n                        CircularProgressIndicator(\n                            progress = progress,\n                            modifier = Modifier\n                                .sharedBounds(\n                                    sharedContentState = this@TimerScreen.rememberSharedContentState(\n                                        \"focus progress\"\n                                    ),\n                                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                                )\n                                .widthIn(max = 350.dp)\n                                .fillMaxWidth(0.9f)\n                                .aspectRatio(1f),\n                            color = color,\n                            trackColor = colorContainer,\n                            strokeWidth = 16.dp,\n                            gapSize = 8.dp\n                        )\n                    } else {\n                        CircularWavyProgressIndicator(\n                            progress = progress,\n                            modifier = Modifier\n                                .sharedBounds(\n                                    sharedContentState = this@TimerScreen.rememberSharedContentState(\n                                        \"break progress\"\n                                    ),\n                                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                                )\n                                .widthIn(max = 350.dp)\n                                .fillMaxWidth(0.9f)\n                                .aspectRatio(1f),\n                            color = color,\n                            trackColor = colorContainer,\n                            stroke = Stroke(\n                                width = with(LocalDensity.current) {\n                                    16.dp.toPx()\n                                },\n                                cap = StrokeCap.Round,\n                            ),\n                            trackStroke = Stroke(\n                                width = with(LocalDensity.current) {\n                                    16.dp.toPx()\n                                },\n                                cap = StrokeCap.Round,\n                            ),\n                            wavelength = 60.dp,\n                            gapSize = 8.dp\n                        )\n                    }\n                    var expanded by remember { mutableStateOf(timerState.showBrandTitle) }\n                    Column(\n                        horizontalAlignment = CenterHorizontally,\n                        modifier = Modifier\n                            .clip(shapes.largeIncreased)\n                            .clickable(onClick = { expanded = !expanded })\n                    ) {\n                        LaunchedEffect(timerState.showBrandTitle) {\n                            expanded = timerState.showBrandTitle\n                        }\n                        Text(\n                            text = timerState.timeStr,\n                            style = TextStyle(\n                                fontFamily = interClock,\n                                fontSize = 72.sp,\n                                letterSpacing = (-2).sp,\n                                fontFeatureSettings = \"tnum\"\n                            ),\n                            textAlign = TextAlign.Center,\n                            maxLines = 1,\n                            modifier = Modifier.sharedBounds(\n                                sharedContentState = this@TimerScreen.rememberSharedContentState(\"clock\"),\n                                animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                            )\n                        )\n                        AnimatedVisibility(\n                            expanded,\n                            enter = fadeIn(motionScheme.defaultEffectsSpec()) +\n                                    expandVertically(motionScheme.defaultSpatialSpec()),\n                            exit = fadeOut(motionScheme.defaultEffectsSpec()) +\n                                    shrinkVertically(motionScheme.defaultSpatialSpec())\n                        ) {\n                            Text(\n                                stringResource(\n                                    R.string.timer_session_count,\n                                    timerState.currentFocusCount,\n                                    timerState.totalFocusCount\n                                ),\n                                fontFamily = interClock,\n                                style = typography.titleLarge,\n                                color = colorScheme.outline\n                            )\n                        }\n                    }\n                }\n                val interactionSources = remember { List(3) { MutableInteractionSource() } }\n                ButtonGroup(\n                    overflowIndicator = { state ->\n                        ButtonGroupDefaults.OverflowIndicator(\n                            state,\n                            colors = IconButtonDefaults.filledTonalIconButtonColors(),\n                            modifier = Modifier.size(64.dp, 96.dp)\n                        )\n                    },\n                    modifier = Modifier.padding(16.dp)\n                ) {\n                    customItem(\n                        {\n                            FilledIconToggleButton(\n                                onCheckedChange = { checked ->\n                                    onAction(TimerAction.ToggleTimer)\n\n                                    if (checked) haptic.performHapticFeedback(HapticFeedbackType.ToggleOn)\n                                    else haptic.performHapticFeedback(HapticFeedbackType.ToggleOff)\n\n                                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU && checked) {\n                                        permissionLauncher.launch(Manifest.permission.POST_NOTIFICATIONS)\n                                    }\n                                },\n                                checked = timerState.timerRunning,\n                                colors = IconButtonDefaults.filledIconToggleButtonColors(\n                                    checkedContainerColor = color,\n                                    checkedContentColor = onColor\n                                ),\n                                shapes = IconButtonDefaults.toggleableShapes(),\n                                interactionSource = interactionSources[0],\n                                modifier = Modifier\n                                    .size(width = 128.dp, height = 96.dp)\n                                    .animateWidth(interactionSources[0])\n                            ) {\n                                if (timerState.timerRunning) {\n                                    Icon(\n                                        painterResource(R.drawable.pause_large),\n                                        contentDescription = stringResource(R.string.pause),\n                                        modifier = Modifier.size(32.dp)\n                                    )\n                                } else {\n                                    Icon(\n                                        painterResource(R.drawable.play_large),\n                                        contentDescription = stringResource(R.string.play),\n                                        modifier = Modifier.size(32.dp)\n                                    )\n                                }\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    if (timerState.timerRunning) {\n                                        Icon(\n                                            painterResource(R.drawable.pause),\n                                            contentDescription = stringResource(R.string.pause)\n                                        )\n                                    } else {\n                                        Icon(\n                                            painterResource(R.drawable.play),\n                                            contentDescription = stringResource(R.string.play)\n                                        )\n                                    }\n                                },\n                                text = {\n                                    Text(\n                                        if (timerState.timerRunning) stringResource(R.string.pause) else stringResource(\n                                            R.string.play\n                                        )\n                                    )\n                                },\n                                onClick = {\n                                    onAction(TimerAction.ToggleTimer)\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n\n                    customItem(\n                        {\n                            FilledTonalIconButton(\n                                onClick = {\n                                    onAction(TimerAction.ResetTimer)\n                                    haptic.performHapticFeedback(HapticFeedbackType.VirtualKey)\n                                },\n                                colors = IconButtonDefaults.filledTonalIconButtonColors(\n                                    containerColor = colorContainer\n                                ),\n                                shapes = IconButtonDefaults.shapes(),\n                                interactionSource = interactionSources[1],\n                                modifier = Modifier\n                                    .size(96.dp)\n                                    .animateWidth(interactionSources[1])\n                            ) {\n                                Icon(\n                                    painterResource(R.drawable.restart_large),\n                                    contentDescription = stringResource(R.string.restart),\n                                    modifier = Modifier.size(32.dp)\n                                )\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    Icon(\n                                        painterResource(R.drawable.restart),\n                                        stringResource(R.string.restart)\n                                    )\n                                },\n                                text = { Text(stringResource(R.string.restart)) },\n                                onClick = {\n                                    onAction(TimerAction.ResetTimer)\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n\n                    customItem(\n                        {\n                            FilledTonalIconButton(\n                                onClick = {\n                                    onAction(TimerAction.SkipTimer(fromButton = true))\n                                    haptic.performHapticFeedback(HapticFeedbackType.VirtualKey)\n                                },\n                                colors = IconButtonDefaults.filledTonalIconButtonColors(\n                                    containerColor = colorContainer\n                                ),\n                                shapes = IconButtonDefaults.shapes(),\n                                interactionSource = interactionSources[2],\n                                modifier = Modifier\n                                    .size(64.dp, 96.dp)\n                                    .animateWidth(interactionSources[2])\n                            ) {\n                                Icon(\n                                    painterResource(R.drawable.skip_next_large),\n                                    contentDescription = stringResource(R.string.skip_to_next),\n                                    modifier = Modifier.size(32.dp)\n                                )\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    Icon(\n                                        painterResource(R.drawable.skip_next),\n                                        stringResource(R.string.skip_to_next)\n                                    )\n                                },\n                                text = { Text(stringResource(R.string.skip_to_next)) },\n                                onClick = {\n                                    onAction(TimerAction.SkipTimer(fromButton = true))\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n                }\n            }\n\n            Spacer(Modifier.height(32.dp))\n\n            Column(horizontalAlignment = CenterHorizontally) {\n                Text(stringResource(R.string.up_next), style = typography.titleSmall)\n                AnimatedContent(\n                    timerState.nextTimeStr,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    }\n                ) {\n                    Text(\n                        it,\n                        style = TextStyle(\n                            fontFamily = interClock,\n                            fontSize = 22.sp,\n                            lineHeight = 28.sp,\n                            color = if (timerState.nextTimerMode == TimerMode.FOCUS) colorScheme.primary else colorScheme.tertiary,\n                            textAlign = TextAlign.Center\n                        ),\n                        modifier = Modifier.width(200.dp)\n                    )\n                }\n                AnimatedContent(\n                    timerState.nextTimerMode,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    }\n                ) {\n                    Text(\n                        when (it) {\n                            TimerMode.FOCUS -> stringResource(R.string.focus)\n                            TimerMode.SHORT_BREAK -> stringResource(R.string.short_break)\n                            else -> stringResource(R.string.long_break)\n                        },\n                        style = typography.titleMediumEmphasized,\n                        textAlign = TextAlign.Center,\n                        modifier = Modifier.width(200.dp)\n                    )\n                }\n            }\n\n            Spacer(Modifier.height(16.dp))\n        }\n    }\n}\n\n@Preview(\n    showSystemUi = true,\n    device = Devices.PIXEL_9_PRO\n)\n@Composable\nfun TimerScreenPreview() {\n    val timerState = TimerState(\n        timeStr = \"03:34\", nextTimeStr = \"5:00\", timerMode = TimerMode.FOCUS, timerRunning = true\n    )\n    TomatoTheme {\n        Surface {\n            SharedTransitionLayout {\n                TimerScreen(\n                    timerState,\n                    isPlus = true,\n                    { 0.3f },\n                    {}\n                )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\nimport android.provider.Settings\nimport androidx.core.net.toUri\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.FlowPreview\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.SharingStarted\nimport kotlinx.coroutines.flow.StateFlow\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.combine\nimport kotlinx.coroutines.flow.stateIn\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.data.PreferenceRepository\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.data.StatRepository\nimport org.nsh07.pomodoro.data.TimerRepository\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.utils.millisecondsToStr\nimport java.time.LocalDate\nimport java.time.temporal.ChronoUnit\n\n@OptIn(FlowPreview::class)\nclass TimerViewModel(\n    private val preferenceRepository: PreferenceRepository,\n    private val serviceHelper: ServiceHelper,\n    private val statRepository: StatRepository,\n    private val timerRepository: TimerRepository,\n    private val _timerState: MutableStateFlow<TimerState>,\n    private val _time: MutableStateFlow<Long>\n) : ViewModel() {\n    val timerState: StateFlow<TimerState> = _timerState.asStateFlow()\n\n    val time: StateFlow<Long> = _time.asStateFlow()\n\n    val progress = _time.combine(_timerState) { remainingTime, uiState ->\n        (uiState.totalTime.toFloat() - remainingTime) / uiState.totalTime\n    }.stateIn(viewModelScope, SharingStarted.WhileSubscribed(5000), 0f)\n\n    private var cycles = 0\n\n    private var startTime = 0L\n    private var pauseTime = 0L\n    private var pauseDuration = 0L\n\n    init {\n        if (!timerRepository.serviceRunning.value)\n            viewModelScope.launch(Dispatchers.IO) {\n                timerRepository.focusTime =\n                    preferenceRepository.getIntPreference(\"focus_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"focus_time\",\n                            timerRepository.focusTime.toInt()\n                        ).toLong()\n                timerRepository.shortBreakTime =\n                    preferenceRepository.getIntPreference(\"short_break_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"short_break_time\",\n                            timerRepository.shortBreakTime.toInt()\n                        ).toLong()\n                timerRepository.longBreakTime =\n                    preferenceRepository.getIntPreference(\"long_break_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"long_break_time\",\n                            timerRepository.longBreakTime.toInt()\n                        ).toLong()\n                timerRepository.sessionLength =\n                    preferenceRepository.getIntPreference(\"session_length\")\n                        ?: preferenceRepository.saveIntPreference(\n                            \"session_length\",\n                            timerRepository.sessionLength\n                        )\n\n                timerRepository.alarmEnabled =\n                    preferenceRepository.getBooleanPreference(\"alarm_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"alarm_enabled\", true)\n                timerRepository.vibrateEnabled =\n                    preferenceRepository.getBooleanPreference(\"vibrate_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", true)\n                timerRepository.dndEnabled =\n                    preferenceRepository.getBooleanPreference(\"dnd_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"dnd_enabled\", false)\n\n                timerRepository.alarmSoundUri = (\n                        preferenceRepository.getStringPreference(\"alarm_sound\")\n                            ?: preferenceRepository.saveStringPreference(\n                                \"alarm_sound\",\n                                (Settings.System.DEFAULT_ALARM_ALERT_URI\n                                    ?: Settings.System.DEFAULT_RINGTONE_URI).toString()\n                            )\n                        ).toUri()\n\n                _time.update { timerRepository.focusTime }\n                cycles = 0\n                startTime = 0L\n                pauseTime = 0L\n                pauseDuration = 0L\n\n                _timerState.update { currentState ->\n                    currentState.copy(\n                        timerMode = TimerMode.FOCUS,\n                        timeStr = millisecondsToStr(time.value),\n                        totalTime = time.value,\n                        nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                        nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                        currentFocusCount = 1,\n                        totalFocusCount = timerRepository.sessionLength\n                    )\n                }\n\n                var lastDate = statRepository.getLastDate()\n                val today = LocalDate.now()\n\n                // Fills dates between today and lastDate with 0s to ensure continuous history\n                if (lastDate != null) {\n                    while (ChronoUnit.DAYS.between(lastDate, today) > 0) {\n                        lastDate = lastDate?.plusDays(1)\n                        statRepository.insertStat(Stat(lastDate!!, 0, 0, 0, 0, 0))\n                    }\n                } else {\n                    statRepository.insertStat(Stat(today, 0, 0, 0, 0, 0))\n                }\n\n                delay(1500)\n\n                _timerState.update { currentState ->\n                    currentState.copy(showBrandTitle = false)\n                }\n            }\n    }\n\n    fun onAction(action: TimerAction) {\n        serviceHelper.startService(action)\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appPreferenceRepository = application.container.appPreferenceRepository\n                val appStatRepository = application.container.appStatRepository\n                val appTimerRepository = application.container.appTimerRepository\n                val serviceHelper = application.container.serviceHelper\n                val timerState = application.container.timerState\n                val time = application.container.time\n\n                TimerViewModel(\n                    preferenceRepository = appPreferenceRepository,\n                    serviceHelper = serviceHelper,\n                    statRepository = appStatRepository,\n                    timerRepository = appTimerRepository,\n                    _timerState = timerState,\n                    _time = time\n                )\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\utils\\Utils.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.utils\n\nimport androidx.compose.ui.graphics.Color\nimport java.util.Locale\nimport java.util.concurrent.TimeUnit\n\nfun millisecondsToStr(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%02d:%02d\",\n        TimeUnit.MILLISECONDS.toMinutes(t),\n        TimeUnit.MILLISECONDS.toSeconds(t) % TimeUnit.MINUTES.toSeconds(1)\n    )\n}\n\nfun millisecondsToHours(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dh\",\n        TimeUnit.MILLISECONDS.toHours(t)\n    )\n}\n\nfun millisecondsToMinutes(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dm\",\n        TimeUnit.MILLISECONDS.toMinutes(t)\n    )\n}\n\nfun millisecondsToHoursMinutes(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dh %dm\", TimeUnit.MILLISECONDS.toHours(t),\n        TimeUnit.MILLISECONDS.toMinutes(t) % TimeUnit.HOURS.toMinutes(1)\n    )\n}\n\n/**\n * Extension function for [String] to convert it to a [androidx.compose.ui.graphics.Color]\n *\n * The base string must be of the format produced by [androidx.compose.ui.graphics.Color.toString],\n * i.e, the color black with 100% opacity in sRGB would be represented by:\n *\n *      Color(0.0, 0.0, 0.0, 1.0, sRGB IEC61966-2.1)\n */\nfun String.toColor(): Color {\n    // Sample string: Color(0.0, 0.0, 0.0, 1.0, sRGB IEC61966-2.1)\n    val comma1 = this.indexOf(',')\n    val comma2 = this.indexOf(',', comma1 + 1)\n    val comma3 = this.indexOf(',', comma2 + 1)\n    val comma4 = this.indexOf(',', comma3 + 1)\n\n    val r = this.substringAfter('(').substringBefore(',').toFloat()\n    val g = this.slice(comma1 + 1..comma2 - 1).toFloat()\n    val b = this.slice(comma2 + 1..comma3 - 1).toFloat()\n    val a = this.slice(comma3 + 1..comma4 - 1).toFloat()\n    return Color(r, g, b, a)\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\play\\java\\org\\nsh07\\pomodoro\\billing\\TomatoPlusPaywallDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.FilledTonalIconButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Scaffold\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.unit.dp\nimport com.revenuecat.purchases.ui.revenuecatui.Paywall\nimport com.revenuecat.purchases.ui.revenuecatui.PaywallOptions\nimport com.revenuecat.purchases.ui.revenuecatui.customercenter.CustomerCenter\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TomatoPlusPaywallDialog(\n    isPlus: Boolean,\n    onDismiss: () -> Unit\n) {\n    val paywallOptions = remember {\n        PaywallOptions.Builder(dismissRequest = onDismiss).build()\n    }\n\n    Scaffold { innerPadding ->\n        if (!isPlus) {\n            Paywall(paywallOptions)\n\n            FilledTonalIconButton(\n                onClick = onDismiss,\n                modifier = Modifier\n                    .padding(innerPadding)\n                    .padding(16.dp)\n            ) {\n                Icon(\n                    painterResource(R.drawable.arrow_back),\n                    null\n                )\n            }\n        } else {\n            CustomerCenter(onDismiss = onDismiss)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\androidMain\\kotlin\\ui\\src\\play\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutButtons.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ButtonColors\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TopButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://hosted.weblate.org/engage/tomato/\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.weblate),\n                contentDescription = null,\n                modifier = Modifier.size(24.dp)\n            )\n\n            Text(text = stringResource(R.string.help_with_translation))\n        }\n    }\n}\n\n@Composable\nfun BottomButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://play.google.com/store/apps/details?id=org.nsh07.pomodoro\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.play_store),\n                contentDescription = null,\n                modifier = Modifier.size(24.dp)\n            )\n\n            Text(text = stringResource(R.string.rate_on_google_play))\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\TomatoPlusPaywallDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "THREADING",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport androidx.activity.compose.BackHandler\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n@Composable\nfun TomatoPlusPaywallDialog(\n    isPlus: Boolean,\n    onDismiss: () -> Unit\n) {\n    val uriHandler = LocalUriHandler.current\n\n    BackHandler(enabled = true, onDismiss)\n\n    Box(\n        contentAlignment = Alignment.Center,\n        modifier = Modifier\n            .fillMaxSize()\n            .background(colorScheme.surface)\n    ) {\n        Column(horizontalAlignment = Alignment.CenterHorizontally) {\n            Icon(\n                painterResource(R.drawable.bmc),\n                null,\n                tint = colorScheme.onSurface\n            )\n            Spacer(Modifier.height(16.dp))\n            Text(\n                stringResource(R.string.tomato_foss),\n                style = typography.headlineSmall,\n                fontFamily = robotoFlexTopBar,\n                color = colorScheme.onSurface\n            )\n            Spacer(Modifier.height(8.dp))\n            Text(\n                stringResource(R.string.tomato_foss_desc, \"BuyMeACoffee\"),\n                textAlign = TextAlign.Center,\n                color = colorScheme.onSurfaceVariant,\n                modifier = Modifier.padding(horizontal = 24.dp)\n            )\n            Spacer(Modifier.height(16.dp))\n            Button(onClick = { uriHandler.openUri(\"https://coff.ee/nsh07\") }) {\n                Text(stringResource(R.string.bmc))\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\foss\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutButtons.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ButtonColors\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TopButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://coff.ee/nsh07\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.bmc),\n                contentDescription = null,\n                modifier = Modifier.height(24.dp)\n            )\n\n            Text(text = stringResource(R.string.bmc))\n        }\n    }\n}\n\n@Composable\nfun BottomButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://hosted.weblate.org/engage/tomato/\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.weblate),\n                contentDescription = null,\n                modifier = Modifier.size(20.dp)\n            )\n\n            Text(text = stringResource(R.string.help_with_translation))\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\AppContainer.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.app.NotificationManager\nimport android.app.PendingIntent\nimport android.content.Context\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.core.app.NotificationCompat\nimport androidx.core.app.NotificationCompat.VISIBILITY_PUBLIC\nimport androidx.core.app.NotificationManagerCompat\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.billing.BillingManager\nimport org.nsh07.pomodoro.billing.BillingManagerProvider\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.service.addTimerActions\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport org.nsh07.pomodoro.utils.millisecondsToStr\n\ninterface AppContainer {\n    val appPreferenceRepository: AppPreferenceRepository\n    val appStatRepository: AppStatRepository\n    val appTimerRepository: AppTimerRepository\n    val billingManager: BillingManager\n    val notificationManager: NotificationManagerCompat\n    val notificationManagerService: NotificationManager\n    val notificationBuilder: NotificationCompat.Builder\n    val serviceHelper: ServiceHelper\n    val timerState: MutableStateFlow<TimerState>\n    val time: MutableStateFlow<Long>\n    var activityTurnScreenOn: (Boolean) -> Unit\n}\n\nclass DefaultAppContainer(context: Context) : AppContainer {\n\n    override val appPreferenceRepository: AppPreferenceRepository by lazy {\n        AppPreferenceRepository(AppDatabase.getDatabase(context).preferenceDao())\n    }\n\n    override val appStatRepository: AppStatRepository by lazy {\n        AppStatRepository(AppDatabase.getDatabase(context).statDao())\n    }\n\n    override val appTimerRepository: AppTimerRepository by lazy { AppTimerRepository() }\n\n    override val billingManager: BillingManager by lazy { BillingManagerProvider.manager }\n\n    override val notificationManager: NotificationManagerCompat by lazy {\n        NotificationManagerCompat.from(context)\n    }\n\n    override val notificationManagerService: NotificationManager =\n        context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n\n    override val notificationBuilder: NotificationCompat.Builder by lazy {\n        NotificationCompat.Builder(context, \"timer\")\n            .setSmallIcon(R.drawable.tomato_logo_notification)\n            .setColor(Color.Red.toArgb())\n            .setContentIntent(\n                PendingIntent.getActivity(\n                    context,\n                    0,\n                    context.packageManager.getLaunchIntentForPackage(context.packageName),\n                    PendingIntent.FLAG_IMMUTABLE\n                )\n            )\n            .addTimerActions(context, R.drawable.play, context.getString(R.string.start))\n            .setShowWhen(true)\n            .setSilent(true)\n            .setOngoing(true)\n            .setRequestPromotedOngoing(true)\n            .setVisibility(VISIBILITY_PUBLIC)\n    }\n\n    override val serviceHelper: ServiceHelper by lazy {\n        ServiceHelper(context)\n    }\n\n    override val timerState: MutableStateFlow<TimerState> by lazy {\n        MutableStateFlow(\n            TimerState(\n                totalTime = appTimerRepository.focusTime,\n                timeStr = millisecondsToStr(appTimerRepository.focusTime),\n                nextTimeStr = millisecondsToStr(appTimerRepository.shortBreakTime)\n            )\n        )\n    }\n\n    override val time: MutableStateFlow<Long> by lazy {\n        MutableStateFlow(appTimerRepository.focusTime)\n    }\n\n    override var activityTurnScreenOn: (Boolean) -> Unit = {}\n\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\TimerRepository.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.net.Uri\nimport android.provider.Settings\nimport androidx.compose.material3.ColorScheme\nimport androidx.compose.material3.lightColorScheme\nimport kotlinx.coroutines.flow.MutableStateFlow\n\n/**\n * Interface that holds the timer durations for each timer type. This repository maintains a single\n * source of truth for the timer durations for the various ViewModels in the app.\n */\ninterface TimerRepository {\n    var focusTime: Long\n    var shortBreakTime: Long\n    var longBreakTime: Long\n\n    var sessionLength: Int\n\n    var timerFrequency: Float\n\n    var alarmEnabled: Boolean\n    var vibrateEnabled: Boolean\n    var dndEnabled: Boolean\n\n    var colorScheme: ColorScheme\n\n    var alarmSoundUri: Uri?\n\n    var serviceRunning: MutableStateFlow<Boolean>\n}\n\n/**\n * See [TimerRepository] for more details\n */\nclass AppTimerRepository : TimerRepository {\n    override var focusTime = 25 * 60 * 1000L\n    override var shortBreakTime = 5 * 60 * 1000L\n    override var longBreakTime = 15 * 60 * 1000L\n    override var sessionLength = 4\n    override var timerFrequency: Float = 60f\n    override var alarmEnabled = true\n    override var vibrateEnabled = true\n    override var dndEnabled: Boolean = false\n    override var colorScheme = lightColorScheme()\n    override var alarmSoundUri: Uri? =\n        Settings.System.DEFAULT_ALARM_ALERT_URI ?: Settings.System.DEFAULT_RINGTONE_URI\n    override var serviceRunning = MutableStateFlow(false)\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\MainActivity.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro\n\nimport android.os.Bundle\nimport androidx.activity.ComponentActivity\nimport androidx.activity.compose.setContent\nimport androidx.activity.enableEdgeToEdge\nimport androidx.activity.viewModels\nimport androidx.compose.foundation.isSystemInDarkTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport org.nsh07.pomodoro.ui.AppScreen\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsViewModel\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.toColor\n\nclass MainActivity : ComponentActivity() {\n\n    private val settingsViewModel: SettingsViewModel by viewModels(factoryProducer = { SettingsViewModel.Factory })\n\n    private val appContainer by lazy {\n        (application as TomatoApplication).container\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        enableEdgeToEdge()\n\n        appContainer.activityTurnScreenOn = {\n            setShowWhenLocked(it)\n            setTurnScreenOn(it)\n        }\n\n        setContent {\n            val settingsState by settingsViewModel.settingsState.collectAsStateWithLifecycle()\n\n            val darkTheme = when (settingsState.theme) {\n                \"dark\" -> true\n                \"light\" -> false\n                else -> isSystemInDarkTheme()\n            }\n\n            val seed = settingsState.colorScheme.toColor()\n\n            val isPlus by settingsViewModel.isPlus.collectAsStateWithLifecycle()\n\n            TomatoTheme(\n                darkTheme = darkTheme,\n                seedColor = seed,\n                blackTheme = settingsState.blackTheme\n            ) {\n                val colorScheme = colorScheme\n                LaunchedEffect(colorScheme) {\n                    appContainer.appTimerRepository.colorScheme = colorScheme\n                }\n\n                AppScreen(\n                    isPlus = isPlus,\n                    isAODEnabled = settingsState.aodEnabled,\n                    setTimerFrequency = {\n                        appContainer.appTimerRepository.timerFrequency = it\n                    }\n                )\n            }\n        }\n    }\n\n\n    override fun onStop() {\n        super.onStop()\n        // Reduce the timer loop frequency when not visible to save battery power\n        appContainer.appTimerRepository.timerFrequency = 1f\n    }\n\n    override fun onStart() {\n        super.onStart()\n        // Increase the timer loop frequency again when visible to make the progress smoother\n        appContainer.appTimerRepository.timerFrequency = 60f\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\service\\TimerService.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "TIME",
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.annotation.SuppressLint\nimport android.app.NotificationManager\nimport android.app.Service\nimport android.content.Intent\nimport android.media.AudioAttributes\nimport android.media.MediaPlayer\nimport android.os.Build\nimport android.os.IBinder\nimport android.os.SystemClock\nimport android.os.VibrationEffect\nimport android.os.Vibrator\nimport android.os.VibratorManager\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.core.app.NotificationCompat\nimport kotlinx.coroutines.CoroutineScope\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.Job\nimport kotlinx.coroutines.SupervisorJob\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport kotlinx.coroutines.runBlocking\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.utils.millisecondsToStr\nimport kotlin.text.Typography.middleDot\n\nclass TimerService : Service() {\n    private val appContainer by lazy {\n        (application as TomatoApplication).container\n    }\n\n    private val timerRepository by lazy { appContainer.appTimerRepository }\n    private val statRepository by lazy { appContainer.appStatRepository }\n    private val notificationManager by lazy { appContainer.notificationManager }\n    private val notificationManagerService by lazy { appContainer.notificationManagerService }\n    private val notificationBuilder by lazy { appContainer.notificationBuilder }\n    private val _timerState by lazy { appContainer.timerState }\n    private val _time by lazy { appContainer.time }\n\n    private val timeStateFlow by lazy { _time.asStateFlow() }\n\n    private var time: Long\n        get() = timeStateFlow.value\n        set(value) = _time.update { value }\n\n    private val timerState by lazy { _timerState.asStateFlow() }\n\n    private var cycles = 0\n    private var startTime = 0L\n    private var pauseTime = 0L\n    private var pauseDuration = 0L\n\n    private var job = SupervisorJob()\n    private val timerScope = CoroutineScope(Dispatchers.IO + job)\n    private val skipScope = CoroutineScope(Dispatchers.IO + job)\n\n    private var autoAlarmStopScope: Job? = null\n\n    private var alarm: MediaPlayer? = null\n    private val vibrator by lazy {\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {\n            val vibratorManager = getSystemService(VIBRATOR_MANAGER_SERVICE) as VibratorManager\n            vibratorManager.defaultVibrator\n        } else {\n            @Suppress(\"DEPRECATION\") getSystemService(VIBRATOR_SERVICE) as Vibrator\n        }\n    }\n\n    private val cs by lazy { timerRepository.colorScheme }\n\n    private lateinit var notificationStyle: NotificationCompat.ProgressStyle\n\n    override fun onBind(intent: Intent?): IBinder? {\n        return null\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        timerRepository.serviceRunning.update { true }\n        alarm = initializeMediaPlayer()\n    }\n\n    override fun onDestroy() {\n        timerRepository.serviceRunning.update { false }\n        runBlocking {\n            job.cancel()\n            saveTimeToDb()\n            setDoNotDisturb(false)\n            notificationManager.cancel(1)\n            alarm?.release()\n        }\n        super.onDestroy()\n    }\n\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n        when (intent?.action) {\n            Actions.TOGGLE.toString() -> {\n                startForegroundService()\n                toggleTimer()\n            }\n\n            Actions.RESET.toString() -> {\n                if (timerState.value.timerRunning) toggleTimer()\n                skipScope.launch {\n                    resetTimer()\n                    stopForegroundService()\n                }\n            }\n\n            Actions.SKIP.toString() -> skipScope.launch { skipTimer(true) }\n\n            Actions.STOP_ALARM.toString() -> stopAlarm()\n\n            Actions.UPDATE_ALARM_TONE.toString() -> updateAlarmTone()\n        }\n        return super.onStartCommand(intent, flags, startId)\n    }\n\n    private fun toggleTimer() {\n        updateProgressSegments()\n\n        if (timerState.value.timerRunning) {\n            setDoNotDisturb(false)\n            notificationBuilder.clearActions().addTimerActions(\n                this, R.drawable.play, getString(R.string.start)\n            )\n            showTimerNotification(time.toInt(), paused = true)\n            _timerState.update { currentState ->\n                currentState.copy(timerRunning = false)\n            }\n            pauseTime = SystemClock.elapsedRealtime()\n        } else {\n            if (timerState.value.timerMode == TimerMode.FOCUS) setDoNotDisturb(true)\n            else setDoNotDisturb(false)\n            notificationBuilder.clearActions().addTimerActions(\n                this, R.drawable.pause, getString(R.string.stop)\n            )\n            _timerState.update { it.copy(timerRunning = true) }\n            if (pauseTime != 0L) pauseDuration += SystemClock.elapsedRealtime() - pauseTime\n\n            var iterations = -1\n\n            timerScope.launch {\n                while (true) {\n                    if (!timerState.value.timerRunning) break\n                    if (startTime == 0L) startTime = SystemClock.elapsedRealtime()\n\n                    time = when (timerState.value.timerMode) {\n                        TimerMode.FOCUS -> timerRepository.focusTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n\n                        TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n\n                        else -> timerRepository.longBreakTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n                    }\n\n                    iterations =\n                        (iterations + 1) % timerRepository.timerFrequency.toInt().coerceAtLeast(1)\n\n                    if (iterations == 0) showTimerNotification(time.toInt())\n\n                    if (time < 0) {\n                        skipTimer()\n                        _timerState.update { currentState ->\n                            currentState.copy(timerRunning = false)\n                        }\n                        break\n                    } else {\n                        _timerState.update { currentState ->\n                            currentState.copy(\n                                timeStr = millisecondsToStr(time)\n                            )\n                        }\n                    }\n\n                    delay((1000f / timerRepository.timerFrequency).toLong())\n                }\n            }\n        }\n    }\n\n    @SuppressLint(\n        \"MissingPermission\",\n        \"StringFormatInvalid\"\n    ) // We check for the permission when pressing the Play button in the UI\n    fun showTimerNotification(\n        remainingTime: Int, paused: Boolean = false, complete: Boolean = false\n    ) {\n        if (complete) notificationBuilder.clearActions().addStopAlarmAction(this)\n\n        val totalTime = when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n            TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n            else -> timerRepository.longBreakTime.toInt()\n        }\n\n        val currentTimer = when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> getString(R.string.focus)\n            TimerMode.SHORT_BREAK -> getString(R.string.short_break)\n            else -> getString(R.string.long_break)\n        }\n\n        val nextTimer = when (timerState.value.nextTimerMode) {\n            TimerMode.FOCUS -> getString(R.string.focus)\n            TimerMode.SHORT_BREAK -> getString(R.string.short_break)\n            else -> getString(R.string.long_break)\n        }\n\n        val remainingTimeString = if ((remainingTime.toFloat() / 60000f) < 1.0f) \"< 1\"\n        else (remainingTime.toFloat() / 60000f).toInt()\n\n        notificationManager.notify(\n            1,\n            notificationBuilder\n                .setContentTitle(\n                    if (!complete) {\n                        \"$currentTimer  $middleDot  ${\n                            getString(R.string.min_remaining_notification, remainingTimeString)\n                        }\" + if (paused) \"  $middleDot  ${getString(R.string.paused)}\" else \"\"\n                    } else \"$currentTimer $middleDot ${getString(R.string.completed)}\"\n                )\n                .setContentText(\n                    getString(\n                        R.string.up_next_notification,\n                        nextTimer,\n                        timerState.value.nextTimeStr\n                    )\n                )\n                .setStyle(\n                    notificationStyle\n                        .setProgress( // Set the current progress by filling the previous intervals and part of the current interval\n                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.BAKLAVA) {\n                                (totalTime - remainingTime) + ((cycles + 1) / 2) * timerRepository.focusTime.toInt() + (cycles / 2) * timerRepository.shortBreakTime.toInt()\n                            } else (totalTime - remainingTime)\n                        )\n                )\n                .setWhen(System.currentTimeMillis() + remainingTime) // Sets the Live Activity/Now Bar chip time\n                .setShortCriticalText(millisecondsToStr(time.coerceAtLeast(0)))\n                .build()\n        )\n\n        if (complete) {\n            startAlarm()\n            _timerState.update { currentState ->\n                currentState.copy(alarmRinging = true)\n            }\n        }\n    }\n\n    private fun updateProgressSegments() {\n        notificationStyle = NotificationCompat.ProgressStyle()\n            .also {\n                // Add all the Focus, Short break and long break intervals in order\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.BAKLAVA) {\n                    // Android 16 and later supports live updates\n                    // Set progress bar sections if on Baklava or later\n                    for (i in 0..<timerRepository.sessionLength * 2) {\n                        if (i % 2 == 0) it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.focusTime.toInt()\n                            )\n                                .setColor(cs.primary.toArgb())\n                        )\n                        else if (i != (timerRepository.sessionLength * 2 - 1)) it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.shortBreakTime.toInt()\n                            ).setColor(cs.tertiary.toArgb())\n                        )\n                        else it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.longBreakTime.toInt()\n                            ).setColor(cs.tertiary.toArgb())\n                        )\n                    }\n                } else {\n                    it.addProgressSegment(\n                        NotificationCompat.ProgressStyle.Segment(\n                            when (timerState.value.timerMode) {\n                                TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n                                TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n                                else -> timerRepository.longBreakTime.toInt()\n                            }\n                        )\n                    )\n                }\n            }\n    }\n\n    private suspend fun resetTimer() {\n        updateProgressSegments()\n        saveTimeToDb()\n        time = timerRepository.focusTime\n        cycles = 0\n        startTime = 0L\n        pauseTime = 0L\n        pauseDuration = 0L\n\n        _timerState.update { currentState ->\n            currentState.copy(\n                timerMode = TimerMode.FOCUS,\n                timeStr = millisecondsToStr(time),\n                totalTime = time,\n                nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                currentFocusCount = 1,\n                totalFocusCount = timerRepository.sessionLength\n            )\n        }\n    }\n\n    private suspend fun skipTimer(fromButton: Boolean = false) {\n        updateProgressSegments()\n        saveTimeToDb()\n        updateProgressSegments()\n        showTimerNotification(0, paused = true, complete = !fromButton)\n        startTime = 0L\n        pauseTime = 0L\n        pauseDuration = 0L\n\n        cycles = (cycles + 1) % (timerRepository.sessionLength * 2)\n\n        if (cycles % 2 == 0) {\n            if (timerState.value.timerRunning) setDoNotDisturb(true)\n            time = timerRepository.focusTime\n            _timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = TimerMode.FOCUS,\n                    timeStr = millisecondsToStr(time),\n                    totalTime = time,\n                    nextTimerMode = if (cycles == (timerRepository.sessionLength - 1) * 2) TimerMode.LONG_BREAK else TimerMode.SHORT_BREAK,\n                    nextTimeStr = if (cycles == (timerRepository.sessionLength - 1) * 2) millisecondsToStr(\n                        timerRepository.longBreakTime\n                    ) else millisecondsToStr(\n                        timerRepository.shortBreakTime\n                    ),\n                    currentFocusCount = cycles / 2 + 1,\n                    totalFocusCount = timerRepository.sessionLength\n                )\n            }\n        } else {\n            if (timerState.value.timerRunning) setDoNotDisturb(false)\n            val long = cycles == (timerRepository.sessionLength * 2) - 1\n            time = if (long) timerRepository.longBreakTime else timerRepository.shortBreakTime\n\n            _timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = if (long) TimerMode.LONG_BREAK else TimerMode.SHORT_BREAK,\n                    timeStr = millisecondsToStr(time),\n                    totalTime = time,\n                    nextTimerMode = TimerMode.FOCUS,\n                    nextTimeStr = millisecondsToStr(timerRepository.focusTime)\n                )\n            }\n        }\n    }\n\n    fun startAlarm() {\n        if (timerRepository.alarmEnabled) alarm?.start()\n\n        appContainer.activityTurnScreenOn(true)\n\n        autoAlarmStopScope = CoroutineScope(Dispatchers.IO).launch {\n            delay(1 * 60 * 1000)\n            stopAlarm()\n        }\n\n        if (timerRepository.vibrateEnabled) {\n            if (!vibrator.hasVibrator()) {\n                return\n            }\n            val vibrationPattern = longArrayOf(0, 1000, 1000, 1000)\n            val repeat = 2\n            val effect = VibrationEffect.createWaveform(vibrationPattern, repeat)\n            vibrator.vibrate(effect)\n        }\n    }\n\n    fun stopAlarm() {\n        autoAlarmStopScope?.cancel()\n\n        if (timerRepository.alarmEnabled) {\n            alarm?.pause()\n            alarm?.seekTo(0)\n        }\n\n        if (timerRepository.vibrateEnabled) {\n            vibrator.cancel()\n        }\n\n        appContainer.activityTurnScreenOn(false)\n\n        _timerState.update { currentState ->\n            currentState.copy(alarmRinging = false)\n        }\n        notificationBuilder.clearActions().addTimerActions(\n            this, R.drawable.play,\n            getString(R.string.start_next)\n        )\n        showTimerNotification(\n            when (timerState.value.timerMode) {\n                TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n                TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n                else -> timerRepository.longBreakTime.toInt()\n            }, paused = true, complete = false\n        )\n    }\n\n    private fun initializeMediaPlayer(): MediaPlayer? {\n        return try {\n            MediaPlayer().apply {\n                setAudioAttributes(\n                    AudioAttributes.Builder()\n                        .setContentType(AudioAttributes.CONTENT_TYPE_MUSIC)\n                        .setUsage(AudioAttributes.USAGE_ALARM)\n                        .build()\n                )\n                timerRepository.alarmSoundUri?.let {\n                    setDataSource(applicationContext, it)\n                    prepare()\n                }\n            }\n        } catch (e: Exception) {\n            e.printStackTrace()\n            null\n        }\n    }\n\n    private fun setDoNotDisturb(doNotDisturb: Boolean) {\n        if (timerRepository.dndEnabled && notificationManagerService.isNotificationPolicyAccessGranted()) {\n            if (doNotDisturb) {\n                notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALARMS)\n            } else notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALL)\n        }\n    }\n\n    private fun updateAlarmTone() {\n        alarm?.release()\n        alarm = initializeMediaPlayer()\n    }\n\n    suspend fun saveTimeToDb() {\n        when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> statRepository.addFocusTime(\n                (timerState.value.totalTime - time).coerceAtLeast(\n                    0L\n                )\n            )\n\n            else -> statRepository.addBreakTime((timerState.value.totalTime - time).coerceAtLeast(0L))\n        }\n    }\n\n    private fun startForegroundService() {\n        startForeground(1, notificationBuilder.build())\n    }\n\n    private fun stopForegroundService() {\n        notificationManager.cancel(1)\n        stopForeground(STOP_FOREGROUND_REMOVE)\n        stopSelf()\n    }\n\n    enum class Actions {\n        TOGGLE, SKIP, RESET, STOP_ALARM, UPDATE_ALARM_TONE\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\AlwaysOnDisplay.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport android.app.Activity\nimport android.view.WindowManager\nimport androidx.activity.compose.LocalActivity\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.SharedTransitionScope\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.animation.core.animateIntAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.offset\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.CircularProgressIndicator\nimport androidx.compose.material3.CircularWavyProgressIndicator\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.DisposableEffect\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableIntStateOf\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.StrokeCap\nimport androidx.compose.ui.graphics.drawscope.Stroke\nimport androidx.compose.ui.platform.LocalDensity\nimport androidx.compose.ui.platform.LocalView\nimport androidx.compose.ui.platform.LocalWindowInfo\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Density\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.IntOffset\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.core.view.WindowCompat\nimport androidx.core.view.WindowInsetsCompat\nimport androidx.core.view.WindowInsetsControllerCompat\nimport androidx.navigation3.ui.LocalNavAnimatedContentScope\nimport kotlinx.coroutines.delay\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.ui.timerScreen.TimerScreen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport kotlin.random.Random\n\n/**\n * Always On Display composable. Must be called within a [SharedTransitionScope] which allows\n * animating the clock and progress indicator\n *\n * @param timerState [TimerState] instance. This must be the same instance as the one used on the\n * root [TimerScreen] composable\n * @param progress lambda that returns the current progress of the clock\n * randomized offset for the clock to allow smooth motion with sharedBounds\n */\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun SharedTransitionScope.AlwaysOnDisplay(\n    timerState: TimerState,\n    progress: () -> Float,\n    setTimerFrequency: (Float) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    var sharedElementTransitionComplete by remember { mutableStateOf(false) }\n\n    val activity = LocalActivity.current\n    val density = LocalDensity.current\n    val windowInfo = LocalWindowInfo.current\n    val view = LocalView.current\n\n    val window = remember { (view.context as Activity).window }\n    val insetsController = remember { WindowCompat.getInsetsController(window, view) }\n\n    DisposableEffect(Unit) {\n        setTimerFrequency(1f)\n        window.addFlags(\n            WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON or\n                    WindowManager.LayoutParams.FLAG_ALLOW_LOCK_WHILE_SCREEN_ON\n        )\n        activity?.setShowWhenLocked(true)\n        insetsController.apply {\n            hide(WindowInsetsCompat.Type.statusBars())\n            hide(WindowInsetsCompat.Type.navigationBars())\n            systemBarsBehavior =\n                WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE\n        }\n\n        onDispose {\n            setTimerFrequency(60f)\n            window.clearFlags(\n                WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON or\n                        WindowManager.LayoutParams.FLAG_ALLOW_LOCK_WHILE_SCREEN_ON\n            )\n            activity?.setShowWhenLocked(false)\n            insetsController.apply {\n                show(WindowInsetsCompat.Type.statusBars())\n                show(WindowInsetsCompat.Type.navigationBars())\n                systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_DEFAULT\n            }\n        }\n    }\n\n    LaunchedEffect(Unit) {\n        delay(300)\n        sharedElementTransitionComplete = true\n    }\n\n    val primary by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFFA2A2A2)\n        else {\n            if (timerState.timerMode == TimerMode.FOCUS) colorScheme.primary\n            else colorScheme.tertiary\n        },\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val secondaryContainer by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFF1D1D1D)\n        else {\n            if (timerState.timerMode == TimerMode.FOCUS) colorScheme.secondaryContainer\n            else colorScheme.tertiaryContainer\n        },\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val surface by animateColorAsState(\n        if (sharedElementTransitionComplete) Color.Black\n        else colorScheme.surface,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val onSurface by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFFE3E3E3)\n        else colorScheme.onSurface,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n\n    var randomX by remember {\n        mutableIntStateOf(\n            Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.width - 266.dp.toIntPx(density)\n            )\n        )\n    }\n    var randomY by remember {\n        mutableIntStateOf(\n            Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.height - 266.dp.toIntPx(density)\n            )\n        )\n    }\n\n    LaunchedEffect(timerState.timeStr[1]) { // Randomize position every minute\n        if (sharedElementTransitionComplete) {\n            randomX = Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.width - 266.dp.toIntPx(density)\n            )\n            randomY = Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.height - 266.dp.toIntPx(density)\n            )\n        }\n    }\n\n    val x by animateIntAsState(randomX, motionScheme.slowSpatialSpec())\n    val y by animateIntAsState(randomY, motionScheme.slowSpatialSpec())\n\n    Box(\n        modifier = modifier\n            .fillMaxSize()\n            .background(surface)\n    ) {\n        Box(\n            contentAlignment = Alignment.Center,\n            modifier = Modifier.offset {\n                IntOffset(x, y)\n            }\n        ) {\n            if (timerState.timerMode == TimerMode.FOCUS) {\n                CircularProgressIndicator(\n                    progress = progress,\n                    modifier = Modifier\n                        .sharedBounds(\n                            sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"focus progress\"),\n                            animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                        )\n                        .size(250.dp),\n                    color = primary,\n                    trackColor = secondaryContainer,\n                    strokeWidth = 12.dp,\n                    gapSize = 8.dp,\n                )\n            } else {\n                CircularWavyProgressIndicator(\n                    progress = progress,\n                    modifier = Modifier\n                        .sharedBounds(\n                            sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"break progress\"),\n                            animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                        )\n                        .size(250.dp),\n                    color = primary,\n                    trackColor = secondaryContainer,\n                    stroke = Stroke(\n                        width = with(LocalDensity.current) {\n                            12.dp.toPx()\n                        },\n                        cap = StrokeCap.Round,\n                    ),\n                    trackStroke = Stroke(\n                        width = with(LocalDensity.current) {\n                            12.dp.toPx()\n                        },\n                        cap = StrokeCap.Round,\n                    ),\n                    wavelength = 42.dp,\n                    gapSize = 8.dp\n                )\n            }\n\n            Text(\n                text = timerState.timeStr,\n                style = TextStyle(\n                    fontFamily = interClock,\n                    fontSize = 56.sp,\n                    letterSpacing = (-2).sp,\n                    fontFeatureSettings = \"tnum\"\n                ),\n                textAlign = TextAlign.Center,\n                color = onSurface,\n                maxLines = 1,\n                modifier = Modifier.sharedBounds(\n                    sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"clock\"),\n                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                )\n            )\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nprivate fun AlwaysOnDisplayPreview() {\n    val timerState = TimerState()\n    val progress = { 0.5f }\n    TomatoTheme {\n        SharedTransitionLayout {\n            AlwaysOnDisplay(\n                timerState = timerState,\n                progress = progress,\n                setTimerFrequency = {}\n            )\n        }\n    }\n}\n\nfun Dp.toIntPx(density: Density) = with(density) { toPx().toInt() }\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\AppScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport android.content.Intent\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.animation.Crossfade\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.slideInVertically\nimport androidx.compose.animation.slideOutVertically\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.calculateEndPadding\nimport androidx.compose.foundation.layout.calculateStartPadding\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.NavigationItemIconPosition\nimport androidx.compose.material3.Scaffold\nimport androidx.compose.material3.ShortNavigationBar\nimport androidx.compose.material3.ShortNavigationBarArrangement\nimport androidx.compose.material3.ShortNavigationBarItem\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.adaptive.currentWindowAdaptiveInfo\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalLayoutDirection\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport androidx.navigation3.runtime.entryProvider\nimport androidx.navigation3.runtime.rememberNavBackStack\nimport androidx.navigation3.ui.NavDisplay\nimport androidx.window.core.layout.WindowSizeClass\nimport org.nsh07.pomodoro.billing.TomatoPlusPaywallDialog\nimport org.nsh07.pomodoro.service.TimerService\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsScreenRoot\nimport org.nsh07.pomodoro.ui.statsScreen.StatsScreenRoot\nimport org.nsh07.pomodoro.ui.timerScreen.AlarmDialog\nimport org.nsh07.pomodoro.ui.timerScreen.TimerScreen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerViewModel\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AppScreen(\n    isAODEnabled: Boolean,\n    isPlus: Boolean,\n    setTimerFrequency: (Float) -> Unit,\n    modifier: Modifier = Modifier,\n    timerViewModel: TimerViewModel = viewModel(factory = TimerViewModel.Factory)\n) {\n    val context = LocalContext.current\n\n    val uiState by timerViewModel.timerState.collectAsStateWithLifecycle()\n    val progress by timerViewModel.progress.collectAsStateWithLifecycle()\n\n    val layoutDirection = LocalLayoutDirection.current\n    val motionScheme = motionScheme\n    val windowSizeClass = currentWindowAdaptiveInfo().windowSizeClass\n\n    val backStack = rememberNavBackStack(Screen.Timer)\n\n    if (uiState.alarmRinging)\n        AlarmDialog {\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.STOP_ALARM.toString()\n                context.startService(it)\n            }\n        }\n\n    var showPaywall by remember { mutableStateOf(false) }\n\n    Scaffold(\n        bottomBar = {\n            AnimatedVisibility(\n                backStack.last() !is Screen.AOD,\n                enter = fadeIn(),\n                exit = fadeOut()\n            ) {\n                val wide = remember {\n                    windowSizeClass.isWidthAtLeastBreakpoint(\n                        WindowSizeClass.WIDTH_DP_MEDIUM_LOWER_BOUND\n                    )\n                }\n                ShortNavigationBar(\n                    arrangement =\n                        if (wide) ShortNavigationBarArrangement.Centered\n                        else ShortNavigationBarArrangement.EqualWeight\n                ) {\n                    mainScreens.forEach {\n                        val selected = backStack.last() == it.route\n                        ShortNavigationBarItem(\n                            selected = selected,\n                            onClick = if (it.route != Screen.Timer) { // Ensure the backstack does not accumulate screens\n                                {\n                                    if (backStack.size < 2) backStack.add(it.route)\n                                    else backStack[1] = it.route\n                                }\n                            } else {\n                                { if (backStack.size > 1) backStack.removeAt(1) }\n                            },\n                            icon = {\n                                Crossfade(selected) { selected ->\n                                    if (selected) Icon(painterResource(it.selectedIcon), null)\n                                    else Icon(painterResource(it.unselectedIcon), null)\n                                }\n                            },\n                            iconPosition =\n                                if (wide) NavigationItemIconPosition.Start\n                                else NavigationItemIconPosition.Top,\n                            label = { Text(stringResource(it.label)) }\n                        )\n                    }\n                }\n            }\n        }\n    ) { contentPadding ->\n        SharedTransitionLayout {\n            NavDisplay(\n                backStack = backStack,\n                onBack = backStack::removeLastOrNull,\n                transitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                popTransitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                predictivePopTransitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                entryProvider = entryProvider {\n                    entry<Screen.Timer> {\n                        TimerScreen(\n                            timerState = uiState,\n                            isPlus = isPlus,\n                            progress = { progress },\n                            onAction = timerViewModel::onAction,\n                            modifier = modifier\n                                .padding(\n                                    start = contentPadding.calculateStartPadding(layoutDirection),\n                                    end = contentPadding.calculateEndPadding(layoutDirection),\n                                    bottom = contentPadding.calculateBottomPadding()\n                                )\n                                .then(\n                                    if (isAODEnabled) Modifier.clickable {\n                                        if (backStack.size < 2) backStack.add(Screen.AOD)\n                                    }\n                                    else Modifier\n                                ),\n                        )\n                    }\n\n                    entry<Screen.AOD> {\n                        AlwaysOnDisplay(\n                            timerState = uiState,\n                            progress = { progress },\n                            setTimerFrequency = setTimerFrequency,\n                            modifier = Modifier\n                                .then(\n                                    if (isAODEnabled) Modifier.clickable {\n                                        if (backStack.size > 1) backStack.removeLastOrNull()\n                                    }\n                                    else Modifier\n                                )\n                        )\n                    }\n\n                    entry<Screen.Settings.Main> {\n                        SettingsScreenRoot(\n                            setShowPaywall = { showPaywall = it },\n                            modifier = modifier.padding(\n                                start = contentPadding.calculateStartPadding(layoutDirection),\n                                end = contentPadding.calculateEndPadding(layoutDirection),\n                                bottom = contentPadding.calculateBottomPadding()\n                            )\n                        )\n                    }\n\n                    entry<Screen.Stats> {\n                        StatsScreenRoot(\n                            contentPadding = contentPadding,\n                            modifier = modifier.padding(\n                                start = contentPadding.calculateStartPadding(layoutDirection),\n                                end = contentPadding.calculateEndPadding(layoutDirection),\n                                bottom = contentPadding.calculateBottomPadding()\n                            )\n                        )\n                    }\n                }\n            )\n        }\n    }\n\n    AnimatedVisibility(\n        showPaywall,\n        enter = slideInVertically { it },\n        exit = slideOutVertically { it }\n    ) {\n        TomatoPlusPaywallDialog(isPlus = isPlus) { showPaywall = false }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\Screen.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport androidx.annotation.DrawableRes\nimport androidx.annotation.StringRes\nimport androidx.navigation3.runtime.NavKey\nimport kotlinx.serialization.Serializable\n\nsealed class Screen : NavKey {\n    @Serializable\n    object Timer : Screen()\n\n    @Serializable\n    object AOD : Screen()\n\n    @Serializable\n    sealed class Settings : Screen() {\n        @Serializable\n        object Main : Settings()\n\n        @Serializable\n        object Alarm : Settings()\n\n        @Serializable\n        object Appearance : Settings()\n\n        @Serializable\n        object Timer : Settings()\n    }\n\n    @Serializable\n    object Stats : Screen()\n}\n\ndata class NavItem(\n    val route: Screen,\n    @param:DrawableRes val unselectedIcon: Int,\n    @param:DrawableRes val selectedIcon: Int,\n    @param:StringRes val label: Int\n)\n\ndata class SettingsNavItem(\n    val route: Screen.Settings,\n    @param:DrawableRes val icon: Int,\n    @param:StringRes val label: Int,\n    val innerSettings: List<Int>\n)\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutCard.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.widget.Toast\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.FlowRow\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.ButtonDefaults\nimport androidx.compose.material3.Card\nimport androidx.compose.material3.CardDefaults\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n// Taken from https://github.com/shub39/Grit/blob/master/app/src/main/java/com/shub39/grit/core/presentation/settings/ui/component/AboutApp.kt\n@Composable\nfun AboutCard(\n    isPlus: Boolean,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    val context = LocalContext.current\n\n    Card(\n        modifier = modifier.fillMaxWidth(),\n        colors = CardDefaults.cardColors(\n            containerColor = colorScheme.primaryContainer,\n            contentColor = colorScheme.onPrimaryContainer\n        ),\n        shape = shapes.extraLarge\n    ) {\n        val buttonColors = ButtonDefaults.buttonColors(\n            containerColor = colorScheme.onPrimaryContainer,\n            contentColor = colorScheme.primaryContainer\n        )\n\n        Row(\n            modifier = Modifier\n                .padding(16.dp)\n                .fillMaxWidth(),\n            verticalAlignment = Alignment.CenterVertically,\n            horizontalArrangement = Arrangement.spacedBy(8.dp)\n        ) {\n            Column {\n                Text(\n                    if (!isPlus) stringResource(R.string.app_name)\n                    else stringResource(R.string.app_name_plus),\n                    style = MaterialTheme.typography.titleLarge,\n                    fontFamily = robotoFlexTopBar\n                )\n                Text(text = \"${BuildConfig.VERSION_NAME} (${BuildConfig.VERSION_CODE})\")\n            }\n\n            Spacer(modifier = Modifier.weight(1f))\n\n            Row {\n                IconButton(\n                    onClick = {\n                        Toast.makeText(context, \"Coming soon...\", Toast.LENGTH_SHORT).show()\n                    }\n                ) {\n                    Icon(\n                        painterResource(R.drawable.discord),\n                        contentDescription = \"Discord\",\n                        modifier = Modifier.size(24.dp)\n                    )\n                }\n\n                IconButton(\n                    onClick = { uriHandler.openUri(\"https://github.com/nsh07/Tomato\") }\n                ) {\n                    Icon(\n                        painterResource(R.drawable.github),\n                        contentDescription = \"GitHub\",\n                        modifier = Modifier.size(24.dp)\n                    )\n                }\n            }\n        }\n\n        FlowRow(\n            modifier = Modifier.padding(start = 16.dp, end = 16.dp, bottom = 16.dp),\n            horizontalArrangement = Arrangement.spacedBy(8.dp)\n        ) {\n            TopButton(buttonColors)\n            BottomButton(buttonColors)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ClickableListItem.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.core.animateDpAsState\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.interaction.MutableInteractionSource\nimport androidx.compose.foundation.interaction.collectIsPressedAsState\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.ListItemColors\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ClickableListItem(\n    headlineContent: @Composable (() -> Unit),\n    modifier: Modifier = Modifier,\n    overlineContent: @Composable (() -> Unit)? = null,\n    supportingContent: @Composable (() -> Unit)? = null,\n    leadingContent: @Composable (() -> Unit)? = null,\n    trailingContent: @Composable (() -> Unit)? = null,\n    colors: ListItemColors = listItemColors,\n    tonalElevation: Dp = ListItemDefaults.Elevation,\n    shadowElevation: Dp = ListItemDefaults.Elevation,\n    items: Int,\n    index: Int,\n    onClick: () -> Unit\n) {\n    val interactionSource = remember { MutableInteractionSource() }\n    val isPressed by interactionSource.collectIsPressedAsState()\n\n    val top by animateDpAsState(\n        if (isPressed) 40.dp\n        else {\n            if (items == 1 || index == 0) 20.dp\n            else 4.dp\n        },\n        motionScheme.fastSpatialSpec()\n    )\n    val bottom by animateDpAsState(\n        if (isPressed) 40.dp\n        else {\n            if (items == 1 || index == items - 1) 20.dp\n            else 4.dp\n        },\n        motionScheme.fastSpatialSpec()\n    )\n\n    ListItem(\n        headlineContent = headlineContent,\n        modifier = modifier\n            .clip(\n                RoundedCornerShape(\n                    topStart = top,\n                    topEnd = top,\n                    bottomStart = bottom,\n                    bottomEnd = bottom\n                )\n            )\n            .clickable(\n                onClick = onClick,\n                interactionSource = interactionSource,\n            ),\n        overlineContent = overlineContent,\n        supportingContent = supportingContent,\n        leadingContent = leadingContent,\n        trailingContent = trailingContent,\n        colors = colors,\n        tonalElevation = tonalElevation,\n        shadowElevation = shadowElevation\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ColorSchemePickerListItem.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.os.Build\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.PaddingValues\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyRow\nimport androidx.compose.foundation.lazy.items\nimport androidx.compose.foundation.shape.CornerSize\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@Composable\nfun ColorSchemePickerListItem(\n    color: Color,\n    items: Int,\n    index: Int,\n    isPlus: Boolean,\n    onColorChange: (Color) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val colorSchemes = listOf(\n        Color(0xfffeb4a7), Color(0xffffb3c0), Color(0xfffcaaff), Color(0xffb9c3ff),\n        Color(0xff62d3ff), Color(0xff44d9f1), Color(0xff52dbc9), Color(0xff78dd77),\n        Color(0xff9fd75c), Color(0xffc1d02d), Color(0xfffabd00), Color(0xffffb86e),\n        Color.White\n    )\n    val zeroCorner = remember { CornerSize(0) }\n\n    Column(\n        modifier\n            .clip(\n                when (index) {\n                    0 -> topListItemShape\n                    items - 1 -> bottomListItemShape\n                    else -> middleListItemShape\n                }\n            )\n    ) {\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {\n            ListItem(\n                leadingContent = {\n                    Icon(\n                        painterResource(R.drawable.colors),\n                        null\n                    )\n                },\n                headlineContent = { Text(stringResource(R.string.dynamic_color)) },\n                supportingContent = { Text(stringResource(R.string.dynamic_color_desc)) },\n                trailingContent = {\n                    val checked = color == colorSchemes.last()\n                    Switch(\n                        checked = checked,\n                        onCheckedChange = {\n                            if (it) onColorChange(colorSchemes.last())\n                            else onColorChange(colorSchemes.first())\n                        },\n                        enabled = isPlus,\n                        thumbContent = {\n                            if (checked) {\n                                Icon(\n                                    painter = painterResource(R.drawable.check),\n                                    contentDescription = null,\n                                    modifier = Modifier.size(SwitchDefaults.IconSize),\n                                )\n                            } else {\n                                Icon(\n                                    painter = painterResource(R.drawable.clear),\n                                    contentDescription = null,\n                                    modifier = Modifier.size(SwitchDefaults.IconSize),\n                                )\n                            }\n                        },\n                        colors = switchColors\n                    )\n                },\n                colors = listItemColors,\n                modifier = Modifier.clip(middleListItemShape)\n            )\n            Spacer(Modifier.height(2.dp))\n        }\n\n        ListItem(\n            leadingContent = {\n                Icon(\n                    painter = painterResource(R.drawable.palette),\n                    contentDescription = null,\n                    tint = colorScheme.primary\n                )\n            },\n            headlineContent = { Text(stringResource(R.string.color_scheme)) },\n            supportingContent = {\n                Text(\n                    if (color == Color.White) stringResource(R.string.dynamic)\n                    else stringResource(R.string.color)\n                )\n            },\n            colors = listItemColors,\n            modifier = Modifier.clip(\n                RoundedCornerShape(\n                    topStart = middleListItemShape.topStart,\n                    topEnd = middleListItemShape.topEnd,\n                    zeroCorner,\n                    zeroCorner\n                )\n            )\n        )\n\n        LazyRow(\n            contentPadding = PaddingValues(horizontal = 48.dp),\n            userScrollEnabled = isPlus,\n            modifier = Modifier\n                .background(listItemColors.containerColor)\n                .padding(bottom = 8.dp)\n        ) {\n            items(colorSchemes.dropLast(1)) {\n                ColorPickerButton(\n                    color = it,\n                    isSelected = it == color,\n                    enabled = isPlus,\n                    modifier = Modifier.padding(4.dp)\n                ) {\n                    onColorChange(it)\n                }\n            }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ColorPickerButton(\n    color: Color,\n    isSelected: Boolean,\n    enabled: Boolean,\n    modifier: Modifier = Modifier,\n    onClick: () -> Unit\n) {\n    IconButton(\n        shapes = IconButtonDefaults.shapes(),\n        colors = IconButtonDefaults.iconButtonColors(\n            containerColor = color,\n            disabledContainerColor = color.copy(0.3f)\n        ),\n        enabled = enabled,\n        modifier = modifier.size(48.dp),\n        onClick = onClick\n    ) {\n        AnimatedContent(isSelected) { isSelected ->\n            when (isSelected) {\n                true -> Icon(\n                    painterResource(R.drawable.check),\n                    tint = Color.Black,\n                    contentDescription = null\n                )\n\n                else ->\n                    if (color == Color.White) Icon(\n                        painterResource(R.drawable.colors),\n                        tint = Color.Black,\n                        contentDescription = null\n                    )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\LocaleBottomSheet.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.app.LocaleConfig\nimport android.app.LocaleManager\nimport android.os.Build\nimport android.os.LocaleList\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.lazy.rememberLazyListState\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.ModalBottomSheet\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.rememberModalBottomSheetState\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.rememberCoroutineScope\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\nimport java.util.Locale\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun LocaleBottomSheet(\n    currentLocales: LocaleList,\n    setShowSheet: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val context = LocalContext.current\n    val scope = rememberCoroutineScope()\n\n    val supportedLocales = remember {\n        if (Build.VERSION.SDK_INT >= 33) {\n            LocaleConfig(context).supportedLocales\n        } else null\n    }\n    val supportedLocalesSize = supportedLocales?.size() ?: 0\n\n    val supportedLocalesList: List<AppLocale>? = remember {\n        if (supportedLocales != null) {\n            buildList {\n                for (i in 0 until supportedLocalesSize) {\n                    add(AppLocale(supportedLocales.get(i), supportedLocales.get(i).displayName))\n                }\n                sortWith(compareBy { it.name })\n            }\n        } else null\n    }\n\n    val bottomSheetState = rememberModalBottomSheetState()\n    val listState = rememberLazyListState()\n\n    ModalBottomSheet(\n        onDismissRequest = { setShowSheet(false) },\n        sheetState = bottomSheetState,\n        modifier = modifier\n    ) {\n        Column(horizontalAlignment = Alignment.CenterHorizontally) {\n            Text(\n                text = stringResource(R.string.choose_language),\n                style = MaterialTheme.typography.labelLarge,\n                modifier = Modifier.padding(bottom = 16.dp)\n            )\n            if (supportedLocalesList != null) {\n                LazyColumn(\n                    verticalArrangement = Arrangement.spacedBy(2.dp),\n                    state = listState,\n                    modifier = Modifier\n                        .padding(horizontal = 16.dp)\n                        .clip(shapes.largeIncreased)\n                ) {\n                    item {\n                        ListItem(\n                            headlineContent = {\n                                Text(stringResource(R.string.system_default))\n                            },\n                            trailingContent = {\n                                if (currentLocales.isEmpty)\n                                    Icon(\n                                        painterResource(R.drawable.check),\n                                        contentDescription = stringResource(R.string.selected)\n                                    )\n                            },\n                            colors =\n                                if (currentLocales.isEmpty)\n                                    ListItemDefaults.colors(\n                                        containerColor = colorScheme.primaryContainer.copy(\n                                            0.3f\n                                        )\n                                    )\n                                else listItemColors,\n                            modifier = Modifier\n                                .clip(if (currentLocales.isEmpty) CircleShape else shapes.largeIncreased)\n                                .clickable(\n                                    onClick = {\n                                        scope\n                                            .launch { bottomSheetState.hide() }\n                                            .invokeOnCompletion {\n                                                if (Build.VERSION.SDK_INT >= 33) {\n                                                    context\n                                                        .getSystemService(LocaleManager::class.java)\n                                                        .applicationLocales = LocaleList()\n                                                }\n                                                setShowSheet(false)\n                                            }\n                                    }\n                                )\n                        )\n                    }\n                    item {\n                        Spacer(Modifier.height(12.dp))\n                    }\n                    itemsIndexed(\n                        supportedLocalesList,\n                        key = { _: Int, it: AppLocale -> it.name }\n                    ) { index, it ->\n                        ListItem(\n                            headlineContent = {\n                                Text(it.name)\n                            },\n                            trailingContent = {\n                                if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                    Icon(\n                                        painterResource(R.drawable.check),\n                                        tint = colorScheme.primary,\n                                        contentDescription = stringResource(R.string.selected)\n                                    )\n                            },\n                            colors =\n                                if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                    ListItemDefaults.colors(containerColor = colorScheme.primaryContainer)\n                                else listItemColors,\n                            modifier = Modifier\n                                .clip(\n                                    if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                        CircleShape\n                                    else when (index) {\n                                        0 -> topListItemShape\n                                        supportedLocalesSize - 1 -> bottomListItemShape\n                                        else -> middleListItemShape\n                                    }\n                                )\n                                .clickable(\n                                    onClick = {\n                                        scope\n                                            .launch { bottomSheetState.hide() }\n                                            .invokeOnCompletion { _ ->\n                                                if (Build.VERSION.SDK_INT >= 33) {\n                                                    context.getSystemService(LocaleManager::class.java)\n                                                        .applicationLocales =\n                                                        LocaleList(it.locale)\n                                                }\n                                                setShowSheet(false)\n                                            }\n                                    }\n                                )\n                        )\n                    }\n                }\n            }\n        }\n    }\n}\n\ndata class AppLocale(\n    val locale: Locale,\n    val name: String\n)"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\MinuteInputField.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.text.BasicTextField\nimport androidx.compose.foundation.text.KeyboardOptions\nimport androidx.compose.foundation.text.input.TextFieldLineLimits\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Shape\nimport androidx.compose.ui.graphics.SolidColor\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.input.ImeAction\nimport androidx.compose.ui.text.input.KeyboardType\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun MinuteInputField(\n    state: TextFieldState,\n    enabled: Boolean,\n    shape: Shape,\n    modifier: Modifier = Modifier,\n    imeAction: ImeAction = ImeAction.Next\n) {\n    BasicTextField(\n        state = state,\n        enabled = enabled,\n        lineLimits = TextFieldLineLimits.SingleLine,\n        inputTransformation = MinutesInputTransformation,\n//        outputTransformation = MinutesOutputTransformation,\n        keyboardOptions = KeyboardOptions(\n            keyboardType = KeyboardType.NumberPassword,\n            imeAction = imeAction\n        ),\n        textStyle = TextStyle(\n            fontFamily = interClock,\n            fontSize = 57.sp,\n            letterSpacing = (-2).sp,\n            color = if (enabled) colorScheme.onSurfaceVariant else colorScheme.outlineVariant,\n            textAlign = TextAlign.Center\n        ),\n        cursorBrush = SolidColor(colorScheme.onSurface),\n        decorator = { innerTextField ->\n            Box(\n                contentAlignment = Alignment.Center,\n                modifier = modifier\n                    .size(112.dp, 100.dp)\n                    .background(\n                        animateColorAsState(\n                            if (state.text.isNotEmpty())\n                                listItemColors.containerColor\n                            else colorScheme.errorContainer,\n                            motionScheme.defaultEffectsSpec()\n                        ).value,\n                        shape\n                    )\n            ) { innerTextField() }\n        }\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\MinutesTransformation.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.text.input.InputTransformation\nimport androidx.compose.foundation.text.input.TextFieldBuffer\nimport androidx.core.text.isDigitsOnly\n\nobject MinutesInputTransformation : InputTransformation {\n    override fun TextFieldBuffer.transformInput() {\n        if (!this.asCharSequence().isDigitsOnly() || this.length > 2) {\n            revertAllChanges()\n        }\n    }\n}\n\n//object MinutesOutputTransformation : OutputTransformation {\n//    override fun TextFieldBuffer.transformOutput() {\n//        when (this.length) {\n//            0 -> insert(0, \"00\")\n//            1 -> insert(0, \"0\")\n//        }\n//    }\n//}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\PlusDivider.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.HorizontalDivider\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.unit.dp\n\n@Composable\nfun PlusDivider(\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    Box(contentAlignment = Alignment.Center, modifier = modifier.padding(vertical = 14.dp)) {\n        HorizontalDivider(modifier = Modifier.clip(CircleShape), thickness = 4.dp)\n        Button(\n            onClick = { setShowPaywall(true) },\n            modifier = Modifier\n                .background(colorScheme.surfaceContainer)\n                .padding(horizontal = 8.dp)\n        ) {\n            Text(\"Customize further with Tomato+\", style = typography.titleSmall)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\PlusPromo.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n@Composable\nfun PlusPromo(\n    isPlus: Boolean,\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val container = if (isPlus) colorScheme.surfaceBright else colorScheme.primary\n    val onContainer = if (isPlus) colorScheme.onSurface else colorScheme.onPrimary\n    val onContainerVariant = if (isPlus) colorScheme.onSurfaceVariant else colorScheme.onPrimary\n\n    Row(\n        verticalAlignment = Alignment.CenterVertically,\n        modifier = modifier\n            .clip(CircleShape)\n            .background(container)\n            .padding(16.dp)\n            .clickable { setShowPaywall(true) }\n    ) {\n        Icon(\n            painterResource(R.drawable.tomato_logo_notification),\n            null,\n            tint = onContainerVariant,\n            modifier = Modifier\n                .size(24.dp)\n        )\n        Spacer(Modifier.width(8.dp))\n        Text(\n            if (!isPlus) stringResource(R.string.get_plus)\n            else stringResource(R.string.app_name_plus),\n            style = typography.titleLarge,\n            fontFamily = robotoFlexTopBar,\n            color = onContainer\n        )\n        Spacer(Modifier.weight(1f))\n        Icon(\n            painterResource(R.drawable.arrow_forward_big),\n            null,\n            tint = onContainerVariant\n        )\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ThemePickerListItem.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.ButtonGroupDefaults\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.ToggleButton\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.semantics.Role\nimport androidx.compose.ui.semantics.role\nimport androidx.compose.ui.semantics.semantics\nimport androidx.compose.ui.text.style.TextOverflow\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.cardShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ThemePickerListItem(\n    theme: String,\n    items: Int,\n    index: Int,\n    onThemeChange: (String) -> Unit,\n    modifier: Modifier = Modifier,\n) {\n    val themeMap: Map<String, Pair<Int, Int>> = remember {\n        mapOf(\n            \"auto\" to Pair(\n                R.drawable.brightness_auto,\n                R.string.system_default\n            ),\n            \"light\" to Pair(R.drawable.light_mode, R.string.light),\n            \"dark\" to Pair(R.drawable.dark_mode, R.string.dark)\n        )\n    }\n\n    Column(\n        modifier\n            .clip(\n                if (items > 1)\n                    when (index) {\n                        0 -> topListItemShape\n                        items - 1 -> bottomListItemShape\n                        else -> middleListItemShape\n                    }\n                else cardShape,\n            ),\n    ) {\n        ListItem(\n            leadingContent = {\n                AnimatedContent(themeMap[theme]!!.first) {\n                    Icon(\n                        painter = painterResource(it),\n                        contentDescription = null,\n                    )\n                }\n            },\n            headlineContent = { Text(stringResource(R.string.theme)) },\n            colors = listItemColors,\n        )\n\n        val options = themeMap.toList()\n        val selectedIndex = options.indexOf(Pair(theme, themeMap[theme]))\n\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(ButtonGroupDefaults.ConnectedSpaceBetween),\n            modifier = Modifier\n                .background(listItemColors.containerColor)\n                .padding(start = 52.dp, end = 16.dp, bottom = 8.dp)\n        ) {\n            options.forEachIndexed { index, theme ->\n                val isSelected = selectedIndex == index\n                ToggleButton(\n                    checked = isSelected,\n                    onCheckedChange = { onThemeChange(theme.first) },\n                    modifier = Modifier\n                        .weight(1f)\n                        .semantics { role = Role.RadioButton },\n                    shapes =\n                        when (index) {\n                            0 -> ButtonGroupDefaults.connectedLeadingButtonShapes()\n                            options.lastIndex -> ButtonGroupDefaults.connectedTrailingButtonShapes()\n                            else -> ButtonGroupDefaults.connectedMiddleButtonShapes()\n                        },\n                ) {\n                    Text(\n                        stringResource(theme.second.second),\n                        maxLines = 1,\n                        overflow = TextOverflow.Ellipsis\n                    )\n                }\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\AlarmSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport android.annotation.SuppressLint\nimport android.app.Activity\nimport android.content.Intent\nimport android.media.RingtoneManager\nimport android.net.Uri\nimport android.os.Build\nimport androidx.activity.compose.rememberLauncherForActivityResult\nimport androidx.activity.result.contract.ActivityResultContracts\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.core.net.toUri\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.withContext\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AlarmSettings(\n    settingsState: SettingsState,\n    onAction: (SettingsAction) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n    val context = LocalContext.current\n\n    var alarmName by remember { mutableStateOf(\"...\") }\n\n    LaunchedEffect(settingsState.alarmSound) {\n        withContext(Dispatchers.IO) {\n            alarmName =\n                RingtoneManager.getRingtone(context, settingsState.alarmSound.toUri())\n                    ?.getTitle(context) ?: \"\"\n        }\n    }\n\n    val ringtonePickerLauncher = rememberLauncherForActivityResult(\n        contract = ActivityResultContracts.StartActivityForResult()\n    ) { result ->\n        if (result.resultCode == Activity.RESULT_OK) {\n            val uri =\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU) {\n                    result.data?.getParcelableExtra(\n                        RingtoneManager.EXTRA_RINGTONE_PICKED_URI,\n                        Uri::class.java\n                    )\n                } else {\n                    @Suppress(\"DEPRECATION\")\n                    result.data?.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI)\n                }\n            onAction(SettingsAction.SaveAlarmSound(uri))\n        }\n    }\n\n    @SuppressLint(\"LocalContextGetResourceValueCall\")\n    val ringtonePickerIntent = remember(settingsState.alarmSound) {\n        Intent(RingtoneManager.ACTION_RINGTONE_PICKER).apply {\n            putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_ALARM)\n            putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, context.getString(R.string.alarm_sound))\n            putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, settingsState.alarmSound.toUri())\n        }\n    }\n\n    val switchItems = remember(\n        settingsState.blackTheme,\n        settingsState.aodEnabled,\n        settingsState.alarmEnabled,\n        settingsState.vibrateEnabled\n    ) {\n        listOf(\n            SettingsSwitchItem(\n                checked = settingsState.alarmEnabled,\n                icon = R.drawable.alarm_on,\n                label = R.string.sound,\n                description = R.string.alarm_desc,\n                onClick = { onAction(SettingsAction.SaveAlarmEnabled(it)) }\n            ),\n            SettingsSwitchItem(\n                checked = settingsState.vibrateEnabled,\n                icon = R.drawable.mobile_vibrate,\n                label = R.string.vibrate,\n                description = R.string.vibrate_desc,\n                onClick = { onAction(SettingsAction.SaveVibrateEnabled(it)) }\n            )\n        )\n    }\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.alarm), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                Spacer(Modifier.height(14.dp))\n            }\n\n            item {\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(R.drawable.alarm), null)\n                    },\n                    headlineContent = { Text(stringResource(R.string.alarm_sound)) },\n                    supportingContent = { Text(alarmName) },\n                    colors = listItemColors,\n                    modifier = Modifier\n                        .clip(topListItemShape)\n                        .clickable(onClick = { ringtonePickerLauncher.launch(ringtonePickerIntent) })\n                )\n            }\n            itemsIndexed(switchItems) { index, item ->\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(item.icon), contentDescription = null)\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            onCheckedChange = { item.onClick(it) },\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier\n                        .clip(\n                            when (index) {\n                                switchItems.lastIndex -> bottomListItemShape\n                                else -> middleListItemShape\n                            }\n                        )\n                )\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nfun AlarmSettingsPreview() {\n    val settingsState = SettingsState()\n    AlarmSettings(\n        settingsState = settingsState,\n        onAction = {},\n        onBack = {}\n    )\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\AppearanceSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ColorSchemePickerListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusDivider\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ThemePickerListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.toColor\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AppearanceSettings(\n    settingsState: SettingsState,\n    isPlus: Boolean,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.appearance), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                Spacer(Modifier.height(14.dp))\n            }\n            item {\n                ThemePickerListItem(\n                    theme = settingsState.theme,\n                    onThemeChange = { onAction(SettingsAction.SaveTheme(it)) },\n                    items = if (isPlus) 3 else 1,\n                    index = 0\n                )\n            }\n\n            if (!isPlus) {\n                item { PlusDivider(setShowPaywall) }\n            }\n\n            item {\n                ColorSchemePickerListItem(\n                    color = settingsState.colorScheme.toColor(),\n                    items = 3,\n                    index = if (isPlus) 1 else 0,\n                    isPlus = isPlus,\n                    onColorChange = { onAction(SettingsAction.SaveColorScheme(it)) },\n                )\n            }\n            item {\n                val item = SettingsSwitchItem(\n                    checked = settingsState.blackTheme,\n                    icon = R.drawable.contrast,\n                    label = R.string.black_theme,\n                    description = R.string.black_theme_desc,\n                    onClick = { onAction(SettingsAction.SaveBlackTheme(it)) }\n                )\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(item.icon), contentDescription = null)\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            onCheckedChange = { item.onClick(it) },\n                            enabled = isPlus,\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(bottomListItemShape)\n                )\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@Preview\n@Composable\nfun AppearanceSettingsPreview() {\n    val settingsState = SettingsState()\n    TomatoTheme(dynamicColor = false) {\n        AppearanceSettings(\n            settingsState = settingsState,\n            isPlus = false,\n            onAction = {},\n            setShowPaywall = {},\n            onBack = {}\n        )\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\TimerSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport android.app.NotificationManager\nimport android.content.Context\nimport android.content.Intent\nimport android.provider.Settings\nimport android.widget.Toast\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.horizontalScroll\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.items\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.rememberScrollState\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.foundation.text.input.rememberTextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledTonalIconToggleButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.LocalContentColor\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Slider\nimport androidx.compose.material3.SliderState\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.material3.rememberSliderState\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.CompositionLocalProvider\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.input.ImeAction\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.MinuteInputField\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusDivider\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.cardShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimerSettings(\n    isPlus: Boolean,\n    serviceRunning: Boolean,\n    settingsState: SettingsState,\n    focusTimeInputFieldState: TextFieldState,\n    shortBreakTimeInputFieldState: TextFieldState,\n    longBreakTimeInputFieldState: TextFieldState,\n    sessionsSliderState: SliderState,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n    val context = LocalContext.current\n    val appName = stringResource(R.string.app_name)\n    val notificationManagerService =\n        remember { context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager }\n\n    val switchItems = listOf(\n        SettingsSwitchItem(\n            checked = settingsState.dndEnabled,\n            enabled = !serviceRunning,\n            icon = R.drawable.dnd,\n            label = R.string.dnd,\n            description = R.string.dnd_desc,\n            onClick = {\n                if (it && !notificationManagerService.isNotificationPolicyAccessGranted()) {\n                    val intent = Intent(Settings.ACTION_NOTIFICATION_POLICY_ACCESS_SETTINGS)\n                    Toast.makeText(context, \"Enable permission for \\\"$appName\\\"\", Toast.LENGTH_LONG)\n                        .show()\n                    context.startActivity(intent)\n                } else if (!it && notificationManagerService.isNotificationPolicyAccessGranted()) {\n                    notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALL)\n                }\n                onAction(SettingsAction.SaveDndEnabled(it))\n            }\n        ),\n        SettingsSwitchItem(\n            checked = settingsState.aodEnabled,\n            icon = R.drawable.aod,\n            label = R.string.always_on_display,\n            description = R.string.always_on_display_desc,\n            onClick = { onAction(SettingsAction.SaveAodEnabled(it)) }\n        )\n    )\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.timer), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                CompositionLocalProvider(LocalContentColor provides colorScheme.error) {\n                    AnimatedVisibility(serviceRunning) {\n                        Column {\n                            Spacer(Modifier.height(8.dp))\n                            Row(\n                                verticalAlignment = Alignment.CenterVertically,\n                                horizontalArrangement = Arrangement.spacedBy(8.dp)\n                            ) {\n                                Icon(painterResource(R.drawable.info), null)\n                                Text(stringResource(R.string.timer_settings_reset_info))\n                            }\n                        }\n                    }\n                }\n                Spacer(Modifier.height(14.dp))\n            }\n            item {\n                Row(\n                    horizontalArrangement = Arrangement.Center,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .horizontalScroll(rememberScrollState())\n                ) {\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.focus),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = focusTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(\n                                topStart = topListItemShape.topStart,\n                                bottomStart = topListItemShape.topStart,\n                                topEnd = topListItemShape.bottomStart,\n                                bottomEnd = topListItemShape.bottomStart\n                            ),\n                            imeAction = ImeAction.Next\n                        )\n                    }\n                    Spacer(Modifier.width(2.dp))\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.short_break),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = shortBreakTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(middleListItemShape.topStart),\n                            imeAction = ImeAction.Next\n                        )\n                    }\n                    Spacer(Modifier.width(2.dp))\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.long_break),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = longBreakTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(\n                                topStart = bottomListItemShape.topStart,\n                                bottomStart = bottomListItemShape.topStart,\n                                topEnd = bottomListItemShape.bottomStart,\n                                bottomEnd = bottomListItemShape.bottomStart\n                            ),\n                            imeAction = ImeAction.Done\n                        )\n                    }\n                }\n            }\n            item {\n                Spacer(Modifier.height(12.dp))\n            }\n            item {\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(R.drawable.clocks), null)\n                    },\n                    headlineContent = {\n                        Text(stringResource(R.string.session_length))\n                    },\n                    supportingContent = {\n                        Column {\n                            Text(\n                                stringResource(\n                                    R.string.session_length_desc,\n                                    sessionsSliderState.value.toInt()\n                                )\n                            )\n                            Slider(\n                                state = sessionsSliderState,\n                                enabled = !serviceRunning,\n                                modifier = Modifier.padding(vertical = 4.dp)\n                            )\n                        }\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(cardShape)\n                )\n            }\n            item { Spacer(Modifier.height(12.dp)) }\n\n            itemsIndexed(if (isPlus) switchItems else switchItems.take(1)) { index, item ->\n                ListItem(\n                    leadingContent = {\n                        Icon(\n                            painterResource(item.icon),\n                            contentDescription = null,\n                            modifier = Modifier.padding(top = 4.dp)\n                        )\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            enabled = item.enabled,\n                            onCheckedChange = { item.onClick(it) },\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(\n                        if (isPlus) when (index) {\n                            0 -> topListItemShape\n                            switchItems.size - 1 -> bottomListItemShape\n                            else -> middleListItemShape\n                        }\n                        else cardShape\n                    )\n                )\n            }\n\n            if (!isPlus) {\n                item {\n                    PlusDivider(setShowPaywall)\n                }\n                items(switchItems.drop(1)) { item ->\n                    ListItem(\n                        leadingContent = {\n                            Icon(\n                                painterResource(item.icon),\n                                contentDescription = null,\n                                modifier = Modifier.padding(top = 4.dp)\n                            )\n                        },\n                        headlineContent = { Text(stringResource(item.label)) },\n                        supportingContent = { Text(stringResource(item.description)) },\n                        trailingContent = {\n                            Switch(\n                                checked = item.checked,\n                                onCheckedChange = { item.onClick(it) },\n                                enabled = isPlus,\n                                thumbContent = {\n                                    if (item.checked) {\n                                        Icon(\n                                            painter = painterResource(R.drawable.check),\n                                            contentDescription = null,\n                                            modifier = Modifier.size(SwitchDefaults.IconSize),\n                                        )\n                                    } else {\n                                        Icon(\n                                            painter = painterResource(R.drawable.clear),\n                                            contentDescription = null,\n                                            modifier = Modifier.size(SwitchDefaults.IconSize),\n                                        )\n                                    }\n                                },\n                                colors = switchColors\n                            )\n                        },\n                        colors = listItemColors,\n                        modifier = Modifier.clip(cardShape)\n                    )\n                }\n            }\n\n            item {\n                var expanded by remember { mutableStateOf(false) }\n                Column(\n                    horizontalAlignment = Alignment.End,\n                    modifier = Modifier\n                        .padding(vertical = 6.dp)\n                        .fillMaxWidth()\n                ) {\n                    FilledTonalIconToggleButton(\n                        checked = expanded,\n                        onCheckedChange = { expanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier.width(52.dp)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.info),\n                            null\n                        )\n                    }\n                    AnimatedVisibility(expanded) {\n                        Text(\n                            stringResource(R.string.pomodoro_info),\n                            style = typography.bodyMedium,\n                            color = colorScheme.onSurfaceVariant,\n                            modifier = Modifier.padding(8.dp)\n                        )\n                    }\n                }\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Preview\n@Composable\nprivate fun TimerSettingsPreview() {\n    val focusTimeInputFieldState = rememberTextFieldState(\"25\")\n    val shortBreakTimeInputFieldState = rememberTextFieldState(\"5\")\n    val longBreakTimeInputFieldState = rememberTextFieldState(\"15\")\n    val sessionsSliderState = rememberSliderState(\n        value = 4f,\n        valueRange = 1f..8f,\n        steps = 6\n    )\n    TimerSettings(\n        isPlus = false,\n        serviceRunning = true,\n        settingsState = remember { SettingsState() },\n        focusTimeInputFieldState = focusTimeInputFieldState,\n        shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n        longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n        sessionsSliderState = sessionsSliderState,\n        onAction = {},\n        setShowPaywall = {},\n        onBack = {}\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\SettingsScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen\n\nimport android.annotation.SuppressLint\nimport android.app.LocaleManager\nimport android.os.Build\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.slideInHorizontally\nimport androidx.compose.animation.slideOutHorizontally\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.LocalTextStyle\nimport androidx.compose.material3.SliderState\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.DisposableEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.saveable.rememberSaveable\nimport androidx.compose.runtime.setValue\nimport androidx.compose.runtime.snapshots.SnapshotStateList\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextOverflow\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport androidx.navigation3.runtime.entryProvider\nimport androidx.navigation3.ui.NavDisplay\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.Screen\nimport org.nsh07.pomodoro.ui.settingsScreen.components.AboutCard\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ClickableListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.LocaleBottomSheet\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusPromo\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.AlarmSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.AppearanceSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.TimerSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsViewModel\nimport org.nsh07.pomodoro.ui.settingsScreens\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\n\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Composable\nfun SettingsScreenRoot(\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier,\n    viewModel: SettingsViewModel = viewModel(factory = SettingsViewModel.Factory)\n) {\n    val backStack = viewModel.backStack\n\n    DisposableEffect(Unit) {\n        viewModel.runTextFieldFlowCollection()\n        onDispose { viewModel.cancelTextFieldFlowCollection() }\n    }\n\n    val focusTimeInputFieldState = viewModel.focusTimeTextFieldState\n    val shortBreakTimeInputFieldState = viewModel.shortBreakTimeTextFieldState\n    val longBreakTimeInputFieldState = viewModel.longBreakTimeTextFieldState\n\n    val isPlus by viewModel.isPlus.collectAsStateWithLifecycle()\n    val serviceRunning by viewModel.serviceRunning.collectAsStateWithLifecycle()\n\n    val settingsState by viewModel.settingsState.collectAsStateWithLifecycle()\n\n    val sessionsSliderState = rememberSaveable(\n        saver = SliderState.Saver(\n            viewModel.sessionsSliderState.onValueChangeFinished,\n            viewModel.sessionsSliderState.valueRange\n        )\n    ) {\n        viewModel.sessionsSliderState\n    }\n\n    SettingsScreen(\n        isPlus = isPlus,\n        serviceRunning = serviceRunning,\n        settingsState = settingsState,\n        backStack = backStack,\n        focusTimeInputFieldState = focusTimeInputFieldState,\n        shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n        longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n        sessionsSliderState = sessionsSliderState,\n        onAction = viewModel::onAction,\n        setShowPaywall = setShowPaywall,\n        modifier = modifier\n    )\n}\n\n@SuppressLint(\"LocalContextGetResourceValueCall\")\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nprivate fun SettingsScreen(\n    isPlus: Boolean,\n    serviceRunning: Boolean,\n    settingsState: SettingsState,\n    backStack: SnapshotStateList<Screen.Settings>,\n    focusTimeInputFieldState: TextFieldState,\n    shortBreakTimeInputFieldState: TextFieldState,\n    longBreakTimeInputFieldState: TextFieldState,\n    sessionsSliderState: SliderState,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val context = LocalContext.current\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    val currentLocales =\n        if (Build.VERSION.SDK_INT >= 33) {\n            context\n                .getSystemService(LocaleManager::class.java)\n                .applicationLocales\n        } else null\n    val currentLocalesSize = currentLocales?.size() ?: 0\n\n    var showLocaleSheet by remember { mutableStateOf(false) }\n\n    if (showLocaleSheet && currentLocales != null)\n        LocaleBottomSheet(\n            currentLocales = currentLocales,\n            setShowSheet = { showLocaleSheet = it }\n        )\n\n    NavDisplay(\n        backStack = backStack,\n        onBack = backStack::removeLastOrNull,\n        transitionSpec = {\n            (slideInHorizontally(initialOffsetX = { it }))\n                .togetherWith(slideOutHorizontally(targetOffsetX = { -it / 4 }) + fadeOut())\n        },\n        popTransitionSpec = {\n            (slideInHorizontally(initialOffsetX = { -it / 4 }) + fadeIn())\n                .togetherWith(slideOutHorizontally(targetOffsetX = { it }))\n        },\n        predictivePopTransitionSpec = {\n            (slideInHorizontally(initialOffsetX = { -it / 4 }) + fadeIn())\n                .togetherWith(slideOutHorizontally(targetOffsetX = { it }))\n        },\n        entryProvider = entryProvider {\n            entry<Screen.Settings.Main> {\n                Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n                    TopAppBar(\n                        title = {\n                            Text(\n                                stringResource(R.string.settings),\n                                style = LocalTextStyle.current.copy(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp\n                                )\n                            )\n                        },\n                        subtitle = {},\n                        colors = topBarColors,\n                        titleHorizontalAlignment = Alignment.CenterHorizontally,\n                        scrollBehavior = scrollBehavior\n                    )\n\n                    LazyColumn(\n                        verticalArrangement = Arrangement.spacedBy(2.dp),\n                        modifier = Modifier\n                            .background(topBarColors.containerColor)\n                            .fillMaxSize()\n                            .padding(horizontal = 16.dp)\n                    ) {\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (!isPlus) item {\n                            PlusPromo(isPlus, setShowPaywall)\n                            Spacer(Modifier.height(14.dp))\n                        }\n\n                        item { AboutCard(isPlus) }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (isPlus) item {\n                            PlusPromo(isPlus, setShowPaywall)\n                            Spacer(Modifier.height(14.dp))\n                        }\n\n                        itemsIndexed(settingsScreens) { index, item ->\n                            ClickableListItem(\n                                leadingContent = {\n                                    Icon(painterResource(item.icon), null)\n                                },\n                                headlineContent = { Text(stringResource(item.label)) },\n                                supportingContent = {\n                                    Text(\n                                        remember {\n                                            item.innerSettings.joinToString(\", \") {\n                                                context.getString(it)\n                                            }\n                                        },\n                                        maxLines = 1,\n                                        overflow = TextOverflow.Ellipsis\n                                    )\n                                },\n                                trailingContent = {\n                                    Icon(painterResource(R.drawable.arrow_forward_big), null)\n                                },\n                                items = settingsScreens.size,\n                                index = index\n                            ) { backStack.add(item.route) }\n                        }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (currentLocales != null)\n                            item {\n                                ClickableListItem(\n                                    leadingContent = {\n                                        Icon(\n                                            painterResource(R.drawable.language),\n                                            contentDescription = null\n                                        )\n                                    },\n                                    headlineContent = { Text(stringResource(R.string.language)) },\n                                    supportingContent = {\n                                        Text(\n                                            if (currentLocalesSize > 0) currentLocales.get(0).displayName\n                                            else stringResource(R.string.system_default)\n                                        )\n                                    },\n                                    colors = listItemColors,\n                                    items = 1,\n                                    index = 0\n                                ) { showLocaleSheet = true }\n                            }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n                    }\n                }\n            }\n\n            entry<Screen.Settings.Alarm> {\n                AlarmSettings(\n                    settingsState = settingsState,\n                    onAction = onAction,\n                    onBack = backStack::removeLastOrNull\n                )\n            }\n            entry<Screen.Settings.Appearance> {\n                AppearanceSettings(\n                    settingsState = settingsState,\n                    isPlus = isPlus,\n                    onAction = onAction,\n                    setShowPaywall = setShowPaywall,\n                    onBack = backStack::removeLastOrNull\n                )\n            }\n            entry<Screen.Settings.Timer> {\n                TimerSettings(\n                    isPlus = isPlus,\n                    serviceRunning = serviceRunning,\n                    settingsState = settingsState,\n                    focusTimeInputFieldState = focusTimeInputFieldState,\n                    shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n                    longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n                    sessionsSliderState = sessionsSliderState,\n                    onAction = onAction,\n                    setShowPaywall = setShowPaywall,\n                    onBack = backStack::removeLastOrNull,\n                )\n            }\n        }\n    )\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\SettingsSwitchItem.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen\n\nimport androidx.annotation.DrawableRes\nimport androidx.annotation.StringRes\n\ndata class SettingsSwitchItem(\n    val checked: Boolean,\n    val enabled: Boolean = true,\n    @param:DrawableRes val icon: Int,\n    @param:StringRes val label: Int,\n    @param:StringRes val description: Int,\n    val onClick: (Boolean) -> Unit\n)\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsAction.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport android.net.Uri\nimport androidx.compose.ui.graphics.Color\n\nsealed interface SettingsAction {\n    data class SaveAlarmEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveVibrateEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveBlackTheme(val enabled: Boolean) : SettingsAction\n    data class SaveAodEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveDndEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveAlarmSound(val uri: Uri?) : SettingsAction\n    data class SaveTheme(val theme: String) : SettingsAction\n    data class SaveColorScheme(val color: Color) : SettingsAction\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsState.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport androidx.compose.runtime.Immutable\nimport androidx.compose.ui.graphics.Color\n\n@Immutable\ndata class SettingsState(\n    val theme: String = \"auto\",\n    val alarmSound: String = \"\",\n    val colorScheme: String = Color.White.toString(),\n    val blackTheme: Boolean = false,\n    val aodEnabled: Boolean = false,\n    val alarmEnabled: Boolean = true,\n    val vibrateEnabled: Boolean = true,\n    val dndEnabled: Boolean = false\n)\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport android.net.Uri\nimport android.provider.Settings\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.SliderState\nimport androidx.compose.runtime.mutableStateListOf\nimport androidx.compose.runtime.snapshotFlow\nimport androidx.compose.ui.graphics.Color\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.FlowPreview\nimport kotlinx.coroutines.Job\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.debounce\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.billing.BillingManager\nimport org.nsh07.pomodoro.data.AppPreferenceRepository\nimport org.nsh07.pomodoro.data.TimerRepository\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.ui.Screen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport org.nsh07.pomodoro.utils.millisecondsToStr\n\n@OptIn(FlowPreview::class, ExperimentalMaterial3Api::class)\nclass SettingsViewModel(\n    private val billingManager: BillingManager,\n    private val preferenceRepository: AppPreferenceRepository,\n    private val serviceHelper: ServiceHelper,\n    private val time: MutableStateFlow<Long>,\n    private val timerRepository: TimerRepository,\n    private val timerState: MutableStateFlow<TimerState>\n) : ViewModel() {\n    val backStack = mutableStateListOf<Screen.Settings>(Screen.Settings.Main)\n\n    val isPlus = billingManager.isPlus\n    val serviceRunning = timerRepository.serviceRunning.asStateFlow()\n\n    private val _settingsState = MutableStateFlow(SettingsState())\n    val settingsState = _settingsState.asStateFlow()\n\n    val focusTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.focusTime / 60000).toString())\n    }\n    val shortBreakTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.shortBreakTime / 60000).toString())\n    }\n    val longBreakTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.longBreakTime / 60000).toString())\n    }\n\n    val sessionsSliderState by lazy {\n        SliderState(\n            value = timerRepository.sessionLength.toFloat(),\n            steps = 4,\n            valueRange = 1f..6f,\n            onValueChangeFinished = ::updateSessionLength\n        )\n    }\n\n    private var focusFlowCollectionJob: Job? = null\n    private var shortBreakFlowCollectionJob: Job? = null\n    private var longBreakFlowCollectionJob: Job? = null\n\n    init {\n        viewModelScope.launch {\n            reloadSettings()\n        }\n    }\n\n    fun onAction(action: SettingsAction) {\n        when (action) {\n            is SettingsAction.SaveAlarmSound -> saveAlarmSound(action.uri)\n            is SettingsAction.SaveAlarmEnabled -> saveAlarmEnabled(action.enabled)\n            is SettingsAction.SaveVibrateEnabled -> saveVibrateEnabled(action.enabled)\n            is SettingsAction.SaveDndEnabled -> saveDndEnabled(action.enabled)\n            is SettingsAction.SaveColorScheme -> saveColorScheme(action.color)\n            is SettingsAction.SaveTheme -> saveTheme(action.theme)\n            is SettingsAction.SaveBlackTheme -> saveBlackTheme(action.enabled)\n            is SettingsAction.SaveAodEnabled -> saveAodEnabled(action.enabled)\n        }\n    }\n\n    private fun updateSessionLength() {\n        viewModelScope.launch {\n            timerRepository.sessionLength = preferenceRepository.saveIntPreference(\n                \"session_length\",\n                sessionsSliderState.value.toInt()\n            )\n            refreshTimer()\n        }\n    }\n\n    fun runTextFieldFlowCollection() {\n        focusFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { focusTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.focusTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"focus_time\",\n                            timerRepository.focusTime.toInt()\n                        )\n                    }\n                }\n        }\n        shortBreakFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { shortBreakTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.shortBreakTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"short_break_time\",\n                            timerRepository.shortBreakTime.toInt()\n                        )\n                    }\n                }\n        }\n        longBreakFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { longBreakTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.longBreakTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"long_break_time\",\n                            timerRepository.longBreakTime.toInt()\n                        )\n                    }\n                }\n        }\n    }\n\n    fun cancelTextFieldFlowCollection() {\n        if (!serviceRunning.value) serviceHelper.startService(TimerAction.ResetTimer)\n        focusFlowCollectionJob?.cancel()\n        shortBreakFlowCollectionJob?.cancel()\n        longBreakFlowCollectionJob?.cancel()\n    }\n\n    private fun saveAlarmEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.alarmEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(alarmEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"alarm_enabled\", enabled)\n        }\n    }\n\n    private fun saveVibrateEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.vibrateEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(vibrateEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", enabled)\n        }\n    }\n\n    private fun saveDndEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.dndEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(dndEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"dnd_enabled\", enabled)\n        }\n    }\n\n    private fun saveAlarmSound(uri: Uri?) {\n        viewModelScope.launch {\n            timerRepository.alarmSoundUri = uri\n            _settingsState.update { currentState ->\n                currentState.copy(alarmSound = uri.toString())\n            }\n            preferenceRepository.saveStringPreference(\"alarm_sound\", uri.toString())\n        }\n    }\n\n    private fun saveColorScheme(colorScheme: Color) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(colorScheme = colorScheme.toString())\n            }\n            preferenceRepository.saveStringPreference(\"color_scheme\", colorScheme.toString())\n        }\n    }\n\n    private fun saveTheme(theme: String) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(theme = theme)\n            }\n            preferenceRepository.saveStringPreference(\"theme\", theme)\n        }\n    }\n\n    private fun saveBlackTheme(blackTheme: Boolean) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(blackTheme = blackTheme)\n            }\n            preferenceRepository.saveBooleanPreference(\"black_theme\", blackTheme)\n        }\n    }\n\n    private fun saveAodEnabled(aodEnabled: Boolean) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(aodEnabled = aodEnabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"aod_enabled\", aodEnabled)\n        }\n    }\n\n    suspend fun reloadSettings() {\n        val theme = preferenceRepository.getStringPreference(\"theme\")\n            ?: preferenceRepository.saveStringPreference(\"theme\", \"auto\")\n        val colorScheme = preferenceRepository.getStringPreference(\"color_scheme\")\n            ?: preferenceRepository.saveStringPreference(\"color_scheme\", Color.White.toString())\n        val blackTheme = preferenceRepository.getBooleanPreference(\"black_theme\")\n            ?: preferenceRepository.saveBooleanPreference(\"black_theme\", false)\n        val aodEnabled = preferenceRepository.getBooleanPreference(\"aod_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"aod_enabled\", false)\n        val alarmSound = preferenceRepository.getStringPreference(\"alarm_sound\")\n            ?: preferenceRepository.saveStringPreference(\n                \"alarm_sound\",\n                (Settings.System.DEFAULT_ALARM_ALERT_URI\n                    ?: Settings.System.DEFAULT_RINGTONE_URI).toString()\n            )\n        val alarmEnabled = preferenceRepository.getBooleanPreference(\"alarm_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"alarm_enabled\", true)\n        val vibrateEnabled = preferenceRepository.getBooleanPreference(\"vibrate_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", true)\n        val dndEnabled = preferenceRepository.getBooleanPreference(\"dnd_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"dnd_enabled\", false)\n\n        _settingsState.update { currentState ->\n            currentState.copy(\n                theme = theme,\n                colorScheme = colorScheme,\n                alarmSound = alarmSound,\n                blackTheme = blackTheme,\n                aodEnabled = aodEnabled,\n                alarmEnabled = alarmEnabled,\n                vibrateEnabled = vibrateEnabled,\n                dndEnabled = dndEnabled\n            )\n        }\n    }\n\n    private fun refreshTimer() {\n        if (!serviceRunning.value) {\n            time.update { timerRepository.focusTime }\n\n            timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = TimerMode.FOCUS,\n                    timeStr = millisecondsToStr(time.value),\n                    totalTime = time.value,\n                    nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                    nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                    currentFocusCount = 1,\n                    totalFocusCount = timerRepository.sessionLength\n                )\n            }\n        }\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appBillingManager = application.container.billingManager\n                val appPreferenceRepository = application.container.appPreferenceRepository\n                val appTimerRepository = application.container.appTimerRepository\n                val serviceHelper = application.container.serviceHelper\n                val time = application.container.time\n                val timerState = application.container.timerState\n\n                SettingsViewModel(\n                    billingManager = appBillingManager,\n                    preferenceRepository = appPreferenceRepository,\n                    serviceHelper = serviceHelper,\n                    time = time,\n                    timerRepository = appTimerRepository,\n                    timerState = timerState\n                )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\ProductivityGraph.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.ColumnScope\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.utils.millisecondsToHoursMinutes\n\n@Composable\nfun ColumnScope.ProductivityGraph(\n    expanded: Boolean,\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    label: String = stringResource(R.string.productivity_analysis)\n) {\n    AnimatedVisibility(expanded) {\n        Column(modifier = modifier) {\n            Text(label, style = typography.titleMedium)\n            Text(\n                stringResource(R.string.productivity_analysis_desc),\n                style = typography.bodySmall\n            )\n            Spacer(Modifier.height(8.dp))\n            TimeColumnChart(\n                modelProducer,\n                xValueFormatter = CartesianValueFormatter { _, value, _ ->\n                    when (value) {\n                        0.0 -> \"0 - 6\"\n                        1.0 -> \"6 - 12\"\n                        2.0 -> \"12 - 18\"\n                        3.0 -> \"18 - 24\"\n                        else -> \"\"\n                    }\n                },\n                yValueFormatter = CartesianValueFormatter { _, value, _ ->\n                    millisecondsToHoursMinutes(value.toLong())\n                }\n            )\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\StatsScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "STATE",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.animateFloatAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.PaddingValues\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.WindowInsets\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.text.TextAutoSize\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledTonalIconToggleButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.LocalTextStyle\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Surface\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.saveable.rememberSaveable\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.rotate\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.common.data.ExtraStore\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.ui.statsScreen.viewModel.StatsViewModel\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHoursMinutes\n\n@Composable\nfun StatsScreenRoot(\n    contentPadding: PaddingValues,\n    modifier: Modifier = Modifier,\n    viewModel: StatsViewModel = viewModel(factory = StatsViewModel.Factory)\n) {\n    val todayStat by viewModel.todayStat.collectAsStateWithLifecycle(null)\n\n    val lastWeekSummaryChartData by viewModel.lastWeekSummaryChartData.collectAsStateWithLifecycle()\n    val lastWeekAnalysisValues by viewModel.lastWeekAverageFocusTimes.collectAsStateWithLifecycle()\n\n    val lastMonthSummaryChartData by viewModel.lastMonthSummaryChartData.collectAsStateWithLifecycle()\n    val lastMonthAnalysisValues by viewModel.lastMonthAverageFocusTimes.collectAsStateWithLifecycle()\n\n    val lastYearSummaryChartData by viewModel.lastYearSummaryChartData.collectAsStateWithLifecycle()\n    val lastYearAnalysisValues by viewModel.lastYearAverageFocusTimes.collectAsStateWithLifecycle()\n\n    StatsScreen(\n        contentPadding = contentPadding,\n        lastWeekSummaryChartData = lastWeekSummaryChartData,\n        lastMonthSummaryChartData = lastMonthSummaryChartData,\n        lastYearSummaryChartData = lastYearSummaryChartData,\n        todayStat = todayStat,\n        lastWeekAverageFocusTimes = lastWeekAnalysisValues,\n        lastMonthAverageFocusTimes = lastMonthAnalysisValues,\n        lastYearAverageFocusTimes = lastYearAnalysisValues,\n        generateSampleData = viewModel::generateSampleData,\n        modifier = modifier\n    )\n}\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun StatsScreen(\n    contentPadding: PaddingValues,\n    lastWeekSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    lastMonthSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    lastYearSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    todayStat: Stat?,\n    lastWeekAverageFocusTimes: List<Int>,\n    lastMonthAverageFocusTimes: List<Int>,\n    lastYearAverageFocusTimes: List<Int>,\n    generateSampleData: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    var lastWeekStatExpanded by rememberSaveable { mutableStateOf(false) }\n    var lastMonthStatExpanded by rememberSaveable { mutableStateOf(false) }\n\n    val lastWeekSummaryAnalysisModelProducer = remember { CartesianChartModelProducer() }\n    val lastMonthSummaryAnalysisModelProducer = remember { CartesianChartModelProducer() }\n\n    LaunchedEffect(lastWeekAverageFocusTimes) {\n        lastWeekSummaryAnalysisModelProducer.runTransaction {\n            columnSeries {\n                series(lastWeekAverageFocusTimes)\n            }\n        }\n    }\n\n    LaunchedEffect(lastMonthAverageFocusTimes) {\n        lastMonthSummaryAnalysisModelProducer.runTransaction {\n            columnSeries {\n                series(lastMonthAverageFocusTimes)\n            }\n        }\n    }\n\n    Column(\n        horizontalAlignment = Alignment.CenterHorizontally,\n        modifier = modifier.nestedScroll(scrollBehavior.nestedScrollConnection)\n    ) {\n        TopAppBar(\n            title = {\n                Text(\n                    stringResource(R.string.stats),\n                    style = LocalTextStyle.current.copy(\n                        fontFamily = robotoFlexTopBar,\n                        fontSize = 32.sp,\n                        lineHeight = 32.sp\n                    ),\n                    modifier = Modifier\n                        .padding(top = contentPadding.calculateTopPadding())\n                        .padding(vertical = 14.dp)\n                )\n            },\n            actions = if (BuildConfig.DEBUG) {\n                {\n                    IconButton(\n                        onClick = generateSampleData\n                    ) {\n                        Spacer(Modifier.size(24.dp))\n                    }\n                }\n            } else {\n                {}\n            },\n            subtitle = {},\n            titleHorizontalAlignment = Alignment.CenterHorizontally,\n            scrollBehavior = scrollBehavior,\n            windowInsets = WindowInsets()\n        )\n\n        LazyColumn(\n            horizontalAlignment = Alignment.CenterHorizontally,\n            verticalArrangement = Arrangement.spacedBy(16.dp)\n        ) {\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.today),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(modifier = Modifier.padding(horizontal = 16.dp)) {\n                    Box(\n                        modifier = Modifier\n                            .background(\n                                colorScheme.primaryContainer,\n                                MaterialTheme.shapes.largeIncreased\n                            )\n                            .weight(1f)\n                    ) {\n                        Column(Modifier.padding(16.dp)) {\n                            Text(\n                                stringResource(R.string.focus),\n                                style = typography.titleMedium,\n                                color = colorScheme.onPrimaryContainer\n                            )\n                            Text(\n                                remember(todayStat) {\n                                    millisecondsToHoursMinutes(todayStat?.totalFocusTime() ?: 0)\n                                },\n                                style = typography.displaySmall,\n                                fontFamily = interClock,\n                                color = colorScheme.onPrimaryContainer,\n                                maxLines = 1,\n                                autoSize = TextAutoSize.StepBased(maxFontSize = typography.displaySmall.fontSize)\n                            )\n                        }\n                    }\n                    Spacer(Modifier.width(8.dp))\n                    Box(\n                        modifier = Modifier\n                            .background(\n                                colorScheme.tertiaryContainer,\n                                MaterialTheme.shapes.largeIncreased\n                            )\n                            .weight(1f)\n                    ) {\n                        Column(Modifier.padding(16.dp)) {\n                            Text(\n                                stringResource(R.string.break_),\n                                style = typography.titleMedium,\n                                color = colorScheme.onTertiaryContainer\n                            )\n                            Text(\n                                remember(todayStat) {\n                                    millisecondsToHoursMinutes(todayStat?.breakTime ?: 0)\n                                },\n                                style = typography.displaySmall,\n                                fontFamily = interClock,\n                                color = colorScheme.onTertiaryContainer,\n                                maxLines = 1,\n                                autoSize = TextAutoSize.StepBased(maxFontSize = typography.displaySmall.fontSize)\n                            )\n                        }\n                    }\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_week),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastWeekAverageFocusTimes) {\n                                lastWeekAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeColumnChart(\n                    lastWeekSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastWeekSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item {\n                val iconRotation by animateFloatAsState(\n                    if (lastWeekStatExpanded) 180f else 0f,\n                    animationSpec = motionScheme.defaultSpatialSpec()\n                )\n                Column(\n                    horizontalAlignment = Alignment.CenterHorizontally,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    Spacer(Modifier.height(2.dp))\n                    FilledTonalIconToggleButton(\n                        checked = lastWeekStatExpanded,\n                        onCheckedChange = { lastWeekStatExpanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier\n                            .padding(horizontal = 16.dp)\n                            .width(52.dp)\n                            .align(Alignment.End)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.arrow_down),\n                            stringResource(R.string.more_info),\n                            modifier = Modifier.rotate(iconRotation)\n                        )\n                    }\n                    ProductivityGraph(\n                        lastWeekStatExpanded,\n                        lastWeekSummaryAnalysisModelProducer,\n                        label = stringResource(R.string.weekly_productivity_analysis),\n                        modifier = Modifier.padding(horizontal = 32.dp)\n                    )\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_month),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastMonthAverageFocusTimes) {\n                                lastMonthAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        text = stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeColumnChart(\n                    lastMonthSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    thickness = 8.dp,\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastMonthSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item {\n                val iconRotation by animateFloatAsState(\n                    if (lastMonthStatExpanded) 180f else 0f,\n                    animationSpec = motionScheme.defaultSpatialSpec()\n                )\n                Column(\n                    horizontalAlignment = Alignment.CenterHorizontally,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    Spacer(Modifier.height(2.dp))\n                    FilledTonalIconToggleButton(\n                        checked = lastMonthStatExpanded,\n                        onCheckedChange = { lastMonthStatExpanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier\n                            .padding(horizontal = 16.dp)\n                            .width(52.dp)\n                            .align(Alignment.End)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.arrow_down),\n                            stringResource(R.string.more_info),\n                            modifier = Modifier.rotate(iconRotation)\n                        )\n                    }\n                    ProductivityGraph(\n                        lastMonthStatExpanded,\n                        lastMonthSummaryAnalysisModelProducer,\n                        label = stringResource(R.string.monthly_productivity_analysis),\n                        modifier = Modifier.padding(horizontal = 32.dp)\n                    )\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_year),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastYearAverageFocusTimes) {\n                                lastYearAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        text = stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeLineChart(\n                    lastYearSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastYearSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item { Spacer(Modifier.height(16.dp)) }\n        }\n    }\n}\n\n@Preview(\n    widthDp = 400\n)\n@Composable\nfun StatsScreenPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val keys = remember { ExtraStore.Key<List<String>>() }\n\n    LaunchedEffect(Unit) {\n        modelProducer.runTransaction {\n            columnSeries {\n                series(5, 6, 5, 2, 11, 8, 5)\n            }\n            lineSeries {}\n            extras { it[keys] = listOf(\"M\", \"T\", \"W\", \"T\", \"F\", \"S\", \"S\") }\n        }\n    }\n\n    TomatoTheme {\n        Surface {\n            StatsScreen(\n                PaddingValues(),\n                Pair(modelProducer, keys),\n                Pair(modelProducer, keys),\n                Pair(modelProducer, keys),\n                null,\n                listOf(0, 0, 0, 0),\n                listOf(0, 0, 0, 0),\n                listOf(0, 0, 0, 0),\n                {}\n            )\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\TimeColumnChart.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.AnimationSpec\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Surface\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.compose.cartesian.CartesianChartHost\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberBottom\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberStart\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberColumnCartesianLayer\nimport com.patrykandpatrick.vico.compose.cartesian.rememberCartesianChart\nimport com.patrykandpatrick.vico.compose.cartesian.rememberVicoZoomState\nimport com.patrykandpatrick.vico.compose.common.ProvideVicoTheme\nimport com.patrykandpatrick.vico.compose.common.component.rememberLineComponent\nimport com.patrykandpatrick.vico.compose.common.fill\nimport com.patrykandpatrick.vico.compose.common.vicoTheme\nimport com.patrykandpatrick.vico.compose.m3.common.rememberM3VicoTheme\nimport com.patrykandpatrick.vico.core.cartesian.FadingEdges\nimport com.patrykandpatrick.vico.core.cartesian.Zoom\nimport com.patrykandpatrick.vico.core.cartesian.axis.HorizontalAxis\nimport com.patrykandpatrick.vico.core.cartesian.axis.VerticalAxis\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.layer.ColumnCartesianLayer\nimport com.patrykandpatrick.vico.core.common.Fill\nimport com.patrykandpatrick.vico.core.common.shape.CorneredShape\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHours\nimport org.nsh07.pomodoro.utils.millisecondsToMinutes\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimeColumnChart(\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    thickness: Dp = 40.dp,\n    columnCollectionSpacing: Dp = 4.dp,\n    xValueFormatter: CartesianValueFormatter = CartesianValueFormatter.Default,\n    yValueFormatter: CartesianValueFormatter = CartesianValueFormatter { _, value, _ ->\n        if (value >= 60 * 60 * 1000) {\n            millisecondsToHours(value.toLong())\n        } else {\n            millisecondsToMinutes(value.toLong())\n        }\n    },\n    animationSpec: AnimationSpec<Float>? = motionScheme.slowEffectsSpec()\n) {\n    ProvideVicoTheme(rememberM3VicoTheme()) {\n        CartesianChartHost(\n            chart =\n                rememberCartesianChart(\n                    rememberColumnCartesianLayer(\n                        ColumnCartesianLayer.ColumnProvider.series(\n                            vicoTheme.columnCartesianLayerColors.map { color ->\n                                rememberLineComponent(\n                                    fill = fill(color),\n                                    thickness = thickness,\n                                    shape = CorneredShape.Pill\n                                )\n                            }\n                        ),\n                        columnCollectionSpacing = columnCollectionSpacing\n                    ),\n                    startAxis = VerticalAxis.rememberStart(\n                        line = rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = yValueFormatter\n                    ),\n                    bottomAxis = HorizontalAxis.rememberBottom(\n                        rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = xValueFormatter\n                    ),\n                    fadingEdges = FadingEdges()\n                ),\n            modelProducer = modelProducer,\n            zoomState = rememberVicoZoomState(\n                zoomEnabled = false,\n                initialZoom = Zoom.fixed(),\n                minZoom = Zoom.min(Zoom.Content, Zoom.fixed())\n            ),\n            animationSpec = animationSpec,\n            modifier = modifier,\n        )\n    }\n}\n\n@Preview\n@Composable\nprivate fun TimeColumnChartPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val values = mutableListOf<Int>()\n    LaunchedEffect(Unit) {\n        repeat(30) {\n            values.add((0..120).random() * 60 * 1000)\n        }\n        modelProducer.runTransaction {\n            columnSeries {\n                series(values)\n            }\n        }\n    }\n    TomatoTheme {\n        Surface {\n            TimeColumnChart(thickness = 8.dp, modelProducer = modelProducer)\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\TimeLineChart.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.AnimationSpec\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Surface\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.compose.cartesian.CartesianChartHost\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberBottom\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberStart\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberLine\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberLineCartesianLayer\nimport com.patrykandpatrick.vico.compose.cartesian.rememberCartesianChart\nimport com.patrykandpatrick.vico.compose.cartesian.rememberVicoZoomState\nimport com.patrykandpatrick.vico.compose.common.ProvideVicoTheme\nimport com.patrykandpatrick.vico.compose.common.component.rememberLineComponent\nimport com.patrykandpatrick.vico.compose.common.fill\nimport com.patrykandpatrick.vico.compose.common.vicoTheme\nimport com.patrykandpatrick.vico.compose.m3.common.rememberM3VicoTheme\nimport com.patrykandpatrick.vico.core.cartesian.FadingEdges\nimport com.patrykandpatrick.vico.core.cartesian.Zoom\nimport com.patrykandpatrick.vico.core.cartesian.axis.HorizontalAxis\nimport com.patrykandpatrick.vico.core.cartesian.axis.VerticalAxis\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.cartesian.layer.LineCartesianLayer\nimport com.patrykandpatrick.vico.core.cartesian.layer.LineCartesianLayer.LineFill.Companion.single\nimport com.patrykandpatrick.vico.core.common.Fill\nimport com.patrykandpatrick.vico.core.common.shader.ShaderProvider\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHours\nimport org.nsh07.pomodoro.utils.millisecondsToMinutes\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimeLineChart(\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    thickness: Float = 2f,\n    pointSpacing: Dp = 12.dp,\n    xValueFormatter: CartesianValueFormatter = CartesianValueFormatter.Default,\n    yValueFormatter: CartesianValueFormatter = CartesianValueFormatter { _, value, _ ->\n        if (value >= 60 * 60 * 1000) {\n            millisecondsToHours(value.toLong())\n        } else {\n            millisecondsToMinutes(value.toLong())\n        }\n    },\n    animationSpec: AnimationSpec<Float>? = motionScheme.slowEffectsSpec()\n) {\n    ProvideVicoTheme(rememberM3VicoTheme()) {\n        CartesianChartHost(\n            chart =\n                rememberCartesianChart(\n                    rememberLineCartesianLayer(\n                        LineCartesianLayer.LineProvider.series(\n                            vicoTheme.lineCartesianLayerColors.map { color ->\n                                LineCartesianLayer.rememberLine(\n                                    fill = single(fill(color)),\n                                    stroke = LineCartesianLayer.LineStroke.Continuous(\n                                        thicknessDp = thickness,\n                                    ),\n                                    areaFill = LineCartesianLayer.AreaFill.single(\n                                        fill(\n                                            ShaderProvider.verticalGradient(\n                                                color.toArgb(),\n                                                Color.Transparent.toArgb()\n                                            )\n                                        )\n                                    ),\n                                    pointConnector = LineCartesianLayer.PointConnector.cubic(0.5f)\n                                )\n                            }\n                        ),\n                        pointSpacing = pointSpacing\n                    ),\n                    startAxis = VerticalAxis.rememberStart(\n                        line = rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = yValueFormatter\n                    ),\n                    bottomAxis = HorizontalAxis.rememberBottom(\n                        rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = xValueFormatter\n                    ),\n                    fadingEdges = FadingEdges()\n                ),\n            modelProducer = modelProducer,\n            zoomState = rememberVicoZoomState(\n                zoomEnabled = true,\n                initialZoom = Zoom.fixed(),\n                minZoom = Zoom.min(Zoom.Content, Zoom.fixed())\n            ),\n            animationSpec = animationSpec,\n            modifier = modifier,\n        )\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nprivate fun TimeLineChartPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val values = mutableListOf<Int>()\n    LaunchedEffect(Unit) {\n        repeat(365) {\n            values.add((0..120).random() * 60 * 1000)\n        }\n        modelProducer.runTransaction {\n            lineSeries {\n                series(values)\n            }\n        }\n    }\n    TomatoTheme {\n        Surface {\n            TimeLineChart(modelProducer = modelProducer)\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\viewModel\\StatsViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen.viewModel\n\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.common.data.ExtraStore\nimport kotlinx.coroutines.flow.SharingStarted\nimport kotlinx.coroutines.flow.StateFlow\nimport kotlinx.coroutines.flow.distinctUntilChanged\nimport kotlinx.coroutines.flow.map\nimport kotlinx.coroutines.flow.stateIn\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.data.StatRepository\nimport java.time.LocalDate\nimport java.time.format.DateTimeFormatter\nimport java.time.format.TextStyle\nimport java.util.Locale\n\nclass StatsViewModel(\n    private val statRepository: StatRepository\n) : ViewModel() {\n\n    val todayStat = statRepository.getTodayStat().distinctUntilChanged()\n\n    private val lastWeekSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n    private val lastMonthSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n    private val lastYearSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n\n    private val yearDayFormatter = DateTimeFormatter.ofPattern(\"d MMM\")\n\n    val lastWeekSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(7)\n            .map { list ->\n                // reversing is required because we need ascending order while the DB returns descending order\n                val reversed = list.reversed()\n                val keys = reversed.map {\n                    it.date.dayOfWeek.getDisplayName(\n                        TextStyle.NARROW,\n                        Locale.getDefault()\n                    )\n                }\n                val values = reversed.map { it.focusTime }\n                lastWeekSummary.first.runTransaction {\n                    columnSeries { series(values) }\n                    extras { it[lastWeekSummary.second] = keys }\n                }\n                lastWeekSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastWeekSummary\n            )\n\n    val lastWeekAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(7)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    val lastMonthSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(30)\n            .map { list ->\n                val reversed = list.reversed()\n                val keys = reversed.map { it.date.dayOfMonth.toString() }\n                val values = reversed.map { it.focusTime }\n                lastMonthSummary.first.runTransaction {\n                    columnSeries { series(values) }\n                    extras { it[lastMonthSummary.second] = keys }\n                }\n                lastMonthSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastMonthSummary\n            )\n\n    val lastMonthAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(30)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    val lastYearSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(365)\n            .map { list ->\n                val reversed = list.reversed()\n                val keys = reversed.map { it.date.format(yearDayFormatter) }\n                val values = reversed.map { it.focusTime }\n                lastYearSummary.first.runTransaction {\n                    lineSeries { series(values) }\n                    extras { it[lastYearSummary.second] = keys }\n                }\n                lastYearSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastYearSummary\n            )\n\n    val lastYearAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(365)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    fun generateSampleData() {\n        if (BuildConfig.DEBUG) {\n            viewModelScope.launch {\n                val today = LocalDate.now().plusDays(1)\n                var it = today.minusDays(40)\n\n                while (it.isBefore(today)) {\n                    statRepository.insertStat(\n                        Stat(\n                            it,\n                            (0..30 * 60 * 1000L).random(),\n                            (1 * 60 * 60 * 1000L..3 * 60 * 60 * 1000L).random(),\n                            (0..3 * 60 * 60 * 1000L).random(),\n                            (0..1 * 60 * 60 * 1000L).random(),\n                            0\n                        )\n                    )\n                    it = it.plusDays(1)\n                }\n\n                statRepository.addBreakTime((0..30 * 60 * 60 * 1000L).random())\n            }\n        }\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appStatRepository = application.container.appStatRepository\n\n                StatsViewModel(appStatRepository)\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Color.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ListItemColors\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.SwitchColors\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.TopAppBarColors\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.graphics.Color\n\nval primaryLight = Color(0xFF4C662B)\nval onPrimaryLight = Color(0xFFFFFFFF)\nval primaryContainerLight = Color(0xFFCDEDA3)\nval onPrimaryContainerLight = Color(0xFF354E16)\nval secondaryLight = Color(0xFF586249)\nval onSecondaryLight = Color(0xFFFFFFFF)\nval secondaryContainerLight = Color(0xFFDCE7C8)\nval onSecondaryContainerLight = Color(0xFF404A33)\nval tertiaryLight = Color(0xFF386663)\nval onTertiaryLight = Color(0xFFFFFFFF)\nval tertiaryContainerLight = Color(0xFFBCECE7)\nval onTertiaryContainerLight = Color(0xFF1F4E4B)\nval errorLight = Color(0xFFBA1A1A)\nval onErrorLight = Color(0xFFFFFFFF)\nval errorContainerLight = Color(0xFFFFDAD6)\nval onErrorContainerLight = Color(0xFF93000A)\nval backgroundLight = Color(0xFFF9FAEF)\nval onBackgroundLight = Color(0xFF1A1C16)\nval surfaceLight = Color(0xFFF9FAEF)\nval onSurfaceLight = Color(0xFF1A1C16)\nval surfaceVariantLight = Color(0xFFE1E4D5)\nval onSurfaceVariantLight = Color(0xFF44483D)\nval outlineLight = Color(0xFF75796C)\nval outlineVariantLight = Color(0xFFC5C8BA)\nval scrimLight = Color(0xFF000000)\nval inverseSurfaceLight = Color(0xFF2F312A)\nval inverseOnSurfaceLight = Color(0xFFF1F2E6)\nval inversePrimaryLight = Color(0xFFB1D18A)\nval surfaceDimLight = Color(0xFFDADBD0)\nval surfaceBrightLight = Color(0xFFF9FAEF)\nval surfaceContainerLowestLight = Color(0xFFFFFFFF)\nval surfaceContainerLowLight = Color(0xFFF3F4E9)\nval surfaceContainerLight = Color(0xFFEEEFE3)\nval surfaceContainerHighLight = Color(0xFFE8E9DE)\nval surfaceContainerHighestLight = Color(0xFFE2E3D8)\n\nval primaryDark = Color(0xFFB1D18A)\nval onPrimaryDark = Color(0xFF1F3701)\nval primaryContainerDark = Color(0xFF354E16)\nval onPrimaryContainerDark = Color(0xFFCDEDA3)\nval secondaryDark = Color(0xFFBFCBAD)\nval onSecondaryDark = Color(0xFF2A331E)\nval secondaryContainerDark = Color(0xFF404A33)\nval onSecondaryContainerDark = Color(0xFFDCE7C8)\nval tertiaryDark = Color(0xFFA0D0CB)\nval onTertiaryDark = Color(0xFF003735)\nval tertiaryContainerDark = Color(0xFF1F4E4B)\nval onTertiaryContainerDark = Color(0xFFBCECE7)\nval errorDark = Color(0xFFFFB4AB)\nval onErrorDark = Color(0xFF690005)\nval errorContainerDark = Color(0xFF93000A)\nval onErrorContainerDark = Color(0xFFFFDAD6)\nval backgroundDark = Color(0xFF12140E)\nval onBackgroundDark = Color(0xFFE2E3D8)\nval surfaceDark = Color(0xFF12140E)\nval onSurfaceDark = Color(0xFFE2E3D8)\nval surfaceVariantDark = Color(0xFF44483D)\nval onSurfaceVariantDark = Color(0xFFC5C8BA)\nval outlineDark = Color(0xFF8F9285)\nval outlineVariantDark = Color(0xFF44483D)\nval scrimDark = Color(0xFF000000)\nval inverseSurfaceDark = Color(0xFFE2E3D8)\nval inverseOnSurfaceDark = Color(0xFF2F312A)\nval inversePrimaryDark = Color(0xFF4C662B)\nval surfaceDimDark = Color(0xFF12140E)\nval surfaceBrightDark = Color(0xFF383A32)\nval surfaceContainerLowestDark = Color(0xFF0C0F09)\nval surfaceContainerLowDark = Color(0xFF1A1C16)\nval surfaceContainerDark = Color(0xFF1E201A)\nval surfaceContainerHighDark = Color(0xFF282B24)\nval surfaceContainerHighestDark = Color(0xFF33362E)\n\nobject CustomColors {\n    var black = false\n\n    @OptIn(ExperimentalMaterial3Api::class)\n    val topBarColors: TopAppBarColors\n        @Composable get() =\n            TopAppBarDefaults.topAppBarColors(\n                containerColor = if (!black) colorScheme.surfaceContainer else colorScheme.surface,\n                scrolledContainerColor = if (!black) colorScheme.surfaceContainer else colorScheme.surface\n            )\n\n    val listItemColors: ListItemColors\n        @Composable get() =\n            ListItemDefaults.colors(containerColor = if (!black) colorScheme.surfaceBright else colorScheme.surfaceContainerHigh)\n\n    val selectedListItemColors: ListItemColors\n        @Composable get() =\n            ListItemDefaults.colors(\n                containerColor = colorScheme.secondaryContainer,\n                headlineColor = colorScheme.secondary,\n                leadingIconColor = colorScheme.onSecondaryContainer,\n                supportingColor = colorScheme.onSecondaryFixedVariant,\n                trailingIconColor = colorScheme.onSecondaryFixedVariant\n            )\n\n    val switchColors: SwitchColors\n        @Composable get() = SwitchDefaults.colors(\n            checkedIconColor = colorScheme.primary,\n        )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Shape.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.foundation.shape.CornerBasedShape\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.runtime.Composable\n\nobject TomatoShapeDefaults {\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val topListItemShape: RoundedCornerShape\n        @Composable get() =\n            RoundedCornerShape(\n                topStart = shapes.largeIncreased.topStart,\n                topEnd = shapes.largeIncreased.topEnd,\n                bottomStart = shapes.extraSmall.bottomStart,\n                bottomEnd = shapes.extraSmall.bottomStart\n            )\n\n    val middleListItemShape: RoundedCornerShape\n        @Composable get() = RoundedCornerShape(shapes.extraSmall.topStart)\n\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val bottomListItemShape: RoundedCornerShape\n        @Composable get() =\n            RoundedCornerShape(\n                topStart = shapes.extraSmall.topStart,\n                topEnd = shapes.extraSmall.topEnd,\n                bottomStart = shapes.largeIncreased.bottomStart,\n                bottomEnd = shapes.largeIncreased.bottomEnd\n            )\n\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val cardShape: CornerBasedShape\n        @Composable get() = shapes.largeIncreased\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Theme.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport android.app.Activity\nimport android.os.Build\nimport androidx.compose.foundation.isSystemInDarkTheme\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialExpressiveTheme\nimport androidx.compose.material3.MotionScheme\nimport androidx.compose.material3.darkColorScheme\nimport androidx.compose.material3.dynamicDarkColorScheme\nimport androidx.compose.material3.dynamicLightColorScheme\nimport androidx.compose.material3.lightColorScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.SideEffect\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalView\nimport androidx.core.view.WindowCompat\nimport com.materialkolor.dynamiccolor.ColorSpec\nimport com.materialkolor.rememberDynamicColorScheme\n\nprivate val lightScheme = lightColorScheme(\n    primary = primaryLight,\n    onPrimary = onPrimaryLight,\n    primaryContainer = primaryContainerLight,\n    onPrimaryContainer = onPrimaryContainerLight,\n    secondary = secondaryLight,\n    onSecondary = onSecondaryLight,\n    secondaryContainer = secondaryContainerLight,\n    onSecondaryContainer = onSecondaryContainerLight,\n    tertiary = tertiaryLight,\n    onTertiary = onTertiaryLight,\n    tertiaryContainer = tertiaryContainerLight,\n    onTertiaryContainer = onTertiaryContainerLight,\n    error = errorLight,\n    onError = onErrorLight,\n    errorContainer = errorContainerLight,\n    onErrorContainer = onErrorContainerLight,\n    background = backgroundLight,\n    onBackground = onBackgroundLight,\n    surface = surfaceLight,\n    onSurface = onSurfaceLight,\n    surfaceVariant = surfaceVariantLight,\n    onSurfaceVariant = onSurfaceVariantLight,\n    outline = outlineLight,\n    outlineVariant = outlineVariantLight,\n    scrim = scrimLight,\n    inverseSurface = inverseSurfaceLight,\n    inverseOnSurface = inverseOnSurfaceLight,\n    inversePrimary = inversePrimaryLight,\n    surfaceDim = surfaceDimLight,\n    surfaceBright = surfaceBrightLight,\n    surfaceContainerLowest = surfaceContainerLowestLight,\n    surfaceContainerLow = surfaceContainerLowLight,\n    surfaceContainer = surfaceContainerLight,\n    surfaceContainerHigh = surfaceContainerHighLight,\n    surfaceContainerHighest = surfaceContainerHighestLight,\n)\n\nprivate val darkScheme = darkColorScheme(\n    primary = primaryDark,\n    onPrimary = onPrimaryDark,\n    primaryContainer = primaryContainerDark,\n    onPrimaryContainer = onPrimaryContainerDark,\n    secondary = secondaryDark,\n    onSecondary = onSecondaryDark,\n    secondaryContainer = secondaryContainerDark,\n    onSecondaryContainer = onSecondaryContainerDark,\n    tertiary = tertiaryDark,\n    onTertiary = onTertiaryDark,\n    tertiaryContainer = tertiaryContainerDark,\n    onTertiaryContainer = onTertiaryContainerDark,\n    error = errorDark,\n    onError = onErrorDark,\n    errorContainer = errorContainerDark,\n    onErrorContainer = onErrorContainerDark,\n    background = backgroundDark,\n    onBackground = onBackgroundDark,\n    surface = surfaceDark,\n    onSurface = onSurfaceDark,\n    surfaceVariant = surfaceVariantDark,\n    onSurfaceVariant = onSurfaceVariantDark,\n    outline = outlineDark,\n    outlineVariant = outlineVariantDark,\n    scrim = scrimDark,\n    inverseSurface = inverseSurfaceDark,\n    inverseOnSurface = inverseOnSurfaceDark,\n    inversePrimary = inversePrimaryDark,\n    surfaceDim = surfaceDimDark,\n    surfaceBright = surfaceBrightDark,\n    surfaceContainerLowest = surfaceContainerLowestDark,\n    surfaceContainerLow = surfaceContainerLowDark,\n    surfaceContainer = surfaceContainerDark,\n    surfaceContainerHigh = surfaceContainerHighDark,\n    surfaceContainerHighest = surfaceContainerHighestDark,\n)\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TomatoTheme(\n    darkTheme: Boolean = isSystemInDarkTheme(),\n    seedColor: Color = Color.White,\n    dynamicColor: Boolean = true,\n    blackTheme: Boolean = false,\n    content: @Composable () -> Unit\n) {\n    val colorScheme = when {\n        dynamicColor && Build.VERSION.SDK_INT >= Build.VERSION_CODES.S -> {\n            val context = LocalContext.current\n            if (darkTheme) dynamicDarkColorScheme(context) else dynamicLightColorScheme(context)\n        }\n\n        darkTheme -> darkScheme\n        else -> lightScheme\n    }\n\n    val view = LocalView.current\n    if (!view.isInEditMode) {\n        SideEffect {\n            val window = (view.context as Activity).window\n            WindowCompat.getInsetsController(window, view).isAppearanceLightStatusBars = !darkTheme\n        }\n    }\n    CustomColors.black = blackTheme && darkTheme\n\n    val dynamicColorScheme = rememberDynamicColorScheme(\n        seedColor = when (seedColor) {\n            Color.White -> colorScheme.primary\n            else -> seedColor\n        },\n        isDark = darkTheme,\n        specVersion = if (blackTheme && darkTheme) ColorSpec.SpecVersion.SPEC_2021 else ColorSpec.SpecVersion.SPEC_2025,\n        isAmoled = blackTheme && darkTheme\n    )\n\n    val scheme =\n        if (seedColor == Color.White && !(blackTheme && darkTheme)) colorScheme\n        else dynamicColorScheme\n\n    MaterialExpressiveTheme(\n        colorScheme = scheme,\n        typography = Typography,\n        motionScheme = MotionScheme.expressive(),\n        content = content\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Type.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.material3.Typography\nimport androidx.compose.ui.text.ExperimentalTextApi\nimport androidx.compose.ui.text.font.Font\nimport androidx.compose.ui.text.font.FontFamily\nimport androidx.compose.ui.text.font.FontStyle\nimport androidx.compose.ui.text.font.FontVariation\nimport androidx.compose.ui.text.font.FontWeight\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interBody\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interLabel\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexHeadline\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTitle\n\nval TYPOGRAPHY = Typography()\n\n// Set of Material typography styles to start with\nval Typography = Typography(\n    displayLarge = TYPOGRAPHY.displayLarge.copy(fontFamily = robotoFlexHeadline),\n    displayMedium = TYPOGRAPHY.displayMedium.copy(fontFamily = robotoFlexHeadline),\n    displaySmall = TYPOGRAPHY.displaySmall.copy(fontFamily = robotoFlexHeadline),\n    headlineLarge = TYPOGRAPHY.headlineLarge.copy(fontFamily = robotoFlexHeadline),\n    headlineMedium = TYPOGRAPHY.headlineMedium.copy(fontFamily = robotoFlexHeadline),\n    headlineSmall = TYPOGRAPHY.headlineSmall.copy(fontFamily = robotoFlexHeadline),\n    titleLarge = TYPOGRAPHY.titleLarge.copy(fontFamily = robotoFlexTitle),\n    titleMedium = TYPOGRAPHY.titleMedium.copy(fontFamily = robotoFlexTitle),\n    titleSmall = TYPOGRAPHY.titleSmall.copy(fontFamily = robotoFlexTitle),\n    bodyLarge = TYPOGRAPHY.bodyLarge.copy(fontFamily = interBody),\n    bodyMedium = TYPOGRAPHY.bodyMedium.copy(fontFamily = interBody),\n    bodySmall = TYPOGRAPHY.bodySmall.copy(fontFamily = interBody),\n    labelLarge = TYPOGRAPHY.labelLarge.copy(fontFamily = interLabel),\n    labelMedium = TYPOGRAPHY.labelMedium.copy(fontFamily = interLabel),\n    labelSmall = TYPOGRAPHY.labelSmall.copy(fontFamily = interLabel)\n)\n\n@OptIn(ExperimentalTextApi::class)\nobject AppFonts {\n    val interClock = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Bold,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val interBody = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Normal,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val interLabel = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Medium,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val robotoFlexTopBar = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(125f),\n                FontVariation.weight(1000),\n                FontVariation.grade(0),\n                FontVariation.Setting(\"XOPQ\", 96F),\n                FontVariation.Setting(\"XTRA\", 500F),\n                FontVariation.Setting(\"YOPQ\", 79F),\n                FontVariation.Setting(\"YTAS\", 750F),\n                FontVariation.Setting(\"YTDE\", -203F),\n                FontVariation.Setting(\"YTFI\", 738F),\n                FontVariation.Setting(\"YTLC\", 514F),\n                FontVariation.Setting(\"YTUC\", 712F)\n            )\n        )\n    )\n\n    val robotoFlexHeadline = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(130f),\n                FontVariation.weight(600),\n                FontVariation.grade(0)\n            )\n        )\n    )\n\n    val robotoFlexTitle = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(130f),\n                FontVariation.weight(700),\n                FontVariation.grade(0)\n            )\n        )\n    )\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\AlarmDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.LocalContentColor\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.CompositionLocalProvider\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.window.Dialog\nimport androidx.compose.ui.window.DialogProperties\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Composable\nfun AlarmDialog(\n    modifier: Modifier = Modifier,\n    stopAlarm: () -> Unit\n) {\n    Dialog(\n        onDismissRequest = stopAlarm,\n        properties = DialogProperties(\n            usePlatformDefaultWidth = false,\n            decorFitsSystemWindows = false\n        )\n    ) {\n        Box(\n            contentAlignment = Alignment.Center,\n            modifier = modifier\n                .fillMaxSize()\n                .background(colorScheme.primaryContainer)\n                .clickable(onClick = stopAlarm)\n        ) {\n            CompositionLocalProvider(LocalContentColor provides colorScheme.onPrimaryContainer) {\n                Column(modifier = Modifier.padding(24.dp)) {\n                    Icon(\n                        painter = painterResource(R.drawable.alarm),\n                        contentDescription = stringResource(R.string.alarm),\n                        modifier = Modifier\n                            .align(Alignment.CenterHorizontally)\n                            .size(40.dp)\n                    )\n                    Spacer(Modifier.height(16.dp))\n                    Text(\n                        text = stringResource(R.string.stop_alarm_question),\n                        style = typography.headlineSmall,\n                        modifier = Modifier.align(Alignment.CenterHorizontally)\n                    )\n                    Spacer(Modifier.height(16.dp))\n                    Text(\n                        text = stringResource(R.string.stop_alarm_dialog_text),\n                        textAlign = TextAlign.Center\n                    )\n                    Spacer(modifier = Modifier.height(24.dp))\n                    Button(\n                        onClick = stopAlarm,\n                        modifier = Modifier.align(Alignment.End),\n                    ) {\n                        Text(stringResource(R.string.stop_alarm))\n                    }\n                }\n            }\n        }\n    }\n}\n\n@Preview\n@Composable\nfun AlarmDialogPreview() {\n    TomatoTheme {\n        AlarmDialog(stopAlarm = {})\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\TimerScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen\n\nimport android.Manifest\nimport android.os.Build\nimport androidx.activity.compose.rememberLauncherForActivityResult\nimport androidx.activity.result.contract.ActivityResultContracts\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.SharedTransitionScope\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.animation.expandVertically\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.shrinkVertically\nimport androidx.compose.animation.slideInVertically\nimport androidx.compose.animation.slideOutVertically\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.interaction.MutableInteractionSource\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.aspectRatio\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.layout.widthIn\nimport androidx.compose.foundation.rememberScrollState\nimport androidx.compose.foundation.verticalScroll\nimport androidx.compose.material3.ButtonGroup\nimport androidx.compose.material3.ButtonGroupDefaults\nimport androidx.compose.material3.CircularProgressIndicator\nimport androidx.compose.material3.CircularWavyProgressIndicator\nimport androidx.compose.material3.DropdownMenuItem\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledIconToggleButton\nimport androidx.compose.material3.FilledTonalIconButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Surface\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Alignment.Companion.CenterHorizontally\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.graphics.StrokeCap\nimport androidx.compose.ui.graphics.drawscope.Stroke\nimport androidx.compose.ui.hapticfeedback.HapticFeedbackType\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalDensity\nimport androidx.compose.ui.platform.LocalHapticFeedback\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Devices\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.navigation3.ui.LocalNavAnimatedContentScope\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\n\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun SharedTransitionScope.TimerScreen(\n    timerState: TimerState,\n    isPlus: Boolean,\n    progress: () -> Float,\n    onAction: (TimerAction) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val motionScheme = motionScheme\n    val haptic = LocalHapticFeedback.current\n\n    val color by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.primary\n        else colorScheme.tertiary,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val onColor by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.onPrimary\n        else colorScheme.onTertiary,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val colorContainer by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.secondaryContainer\n        else colorScheme.tertiaryContainer,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n\n    val permissionLauncher = rememberLauncherForActivityResult(\n        contract = ActivityResultContracts.RequestPermission(),\n        onResult = {}\n    )\n\n    val scrollBehavior = TopAppBarDefaults.exitUntilCollapsedScrollBehavior()\n\n    Column(modifier = modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        TopAppBar(\n            title = {\n                AnimatedContent(\n                    if (!timerState.showBrandTitle) timerState.timerMode else TimerMode.BRAND,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    },\n                    contentAlignment = Alignment.Center,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    when (it) {\n                        TimerMode.BRAND ->\n                            Text(\n                                if (!isPlus) stringResource(R.string.app_name)\n                                else stringResource(R.string.app_name_plus),\n                                style = TextStyle(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp,\n                                    color = colorScheme.error\n                                ),\n                                textAlign = TextAlign.Center\n                            )\n\n                        TimerMode.FOCUS ->\n                            Text(\n                                stringResource(R.string.focus),\n                                style = TextStyle(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp,\n                                    color = colorScheme.primary\n                                ),\n                                textAlign = TextAlign.Center\n                            )\n\n                        TimerMode.SHORT_BREAK -> Text(\n                            stringResource(R.string.short_break),\n                            style = TextStyle(\n                                fontFamily = robotoFlexTopBar,\n                                fontSize = 32.sp,\n                                lineHeight = 32.sp,\n                                color = colorScheme.tertiary\n                            ),\n                            textAlign = TextAlign.Center\n                        )\n\n                        TimerMode.LONG_BREAK -> Text(\n                            stringResource(R.string.long_break),\n                            style = TextStyle(\n                                fontFamily = robotoFlexTopBar,\n                                fontSize = 32.sp,\n                                lineHeight = 32.sp,\n                                color = colorScheme.tertiary\n                            ),\n                            textAlign = TextAlign.Center\n                        )\n                    }\n                }\n            },\n            subtitle = {},\n            titleHorizontalAlignment = CenterHorizontally,\n            scrollBehavior = scrollBehavior\n        )\n\n        Column(\n            verticalArrangement = Arrangement.Center,\n            horizontalAlignment = CenterHorizontally,\n            modifier = Modifier\n                .fillMaxSize()\n                .verticalScroll(rememberScrollState())\n        ) {\n            Column(horizontalAlignment = CenterHorizontally) {\n                Box(contentAlignment = Alignment.Center) {\n                    if (timerState.timerMode == TimerMode.FOCUS) {\n                        CircularProgressIndicator(\n                            progress = progress,\n                            modifier = Modifier\n                                .sharedBounds(\n                                    sharedContentState = this@TimerScreen.rememberSharedContentState(\n                                        \"focus progress\"\n                                    ),\n                                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                                )\n                                .widthIn(max = 350.dp)\n                                .fillMaxWidth(0.9f)\n                                .aspectRatio(1f),\n                            color = color,\n                            trackColor = colorContainer,\n                            strokeWidth = 16.dp,\n                            gapSize = 8.dp\n                        )\n                    } else {\n                        CircularWavyProgressIndicator(\n                            progress = progress,\n                            modifier = Modifier\n                                .sharedBounds(\n                                    sharedContentState = this@TimerScreen.rememberSharedContentState(\n                                        \"break progress\"\n                                    ),\n                                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                                )\n                                .widthIn(max = 350.dp)\n                                .fillMaxWidth(0.9f)\n                                .aspectRatio(1f),\n                            color = color,\n                            trackColor = colorContainer,\n                            stroke = Stroke(\n                                width = with(LocalDensity.current) {\n                                    16.dp.toPx()\n                                },\n                                cap = StrokeCap.Round,\n                            ),\n                            trackStroke = Stroke(\n                                width = with(LocalDensity.current) {\n                                    16.dp.toPx()\n                                },\n                                cap = StrokeCap.Round,\n                            ),\n                            wavelength = 60.dp,\n                            gapSize = 8.dp\n                        )\n                    }\n                    var expanded by remember { mutableStateOf(timerState.showBrandTitle) }\n                    Column(\n                        horizontalAlignment = CenterHorizontally,\n                        modifier = Modifier\n                            .clip(shapes.largeIncreased)\n                            .clickable(onClick = { expanded = !expanded })\n                    ) {\n                        LaunchedEffect(timerState.showBrandTitle) {\n                            expanded = timerState.showBrandTitle\n                        }\n                        Text(\n                            text = timerState.timeStr,\n                            style = TextStyle(\n                                fontFamily = interClock,\n                                fontSize = 72.sp,\n                                letterSpacing = (-2).sp,\n                                fontFeatureSettings = \"tnum\"\n                            ),\n                            textAlign = TextAlign.Center,\n                            maxLines = 1,\n                            modifier = Modifier.sharedBounds(\n                                sharedContentState = this@TimerScreen.rememberSharedContentState(\"clock\"),\n                                animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                            )\n                        )\n                        AnimatedVisibility(\n                            expanded,\n                            enter = fadeIn(motionScheme.defaultEffectsSpec()) +\n                                    expandVertically(motionScheme.defaultSpatialSpec()),\n                            exit = fadeOut(motionScheme.defaultEffectsSpec()) +\n                                    shrinkVertically(motionScheme.defaultSpatialSpec())\n                        ) {\n                            Text(\n                                stringResource(\n                                    R.string.timer_session_count,\n                                    timerState.currentFocusCount,\n                                    timerState.totalFocusCount\n                                ),\n                                fontFamily = interClock,\n                                style = typography.titleLarge,\n                                color = colorScheme.outline\n                            )\n                        }\n                    }\n                }\n                val interactionSources = remember { List(3) { MutableInteractionSource() } }\n                ButtonGroup(\n                    overflowIndicator = { state ->\n                        ButtonGroupDefaults.OverflowIndicator(\n                            state,\n                            colors = IconButtonDefaults.filledTonalIconButtonColors(),\n                            modifier = Modifier.size(64.dp, 96.dp)\n                        )\n                    },\n                    modifier = Modifier.padding(16.dp)\n                ) {\n                    customItem(\n                        {\n                            FilledIconToggleButton(\n                                onCheckedChange = { checked ->\n                                    onAction(TimerAction.ToggleTimer)\n\n                                    if (checked) haptic.performHapticFeedback(HapticFeedbackType.ToggleOn)\n                                    else haptic.performHapticFeedback(HapticFeedbackType.ToggleOff)\n\n                                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU && checked) {\n                                        permissionLauncher.launch(Manifest.permission.POST_NOTIFICATIONS)\n                                    }\n                                },\n                                checked = timerState.timerRunning,\n                                colors = IconButtonDefaults.filledIconToggleButtonColors(\n                                    checkedContainerColor = color,\n                                    checkedContentColor = onColor\n                                ),\n                                shapes = IconButtonDefaults.toggleableShapes(),\n                                interactionSource = interactionSources[0],\n                                modifier = Modifier\n                                    .size(width = 128.dp, height = 96.dp)\n                                    .animateWidth(interactionSources[0])\n                            ) {\n                                if (timerState.timerRunning) {\n                                    Icon(\n                                        painterResource(R.drawable.pause_large),\n                                        contentDescription = stringResource(R.string.pause),\n                                        modifier = Modifier.size(32.dp)\n                                    )\n                                } else {\n                                    Icon(\n                                        painterResource(R.drawable.play_large),\n                                        contentDescription = stringResource(R.string.play),\n                                        modifier = Modifier.size(32.dp)\n                                    )\n                                }\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    if (timerState.timerRunning) {\n                                        Icon(\n                                            painterResource(R.drawable.pause),\n                                            contentDescription = stringResource(R.string.pause)\n                                        )\n                                    } else {\n                                        Icon(\n                                            painterResource(R.drawable.play),\n                                            contentDescription = stringResource(R.string.play)\n                                        )\n                                    }\n                                },\n                                text = {\n                                    Text(\n                                        if (timerState.timerRunning) stringResource(R.string.pause) else stringResource(\n                                            R.string.play\n                                        )\n                                    )\n                                },\n                                onClick = {\n                                    onAction(TimerAction.ToggleTimer)\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n\n                    customItem(\n                        {\n                            FilledTonalIconButton(\n                                onClick = {\n                                    onAction(TimerAction.ResetTimer)\n                                    haptic.performHapticFeedback(HapticFeedbackType.VirtualKey)\n                                },\n                                colors = IconButtonDefaults.filledTonalIconButtonColors(\n                                    containerColor = colorContainer\n                                ),\n                                shapes = IconButtonDefaults.shapes(),\n                                interactionSource = interactionSources[1],\n                                modifier = Modifier\n                                    .size(96.dp)\n                                    .animateWidth(interactionSources[1])\n                            ) {\n                                Icon(\n                                    painterResource(R.drawable.restart_large),\n                                    contentDescription = stringResource(R.string.restart),\n                                    modifier = Modifier.size(32.dp)\n                                )\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    Icon(\n                                        painterResource(R.drawable.restart),\n                                        stringResource(R.string.restart)\n                                    )\n                                },\n                                text = { Text(stringResource(R.string.restart)) },\n                                onClick = {\n                                    onAction(TimerAction.ResetTimer)\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n\n                    customItem(\n                        {\n                            FilledTonalIconButton(\n                                onClick = {\n                                    onAction(TimerAction.SkipTimer(fromButton = true))\n                                    haptic.performHapticFeedback(HapticFeedbackType.VirtualKey)\n                                },\n                                colors = IconButtonDefaults.filledTonalIconButtonColors(\n                                    containerColor = colorContainer\n                                ),\n                                shapes = IconButtonDefaults.shapes(),\n                                interactionSource = interactionSources[2],\n                                modifier = Modifier\n                                    .size(64.dp, 96.dp)\n                                    .animateWidth(interactionSources[2])\n                            ) {\n                                Icon(\n                                    painterResource(R.drawable.skip_next_large),\n                                    contentDescription = stringResource(R.string.skip_to_next),\n                                    modifier = Modifier.size(32.dp)\n                                )\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    Icon(\n                                        painterResource(R.drawable.skip_next),\n                                        stringResource(R.string.skip_to_next)\n                                    )\n                                },\n                                text = { Text(stringResource(R.string.skip_to_next)) },\n                                onClick = {\n                                    onAction(TimerAction.SkipTimer(fromButton = true))\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n                }\n            }\n\n            Spacer(Modifier.height(32.dp))\n\n            Column(horizontalAlignment = CenterHorizontally) {\n                Text(stringResource(R.string.up_next), style = typography.titleSmall)\n                AnimatedContent(\n                    timerState.nextTimeStr,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    }\n                ) {\n                    Text(\n                        it,\n                        style = TextStyle(\n                            fontFamily = interClock,\n                            fontSize = 22.sp,\n                            lineHeight = 28.sp,\n                            color = if (timerState.nextTimerMode == TimerMode.FOCUS) colorScheme.primary else colorScheme.tertiary,\n                            textAlign = TextAlign.Center\n                        ),\n                        modifier = Modifier.width(200.dp)\n                    )\n                }\n                AnimatedContent(\n                    timerState.nextTimerMode,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    }\n                ) {\n                    Text(\n                        when (it) {\n                            TimerMode.FOCUS -> stringResource(R.string.focus)\n                            TimerMode.SHORT_BREAK -> stringResource(R.string.short_break)\n                            else -> stringResource(R.string.long_break)\n                        },\n                        style = typography.titleMediumEmphasized,\n                        textAlign = TextAlign.Center,\n                        modifier = Modifier.width(200.dp)\n                    )\n                }\n            }\n\n            Spacer(Modifier.height(16.dp))\n        }\n    }\n}\n\n@Preview(\n    showSystemUi = true,\n    device = Devices.PIXEL_9_PRO\n)\n@Composable\nfun TimerScreenPreview() {\n    val timerState = TimerState(\n        timeStr = \"03:34\", nextTimeStr = \"5:00\", timerMode = TimerMode.FOCUS, timerRunning = true\n    )\n    TomatoTheme {\n        Surface {\n            SharedTransitionLayout {\n                TimerScreen(\n                    timerState,\n                    isPlus = true,\n                    { 0.3f },\n                    {}\n                )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\nimport android.provider.Settings\nimport androidx.core.net.toUri\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.FlowPreview\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.SharingStarted\nimport kotlinx.coroutines.flow.StateFlow\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.combine\nimport kotlinx.coroutines.flow.stateIn\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.data.PreferenceRepository\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.data.StatRepository\nimport org.nsh07.pomodoro.data.TimerRepository\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.utils.millisecondsToStr\nimport java.time.LocalDate\nimport java.time.temporal.ChronoUnit\n\n@OptIn(FlowPreview::class)\nclass TimerViewModel(\n    private val preferenceRepository: PreferenceRepository,\n    private val serviceHelper: ServiceHelper,\n    private val statRepository: StatRepository,\n    private val timerRepository: TimerRepository,\n    private val _timerState: MutableStateFlow<TimerState>,\n    private val _time: MutableStateFlow<Long>\n) : ViewModel() {\n    val timerState: StateFlow<TimerState> = _timerState.asStateFlow()\n\n    val time: StateFlow<Long> = _time.asStateFlow()\n\n    val progress = _time.combine(_timerState) { remainingTime, uiState ->\n        (uiState.totalTime.toFloat() - remainingTime) / uiState.totalTime\n    }.stateIn(viewModelScope, SharingStarted.WhileSubscribed(5000), 0f)\n\n    private var cycles = 0\n\n    private var startTime = 0L\n    private var pauseTime = 0L\n    private var pauseDuration = 0L\n\n    init {\n        if (!timerRepository.serviceRunning.value)\n            viewModelScope.launch(Dispatchers.IO) {\n                timerRepository.focusTime =\n                    preferenceRepository.getIntPreference(\"focus_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"focus_time\",\n                            timerRepository.focusTime.toInt()\n                        ).toLong()\n                timerRepository.shortBreakTime =\n                    preferenceRepository.getIntPreference(\"short_break_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"short_break_time\",\n                            timerRepository.shortBreakTime.toInt()\n                        ).toLong()\n                timerRepository.longBreakTime =\n                    preferenceRepository.getIntPreference(\"long_break_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"long_break_time\",\n                            timerRepository.longBreakTime.toInt()\n                        ).toLong()\n                timerRepository.sessionLength =\n                    preferenceRepository.getIntPreference(\"session_length\")\n                        ?: preferenceRepository.saveIntPreference(\n                            \"session_length\",\n                            timerRepository.sessionLength\n                        )\n\n                timerRepository.alarmEnabled =\n                    preferenceRepository.getBooleanPreference(\"alarm_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"alarm_enabled\", true)\n                timerRepository.vibrateEnabled =\n                    preferenceRepository.getBooleanPreference(\"vibrate_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", true)\n                timerRepository.dndEnabled =\n                    preferenceRepository.getBooleanPreference(\"dnd_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"dnd_enabled\", false)\n\n                timerRepository.alarmSoundUri = (\n                        preferenceRepository.getStringPreference(\"alarm_sound\")\n                            ?: preferenceRepository.saveStringPreference(\n                                \"alarm_sound\",\n                                (Settings.System.DEFAULT_ALARM_ALERT_URI\n                                    ?: Settings.System.DEFAULT_RINGTONE_URI).toString()\n                            )\n                        ).toUri()\n\n                _time.update { timerRepository.focusTime }\n                cycles = 0\n                startTime = 0L\n                pauseTime = 0L\n                pauseDuration = 0L\n\n                _timerState.update { currentState ->\n                    currentState.copy(\n                        timerMode = TimerMode.FOCUS,\n                        timeStr = millisecondsToStr(time.value),\n                        totalTime = time.value,\n                        nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                        nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                        currentFocusCount = 1,\n                        totalFocusCount = timerRepository.sessionLength\n                    )\n                }\n\n                var lastDate = statRepository.getLastDate()\n                val today = LocalDate.now()\n\n                // Fills dates between today and lastDate with 0s to ensure continuous history\n                if (lastDate != null) {\n                    while (ChronoUnit.DAYS.between(lastDate, today) > 0) {\n                        lastDate = lastDate?.plusDays(1)\n                        statRepository.insertStat(Stat(lastDate!!, 0, 0, 0, 0, 0))\n                    }\n                } else {\n                    statRepository.insertStat(Stat(today, 0, 0, 0, 0, 0))\n                }\n\n                delay(1500)\n\n                _timerState.update { currentState ->\n                    currentState.copy(showBrandTitle = false)\n                }\n            }\n    }\n\n    fun onAction(action: TimerAction) {\n        serviceHelper.startService(action)\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appPreferenceRepository = application.container.appPreferenceRepository\n                val appStatRepository = application.container.appStatRepository\n                val appTimerRepository = application.container.appTimerRepository\n                val serviceHelper = application.container.serviceHelper\n                val timerState = application.container.timerState\n                val time = application.container.time\n\n                TimerViewModel(\n                    preferenceRepository = appPreferenceRepository,\n                    serviceHelper = serviceHelper,\n                    statRepository = appStatRepository,\n                    timerRepository = appTimerRepository,\n                    _timerState = timerState,\n                    _time = time\n                )\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\utils\\Utils.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.utils\n\nimport androidx.compose.ui.graphics.Color\nimport java.util.Locale\nimport java.util.concurrent.TimeUnit\n\nfun millisecondsToStr(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%02d:%02d\",\n        TimeUnit.MILLISECONDS.toMinutes(t),\n        TimeUnit.MILLISECONDS.toSeconds(t) % TimeUnit.MINUTES.toSeconds(1)\n    )\n}\n\nfun millisecondsToHours(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dh\",\n        TimeUnit.MILLISECONDS.toHours(t)\n    )\n}\n\nfun millisecondsToMinutes(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dm\",\n        TimeUnit.MILLISECONDS.toMinutes(t)\n    )\n}\n\nfun millisecondsToHoursMinutes(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dh %dm\", TimeUnit.MILLISECONDS.toHours(t),\n        TimeUnit.MILLISECONDS.toMinutes(t) % TimeUnit.HOURS.toMinutes(1)\n    )\n}\n\n/**\n * Extension function for [String] to convert it to a [androidx.compose.ui.graphics.Color]\n *\n * The base string must be of the format produced by [androidx.compose.ui.graphics.Color.toString],\n * i.e, the color black with 100% opacity in sRGB would be represented by:\n *\n *      Color(0.0, 0.0, 0.0, 1.0, sRGB IEC61966-2.1)\n */\nfun String.toColor(): Color {\n    // Sample string: Color(0.0, 0.0, 0.0, 1.0, sRGB IEC61966-2.1)\n    val comma1 = this.indexOf(',')\n    val comma2 = this.indexOf(',', comma1 + 1)\n    val comma3 = this.indexOf(',', comma2 + 1)\n    val comma4 = this.indexOf(',', comma3 + 1)\n\n    val r = this.substringAfter('(').substringBefore(',').toFloat()\n    val g = this.slice(comma1 + 1..comma2 - 1).toFloat()\n    val b = this.slice(comma2 + 1..comma3 - 1).toFloat()\n    val a = this.slice(comma3 + 1..comma4 - 1).toFloat()\n    return Color(r, g, b, a)\n}\n"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\play\\java\\org\\nsh07\\pomodoro\\billing\\TomatoPlusPaywallDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.FilledTonalIconButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Scaffold\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.unit.dp\nimport com.revenuecat.purchases.ui.revenuecatui.Paywall\nimport com.revenuecat.purchases.ui.revenuecatui.PaywallOptions\nimport com.revenuecat.purchases.ui.revenuecatui.customercenter.CustomerCenter\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TomatoPlusPaywallDialog(\n    isPlus: Boolean,\n    onDismiss: () -> Unit\n) {\n    val paywallOptions = remember {\n        PaywallOptions.Builder(dismissRequest = onDismiss).build()\n    }\n\n    Scaffold { innerPadding ->\n        if (!isPlus) {\n            Paywall(paywallOptions)\n\n            FilledTonalIconButton(\n                onClick = onDismiss,\n                modifier = Modifier\n                    .padding(innerPadding)\n                    .padding(16.dp)\n            ) {\n                Icon(\n                    painterResource(R.drawable.arrow_back),\n                    null\n                )\n            }\n        } else {\n            CustomerCenter(onDismiss = onDismiss)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidMain\\kotlin\\ui\\src\\play\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutButtons.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ButtonColors\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TopButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://hosted.weblate.org/engage/tomato/\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.weblate),\n                contentDescription = null,\n                modifier = Modifier.size(24.dp)\n            )\n\n            Text(text = stringResource(R.string.help_with_translation))\n        }\n    }\n}\n\n@Composable\nfun BottomButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://play.google.com/store/apps/details?id=org.nsh07.pomodoro\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.play_store),\n                contentDescription = null,\n                modifier = Modifier.size(24.dp)\n            )\n\n            Text(text = stringResource(R.string.rate_on_google_play))\n        }\n    }\n}"
    },
    {
        "filePath": "src\\androidTest\\java\\org\\nsh07\\pomodoro\\ExampleInstrumentedTest.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "package org.nsh07.pomodoro\n\nimport androidx.test.platform.app.InstrumentationRegistry\nimport androidx.test.ext.junit.runners.AndroidJUnit4\n\nimport org.junit.Test\nimport org.junit.runner.RunWith\n\nimport org.junit.Assert.*\n\n/**\n * Instrumented test, which will execute on an Android device.\n *\n * See [testing documentation](http://d.android.com/tools/testing).\n */\n@RunWith(AndroidJUnit4::class)\nclass ExampleInstrumentedTest {\n    @Test\n    fun useAppContext() {\n        // Context of the app under test.\n        val appContext = InstrumentationRegistry.getInstrumentation().targetContext\n        assertEquals(\"org.nsh07.pomodoro\", appContext.packageName)\n    }\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\FossBillingManager.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\n\n/**\n * Google Play implementation of BillingManager\n */\nclass FossBillingManager : BillingManager {\n    override val isPlus = MutableStateFlow(true).asStateFlow()\n}\n\nobject BillingManagerProvider {\n    val manager: BillingManager = FossBillingManager()\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\billing\\BillingManager.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport kotlinx.coroutines.flow.StateFlow\n\ninterface BillingManager {\n    val isPlus: StateFlow<Boolean>\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\PreferenceRepository.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport kotlinx.coroutines.CoroutineDispatcher\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.flow.Flow\nimport kotlinx.coroutines.withContext\n\n/**\n * Interface for reading/writing app preferences to the app's database. This style of storage aims\n * to mimic the Preferences DataStore library, preventing the requirement of migration if new\n * preferences are added\n */\ninterface PreferenceRepository {\n    /**\n     * Saves an integer preference key-value pair to the database.\n     */\n    suspend fun saveIntPreference(key: String, value: Int): Int\n\n    /**\n     * Saves a boolean preference key-value pair to the database.\n     */\n    suspend fun saveBooleanPreference(key: String, value: Boolean): Boolean\n\n    /**\n     * Saves a string preference key-value pair to the database.\n     */\n    suspend fun saveStringPreference(key: String, value: String): String\n\n    /**\n     * Retrieves an integer preference key-value pair from the database.\n     */\n    suspend fun getIntPreference(key: String): Int?\n\n    /**\n     * Retrieves a boolean preference key-value pair from the database.\n     */\n    suspend fun getBooleanPreference(key: String): Boolean?\n\n    /**\n     * Retrieves a boolean preference key-value pair as a flow from the database.\n     */\n    fun getBooleanPreferenceFlow(key: String): Flow<Boolean>\n\n    /**\n     * Retrieves a string preference key-value pair from the database.\n     */\n    suspend fun getStringPreference(key: String): String?\n\n    /**\n     * Retrieves a string preference key-value pair as a flow from the database.\n     */\n    fun getStringPreferenceFlow(key: String): Flow<String>\n\n    /**\n     * Erases all integer preference key-value pairs in the database. Do note that the default values\n     * will need to be rewritten manually\n     */\n    suspend fun resetSettings()\n}\n\n/**\n * See [PreferenceRepository] for more details\n */\nclass AppPreferenceRepository(\n    private val preferenceDao: PreferenceDao,\n    private val ioDispatcher: CoroutineDispatcher = Dispatchers.IO\n) : PreferenceRepository {\n    override suspend fun saveIntPreference(key: String, value: Int): Int =\n        withContext(ioDispatcher) {\n            preferenceDao.insertIntPreference(IntPreference(key, value))\n            value\n        }\n\n    override suspend fun saveBooleanPreference(key: String, value: Boolean): Boolean =\n        withContext(ioDispatcher) {\n            preferenceDao.insertBooleanPreference(BooleanPreference(key, value))\n            value\n        }\n\n    override suspend fun saveStringPreference(key: String, value: String): String =\n        withContext(ioDispatcher) {\n            preferenceDao.insertStringPreference(StringPreference(key, value))\n            value\n        }\n\n    override suspend fun getIntPreference(key: String): Int? = withContext(ioDispatcher) {\n        preferenceDao.getIntPreference(key)\n    }\n\n    override suspend fun getBooleanPreference(key: String): Boolean? = withContext(ioDispatcher) {\n        preferenceDao.getBooleanPreference(key)\n    }\n\n    override fun getBooleanPreferenceFlow(key: String): Flow<Boolean> =\n        preferenceDao.getBooleanPreferenceFlow(key)\n\n    override suspend fun getStringPreference(key: String): String? = withContext(ioDispatcher) {\n        preferenceDao.getStringPreference(key)\n    }\n\n    override fun getStringPreferenceFlow(key: String): Flow<String> =\n        preferenceDao.getStringPreferenceFlow(key)\n\n    override suspend fun resetSettings() = withContext(ioDispatcher) {\n        preferenceDao.resetIntPreferences()\n        preferenceDao.resetBooleanPreferences()\n        preferenceDao.resetStringPreferences()\n    }\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\StatRepository.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport kotlinx.coroutines.CoroutineDispatcher\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.flow.Flow\nimport kotlinx.coroutines.withContext\nimport java.time.LocalDate\nimport java.time.LocalTime\n\n/**\n * Interface for reading/writing statistics to the app's database. Ideally, writing should be done\n * through the timer screen's ViewModel and reading should be done through the stats screen's\n * ViewModel\n */\ninterface StatRepository {\n    suspend fun insertStat(stat: Stat)\n\n    suspend fun addFocusTime(focusTime: Long)\n\n    suspend fun addBreakTime(breakTime: Long)\n\n    fun getTodayStat(): Flow<Stat?>\n\n    fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>>\n\n    fun getLastNDaysAverageFocusTimes(n: Int): Flow<StatFocusTime?>\n\n    suspend fun getLastDate(): LocalDate?\n}\n\n/**\n * See [StatRepository] for more details\n */\nclass AppStatRepository(\n    private val statDao: StatDao,\n    private val ioDispatcher: CoroutineDispatcher = Dispatchers.IO\n) : StatRepository {\n    override suspend fun insertStat(stat: Stat) = statDao.insertStat(stat)\n\n    override suspend fun addFocusTime(focusTime: Long) = withContext(ioDispatcher) {\n        val currentDate = LocalDate.now()\n        val currentTime = LocalTime.now().toSecondOfDay()\n        val secondsInDay = 24 * 60 * 60\n\n        if (statDao.statExists(currentDate)) {\n            when (currentTime) {\n                in 0..(secondsInDay / 4) ->\n                    statDao.addFocusTimeQ1(currentDate, focusTime)\n\n                in (secondsInDay / 4)..(secondsInDay / 2) ->\n                    statDao.addFocusTimeQ2(currentDate, focusTime)\n\n                in (secondsInDay / 2)..(3 * secondsInDay / 4) ->\n                    statDao.addFocusTimeQ3(currentDate, focusTime)\n\n                else -> statDao.addFocusTimeQ4(currentDate, focusTime)\n            }\n        } else {\n            when (currentTime) {\n                in 0..(secondsInDay / 4) ->\n                    statDao.insertStat(\n                        Stat(currentDate, focusTime, 0, 0, 0, 0)\n                    )\n\n                in (secondsInDay / 4)..(secondsInDay / 2) ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, focusTime, 0, 0, 0)\n                    )\n\n                in (secondsInDay / 2)..(3 * secondsInDay / 4) ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, 0, focusTime, 0, 0)\n                    )\n\n                else ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, 0, 0, focusTime, 0)\n                    )\n            }\n        }\n    }\n\n    override suspend fun addBreakTime(breakTime: Long) = withContext(ioDispatcher) {\n        val currentDate = LocalDate.now()\n        if (statDao.statExists(currentDate)) {\n            statDao.addBreakTime(currentDate, breakTime)\n        } else {\n            statDao.insertStat(Stat(currentDate, 0, 0, 0, 0, breakTime))\n        }\n    }\n\n    override fun getTodayStat(): Flow<Stat?> {\n        val currentDate = LocalDate.now()\n        return statDao.getStat(currentDate)\n    }\n\n    override fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>> =\n        statDao.getLastNDaysStatsSummary(n)\n\n    override fun getLastNDaysAverageFocusTimes(n: Int): Flow<StatFocusTime?> =\n        statDao.getLastNDaysAvgFocusTimes(n)\n\n    override suspend fun getLastDate(): LocalDate? = statDao.getLastDate()\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\test\\java\\org\\nsh07\\pomodoro\\utils\\UtilsKtTest.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.utils\n\nimport junit.framework.TestCase.assertEquals\nimport junit.framework.TestCase.assertTrue\nimport org.junit.Assert.assertThrows\nimport org.junit.Test\n\nclass UtilsKtTest {\n\n    @Test\n    fun `millisecondsToStr zero milliseconds`() {\n        assertEquals(\"00:00\", millisecondsToStr(0))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds less than a second`() {\n        assertEquals(\"00:00\", millisecondsToStr(999))\n    }\n\n    @Test\n    fun `millisecondsToStr exactly one second`() {\n        assertEquals(\"00:01\", millisecondsToStr(1000))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds less than a minute`() {\n        assertEquals(\"00:59\", millisecondsToStr(59999))\n    }\n\n    @Test\n    fun `millisecondsToStr exactly one minute`() {\n        assertEquals(\"01:00\", millisecondsToStr(60000))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds more than a minute`() {\n        assertEquals(\"01:01\", millisecondsToStr(61999))\n    }\n\n    @Test\n    fun `millisecondsToStr large milliseconds value`() {\n        assertEquals(\"99:59\", millisecondsToStr(5999999))\n    }\n\n    @Test\n    fun `millisecondsToStr negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToStr(-1)\n        }\n        assertTrue(\n            \"millisecondsToStr should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToStr Long MAX VALUE`() {\n        assertEquals(\"153722867280912:55\", millisecondsToStr(Long.MAX_VALUE))\n    }\n\n    @Test\n    fun `millisecondsToHours zero milliseconds`() {\n        assertEquals(\"0h\", millisecondsToHours(0))\n    }\n\n    @Test\n    fun `millisecondsToHours less than an hour`() {\n        assertEquals(\"0h\", millisecondsToHours(3599999))\n    }\n\n    @Test\n    fun `millisecondsToHours exactly one hour`() {\n        assertEquals(\"1h\", millisecondsToHours(3600000))\n    }\n\n    @Test\n    fun `millisecondsToHours multiple hours`() {\n        assertEquals(\"2h\", millisecondsToHours(7200000))\n    }\n\n    @Test\n    fun `millisecondsToHours large number of hours`() {\n        assertEquals(\"25h\", millisecondsToHours(25 * 3600000))\n    }\n\n    @Test\n    fun `millisecondsToHours negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToHours(-1)\n        }\n        assertTrue(\n            \"millisecondsToHours should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToHours Long MAX VALUE`() {\n        assertEquals(\"2562047788015h\", millisecondsToHours(Long.MAX_VALUE))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes zero milliseconds`() {\n        assertEquals(\"0h 0m\", millisecondsToHoursMinutes(0))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes less than a minute`() {\n        assertEquals(\"0h 0m\", millisecondsToHoursMinutes(59999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes exactly one minute`() {\n        assertEquals(\"0h 1m\", millisecondsToHoursMinutes(60000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes less than an hour but more than a minute`() {\n        assertEquals(\"0h 59m\", millisecondsToHoursMinutes(3599999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes exactly one hour`() {\n        assertEquals(\"1h 0m\", millisecondsToHoursMinutes(3600000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes hours and minutes`() {\n        assertEquals(\"1h 1m\", millisecondsToHoursMinutes(3660000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes multiple hours and minutes`() {\n        assertEquals(\"2h 3m\", millisecondsToHoursMinutes(7380000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes just less than 2 hours`() {\n        assertEquals(\"1h 59m\", millisecondsToHoursMinutes(3600000 + 3599999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToHoursMinutes(-1)\n        }\n        assertTrue(\n            \"millisecondsToHoursMinutes should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes Long MAX VALUE`() {\n        assertEquals(\"2562047788015h 12m\", millisecondsToHoursMinutes(Long.MAX_VALUE))\n    }\n\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\FossBillingManager.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\n\n/**\n * Google Play implementation of BillingManager\n */\nclass FossBillingManager : BillingManager {\n    override val isPlus = MutableStateFlow(true).asStateFlow()\n}\n\nobject BillingManagerProvider {\n    val manager: BillingManager = FossBillingManager()\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\billing\\BillingManager.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport kotlinx.coroutines.flow.StateFlow\n\ninterface BillingManager {\n    val isPlus: StateFlow<Boolean>\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\PreferenceRepository.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport kotlinx.coroutines.CoroutineDispatcher\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.flow.Flow\nimport kotlinx.coroutines.withContext\n\n/**\n * Interface for reading/writing app preferences to the app's database. This style of storage aims\n * to mimic the Preferences DataStore library, preventing the requirement of migration if new\n * preferences are added\n */\ninterface PreferenceRepository {\n    /**\n     * Saves an integer preference key-value pair to the database.\n     */\n    suspend fun saveIntPreference(key: String, value: Int): Int\n\n    /**\n     * Saves a boolean preference key-value pair to the database.\n     */\n    suspend fun saveBooleanPreference(key: String, value: Boolean): Boolean\n\n    /**\n     * Saves a string preference key-value pair to the database.\n     */\n    suspend fun saveStringPreference(key: String, value: String): String\n\n    /**\n     * Retrieves an integer preference key-value pair from the database.\n     */\n    suspend fun getIntPreference(key: String): Int?\n\n    /**\n     * Retrieves a boolean preference key-value pair from the database.\n     */\n    suspend fun getBooleanPreference(key: String): Boolean?\n\n    /**\n     * Retrieves a boolean preference key-value pair as a flow from the database.\n     */\n    fun getBooleanPreferenceFlow(key: String): Flow<Boolean>\n\n    /**\n     * Retrieves a string preference key-value pair from the database.\n     */\n    suspend fun getStringPreference(key: String): String?\n\n    /**\n     * Retrieves a string preference key-value pair as a flow from the database.\n     */\n    fun getStringPreferenceFlow(key: String): Flow<String>\n\n    /**\n     * Erases all integer preference key-value pairs in the database. Do note that the default values\n     * will need to be rewritten manually\n     */\n    suspend fun resetSettings()\n}\n\n/**\n * See [PreferenceRepository] for more details\n */\nclass AppPreferenceRepository(\n    private val preferenceDao: PreferenceDao,\n    private val ioDispatcher: CoroutineDispatcher = Dispatchers.IO\n) : PreferenceRepository {\n    override suspend fun saveIntPreference(key: String, value: Int): Int =\n        withContext(ioDispatcher) {\n            preferenceDao.insertIntPreference(IntPreference(key, value))\n            value\n        }\n\n    override suspend fun saveBooleanPreference(key: String, value: Boolean): Boolean =\n        withContext(ioDispatcher) {\n            preferenceDao.insertBooleanPreference(BooleanPreference(key, value))\n            value\n        }\n\n    override suspend fun saveStringPreference(key: String, value: String): String =\n        withContext(ioDispatcher) {\n            preferenceDao.insertStringPreference(StringPreference(key, value))\n            value\n        }\n\n    override suspend fun getIntPreference(key: String): Int? = withContext(ioDispatcher) {\n        preferenceDao.getIntPreference(key)\n    }\n\n    override suspend fun getBooleanPreference(key: String): Boolean? = withContext(ioDispatcher) {\n        preferenceDao.getBooleanPreference(key)\n    }\n\n    override fun getBooleanPreferenceFlow(key: String): Flow<Boolean> =\n        preferenceDao.getBooleanPreferenceFlow(key)\n\n    override suspend fun getStringPreference(key: String): String? = withContext(ioDispatcher) {\n        preferenceDao.getStringPreference(key)\n    }\n\n    override fun getStringPreferenceFlow(key: String): Flow<String> =\n        preferenceDao.getStringPreferenceFlow(key)\n\n    override suspend fun resetSettings() = withContext(ioDispatcher) {\n        preferenceDao.resetIntPreferences()\n        preferenceDao.resetBooleanPreferences()\n        preferenceDao.resetStringPreferences()\n    }\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\StatRepository.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport kotlinx.coroutines.CoroutineDispatcher\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.flow.Flow\nimport kotlinx.coroutines.withContext\nimport java.time.LocalDate\nimport java.time.LocalTime\n\n/**\n * Interface for reading/writing statistics to the app's database. Ideally, writing should be done\n * through the timer screen's ViewModel and reading should be done through the stats screen's\n * ViewModel\n */\ninterface StatRepository {\n    suspend fun insertStat(stat: Stat)\n\n    suspend fun addFocusTime(focusTime: Long)\n\n    suspend fun addBreakTime(breakTime: Long)\n\n    fun getTodayStat(): Flow<Stat?>\n\n    fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>>\n\n    fun getLastNDaysAverageFocusTimes(n: Int): Flow<StatFocusTime?>\n\n    suspend fun getLastDate(): LocalDate?\n}\n\n/**\n * See [StatRepository] for more details\n */\nclass AppStatRepository(\n    private val statDao: StatDao,\n    private val ioDispatcher: CoroutineDispatcher = Dispatchers.IO\n) : StatRepository {\n    override suspend fun insertStat(stat: Stat) = statDao.insertStat(stat)\n\n    override suspend fun addFocusTime(focusTime: Long) = withContext(ioDispatcher) {\n        val currentDate = LocalDate.now()\n        val currentTime = LocalTime.now().toSecondOfDay()\n        val secondsInDay = 24 * 60 * 60\n\n        if (statDao.statExists(currentDate)) {\n            when (currentTime) {\n                in 0..(secondsInDay / 4) ->\n                    statDao.addFocusTimeQ1(currentDate, focusTime)\n\n                in (secondsInDay / 4)..(secondsInDay / 2) ->\n                    statDao.addFocusTimeQ2(currentDate, focusTime)\n\n                in (secondsInDay / 2)..(3 * secondsInDay / 4) ->\n                    statDao.addFocusTimeQ3(currentDate, focusTime)\n\n                else -> statDao.addFocusTimeQ4(currentDate, focusTime)\n            }\n        } else {\n            when (currentTime) {\n                in 0..(secondsInDay / 4) ->\n                    statDao.insertStat(\n                        Stat(currentDate, focusTime, 0, 0, 0, 0)\n                    )\n\n                in (secondsInDay / 4)..(secondsInDay / 2) ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, focusTime, 0, 0, 0)\n                    )\n\n                in (secondsInDay / 2)..(3 * secondsInDay / 4) ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, 0, focusTime, 0, 0)\n                    )\n\n                else ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, 0, 0, focusTime, 0)\n                    )\n            }\n        }\n    }\n\n    override suspend fun addBreakTime(breakTime: Long) = withContext(ioDispatcher) {\n        val currentDate = LocalDate.now()\n        if (statDao.statExists(currentDate)) {\n            statDao.addBreakTime(currentDate, breakTime)\n        } else {\n            statDao.insertStat(Stat(currentDate, 0, 0, 0, 0, breakTime))\n        }\n    }\n\n    override fun getTodayStat(): Flow<Stat?> {\n        val currentDate = LocalDate.now()\n        return statDao.getStat(currentDate)\n    }\n\n    override fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>> =\n        statDao.getLastNDaysStatsSummary(n)\n\n    override fun getLastNDaysAverageFocusTimes(n: Int): Flow<StatFocusTime?> =\n        statDao.getLastNDaysAvgFocusTimes(n)\n\n    override suspend fun getLastDate(): LocalDate? = statDao.getLastDate()\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\commonMain\\kotlin\\logic\\src\\test\\java\\org\\nsh07\\pomodoro\\utils\\UtilsKtTest.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.utils\n\nimport junit.framework.TestCase.assertEquals\nimport junit.framework.TestCase.assertTrue\nimport org.junit.Assert.assertThrows\nimport org.junit.Test\n\nclass UtilsKtTest {\n\n    @Test\n    fun `millisecondsToStr zero milliseconds`() {\n        assertEquals(\"00:00\", millisecondsToStr(0))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds less than a second`() {\n        assertEquals(\"00:00\", millisecondsToStr(999))\n    }\n\n    @Test\n    fun `millisecondsToStr exactly one second`() {\n        assertEquals(\"00:01\", millisecondsToStr(1000))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds less than a minute`() {\n        assertEquals(\"00:59\", millisecondsToStr(59999))\n    }\n\n    @Test\n    fun `millisecondsToStr exactly one minute`() {\n        assertEquals(\"01:00\", millisecondsToStr(60000))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds more than a minute`() {\n        assertEquals(\"01:01\", millisecondsToStr(61999))\n    }\n\n    @Test\n    fun `millisecondsToStr large milliseconds value`() {\n        assertEquals(\"99:59\", millisecondsToStr(5999999))\n    }\n\n    @Test\n    fun `millisecondsToStr negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToStr(-1)\n        }\n        assertTrue(\n            \"millisecondsToStr should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToStr Long MAX VALUE`() {\n        assertEquals(\"153722867280912:55\", millisecondsToStr(Long.MAX_VALUE))\n    }\n\n    @Test\n    fun `millisecondsToHours zero milliseconds`() {\n        assertEquals(\"0h\", millisecondsToHours(0))\n    }\n\n    @Test\n    fun `millisecondsToHours less than an hour`() {\n        assertEquals(\"0h\", millisecondsToHours(3599999))\n    }\n\n    @Test\n    fun `millisecondsToHours exactly one hour`() {\n        assertEquals(\"1h\", millisecondsToHours(3600000))\n    }\n\n    @Test\n    fun `millisecondsToHours multiple hours`() {\n        assertEquals(\"2h\", millisecondsToHours(7200000))\n    }\n\n    @Test\n    fun `millisecondsToHours large number of hours`() {\n        assertEquals(\"25h\", millisecondsToHours(25 * 3600000))\n    }\n\n    @Test\n    fun `millisecondsToHours negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToHours(-1)\n        }\n        assertTrue(\n            \"millisecondsToHours should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToHours Long MAX VALUE`() {\n        assertEquals(\"2562047788015h\", millisecondsToHours(Long.MAX_VALUE))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes zero milliseconds`() {\n        assertEquals(\"0h 0m\", millisecondsToHoursMinutes(0))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes less than a minute`() {\n        assertEquals(\"0h 0m\", millisecondsToHoursMinutes(59999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes exactly one minute`() {\n        assertEquals(\"0h 1m\", millisecondsToHoursMinutes(60000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes less than an hour but more than a minute`() {\n        assertEquals(\"0h 59m\", millisecondsToHoursMinutes(3599999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes exactly one hour`() {\n        assertEquals(\"1h 0m\", millisecondsToHoursMinutes(3600000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes hours and minutes`() {\n        assertEquals(\"1h 1m\", millisecondsToHoursMinutes(3660000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes multiple hours and minutes`() {\n        assertEquals(\"2h 3m\", millisecondsToHoursMinutes(7380000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes just less than 2 hours`() {\n        assertEquals(\"1h 59m\", millisecondsToHoursMinutes(3600000 + 3599999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToHoursMinutes(-1)\n        }\n        assertTrue(\n            \"millisecondsToHoursMinutes should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes Long MAX VALUE`() {\n        assertEquals(\"2562047788015h 12m\", millisecondsToHoursMinutes(Long.MAX_VALUE))\n    }\n\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\FossBillingManager.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\n\n/**\n * Google Play implementation of BillingManager\n */\nclass FossBillingManager : BillingManager {\n    override val isPlus = MutableStateFlow(true).asStateFlow()\n}\n\nobject BillingManagerProvider {\n    val manager: BillingManager = FossBillingManager()\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\billing\\BillingManager.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport kotlinx.coroutines.flow.StateFlow\n\ninterface BillingManager {\n    val isPlus: StateFlow<Boolean>\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\PreferenceRepository.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport kotlinx.coroutines.CoroutineDispatcher\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.flow.Flow\nimport kotlinx.coroutines.withContext\n\n/**\n * Interface for reading/writing app preferences to the app's database. This style of storage aims\n * to mimic the Preferences DataStore library, preventing the requirement of migration if new\n * preferences are added\n */\ninterface PreferenceRepository {\n    /**\n     * Saves an integer preference key-value pair to the database.\n     */\n    suspend fun saveIntPreference(key: String, value: Int): Int\n\n    /**\n     * Saves a boolean preference key-value pair to the database.\n     */\n    suspend fun saveBooleanPreference(key: String, value: Boolean): Boolean\n\n    /**\n     * Saves a string preference key-value pair to the database.\n     */\n    suspend fun saveStringPreference(key: String, value: String): String\n\n    /**\n     * Retrieves an integer preference key-value pair from the database.\n     */\n    suspend fun getIntPreference(key: String): Int?\n\n    /**\n     * Retrieves a boolean preference key-value pair from the database.\n     */\n    suspend fun getBooleanPreference(key: String): Boolean?\n\n    /**\n     * Retrieves a boolean preference key-value pair as a flow from the database.\n     */\n    fun getBooleanPreferenceFlow(key: String): Flow<Boolean>\n\n    /**\n     * Retrieves a string preference key-value pair from the database.\n     */\n    suspend fun getStringPreference(key: String): String?\n\n    /**\n     * Retrieves a string preference key-value pair as a flow from the database.\n     */\n    fun getStringPreferenceFlow(key: String): Flow<String>\n\n    /**\n     * Erases all integer preference key-value pairs in the database. Do note that the default values\n     * will need to be rewritten manually\n     */\n    suspend fun resetSettings()\n}\n\n/**\n * See [PreferenceRepository] for more details\n */\nclass AppPreferenceRepository(\n    private val preferenceDao: PreferenceDao,\n    private val ioDispatcher: CoroutineDispatcher = Dispatchers.IO\n) : PreferenceRepository {\n    override suspend fun saveIntPreference(key: String, value: Int): Int =\n        withContext(ioDispatcher) {\n            preferenceDao.insertIntPreference(IntPreference(key, value))\n            value\n        }\n\n    override suspend fun saveBooleanPreference(key: String, value: Boolean): Boolean =\n        withContext(ioDispatcher) {\n            preferenceDao.insertBooleanPreference(BooleanPreference(key, value))\n            value\n        }\n\n    override suspend fun saveStringPreference(key: String, value: String): String =\n        withContext(ioDispatcher) {\n            preferenceDao.insertStringPreference(StringPreference(key, value))\n            value\n        }\n\n    override suspend fun getIntPreference(key: String): Int? = withContext(ioDispatcher) {\n        preferenceDao.getIntPreference(key)\n    }\n\n    override suspend fun getBooleanPreference(key: String): Boolean? = withContext(ioDispatcher) {\n        preferenceDao.getBooleanPreference(key)\n    }\n\n    override fun getBooleanPreferenceFlow(key: String): Flow<Boolean> =\n        preferenceDao.getBooleanPreferenceFlow(key)\n\n    override suspend fun getStringPreference(key: String): String? = withContext(ioDispatcher) {\n        preferenceDao.getStringPreference(key)\n    }\n\n    override fun getStringPreferenceFlow(key: String): Flow<String> =\n        preferenceDao.getStringPreferenceFlow(key)\n\n    override suspend fun resetSettings() = withContext(ioDispatcher) {\n        preferenceDao.resetIntPreferences()\n        preferenceDao.resetBooleanPreferences()\n        preferenceDao.resetStringPreferences()\n    }\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\main\\java\\org\\nsh07\\pomodoro\\data\\StatRepository.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport kotlinx.coroutines.CoroutineDispatcher\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.flow.Flow\nimport kotlinx.coroutines.withContext\nimport java.time.LocalDate\nimport java.time.LocalTime\n\n/**\n * Interface for reading/writing statistics to the app's database. Ideally, writing should be done\n * through the timer screen's ViewModel and reading should be done through the stats screen's\n * ViewModel\n */\ninterface StatRepository {\n    suspend fun insertStat(stat: Stat)\n\n    suspend fun addFocusTime(focusTime: Long)\n\n    suspend fun addBreakTime(breakTime: Long)\n\n    fun getTodayStat(): Flow<Stat?>\n\n    fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>>\n\n    fun getLastNDaysAverageFocusTimes(n: Int): Flow<StatFocusTime?>\n\n    suspend fun getLastDate(): LocalDate?\n}\n\n/**\n * See [StatRepository] for more details\n */\nclass AppStatRepository(\n    private val statDao: StatDao,\n    private val ioDispatcher: CoroutineDispatcher = Dispatchers.IO\n) : StatRepository {\n    override suspend fun insertStat(stat: Stat) = statDao.insertStat(stat)\n\n    override suspend fun addFocusTime(focusTime: Long) = withContext(ioDispatcher) {\n        val currentDate = LocalDate.now()\n        val currentTime = LocalTime.now().toSecondOfDay()\n        val secondsInDay = 24 * 60 * 60\n\n        if (statDao.statExists(currentDate)) {\n            when (currentTime) {\n                in 0..(secondsInDay / 4) ->\n                    statDao.addFocusTimeQ1(currentDate, focusTime)\n\n                in (secondsInDay / 4)..(secondsInDay / 2) ->\n                    statDao.addFocusTimeQ2(currentDate, focusTime)\n\n                in (secondsInDay / 2)..(3 * secondsInDay / 4) ->\n                    statDao.addFocusTimeQ3(currentDate, focusTime)\n\n                else -> statDao.addFocusTimeQ4(currentDate, focusTime)\n            }\n        } else {\n            when (currentTime) {\n                in 0..(secondsInDay / 4) ->\n                    statDao.insertStat(\n                        Stat(currentDate, focusTime, 0, 0, 0, 0)\n                    )\n\n                in (secondsInDay / 4)..(secondsInDay / 2) ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, focusTime, 0, 0, 0)\n                    )\n\n                in (secondsInDay / 2)..(3 * secondsInDay / 4) ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, 0, focusTime, 0, 0)\n                    )\n\n                else ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, 0, 0, focusTime, 0)\n                    )\n            }\n        }\n    }\n\n    override suspend fun addBreakTime(breakTime: Long) = withContext(ioDispatcher) {\n        val currentDate = LocalDate.now()\n        if (statDao.statExists(currentDate)) {\n            statDao.addBreakTime(currentDate, breakTime)\n        } else {\n            statDao.insertStat(Stat(currentDate, 0, 0, 0, 0, breakTime))\n        }\n    }\n\n    override fun getTodayStat(): Flow<Stat?> {\n        val currentDate = LocalDate.now()\n        return statDao.getStat(currentDate)\n    }\n\n    override fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>> =\n        statDao.getLastNDaysStatsSummary(n)\n\n    override fun getLastNDaysAverageFocusTimes(n: Int): Flow<StatFocusTime?> =\n        statDao.getLastNDaysAvgFocusTimes(n)\n\n    override suspend fun getLastDate(): LocalDate? = statDao.getLastDate()\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\logic\\src\\test\\java\\org\\nsh07\\pomodoro\\utils\\UtilsKtTest.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.utils\n\nimport junit.framework.TestCase.assertEquals\nimport junit.framework.TestCase.assertTrue\nimport org.junit.Assert.assertThrows\nimport org.junit.Test\n\nclass UtilsKtTest {\n\n    @Test\n    fun `millisecondsToStr zero milliseconds`() {\n        assertEquals(\"00:00\", millisecondsToStr(0))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds less than a second`() {\n        assertEquals(\"00:00\", millisecondsToStr(999))\n    }\n\n    @Test\n    fun `millisecondsToStr exactly one second`() {\n        assertEquals(\"00:01\", millisecondsToStr(1000))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds less than a minute`() {\n        assertEquals(\"00:59\", millisecondsToStr(59999))\n    }\n\n    @Test\n    fun `millisecondsToStr exactly one minute`() {\n        assertEquals(\"01:00\", millisecondsToStr(60000))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds more than a minute`() {\n        assertEquals(\"01:01\", millisecondsToStr(61999))\n    }\n\n    @Test\n    fun `millisecondsToStr large milliseconds value`() {\n        assertEquals(\"99:59\", millisecondsToStr(5999999))\n    }\n\n    @Test\n    fun `millisecondsToStr negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToStr(-1)\n        }\n        assertTrue(\n            \"millisecondsToStr should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToStr Long MAX VALUE`() {\n        assertEquals(\"153722867280912:55\", millisecondsToStr(Long.MAX_VALUE))\n    }\n\n    @Test\n    fun `millisecondsToHours zero milliseconds`() {\n        assertEquals(\"0h\", millisecondsToHours(0))\n    }\n\n    @Test\n    fun `millisecondsToHours less than an hour`() {\n        assertEquals(\"0h\", millisecondsToHours(3599999))\n    }\n\n    @Test\n    fun `millisecondsToHours exactly one hour`() {\n        assertEquals(\"1h\", millisecondsToHours(3600000))\n    }\n\n    @Test\n    fun `millisecondsToHours multiple hours`() {\n        assertEquals(\"2h\", millisecondsToHours(7200000))\n    }\n\n    @Test\n    fun `millisecondsToHours large number of hours`() {\n        assertEquals(\"25h\", millisecondsToHours(25 * 3600000))\n    }\n\n    @Test\n    fun `millisecondsToHours negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToHours(-1)\n        }\n        assertTrue(\n            \"millisecondsToHours should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToHours Long MAX VALUE`() {\n        assertEquals(\"2562047788015h\", millisecondsToHours(Long.MAX_VALUE))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes zero milliseconds`() {\n        assertEquals(\"0h 0m\", millisecondsToHoursMinutes(0))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes less than a minute`() {\n        assertEquals(\"0h 0m\", millisecondsToHoursMinutes(59999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes exactly one minute`() {\n        assertEquals(\"0h 1m\", millisecondsToHoursMinutes(60000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes less than an hour but more than a minute`() {\n        assertEquals(\"0h 59m\", millisecondsToHoursMinutes(3599999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes exactly one hour`() {\n        assertEquals(\"1h 0m\", millisecondsToHoursMinutes(3600000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes hours and minutes`() {\n        assertEquals(\"1h 1m\", millisecondsToHoursMinutes(3660000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes multiple hours and minutes`() {\n        assertEquals(\"2h 3m\", millisecondsToHoursMinutes(7380000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes just less than 2 hours`() {\n        assertEquals(\"1h 59m\", millisecondsToHoursMinutes(3600000 + 3599999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToHoursMinutes(-1)\n        }\n        assertTrue(\n            \"millisecondsToHoursMinutes should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes Long MAX VALUE`() {\n        assertEquals(\"2562047788015h 12m\", millisecondsToHoursMinutes(Long.MAX_VALUE))\n    }\n\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\ui\\src\\commonMain\\kotlin\\ui\\src\\commonMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\Navigation.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport org.nsh07.pomodoro.R\n\nval mainScreens = listOf(\n    NavItem(\n        Screen.Timer,\n        R.drawable.timer_outlined,\n        R.drawable.timer_filled,\n        R.string.timer\n    ),\n    NavItem(\n        Screen.Stats,\n        R.drawable.monitoring,\n        R.drawable.monitoring_filled,\n        R.string.stats\n    ),\n    NavItem(\n        Screen.Settings.Main,\n        R.drawable.settings,\n        R.drawable.settings_filled,\n        R.string.settings\n    )\n)\n\nval settingsScreens = listOf(\n    SettingsNavItem(\n        Screen.Settings.Timer,\n        R.drawable.timer_filled,\n        R.string.timer,\n        listOf(R.string.durations, R.string.session_length, R.string.always_on_display)\n    ),\n    SettingsNavItem(\n        Screen.Settings.Alarm,\n        R.drawable.alarm,\n        R.string.alarm,\n        listOf(R.string.alarm_sound, R.string.alarm, R.string.vibrate)\n    ),\n    SettingsNavItem(\n        Screen.Settings.Appearance,\n        R.drawable.palette,\n        R.string.appearance,\n        listOf(R.string.color_scheme, R.string.theme, R.string.black_theme)\n    )\n)\n"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\ui\\src\\commonMain\\kotlin\\ui\\src\\commonMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerAction.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\nsealed interface TimerAction {\n    data class SkipTimer(val fromButton: Boolean) : TimerAction\n\n    data object ResetTimer : TimerAction\n    data object StopAlarm : TimerAction\n    data object ToggleTimer : TimerAction\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\ui\\src\\commonMain\\kotlin\\ui\\src\\commonMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerState.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\ndata class TimerState(\n    val timerMode: TimerMode = TimerMode.FOCUS,\n    val timeStr: String = \"25:00\",\n    val totalTime: Long = 25 * 60,\n    val timerRunning: Boolean = false,\n    val nextTimerMode: TimerMode = TimerMode.SHORT_BREAK,\n    val nextTimeStr: String = \"5:00\",\n    val showBrandTitle: Boolean = true,\n    val currentFocusCount: Int = 1,\n    val totalFocusCount: Int = 4,\n    val alarmRinging: Boolean = false\n)\n\nenum class TimerMode {\n    FOCUS, SHORT_BREAK, LONG_BREAK, BRAND\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\ui\\src\\commonMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\Navigation.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport org.nsh07.pomodoro.R\n\nval mainScreens = listOf(\n    NavItem(\n        Screen.Timer,\n        R.drawable.timer_outlined,\n        R.drawable.timer_filled,\n        R.string.timer\n    ),\n    NavItem(\n        Screen.Stats,\n        R.drawable.monitoring,\n        R.drawable.monitoring_filled,\n        R.string.stats\n    ),\n    NavItem(\n        Screen.Settings.Main,\n        R.drawable.settings,\n        R.drawable.settings_filled,\n        R.string.settings\n    )\n)\n\nval settingsScreens = listOf(\n    SettingsNavItem(\n        Screen.Settings.Timer,\n        R.drawable.timer_filled,\n        R.string.timer,\n        listOf(R.string.durations, R.string.session_length, R.string.always_on_display)\n    ),\n    SettingsNavItem(\n        Screen.Settings.Alarm,\n        R.drawable.alarm,\n        R.string.alarm,\n        listOf(R.string.alarm_sound, R.string.alarm, R.string.vibrate)\n    ),\n    SettingsNavItem(\n        Screen.Settings.Appearance,\n        R.drawable.palette,\n        R.string.appearance,\n        listOf(R.string.color_scheme, R.string.theme, R.string.black_theme)\n    )\n)\n"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\ui\\src\\commonMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerAction.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\nsealed interface TimerAction {\n    data class SkipTimer(val fromButton: Boolean) : TimerAction\n\n    data object ResetTimer : TimerAction\n    data object StopAlarm : TimerAction\n    data object ToggleTimer : TimerAction\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\ui\\src\\commonMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerState.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\ndata class TimerState(\n    val timerMode: TimerMode = TimerMode.FOCUS,\n    val timeStr: String = \"25:00\",\n    val totalTime: Long = 25 * 60,\n    val timerRunning: Boolean = false,\n    val nextTimerMode: TimerMode = TimerMode.SHORT_BREAK,\n    val nextTimeStr: String = \"5:00\",\n    val showBrandTitle: Boolean = true,\n    val currentFocusCount: Int = 1,\n    val totalFocusCount: Int = 4,\n    val alarmRinging: Boolean = false\n)\n\nenum class TimerMode {\n    FOCUS, SHORT_BREAK, LONG_BREAK, BRAND\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\Navigation.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport org.nsh07.pomodoro.R\n\nval mainScreens = listOf(\n    NavItem(\n        Screen.Timer,\n        R.drawable.timer_outlined,\n        R.drawable.timer_filled,\n        R.string.timer\n    ),\n    NavItem(\n        Screen.Stats,\n        R.drawable.monitoring,\n        R.drawable.monitoring_filled,\n        R.string.stats\n    ),\n    NavItem(\n        Screen.Settings.Main,\n        R.drawable.settings,\n        R.drawable.settings_filled,\n        R.string.settings\n    )\n)\n\nval settingsScreens = listOf(\n    SettingsNavItem(\n        Screen.Settings.Timer,\n        R.drawable.timer_filled,\n        R.string.timer,\n        listOf(R.string.durations, R.string.session_length, R.string.always_on_display)\n    ),\n    SettingsNavItem(\n        Screen.Settings.Alarm,\n        R.drawable.alarm,\n        R.string.alarm,\n        listOf(R.string.alarm_sound, R.string.alarm, R.string.vibrate)\n    ),\n    SettingsNavItem(\n        Screen.Settings.Appearance,\n        R.drawable.palette,\n        R.string.appearance,\n        listOf(R.string.color_scheme, R.string.theme, R.string.black_theme)\n    )\n)\n"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerAction.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\nsealed interface TimerAction {\n    data class SkipTimer(val fromButton: Boolean) : TimerAction\n\n    data object ResetTimer : TimerAction\n    data object StopAlarm : TimerAction\n    data object ToggleTimer : TimerAction\n}"
    },
    {
        "filePath": "src\\commonMain\\kotlin\\ui\\src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerState.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\ndata class TimerState(\n    val timerMode: TimerMode = TimerMode.FOCUS,\n    val timeStr: String = \"25:00\",\n    val totalTime: Long = 25 * 60,\n    val timerRunning: Boolean = false,\n    val nextTimerMode: TimerMode = TimerMode.SHORT_BREAK,\n    val nextTimeStr: String = \"5:00\",\n    val showBrandTitle: Boolean = true,\n    val currentFocusCount: Int = 1,\n    val totalFocusCount: Int = 4,\n    val alarmRinging: Boolean = false\n)\n\nenum class TimerMode {\n    FOCUS, SHORT_BREAK, LONG_BREAK, BRAND\n}"
    },
    {
        "filePath": "src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\FossBillingManager.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\n\n/**\n * Google Play implementation of BillingManager\n */\nclass FossBillingManager : BillingManager {\n    override val isPlus = MutableStateFlow(true).asStateFlow()\n}\n\nobject BillingManagerProvider {\n    val manager: BillingManager = FossBillingManager()\n}"
    },
    {
        "filePath": "src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\initializePurchases.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.content.Context\n\nfun initializePurchases(context: Context) {}"
    },
    {
        "filePath": "src\\foss\\java\\org\\nsh07\\pomodoro\\billing\\TomatoPlusPaywallDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "THREADING",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport androidx.activity.compose.BackHandler\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n@Composable\nfun TomatoPlusPaywallDialog(\n    isPlus: Boolean,\n    onDismiss: () -> Unit\n) {\n    val uriHandler = LocalUriHandler.current\n\n    BackHandler(enabled = true, onDismiss)\n\n    Box(\n        contentAlignment = Alignment.Center,\n        modifier = Modifier\n            .fillMaxSize()\n            .background(colorScheme.surface)\n    ) {\n        Column(horizontalAlignment = Alignment.CenterHorizontally) {\n            Icon(\n                painterResource(R.drawable.bmc),\n                null,\n                tint = colorScheme.onSurface\n            )\n            Spacer(Modifier.height(16.dp))\n            Text(\n                stringResource(R.string.tomato_foss),\n                style = typography.headlineSmall,\n                fontFamily = robotoFlexTopBar,\n                color = colorScheme.onSurface\n            )\n            Spacer(Modifier.height(8.dp))\n            Text(\n                stringResource(R.string.tomato_foss_desc, \"BuyMeACoffee\"),\n                textAlign = TextAlign.Center,\n                color = colorScheme.onSurfaceVariant,\n                modifier = Modifier.padding(horizontal = 24.dp)\n            )\n            Spacer(Modifier.height(16.dp))\n            Button(onClick = { uriHandler.openUri(\"https://coff.ee/nsh07\") }) {\n                Text(stringResource(R.string.bmc))\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\foss\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutButtons.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ButtonColors\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TopButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://coff.ee/nsh07\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.bmc),\n                contentDescription = null,\n                modifier = Modifier.height(24.dp)\n            )\n\n            Text(text = stringResource(R.string.bmc))\n        }\n    }\n}\n\n@Composable\nfun BottomButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://hosted.weblate.org/engage/tomato/\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.weblate),\n                contentDescription = null,\n                modifier = Modifier.size(20.dp)\n            )\n\n            Text(text = stringResource(R.string.help_with_translation))\n        }\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\billing\\BillingManager.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport kotlinx.coroutines.flow.StateFlow\n\ninterface BillingManager {\n    val isPlus: StateFlow<Boolean>\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\data\\AppContainer.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.app.NotificationManager\nimport android.app.PendingIntent\nimport android.content.Context\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.core.app.NotificationCompat\nimport androidx.core.app.NotificationCompat.VISIBILITY_PUBLIC\nimport androidx.core.app.NotificationManagerCompat\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.billing.BillingManager\nimport org.nsh07.pomodoro.billing.BillingManagerProvider\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.service.addTimerActions\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport org.nsh07.pomodoro.utils.millisecondsToStr\n\ninterface AppContainer {\n    val appPreferenceRepository: AppPreferenceRepository\n    val appStatRepository: AppStatRepository\n    val appTimerRepository: AppTimerRepository\n    val billingManager: BillingManager\n    val notificationManager: NotificationManagerCompat\n    val notificationManagerService: NotificationManager\n    val notificationBuilder: NotificationCompat.Builder\n    val serviceHelper: ServiceHelper\n    val timerState: MutableStateFlow<TimerState>\n    val time: MutableStateFlow<Long>\n    var activityTurnScreenOn: (Boolean) -> Unit\n}\n\nclass DefaultAppContainer(context: Context) : AppContainer {\n\n    override val appPreferenceRepository: AppPreferenceRepository by lazy {\n        AppPreferenceRepository(AppDatabase.getDatabase(context).preferenceDao())\n    }\n\n    override val appStatRepository: AppStatRepository by lazy {\n        AppStatRepository(AppDatabase.getDatabase(context).statDao())\n    }\n\n    override val appTimerRepository: AppTimerRepository by lazy { AppTimerRepository() }\n\n    override val billingManager: BillingManager by lazy { BillingManagerProvider.manager }\n\n    override val notificationManager: NotificationManagerCompat by lazy {\n        NotificationManagerCompat.from(context)\n    }\n\n    override val notificationManagerService: NotificationManager =\n        context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n\n    override val notificationBuilder: NotificationCompat.Builder by lazy {\n        NotificationCompat.Builder(context, \"timer\")\n            .setSmallIcon(R.drawable.tomato_logo_notification)\n            .setColor(Color.Red.toArgb())\n            .setContentIntent(\n                PendingIntent.getActivity(\n                    context,\n                    0,\n                    context.packageManager.getLaunchIntentForPackage(context.packageName),\n                    PendingIntent.FLAG_IMMUTABLE\n                )\n            )\n            .addTimerActions(context, R.drawable.play, context.getString(R.string.start))\n            .setShowWhen(true)\n            .setSilent(true)\n            .setOngoing(true)\n            .setRequestPromotedOngoing(true)\n            .setVisibility(VISIBILITY_PUBLIC)\n    }\n\n    override val serviceHelper: ServiceHelper by lazy {\n        ServiceHelper(context)\n    }\n\n    override val timerState: MutableStateFlow<TimerState> by lazy {\n        MutableStateFlow(\n            TimerState(\n                totalTime = appTimerRepository.focusTime,\n                timeStr = millisecondsToStr(appTimerRepository.focusTime),\n                nextTimeStr = millisecondsToStr(appTimerRepository.shortBreakTime)\n            )\n        )\n    }\n\n    override val time: MutableStateFlow<Long> by lazy {\n        MutableStateFlow(appTimerRepository.focusTime)\n    }\n\n    override var activityTurnScreenOn: (Boolean) -> Unit = {}\n\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\data\\AppDatabase.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "STORAGE",
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.content.Context\nimport androidx.room.AutoMigration\nimport androidx.room.Database\nimport androidx.room.Room\nimport androidx.room.RoomDatabase\nimport androidx.room.TypeConverters\n\n@Database(\n    entities = [IntPreference::class, BooleanPreference::class, StringPreference::class, Stat::class],\n    version = 2,\n    autoMigrations = [\n        AutoMigration(from = 1, to = 2)\n    ]\n)\n@TypeConverters(Converters::class)\nabstract class AppDatabase : RoomDatabase() {\n\n    abstract fun preferenceDao(): PreferenceDao\n    abstract fun statDao(): StatDao\n\n    companion object {\n\n        @Volatile\n        private var Instance: AppDatabase? = null\n\n        fun getDatabase(context: Context): AppDatabase {\n            return Instance ?: synchronized(this) {\n                Instance ?: Room.databaseBuilder(context, AppDatabase::class.java, \"app_database\")\n                    .build()\n                    .also { Instance = it }\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\data\\Converters.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.TypeConverter\nimport java.time.LocalDate\n\nclass Converters {\n    @TypeConverter\n    fun localDateToString(localDate: LocalDate?): String? {\n        return localDate?.toString()\n    }\n\n    @TypeConverter\n    fun stringToLocalDate(date: String?): LocalDate? {\n        return if (date != null) LocalDate.parse(date) else null\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\data\\Preference.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Entity\nimport androidx.room.PrimaryKey\n\n/**\n * Class for storing boolean preferences in the app's database\n */\n@Entity(tableName = \"boolean_preference\")\ndata class BooleanPreference(\n    @PrimaryKey\n    val key: String,\n    val value: Boolean\n)\n\n/**\n * Class for storing integer preferences in the app's database\n */\n@Entity(tableName = \"int_preference\")\ndata class IntPreference(\n    @PrimaryKey\n    val key: String,\n    val value: Int\n)\n\n/**\n * Class for storing string preferences in the app's database\n */\n@Entity(tableName = \"string_preference\")\ndata class StringPreference(\n    @PrimaryKey\n    val key: String,\n    val value: String\n)"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\data\\PreferenceDao.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Dao\nimport androidx.room.Insert\nimport androidx.room.OnConflictStrategy.Companion.REPLACE\nimport androidx.room.Query\nimport kotlinx.coroutines.flow.Flow\n\n@Dao\ninterface PreferenceDao {\n    @Insert(onConflict = REPLACE)\n    suspend fun insertIntPreference(preference: IntPreference)\n\n    @Insert(onConflict = REPLACE)\n    suspend fun insertBooleanPreference(preference: BooleanPreference)\n\n    @Insert(onConflict = REPLACE)\n    suspend fun insertStringPreference(preference: StringPreference)\n\n    @Query(\"DELETE FROM int_preference\")\n    suspend fun resetIntPreferences()\n\n    @Query(\"DELETE FROM boolean_preference\")\n    suspend fun resetBooleanPreferences()\n\n    @Query(\"DELETE FROM string_preference\")\n    suspend fun resetStringPreferences()\n\n    @Query(\"SELECT value FROM int_preference WHERE `key` = :key\")\n    suspend fun getIntPreference(key: String): Int?\n\n    @Query(\"SELECT value FROM boolean_preference WHERE `key` = :key\")\n    suspend fun getBooleanPreference(key: String): Boolean?\n\n    @Query(\"SELECT value FROM boolean_preference WHERE `key` = :key\")\n    fun getBooleanPreferenceFlow(key: String): Flow<Boolean>\n\n    @Query(\"SELECT value FROM string_preference WHERE `key` = :key\")\n    suspend fun getStringPreference(key: String): String?\n\n    @Query(\"SELECT value FROM string_preference WHERE `key` = :key\")\n    fun getStringPreferenceFlow(key: String): Flow<String>\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\data\\PreferenceRepository.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport kotlinx.coroutines.CoroutineDispatcher\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.flow.Flow\nimport kotlinx.coroutines.withContext\n\n/**\n * Interface for reading/writing app preferences to the app's database. This style of storage aims\n * to mimic the Preferences DataStore library, preventing the requirement of migration if new\n * preferences are added\n */\ninterface PreferenceRepository {\n    /**\n     * Saves an integer preference key-value pair to the database.\n     */\n    suspend fun saveIntPreference(key: String, value: Int): Int\n\n    /**\n     * Saves a boolean preference key-value pair to the database.\n     */\n    suspend fun saveBooleanPreference(key: String, value: Boolean): Boolean\n\n    /**\n     * Saves a string preference key-value pair to the database.\n     */\n    suspend fun saveStringPreference(key: String, value: String): String\n\n    /**\n     * Retrieves an integer preference key-value pair from the database.\n     */\n    suspend fun getIntPreference(key: String): Int?\n\n    /**\n     * Retrieves a boolean preference key-value pair from the database.\n     */\n    suspend fun getBooleanPreference(key: String): Boolean?\n\n    /**\n     * Retrieves a boolean preference key-value pair as a flow from the database.\n     */\n    fun getBooleanPreferenceFlow(key: String): Flow<Boolean>\n\n    /**\n     * Retrieves a string preference key-value pair from the database.\n     */\n    suspend fun getStringPreference(key: String): String?\n\n    /**\n     * Retrieves a string preference key-value pair as a flow from the database.\n     */\n    fun getStringPreferenceFlow(key: String): Flow<String>\n\n    /**\n     * Erases all integer preference key-value pairs in the database. Do note that the default values\n     * will need to be rewritten manually\n     */\n    suspend fun resetSettings()\n}\n\n/**\n * See [PreferenceRepository] for more details\n */\nclass AppPreferenceRepository(\n    private val preferenceDao: PreferenceDao,\n    private val ioDispatcher: CoroutineDispatcher = Dispatchers.IO\n) : PreferenceRepository {\n    override suspend fun saveIntPreference(key: String, value: Int): Int =\n        withContext(ioDispatcher) {\n            preferenceDao.insertIntPreference(IntPreference(key, value))\n            value\n        }\n\n    override suspend fun saveBooleanPreference(key: String, value: Boolean): Boolean =\n        withContext(ioDispatcher) {\n            preferenceDao.insertBooleanPreference(BooleanPreference(key, value))\n            value\n        }\n\n    override suspend fun saveStringPreference(key: String, value: String): String =\n        withContext(ioDispatcher) {\n            preferenceDao.insertStringPreference(StringPreference(key, value))\n            value\n        }\n\n    override suspend fun getIntPreference(key: String): Int? = withContext(ioDispatcher) {\n        preferenceDao.getIntPreference(key)\n    }\n\n    override suspend fun getBooleanPreference(key: String): Boolean? = withContext(ioDispatcher) {\n        preferenceDao.getBooleanPreference(key)\n    }\n\n    override fun getBooleanPreferenceFlow(key: String): Flow<Boolean> =\n        preferenceDao.getBooleanPreferenceFlow(key)\n\n    override suspend fun getStringPreference(key: String): String? = withContext(ioDispatcher) {\n        preferenceDao.getStringPreference(key)\n    }\n\n    override fun getStringPreferenceFlow(key: String): Flow<String> =\n        preferenceDao.getStringPreferenceFlow(key)\n\n    override suspend fun resetSettings() = withContext(ioDispatcher) {\n        preferenceDao.resetIntPreferences()\n        preferenceDao.resetBooleanPreferences()\n        preferenceDao.resetStringPreferences()\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\data\\Stat.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Entity\nimport androidx.room.PrimaryKey\nimport java.time.LocalDate\n\n/**\n * Data class for storing the user's statistics in the app's database. This class stores the focus\n * durations for the 4 quarters of a day (00:00 - 12:00, 12:00 - 16:00, 16:00 - 20:00, 20:00 - 00:00)\n * separately for later analysis (e.g. for showing which parts of the day are most productive).\n */\n@Entity(tableName = \"stat\")\ndata class Stat(\n    @PrimaryKey\n    val date: LocalDate,\n    val focusTimeQ1: Long,\n    val focusTimeQ2: Long,\n    val focusTimeQ3: Long,\n    val focusTimeQ4: Long,\n    val breakTime: Long\n) {\n    fun totalFocusTime() = focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4\n}\n\ndata class StatSummary(\n    val date: LocalDate,\n    val focusTime: Long,\n    val breakTime: Long\n)\n\ndata class StatFocusTime(\n    val focusTimeQ1: Long,\n    val focusTimeQ2: Long,\n    val focusTimeQ3: Long,\n    val focusTimeQ4: Long\n) {\n    fun total() = focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\data\\StatDao.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STORAGE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Multiplatform-Settings 或 SQLDelight 数据库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport androidx.room.Dao\nimport androidx.room.Insert\nimport androidx.room.OnConflictStrategy.Companion.REPLACE\nimport androidx.room.Query\nimport kotlinx.coroutines.flow.Flow\nimport java.time.LocalDate\n\n@Dao\ninterface StatDao {\n    @Insert(onConflict = REPLACE)\n    suspend fun insertStat(stat: Stat)\n\n    @Query(\"UPDATE stat SET focusTimeQ1 = focusTimeQ1 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ1(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ2 = focusTimeQ2 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ2(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ3 = focusTimeQ3 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ3(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET focusTimeQ4 = focusTimeQ4 + :focusTime WHERE date = :date\")\n    suspend fun addFocusTimeQ4(date: LocalDate, focusTime: Long)\n\n    @Query(\"UPDATE stat SET breakTime = breakTime + :breakTime WHERE date = :date\")\n    suspend fun addBreakTime(date: LocalDate, breakTime: Long)\n\n    @Query(\"SELECT * FROM stat WHERE date = :date\")\n    fun getStat(date: LocalDate): Flow<Stat?>\n\n    @Query(\"SELECT date, focusTimeQ1 + focusTimeQ2 + focusTimeQ3 + focusTimeQ4 as focusTime, breakTime FROM stat ORDER BY date DESC LIMIT :n\")\n    fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>>\n\n    @Query(\n        \"SELECT \" +\n                \"AVG(focusTimeQ1) AS focusTimeQ1, \" +\n                \"AVG(focusTimeQ2) AS focusTimeQ2, \" +\n                \"AVG(focusTimeQ3) AS focusTimeQ3, \" +\n                \"AVG(focusTimeQ4) AS focusTimeQ4 \" +\n                \"FROM (\" +\n                \"SELECT * FROM (\" +\n                \"SELECT focusTimeQ1, focusTimeQ2, focusTimeQ3, focusTimeQ4 FROM stat ORDER BY date DESC LIMIT :n\" +\n                \") \" +\n                \"WHERE focusTimeQ1 != 0 OR focusTimeQ2 != 0 OR focusTimeQ3 != 0 OR focusTimeQ4 != 0 \" +\n                \")\"\n    )\n    fun getLastNDaysAvgFocusTimes(n: Int): Flow<StatFocusTime?>\n\n    @Query(\"SELECT EXISTS (SELECT * FROM stat WHERE date = :date)\")\n    suspend fun statExists(date: LocalDate): Boolean\n\n    @Query(\"SELECT date FROM stat ORDER BY date DESC LIMIT 1\")\n    suspend fun getLastDate(): LocalDate?\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\data\\StatRepository.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport kotlinx.coroutines.CoroutineDispatcher\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.flow.Flow\nimport kotlinx.coroutines.withContext\nimport java.time.LocalDate\nimport java.time.LocalTime\n\n/**\n * Interface for reading/writing statistics to the app's database. Ideally, writing should be done\n * through the timer screen's ViewModel and reading should be done through the stats screen's\n * ViewModel\n */\ninterface StatRepository {\n    suspend fun insertStat(stat: Stat)\n\n    suspend fun addFocusTime(focusTime: Long)\n\n    suspend fun addBreakTime(breakTime: Long)\n\n    fun getTodayStat(): Flow<Stat?>\n\n    fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>>\n\n    fun getLastNDaysAverageFocusTimes(n: Int): Flow<StatFocusTime?>\n\n    suspend fun getLastDate(): LocalDate?\n}\n\n/**\n * See [StatRepository] for more details\n */\nclass AppStatRepository(\n    private val statDao: StatDao,\n    private val ioDispatcher: CoroutineDispatcher = Dispatchers.IO\n) : StatRepository {\n    override suspend fun insertStat(stat: Stat) = statDao.insertStat(stat)\n\n    override suspend fun addFocusTime(focusTime: Long) = withContext(ioDispatcher) {\n        val currentDate = LocalDate.now()\n        val currentTime = LocalTime.now().toSecondOfDay()\n        val secondsInDay = 24 * 60 * 60\n\n        if (statDao.statExists(currentDate)) {\n            when (currentTime) {\n                in 0..(secondsInDay / 4) ->\n                    statDao.addFocusTimeQ1(currentDate, focusTime)\n\n                in (secondsInDay / 4)..(secondsInDay / 2) ->\n                    statDao.addFocusTimeQ2(currentDate, focusTime)\n\n                in (secondsInDay / 2)..(3 * secondsInDay / 4) ->\n                    statDao.addFocusTimeQ3(currentDate, focusTime)\n\n                else -> statDao.addFocusTimeQ4(currentDate, focusTime)\n            }\n        } else {\n            when (currentTime) {\n                in 0..(secondsInDay / 4) ->\n                    statDao.insertStat(\n                        Stat(currentDate, focusTime, 0, 0, 0, 0)\n                    )\n\n                in (secondsInDay / 4)..(secondsInDay / 2) ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, focusTime, 0, 0, 0)\n                    )\n\n                in (secondsInDay / 2)..(3 * secondsInDay / 4) ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, 0, focusTime, 0, 0)\n                    )\n\n                else ->\n                    statDao.insertStat(\n                        Stat(currentDate, 0, 0, 0, focusTime, 0)\n                    )\n            }\n        }\n    }\n\n    override suspend fun addBreakTime(breakTime: Long) = withContext(ioDispatcher) {\n        val currentDate = LocalDate.now()\n        if (statDao.statExists(currentDate)) {\n            statDao.addBreakTime(currentDate, breakTime)\n        } else {\n            statDao.insertStat(Stat(currentDate, 0, 0, 0, 0, breakTime))\n        }\n    }\n\n    override fun getTodayStat(): Flow<Stat?> {\n        val currentDate = LocalDate.now()\n        return statDao.getStat(currentDate)\n    }\n\n    override fun getLastNDaysStatsSummary(n: Int): Flow<List<StatSummary>> =\n        statDao.getLastNDaysStatsSummary(n)\n\n    override fun getLastNDaysAverageFocusTimes(n: Int): Flow<StatFocusTime?> =\n        statDao.getLastNDaysAvgFocusTimes(n)\n\n    override suspend fun getLastDate(): LocalDate? = statDao.getLastDate()\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\data\\TimerRepository.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.data\n\nimport android.net.Uri\nimport android.provider.Settings\nimport androidx.compose.material3.ColorScheme\nimport androidx.compose.material3.lightColorScheme\nimport kotlinx.coroutines.flow.MutableStateFlow\n\n/**\n * Interface that holds the timer durations for each timer type. This repository maintains a single\n * source of truth for the timer durations for the various ViewModels in the app.\n */\ninterface TimerRepository {\n    var focusTime: Long\n    var shortBreakTime: Long\n    var longBreakTime: Long\n\n    var sessionLength: Int\n\n    var timerFrequency: Float\n\n    var alarmEnabled: Boolean\n    var vibrateEnabled: Boolean\n    var dndEnabled: Boolean\n\n    var colorScheme: ColorScheme\n\n    var alarmSoundUri: Uri?\n\n    var serviceRunning: MutableStateFlow<Boolean>\n}\n\n/**\n * See [TimerRepository] for more details\n */\nclass AppTimerRepository : TimerRepository {\n    override var focusTime = 25 * 60 * 1000L\n    override var shortBreakTime = 5 * 60 * 1000L\n    override var longBreakTime = 15 * 60 * 1000L\n    override var sessionLength = 4\n    override var timerFrequency: Float = 60f\n    override var alarmEnabled = true\n    override var vibrateEnabled = true\n    override var dndEnabled: Boolean = false\n    override var colorScheme = lightColorScheme()\n    override var alarmSoundUri: Uri? =\n        Settings.System.DEFAULT_ALARM_ALERT_URI ?: Settings.System.DEFAULT_RINGTONE_URI\n    override var serviceRunning = MutableStateFlow(false)\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\MainActivity.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro\n\nimport android.os.Bundle\nimport androidx.activity.ComponentActivity\nimport androidx.activity.compose.setContent\nimport androidx.activity.enableEdgeToEdge\nimport androidx.activity.viewModels\nimport androidx.compose.foundation.isSystemInDarkTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport org.nsh07.pomodoro.ui.AppScreen\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsViewModel\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.toColor\n\nclass MainActivity : ComponentActivity() {\n\n    private val settingsViewModel: SettingsViewModel by viewModels(factoryProducer = { SettingsViewModel.Factory })\n\n    private val appContainer by lazy {\n        (application as TomatoApplication).container\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        enableEdgeToEdge()\n\n        appContainer.activityTurnScreenOn = {\n            setShowWhenLocked(it)\n            setTurnScreenOn(it)\n        }\n\n        setContent {\n            val settingsState by settingsViewModel.settingsState.collectAsStateWithLifecycle()\n\n            val darkTheme = when (settingsState.theme) {\n                \"dark\" -> true\n                \"light\" -> false\n                else -> isSystemInDarkTheme()\n            }\n\n            val seed = settingsState.colorScheme.toColor()\n\n            val isPlus by settingsViewModel.isPlus.collectAsStateWithLifecycle()\n\n            TomatoTheme(\n                darkTheme = darkTheme,\n                seedColor = seed,\n                blackTheme = settingsState.blackTheme\n            ) {\n                val colorScheme = colorScheme\n                LaunchedEffect(colorScheme) {\n                    appContainer.appTimerRepository.colorScheme = colorScheme\n                }\n\n                AppScreen(\n                    isPlus = isPlus,\n                    isAODEnabled = settingsState.aodEnabled,\n                    setTimerFrequency = {\n                        appContainer.appTimerRepository.timerFrequency = it\n                    }\n                )\n            }\n        }\n    }\n\n\n    override fun onStop() {\n        super.onStop()\n        // Reduce the timer loop frequency when not visible to save battery power\n        appContainer.appTimerRepository.timerFrequency = 1f\n    }\n\n    override fun onStart() {\n        super.onStart()\n        // Increase the timer loop frequency again when visible to make the progress smoother\n        appContainer.appTimerRepository.timerFrequency = 60f\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\service\\AddActions.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.app.PendingIntent\nimport android.app.PendingIntent.FLAG_IMMUTABLE\nimport android.content.Context\nimport android.content.Intent\nimport androidx.annotation.DrawableRes\nimport androidx.core.app.NotificationCompat\nimport org.nsh07.pomodoro.R\n\nfun NotificationCompat.Builder.addTimerActions(\n    context: Context,\n    @DrawableRes playPauseIcon: Int,\n    playPauseText: String\n): NotificationCompat.Builder = this\n    .addAction(\n        playPauseIcon,\n        playPauseText,\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.TOGGLE.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n    .addAction(\n        R.drawable.restart,\n        context.getString(R.string.exit),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.RESET.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n    .addAction(\n        R.drawable.skip_next,\n        context.getString(R.string.skip),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.SKIP.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )\n\nfun NotificationCompat.Builder.addStopAlarmAction(\n    context: Context\n): NotificationCompat.Builder = this\n    .addAction(\n        R.drawable.alarm,\n        context.getString(R.string.stop_alarm),\n        PendingIntent.getService(\n            context,\n            0,\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.STOP_ALARM.toString()\n            },\n            FLAG_IMMUTABLE\n        )\n    )"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\service\\ServiceHelper.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.content.Context\nimport android.content.Intent\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\n\n/**\n * Helper class that holds a reference to [Context] and helps call [Context.startService] in\n * [androidx.lifecycle.ViewModel]s. This class must be managed by an [android.app.Application] class\n * to scope it to the Activity's lifecycle and prevent leaks.\n */\nclass ServiceHelper(private val context: Context) {\n    fun startService(action: TimerAction) {\n        when (action) {\n            TimerAction.ResetTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.RESET.toString()\n                    context.startService(it)\n                }\n\n            is TimerAction.SkipTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.SKIP.toString()\n                    context.startService(it)\n                }\n\n            TimerAction.StopAlarm ->\n                Intent(context, TimerService::class.java).also {\n                    it.action =\n                        TimerService.Actions.STOP_ALARM.toString()\n                    context.startService(it)\n                }\n\n            TimerAction.ToggleTimer ->\n                Intent(context, TimerService::class.java).also {\n                    it.action = TimerService.Actions.TOGGLE.toString()\n                    context.startService(it)\n                }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\service\\TimerService.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "TIME",
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.service\n\nimport android.annotation.SuppressLint\nimport android.app.NotificationManager\nimport android.app.Service\nimport android.content.Intent\nimport android.media.AudioAttributes\nimport android.media.MediaPlayer\nimport android.os.Build\nimport android.os.IBinder\nimport android.os.SystemClock\nimport android.os.VibrationEffect\nimport android.os.Vibrator\nimport android.os.VibratorManager\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.core.app.NotificationCompat\nimport kotlinx.coroutines.CoroutineScope\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.Job\nimport kotlinx.coroutines.SupervisorJob\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport kotlinx.coroutines.runBlocking\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.utils.millisecondsToStr\nimport kotlin.text.Typography.middleDot\n\nclass TimerService : Service() {\n    private val appContainer by lazy {\n        (application as TomatoApplication).container\n    }\n\n    private val timerRepository by lazy { appContainer.appTimerRepository }\n    private val statRepository by lazy { appContainer.appStatRepository }\n    private val notificationManager by lazy { appContainer.notificationManager }\n    private val notificationManagerService by lazy { appContainer.notificationManagerService }\n    private val notificationBuilder by lazy { appContainer.notificationBuilder }\n    private val _timerState by lazy { appContainer.timerState }\n    private val _time by lazy { appContainer.time }\n\n    private val timeStateFlow by lazy { _time.asStateFlow() }\n\n    private var time: Long\n        get() = timeStateFlow.value\n        set(value) = _time.update { value }\n\n    private val timerState by lazy { _timerState.asStateFlow() }\n\n    private var cycles = 0\n    private var startTime = 0L\n    private var pauseTime = 0L\n    private var pauseDuration = 0L\n\n    private var job = SupervisorJob()\n    private val timerScope = CoroutineScope(Dispatchers.IO + job)\n    private val skipScope = CoroutineScope(Dispatchers.IO + job)\n\n    private var autoAlarmStopScope: Job? = null\n\n    private var alarm: MediaPlayer? = null\n    private val vibrator by lazy {\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {\n            val vibratorManager = getSystemService(VIBRATOR_MANAGER_SERVICE) as VibratorManager\n            vibratorManager.defaultVibrator\n        } else {\n            @Suppress(\"DEPRECATION\") getSystemService(VIBRATOR_SERVICE) as Vibrator\n        }\n    }\n\n    private val cs by lazy { timerRepository.colorScheme }\n\n    private lateinit var notificationStyle: NotificationCompat.ProgressStyle\n\n    override fun onBind(intent: Intent?): IBinder? {\n        return null\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        timerRepository.serviceRunning.update { true }\n        alarm = initializeMediaPlayer()\n    }\n\n    override fun onDestroy() {\n        timerRepository.serviceRunning.update { false }\n        runBlocking {\n            job.cancel()\n            saveTimeToDb()\n            setDoNotDisturb(false)\n            notificationManager.cancel(1)\n            alarm?.release()\n        }\n        super.onDestroy()\n    }\n\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n        when (intent?.action) {\n            Actions.TOGGLE.toString() -> {\n                startForegroundService()\n                toggleTimer()\n            }\n\n            Actions.RESET.toString() -> {\n                if (timerState.value.timerRunning) toggleTimer()\n                skipScope.launch {\n                    resetTimer()\n                    stopForegroundService()\n                }\n            }\n\n            Actions.SKIP.toString() -> skipScope.launch { skipTimer(true) }\n\n            Actions.STOP_ALARM.toString() -> stopAlarm()\n\n            Actions.UPDATE_ALARM_TONE.toString() -> updateAlarmTone()\n        }\n        return super.onStartCommand(intent, flags, startId)\n    }\n\n    private fun toggleTimer() {\n        updateProgressSegments()\n\n        if (timerState.value.timerRunning) {\n            setDoNotDisturb(false)\n            notificationBuilder.clearActions().addTimerActions(\n                this, R.drawable.play, getString(R.string.start)\n            )\n            showTimerNotification(time.toInt(), paused = true)\n            _timerState.update { currentState ->\n                currentState.copy(timerRunning = false)\n            }\n            pauseTime = SystemClock.elapsedRealtime()\n        } else {\n            if (timerState.value.timerMode == TimerMode.FOCUS) setDoNotDisturb(true)\n            else setDoNotDisturb(false)\n            notificationBuilder.clearActions().addTimerActions(\n                this, R.drawable.pause, getString(R.string.stop)\n            )\n            _timerState.update { it.copy(timerRunning = true) }\n            if (pauseTime != 0L) pauseDuration += SystemClock.elapsedRealtime() - pauseTime\n\n            var iterations = -1\n\n            timerScope.launch {\n                while (true) {\n                    if (!timerState.value.timerRunning) break\n                    if (startTime == 0L) startTime = SystemClock.elapsedRealtime()\n\n                    time = when (timerState.value.timerMode) {\n                        TimerMode.FOCUS -> timerRepository.focusTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n\n                        TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n\n                        else -> timerRepository.longBreakTime - (SystemClock.elapsedRealtime() - startTime - pauseDuration)\n                    }\n\n                    iterations =\n                        (iterations + 1) % timerRepository.timerFrequency.toInt().coerceAtLeast(1)\n\n                    if (iterations == 0) showTimerNotification(time.toInt())\n\n                    if (time < 0) {\n                        skipTimer()\n                        _timerState.update { currentState ->\n                            currentState.copy(timerRunning = false)\n                        }\n                        break\n                    } else {\n                        _timerState.update { currentState ->\n                            currentState.copy(\n                                timeStr = millisecondsToStr(time)\n                            )\n                        }\n                    }\n\n                    delay((1000f / timerRepository.timerFrequency).toLong())\n                }\n            }\n        }\n    }\n\n    @SuppressLint(\n        \"MissingPermission\",\n        \"StringFormatInvalid\"\n    ) // We check for the permission when pressing the Play button in the UI\n    fun showTimerNotification(\n        remainingTime: Int, paused: Boolean = false, complete: Boolean = false\n    ) {\n        if (complete) notificationBuilder.clearActions().addStopAlarmAction(this)\n\n        val totalTime = when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n            TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n            else -> timerRepository.longBreakTime.toInt()\n        }\n\n        val currentTimer = when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> getString(R.string.focus)\n            TimerMode.SHORT_BREAK -> getString(R.string.short_break)\n            else -> getString(R.string.long_break)\n        }\n\n        val nextTimer = when (timerState.value.nextTimerMode) {\n            TimerMode.FOCUS -> getString(R.string.focus)\n            TimerMode.SHORT_BREAK -> getString(R.string.short_break)\n            else -> getString(R.string.long_break)\n        }\n\n        val remainingTimeString = if ((remainingTime.toFloat() / 60000f) < 1.0f) \"< 1\"\n        else (remainingTime.toFloat() / 60000f).toInt()\n\n        notificationManager.notify(\n            1,\n            notificationBuilder\n                .setContentTitle(\n                    if (!complete) {\n                        \"$currentTimer  $middleDot  ${\n                            getString(R.string.min_remaining_notification, remainingTimeString)\n                        }\" + if (paused) \"  $middleDot  ${getString(R.string.paused)}\" else \"\"\n                    } else \"$currentTimer $middleDot ${getString(R.string.completed)}\"\n                )\n                .setContentText(\n                    getString(\n                        R.string.up_next_notification,\n                        nextTimer,\n                        timerState.value.nextTimeStr\n                    )\n                )\n                .setStyle(\n                    notificationStyle\n                        .setProgress( // Set the current progress by filling the previous intervals and part of the current interval\n                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.BAKLAVA) {\n                                (totalTime - remainingTime) + ((cycles + 1) / 2) * timerRepository.focusTime.toInt() + (cycles / 2) * timerRepository.shortBreakTime.toInt()\n                            } else (totalTime - remainingTime)\n                        )\n                )\n                .setWhen(System.currentTimeMillis() + remainingTime) // Sets the Live Activity/Now Bar chip time\n                .setShortCriticalText(millisecondsToStr(time.coerceAtLeast(0)))\n                .build()\n        )\n\n        if (complete) {\n            startAlarm()\n            _timerState.update { currentState ->\n                currentState.copy(alarmRinging = true)\n            }\n        }\n    }\n\n    private fun updateProgressSegments() {\n        notificationStyle = NotificationCompat.ProgressStyle()\n            .also {\n                // Add all the Focus, Short break and long break intervals in order\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.BAKLAVA) {\n                    // Android 16 and later supports live updates\n                    // Set progress bar sections if on Baklava or later\n                    for (i in 0..<timerRepository.sessionLength * 2) {\n                        if (i % 2 == 0) it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.focusTime.toInt()\n                            )\n                                .setColor(cs.primary.toArgb())\n                        )\n                        else if (i != (timerRepository.sessionLength * 2 - 1)) it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.shortBreakTime.toInt()\n                            ).setColor(cs.tertiary.toArgb())\n                        )\n                        else it.addProgressSegment(\n                            NotificationCompat.ProgressStyle.Segment(\n                                timerRepository.longBreakTime.toInt()\n                            ).setColor(cs.tertiary.toArgb())\n                        )\n                    }\n                } else {\n                    it.addProgressSegment(\n                        NotificationCompat.ProgressStyle.Segment(\n                            when (timerState.value.timerMode) {\n                                TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n                                TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n                                else -> timerRepository.longBreakTime.toInt()\n                            }\n                        )\n                    )\n                }\n            }\n    }\n\n    private suspend fun resetTimer() {\n        updateProgressSegments()\n        saveTimeToDb()\n        time = timerRepository.focusTime\n        cycles = 0\n        startTime = 0L\n        pauseTime = 0L\n        pauseDuration = 0L\n\n        _timerState.update { currentState ->\n            currentState.copy(\n                timerMode = TimerMode.FOCUS,\n                timeStr = millisecondsToStr(time),\n                totalTime = time,\n                nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                currentFocusCount = 1,\n                totalFocusCount = timerRepository.sessionLength\n            )\n        }\n    }\n\n    private suspend fun skipTimer(fromButton: Boolean = false) {\n        updateProgressSegments()\n        saveTimeToDb()\n        updateProgressSegments()\n        showTimerNotification(0, paused = true, complete = !fromButton)\n        startTime = 0L\n        pauseTime = 0L\n        pauseDuration = 0L\n\n        cycles = (cycles + 1) % (timerRepository.sessionLength * 2)\n\n        if (cycles % 2 == 0) {\n            if (timerState.value.timerRunning) setDoNotDisturb(true)\n            time = timerRepository.focusTime\n            _timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = TimerMode.FOCUS,\n                    timeStr = millisecondsToStr(time),\n                    totalTime = time,\n                    nextTimerMode = if (cycles == (timerRepository.sessionLength - 1) * 2) TimerMode.LONG_BREAK else TimerMode.SHORT_BREAK,\n                    nextTimeStr = if (cycles == (timerRepository.sessionLength - 1) * 2) millisecondsToStr(\n                        timerRepository.longBreakTime\n                    ) else millisecondsToStr(\n                        timerRepository.shortBreakTime\n                    ),\n                    currentFocusCount = cycles / 2 + 1,\n                    totalFocusCount = timerRepository.sessionLength\n                )\n            }\n        } else {\n            if (timerState.value.timerRunning) setDoNotDisturb(false)\n            val long = cycles == (timerRepository.sessionLength * 2) - 1\n            time = if (long) timerRepository.longBreakTime else timerRepository.shortBreakTime\n\n            _timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = if (long) TimerMode.LONG_BREAK else TimerMode.SHORT_BREAK,\n                    timeStr = millisecondsToStr(time),\n                    totalTime = time,\n                    nextTimerMode = TimerMode.FOCUS,\n                    nextTimeStr = millisecondsToStr(timerRepository.focusTime)\n                )\n            }\n        }\n    }\n\n    fun startAlarm() {\n        if (timerRepository.alarmEnabled) alarm?.start()\n\n        appContainer.activityTurnScreenOn(true)\n\n        autoAlarmStopScope = CoroutineScope(Dispatchers.IO).launch {\n            delay(1 * 60 * 1000)\n            stopAlarm()\n        }\n\n        if (timerRepository.vibrateEnabled) {\n            if (!vibrator.hasVibrator()) {\n                return\n            }\n            val vibrationPattern = longArrayOf(0, 1000, 1000, 1000)\n            val repeat = 2\n            val effect = VibrationEffect.createWaveform(vibrationPattern, repeat)\n            vibrator.vibrate(effect)\n        }\n    }\n\n    fun stopAlarm() {\n        autoAlarmStopScope?.cancel()\n\n        if (timerRepository.alarmEnabled) {\n            alarm?.pause()\n            alarm?.seekTo(0)\n        }\n\n        if (timerRepository.vibrateEnabled) {\n            vibrator.cancel()\n        }\n\n        appContainer.activityTurnScreenOn(false)\n\n        _timerState.update { currentState ->\n            currentState.copy(alarmRinging = false)\n        }\n        notificationBuilder.clearActions().addTimerActions(\n            this, R.drawable.play,\n            getString(R.string.start_next)\n        )\n        showTimerNotification(\n            when (timerState.value.timerMode) {\n                TimerMode.FOCUS -> timerRepository.focusTime.toInt()\n                TimerMode.SHORT_BREAK -> timerRepository.shortBreakTime.toInt()\n                else -> timerRepository.longBreakTime.toInt()\n            }, paused = true, complete = false\n        )\n    }\n\n    private fun initializeMediaPlayer(): MediaPlayer? {\n        return try {\n            MediaPlayer().apply {\n                setAudioAttributes(\n                    AudioAttributes.Builder()\n                        .setContentType(AudioAttributes.CONTENT_TYPE_MUSIC)\n                        .setUsage(AudioAttributes.USAGE_ALARM)\n                        .build()\n                )\n                timerRepository.alarmSoundUri?.let {\n                    setDataSource(applicationContext, it)\n                    prepare()\n                }\n            }\n        } catch (e: Exception) {\n            e.printStackTrace()\n            null\n        }\n    }\n\n    private fun setDoNotDisturb(doNotDisturb: Boolean) {\n        if (timerRepository.dndEnabled && notificationManagerService.isNotificationPolicyAccessGranted()) {\n            if (doNotDisturb) {\n                notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALARMS)\n            } else notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALL)\n        }\n    }\n\n    private fun updateAlarmTone() {\n        alarm?.release()\n        alarm = initializeMediaPlayer()\n    }\n\n    suspend fun saveTimeToDb() {\n        when (timerState.value.timerMode) {\n            TimerMode.FOCUS -> statRepository.addFocusTime(\n                (timerState.value.totalTime - time).coerceAtLeast(\n                    0L\n                )\n            )\n\n            else -> statRepository.addBreakTime((timerState.value.totalTime - time).coerceAtLeast(0L))\n        }\n    }\n\n    private fun startForegroundService() {\n        startForeground(1, notificationBuilder.build())\n    }\n\n    private fun stopForegroundService() {\n        notificationManager.cancel(1)\n        stopForeground(STOP_FOREGROUND_REMOVE)\n        stopSelf()\n    }\n\n    enum class Actions {\n        TOGGLE, SKIP, RESET, STOP_ALARM, UPDATE_ALARM_TONE\n    }\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\TomatoApplication.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro\n\nimport android.app.Application\nimport android.app.NotificationChannel\nimport android.app.NotificationManager\nimport org.nsh07.pomodoro.billing.initializePurchases\nimport org.nsh07.pomodoro.data.AppContainer\nimport org.nsh07.pomodoro.data.DefaultAppContainer\n\nclass TomatoApplication : Application() {\n    lateinit var container: AppContainer\n    override fun onCreate() {\n        super.onCreate()\n        container = DefaultAppContainer(this)\n\n        initializePurchases(this)\n\n        val notificationChannel = NotificationChannel(\n            \"timer\",\n            getString(R.string.timer_progress),\n            NotificationManager.IMPORTANCE_DEFAULT\n        )\n\n        container.notificationManager.createNotificationChannel(notificationChannel)\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\AlwaysOnDisplay.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport android.app.Activity\nimport android.view.WindowManager\nimport androidx.activity.compose.LocalActivity\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.SharedTransitionScope\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.animation.core.animateIntAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.offset\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.CircularProgressIndicator\nimport androidx.compose.material3.CircularWavyProgressIndicator\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.DisposableEffect\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableIntStateOf\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.StrokeCap\nimport androidx.compose.ui.graphics.drawscope.Stroke\nimport androidx.compose.ui.platform.LocalDensity\nimport androidx.compose.ui.platform.LocalView\nimport androidx.compose.ui.platform.LocalWindowInfo\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Density\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.IntOffset\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.core.view.WindowCompat\nimport androidx.core.view.WindowInsetsCompat\nimport androidx.core.view.WindowInsetsControllerCompat\nimport androidx.navigation3.ui.LocalNavAnimatedContentScope\nimport kotlinx.coroutines.delay\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.ui.timerScreen.TimerScreen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport kotlin.random.Random\n\n/**\n * Always On Display composable. Must be called within a [SharedTransitionScope] which allows\n * animating the clock and progress indicator\n *\n * @param timerState [TimerState] instance. This must be the same instance as the one used on the\n * root [TimerScreen] composable\n * @param progress lambda that returns the current progress of the clock\n * randomized offset for the clock to allow smooth motion with sharedBounds\n */\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun SharedTransitionScope.AlwaysOnDisplay(\n    timerState: TimerState,\n    progress: () -> Float,\n    setTimerFrequency: (Float) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    var sharedElementTransitionComplete by remember { mutableStateOf(false) }\n\n    val activity = LocalActivity.current\n    val density = LocalDensity.current\n    val windowInfo = LocalWindowInfo.current\n    val view = LocalView.current\n\n    val window = remember { (view.context as Activity).window }\n    val insetsController = remember { WindowCompat.getInsetsController(window, view) }\n\n    DisposableEffect(Unit) {\n        setTimerFrequency(1f)\n        window.addFlags(\n            WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON or\n                    WindowManager.LayoutParams.FLAG_ALLOW_LOCK_WHILE_SCREEN_ON\n        )\n        activity?.setShowWhenLocked(true)\n        insetsController.apply {\n            hide(WindowInsetsCompat.Type.statusBars())\n            hide(WindowInsetsCompat.Type.navigationBars())\n            systemBarsBehavior =\n                WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE\n        }\n\n        onDispose {\n            setTimerFrequency(60f)\n            window.clearFlags(\n                WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON or\n                        WindowManager.LayoutParams.FLAG_ALLOW_LOCK_WHILE_SCREEN_ON\n            )\n            activity?.setShowWhenLocked(false)\n            insetsController.apply {\n                show(WindowInsetsCompat.Type.statusBars())\n                show(WindowInsetsCompat.Type.navigationBars())\n                systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_DEFAULT\n            }\n        }\n    }\n\n    LaunchedEffect(Unit) {\n        delay(300)\n        sharedElementTransitionComplete = true\n    }\n\n    val primary by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFFA2A2A2)\n        else {\n            if (timerState.timerMode == TimerMode.FOCUS) colorScheme.primary\n            else colorScheme.tertiary\n        },\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val secondaryContainer by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFF1D1D1D)\n        else {\n            if (timerState.timerMode == TimerMode.FOCUS) colorScheme.secondaryContainer\n            else colorScheme.tertiaryContainer\n        },\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val surface by animateColorAsState(\n        if (sharedElementTransitionComplete) Color.Black\n        else colorScheme.surface,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val onSurface by animateColorAsState(\n        if (sharedElementTransitionComplete) Color(0xFFE3E3E3)\n        else colorScheme.onSurface,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n\n    var randomX by remember {\n        mutableIntStateOf(\n            Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.width - 266.dp.toIntPx(density)\n            )\n        )\n    }\n    var randomY by remember {\n        mutableIntStateOf(\n            Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.height - 266.dp.toIntPx(density)\n            )\n        )\n    }\n\n    LaunchedEffect(timerState.timeStr[1]) { // Randomize position every minute\n        if (sharedElementTransitionComplete) {\n            randomX = Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.width - 266.dp.toIntPx(density)\n            )\n            randomY = Random.nextInt(\n                16.dp.toIntPx(density),\n                windowInfo.containerSize.height - 266.dp.toIntPx(density)\n            )\n        }\n    }\n\n    val x by animateIntAsState(randomX, motionScheme.slowSpatialSpec())\n    val y by animateIntAsState(randomY, motionScheme.slowSpatialSpec())\n\n    Box(\n        modifier = modifier\n            .fillMaxSize()\n            .background(surface)\n    ) {\n        Box(\n            contentAlignment = Alignment.Center,\n            modifier = Modifier.offset {\n                IntOffset(x, y)\n            }\n        ) {\n            if (timerState.timerMode == TimerMode.FOCUS) {\n                CircularProgressIndicator(\n                    progress = progress,\n                    modifier = Modifier\n                        .sharedBounds(\n                            sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"focus progress\"),\n                            animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                        )\n                        .size(250.dp),\n                    color = primary,\n                    trackColor = secondaryContainer,\n                    strokeWidth = 12.dp,\n                    gapSize = 8.dp,\n                )\n            } else {\n                CircularWavyProgressIndicator(\n                    progress = progress,\n                    modifier = Modifier\n                        .sharedBounds(\n                            sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"break progress\"),\n                            animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                        )\n                        .size(250.dp),\n                    color = primary,\n                    trackColor = secondaryContainer,\n                    stroke = Stroke(\n                        width = with(LocalDensity.current) {\n                            12.dp.toPx()\n                        },\n                        cap = StrokeCap.Round,\n                    ),\n                    trackStroke = Stroke(\n                        width = with(LocalDensity.current) {\n                            12.dp.toPx()\n                        },\n                        cap = StrokeCap.Round,\n                    ),\n                    wavelength = 42.dp,\n                    gapSize = 8.dp\n                )\n            }\n\n            Text(\n                text = timerState.timeStr,\n                style = TextStyle(\n                    fontFamily = interClock,\n                    fontSize = 56.sp,\n                    letterSpacing = (-2).sp,\n                    fontFeatureSettings = \"tnum\"\n                ),\n                textAlign = TextAlign.Center,\n                color = onSurface,\n                maxLines = 1,\n                modifier = Modifier.sharedBounds(\n                    sharedContentState = this@AlwaysOnDisplay.rememberSharedContentState(\"clock\"),\n                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                )\n            )\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nprivate fun AlwaysOnDisplayPreview() {\n    val timerState = TimerState()\n    val progress = { 0.5f }\n    TomatoTheme {\n        SharedTransitionLayout {\n            AlwaysOnDisplay(\n                timerState = timerState,\n                progress = progress,\n                setTimerFrequency = {}\n            )\n        }\n    }\n}\n\nfun Dp.toIntPx(density: Density) = with(density) { toPx().toInt() }\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\AppScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport android.content.Intent\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.animation.Crossfade\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.slideInVertically\nimport androidx.compose.animation.slideOutVertically\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.calculateEndPadding\nimport androidx.compose.foundation.layout.calculateStartPadding\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.NavigationItemIconPosition\nimport androidx.compose.material3.Scaffold\nimport androidx.compose.material3.ShortNavigationBar\nimport androidx.compose.material3.ShortNavigationBarArrangement\nimport androidx.compose.material3.ShortNavigationBarItem\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.adaptive.currentWindowAdaptiveInfo\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalLayoutDirection\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport androidx.navigation3.runtime.entryProvider\nimport androidx.navigation3.runtime.rememberNavBackStack\nimport androidx.navigation3.ui.NavDisplay\nimport androidx.window.core.layout.WindowSizeClass\nimport org.nsh07.pomodoro.billing.TomatoPlusPaywallDialog\nimport org.nsh07.pomodoro.service.TimerService\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsScreenRoot\nimport org.nsh07.pomodoro.ui.statsScreen.StatsScreenRoot\nimport org.nsh07.pomodoro.ui.timerScreen.AlarmDialog\nimport org.nsh07.pomodoro.ui.timerScreen.TimerScreen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerViewModel\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AppScreen(\n    isAODEnabled: Boolean,\n    isPlus: Boolean,\n    setTimerFrequency: (Float) -> Unit,\n    modifier: Modifier = Modifier,\n    timerViewModel: TimerViewModel = viewModel(factory = TimerViewModel.Factory)\n) {\n    val context = LocalContext.current\n\n    val uiState by timerViewModel.timerState.collectAsStateWithLifecycle()\n    val progress by timerViewModel.progress.collectAsStateWithLifecycle()\n\n    val layoutDirection = LocalLayoutDirection.current\n    val motionScheme = motionScheme\n    val windowSizeClass = currentWindowAdaptiveInfo().windowSizeClass\n\n    val backStack = rememberNavBackStack(Screen.Timer)\n\n    if (uiState.alarmRinging)\n        AlarmDialog {\n            Intent(context, TimerService::class.java).also {\n                it.action = TimerService.Actions.STOP_ALARM.toString()\n                context.startService(it)\n            }\n        }\n\n    var showPaywall by remember { mutableStateOf(false) }\n\n    Scaffold(\n        bottomBar = {\n            AnimatedVisibility(\n                backStack.last() !is Screen.AOD,\n                enter = fadeIn(),\n                exit = fadeOut()\n            ) {\n                val wide = remember {\n                    windowSizeClass.isWidthAtLeastBreakpoint(\n                        WindowSizeClass.WIDTH_DP_MEDIUM_LOWER_BOUND\n                    )\n                }\n                ShortNavigationBar(\n                    arrangement =\n                        if (wide) ShortNavigationBarArrangement.Centered\n                        else ShortNavigationBarArrangement.EqualWeight\n                ) {\n                    mainScreens.forEach {\n                        val selected = backStack.last() == it.route\n                        ShortNavigationBarItem(\n                            selected = selected,\n                            onClick = if (it.route != Screen.Timer) { // Ensure the backstack does not accumulate screens\n                                {\n                                    if (backStack.size < 2) backStack.add(it.route)\n                                    else backStack[1] = it.route\n                                }\n                            } else {\n                                { if (backStack.size > 1) backStack.removeAt(1) }\n                            },\n                            icon = {\n                                Crossfade(selected) { selected ->\n                                    if (selected) Icon(painterResource(it.selectedIcon), null)\n                                    else Icon(painterResource(it.unselectedIcon), null)\n                                }\n                            },\n                            iconPosition =\n                                if (wide) NavigationItemIconPosition.Start\n                                else NavigationItemIconPosition.Top,\n                            label = { Text(stringResource(it.label)) }\n                        )\n                    }\n                }\n            }\n        }\n    ) { contentPadding ->\n        SharedTransitionLayout {\n            NavDisplay(\n                backStack = backStack,\n                onBack = backStack::removeLastOrNull,\n                transitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                popTransitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                predictivePopTransitionSpec = {\n                    fadeIn(motionScheme.defaultEffectsSpec())\n                        .togetherWith(fadeOut(motionScheme.defaultEffectsSpec()))\n                },\n                entryProvider = entryProvider {\n                    entry<Screen.Timer> {\n                        TimerScreen(\n                            timerState = uiState,\n                            isPlus = isPlus,\n                            progress = { progress },\n                            onAction = timerViewModel::onAction,\n                            modifier = modifier\n                                .padding(\n                                    start = contentPadding.calculateStartPadding(layoutDirection),\n                                    end = contentPadding.calculateEndPadding(layoutDirection),\n                                    bottom = contentPadding.calculateBottomPadding()\n                                )\n                                .then(\n                                    if (isAODEnabled) Modifier.clickable {\n                                        if (backStack.size < 2) backStack.add(Screen.AOD)\n                                    }\n                                    else Modifier\n                                ),\n                        )\n                    }\n\n                    entry<Screen.AOD> {\n                        AlwaysOnDisplay(\n                            timerState = uiState,\n                            progress = { progress },\n                            setTimerFrequency = setTimerFrequency,\n                            modifier = Modifier\n                                .then(\n                                    if (isAODEnabled) Modifier.clickable {\n                                        if (backStack.size > 1) backStack.removeLastOrNull()\n                                    }\n                                    else Modifier\n                                )\n                        )\n                    }\n\n                    entry<Screen.Settings.Main> {\n                        SettingsScreenRoot(\n                            setShowPaywall = { showPaywall = it },\n                            modifier = modifier.padding(\n                                start = contentPadding.calculateStartPadding(layoutDirection),\n                                end = contentPadding.calculateEndPadding(layoutDirection),\n                                bottom = contentPadding.calculateBottomPadding()\n                            )\n                        )\n                    }\n\n                    entry<Screen.Stats> {\n                        StatsScreenRoot(\n                            contentPadding = contentPadding,\n                            modifier = modifier.padding(\n                                start = contentPadding.calculateStartPadding(layoutDirection),\n                                end = contentPadding.calculateEndPadding(layoutDirection),\n                                bottom = contentPadding.calculateBottomPadding()\n                            )\n                        )\n                    }\n                }\n            )\n        }\n    }\n\n    AnimatedVisibility(\n        showPaywall,\n        enter = slideInVertically { it },\n        exit = slideOutVertically { it }\n    ) {\n        TomatoPlusPaywallDialog(isPlus = isPlus) { showPaywall = false }\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\Navigation.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport org.nsh07.pomodoro.R\n\nval mainScreens = listOf(\n    NavItem(\n        Screen.Timer,\n        R.drawable.timer_outlined,\n        R.drawable.timer_filled,\n        R.string.timer\n    ),\n    NavItem(\n        Screen.Stats,\n        R.drawable.monitoring,\n        R.drawable.monitoring_filled,\n        R.string.stats\n    ),\n    NavItem(\n        Screen.Settings.Main,\n        R.drawable.settings,\n        R.drawable.settings_filled,\n        R.string.settings\n    )\n)\n\nval settingsScreens = listOf(\n    SettingsNavItem(\n        Screen.Settings.Timer,\n        R.drawable.timer_filled,\n        R.string.timer,\n        listOf(R.string.durations, R.string.session_length, R.string.always_on_display)\n    ),\n    SettingsNavItem(\n        Screen.Settings.Alarm,\n        R.drawable.alarm,\n        R.string.alarm,\n        listOf(R.string.alarm_sound, R.string.alarm, R.string.vibrate)\n    ),\n    SettingsNavItem(\n        Screen.Settings.Appearance,\n        R.drawable.palette,\n        R.string.appearance,\n        listOf(R.string.color_scheme, R.string.theme, R.string.black_theme)\n    )\n)\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\Screen.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui\n\nimport androidx.annotation.DrawableRes\nimport androidx.annotation.StringRes\nimport androidx.navigation3.runtime.NavKey\nimport kotlinx.serialization.Serializable\n\nsealed class Screen : NavKey {\n    @Serializable\n    object Timer : Screen()\n\n    @Serializable\n    object AOD : Screen()\n\n    @Serializable\n    sealed class Settings : Screen() {\n        @Serializable\n        object Main : Settings()\n\n        @Serializable\n        object Alarm : Settings()\n\n        @Serializable\n        object Appearance : Settings()\n\n        @Serializable\n        object Timer : Settings()\n    }\n\n    @Serializable\n    object Stats : Screen()\n}\n\ndata class NavItem(\n    val route: Screen,\n    @param:DrawableRes val unselectedIcon: Int,\n    @param:DrawableRes val selectedIcon: Int,\n    @param:StringRes val label: Int\n)\n\ndata class SettingsNavItem(\n    val route: Screen.Settings,\n    @param:DrawableRes val icon: Int,\n    @param:StringRes val label: Int,\n    val innerSettings: List<Int>\n)\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutCard.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.widget.Toast\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.FlowRow\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.ButtonDefaults\nimport androidx.compose.material3.Card\nimport androidx.compose.material3.CardDefaults\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n// Taken from https://github.com/shub39/Grit/blob/master/app/src/main/java/com/shub39/grit/core/presentation/settings/ui/component/AboutApp.kt\n@Composable\nfun AboutCard(\n    isPlus: Boolean,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    val context = LocalContext.current\n\n    Card(\n        modifier = modifier.fillMaxWidth(),\n        colors = CardDefaults.cardColors(\n            containerColor = colorScheme.primaryContainer,\n            contentColor = colorScheme.onPrimaryContainer\n        ),\n        shape = shapes.extraLarge\n    ) {\n        val buttonColors = ButtonDefaults.buttonColors(\n            containerColor = colorScheme.onPrimaryContainer,\n            contentColor = colorScheme.primaryContainer\n        )\n\n        Row(\n            modifier = Modifier\n                .padding(16.dp)\n                .fillMaxWidth(),\n            verticalAlignment = Alignment.CenterVertically,\n            horizontalArrangement = Arrangement.spacedBy(8.dp)\n        ) {\n            Column {\n                Text(\n                    if (!isPlus) stringResource(R.string.app_name)\n                    else stringResource(R.string.app_name_plus),\n                    style = MaterialTheme.typography.titleLarge,\n                    fontFamily = robotoFlexTopBar\n                )\n                Text(text = \"${BuildConfig.VERSION_NAME} (${BuildConfig.VERSION_CODE})\")\n            }\n\n            Spacer(modifier = Modifier.weight(1f))\n\n            Row {\n                IconButton(\n                    onClick = {\n                        Toast.makeText(context, \"Coming soon...\", Toast.LENGTH_SHORT).show()\n                    }\n                ) {\n                    Icon(\n                        painterResource(R.drawable.discord),\n                        contentDescription = \"Discord\",\n                        modifier = Modifier.size(24.dp)\n                    )\n                }\n\n                IconButton(\n                    onClick = { uriHandler.openUri(\"https://github.com/nsh07/Tomato\") }\n                ) {\n                    Icon(\n                        painterResource(R.drawable.github),\n                        contentDescription = \"GitHub\",\n                        modifier = Modifier.size(24.dp)\n                    )\n                }\n            }\n        }\n\n        FlowRow(\n            modifier = Modifier.padding(start = 16.dp, end = 16.dp, bottom = 16.dp),\n            horizontalArrangement = Arrangement.spacedBy(8.dp)\n        ) {\n            TopButton(buttonColors)\n            BottomButton(buttonColors)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ClickableListItem.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.core.animateDpAsState\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.interaction.MutableInteractionSource\nimport androidx.compose.foundation.interaction.collectIsPressedAsState\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.ListItemColors\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ClickableListItem(\n    headlineContent: @Composable (() -> Unit),\n    modifier: Modifier = Modifier,\n    overlineContent: @Composable (() -> Unit)? = null,\n    supportingContent: @Composable (() -> Unit)? = null,\n    leadingContent: @Composable (() -> Unit)? = null,\n    trailingContent: @Composable (() -> Unit)? = null,\n    colors: ListItemColors = listItemColors,\n    tonalElevation: Dp = ListItemDefaults.Elevation,\n    shadowElevation: Dp = ListItemDefaults.Elevation,\n    items: Int,\n    index: Int,\n    onClick: () -> Unit\n) {\n    val interactionSource = remember { MutableInteractionSource() }\n    val isPressed by interactionSource.collectIsPressedAsState()\n\n    val top by animateDpAsState(\n        if (isPressed) 40.dp\n        else {\n            if (items == 1 || index == 0) 20.dp\n            else 4.dp\n        },\n        motionScheme.fastSpatialSpec()\n    )\n    val bottom by animateDpAsState(\n        if (isPressed) 40.dp\n        else {\n            if (items == 1 || index == items - 1) 20.dp\n            else 4.dp\n        },\n        motionScheme.fastSpatialSpec()\n    )\n\n    ListItem(\n        headlineContent = headlineContent,\n        modifier = modifier\n            .clip(\n                RoundedCornerShape(\n                    topStart = top,\n                    topEnd = top,\n                    bottomStart = bottom,\n                    bottomEnd = bottom\n                )\n            )\n            .clickable(\n                onClick = onClick,\n                interactionSource = interactionSource,\n            ),\n        overlineContent = overlineContent,\n        supportingContent = supportingContent,\n        leadingContent = leadingContent,\n        trailingContent = trailingContent,\n        colors = colors,\n        tonalElevation = tonalElevation,\n        shadowElevation = shadowElevation\n    )\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ColorSchemePickerListItem.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.os.Build\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.PaddingValues\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyRow\nimport androidx.compose.foundation.lazy.items\nimport androidx.compose.foundation.shape.CornerSize\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@Composable\nfun ColorSchemePickerListItem(\n    color: Color,\n    items: Int,\n    index: Int,\n    isPlus: Boolean,\n    onColorChange: (Color) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val colorSchemes = listOf(\n        Color(0xfffeb4a7), Color(0xffffb3c0), Color(0xfffcaaff), Color(0xffb9c3ff),\n        Color(0xff62d3ff), Color(0xff44d9f1), Color(0xff52dbc9), Color(0xff78dd77),\n        Color(0xff9fd75c), Color(0xffc1d02d), Color(0xfffabd00), Color(0xffffb86e),\n        Color.White\n    )\n    val zeroCorner = remember { CornerSize(0) }\n\n    Column(\n        modifier\n            .clip(\n                when (index) {\n                    0 -> topListItemShape\n                    items - 1 -> bottomListItemShape\n                    else -> middleListItemShape\n                }\n            )\n    ) {\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {\n            ListItem(\n                leadingContent = {\n                    Icon(\n                        painterResource(R.drawable.colors),\n                        null\n                    )\n                },\n                headlineContent = { Text(stringResource(R.string.dynamic_color)) },\n                supportingContent = { Text(stringResource(R.string.dynamic_color_desc)) },\n                trailingContent = {\n                    val checked = color == colorSchemes.last()\n                    Switch(\n                        checked = checked,\n                        onCheckedChange = {\n                            if (it) onColorChange(colorSchemes.last())\n                            else onColorChange(colorSchemes.first())\n                        },\n                        enabled = isPlus,\n                        thumbContent = {\n                            if (checked) {\n                                Icon(\n                                    painter = painterResource(R.drawable.check),\n                                    contentDescription = null,\n                                    modifier = Modifier.size(SwitchDefaults.IconSize),\n                                )\n                            } else {\n                                Icon(\n                                    painter = painterResource(R.drawable.clear),\n                                    contentDescription = null,\n                                    modifier = Modifier.size(SwitchDefaults.IconSize),\n                                )\n                            }\n                        },\n                        colors = switchColors\n                    )\n                },\n                colors = listItemColors,\n                modifier = Modifier.clip(middleListItemShape)\n            )\n            Spacer(Modifier.height(2.dp))\n        }\n\n        ListItem(\n            leadingContent = {\n                Icon(\n                    painter = painterResource(R.drawable.palette),\n                    contentDescription = null,\n                    tint = colorScheme.primary\n                )\n            },\n            headlineContent = { Text(stringResource(R.string.color_scheme)) },\n            supportingContent = {\n                Text(\n                    if (color == Color.White) stringResource(R.string.dynamic)\n                    else stringResource(R.string.color)\n                )\n            },\n            colors = listItemColors,\n            modifier = Modifier.clip(\n                RoundedCornerShape(\n                    topStart = middleListItemShape.topStart,\n                    topEnd = middleListItemShape.topEnd,\n                    zeroCorner,\n                    zeroCorner\n                )\n            )\n        )\n\n        LazyRow(\n            contentPadding = PaddingValues(horizontal = 48.dp),\n            userScrollEnabled = isPlus,\n            modifier = Modifier\n                .background(listItemColors.containerColor)\n                .padding(bottom = 8.dp)\n        ) {\n            items(colorSchemes.dropLast(1)) {\n                ColorPickerButton(\n                    color = it,\n                    isSelected = it == color,\n                    enabled = isPlus,\n                    modifier = Modifier.padding(4.dp)\n                ) {\n                    onColorChange(it)\n                }\n            }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ColorPickerButton(\n    color: Color,\n    isSelected: Boolean,\n    enabled: Boolean,\n    modifier: Modifier = Modifier,\n    onClick: () -> Unit\n) {\n    IconButton(\n        shapes = IconButtonDefaults.shapes(),\n        colors = IconButtonDefaults.iconButtonColors(\n            containerColor = color,\n            disabledContainerColor = color.copy(0.3f)\n        ),\n        enabled = enabled,\n        modifier = modifier.size(48.dp),\n        onClick = onClick\n    ) {\n        AnimatedContent(isSelected) { isSelected ->\n            when (isSelected) {\n                true -> Icon(\n                    painterResource(R.drawable.check),\n                    tint = Color.Black,\n                    contentDescription = null\n                )\n\n                else ->\n                    if (color == Color.White) Icon(\n                        painterResource(R.drawable.colors),\n                        tint = Color.Black,\n                        contentDescription = null\n                    )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\LocaleBottomSheet.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport android.app.LocaleConfig\nimport android.app.LocaleManager\nimport android.os.Build\nimport android.os.LocaleList\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.lazy.rememberLazyListState\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.ModalBottomSheet\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.rememberModalBottomSheetState\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.rememberCoroutineScope\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\nimport java.util.Locale\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun LocaleBottomSheet(\n    currentLocales: LocaleList,\n    setShowSheet: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val context = LocalContext.current\n    val scope = rememberCoroutineScope()\n\n    val supportedLocales = remember {\n        if (Build.VERSION.SDK_INT >= 33) {\n            LocaleConfig(context).supportedLocales\n        } else null\n    }\n    val supportedLocalesSize = supportedLocales?.size() ?: 0\n\n    val supportedLocalesList: List<AppLocale>? = remember {\n        if (supportedLocales != null) {\n            buildList {\n                for (i in 0 until supportedLocalesSize) {\n                    add(AppLocale(supportedLocales.get(i), supportedLocales.get(i).displayName))\n                }\n                sortWith(compareBy { it.name })\n            }\n        } else null\n    }\n\n    val bottomSheetState = rememberModalBottomSheetState()\n    val listState = rememberLazyListState()\n\n    ModalBottomSheet(\n        onDismissRequest = { setShowSheet(false) },\n        sheetState = bottomSheetState,\n        modifier = modifier\n    ) {\n        Column(horizontalAlignment = Alignment.CenterHorizontally) {\n            Text(\n                text = stringResource(R.string.choose_language),\n                style = MaterialTheme.typography.labelLarge,\n                modifier = Modifier.padding(bottom = 16.dp)\n            )\n            if (supportedLocalesList != null) {\n                LazyColumn(\n                    verticalArrangement = Arrangement.spacedBy(2.dp),\n                    state = listState,\n                    modifier = Modifier\n                        .padding(horizontal = 16.dp)\n                        .clip(shapes.largeIncreased)\n                ) {\n                    item {\n                        ListItem(\n                            headlineContent = {\n                                Text(stringResource(R.string.system_default))\n                            },\n                            trailingContent = {\n                                if (currentLocales.isEmpty)\n                                    Icon(\n                                        painterResource(R.drawable.check),\n                                        contentDescription = stringResource(R.string.selected)\n                                    )\n                            },\n                            colors =\n                                if (currentLocales.isEmpty)\n                                    ListItemDefaults.colors(\n                                        containerColor = colorScheme.primaryContainer.copy(\n                                            0.3f\n                                        )\n                                    )\n                                else listItemColors,\n                            modifier = Modifier\n                                .clip(if (currentLocales.isEmpty) CircleShape else shapes.largeIncreased)\n                                .clickable(\n                                    onClick = {\n                                        scope\n                                            .launch { bottomSheetState.hide() }\n                                            .invokeOnCompletion {\n                                                if (Build.VERSION.SDK_INT >= 33) {\n                                                    context\n                                                        .getSystemService(LocaleManager::class.java)\n                                                        .applicationLocales = LocaleList()\n                                                }\n                                                setShowSheet(false)\n                                            }\n                                    }\n                                )\n                        )\n                    }\n                    item {\n                        Spacer(Modifier.height(12.dp))\n                    }\n                    itemsIndexed(\n                        supportedLocalesList,\n                        key = { _: Int, it: AppLocale -> it.name }\n                    ) { index, it ->\n                        ListItem(\n                            headlineContent = {\n                                Text(it.name)\n                            },\n                            trailingContent = {\n                                if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                    Icon(\n                                        painterResource(R.drawable.check),\n                                        tint = colorScheme.primary,\n                                        contentDescription = stringResource(R.string.selected)\n                                    )\n                            },\n                            colors =\n                                if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                    ListItemDefaults.colors(containerColor = colorScheme.primaryContainer)\n                                else listItemColors,\n                            modifier = Modifier\n                                .clip(\n                                    if (!currentLocales.isEmpty && it.locale == currentLocales.get(0))\n                                        CircleShape\n                                    else when (index) {\n                                        0 -> topListItemShape\n                                        supportedLocalesSize - 1 -> bottomListItemShape\n                                        else -> middleListItemShape\n                                    }\n                                )\n                                .clickable(\n                                    onClick = {\n                                        scope\n                                            .launch { bottomSheetState.hide() }\n                                            .invokeOnCompletion { _ ->\n                                                if (Build.VERSION.SDK_INT >= 33) {\n                                                    context.getSystemService(LocaleManager::class.java)\n                                                        .applicationLocales =\n                                                        LocaleList(it.locale)\n                                                }\n                                                setShowSheet(false)\n                                            }\n                                    }\n                                )\n                        )\n                    }\n                }\n            }\n        }\n    }\n}\n\ndata class AppLocale(\n    val locale: Locale,\n    val name: String\n)"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\MinuteInputField.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.text.BasicTextField\nimport androidx.compose.foundation.text.KeyboardOptions\nimport androidx.compose.foundation.text.input.TextFieldLineLimits\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Shape\nimport androidx.compose.ui.graphics.SolidColor\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.input.ImeAction\nimport androidx.compose.ui.text.input.KeyboardType\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun MinuteInputField(\n    state: TextFieldState,\n    enabled: Boolean,\n    shape: Shape,\n    modifier: Modifier = Modifier,\n    imeAction: ImeAction = ImeAction.Next\n) {\n    BasicTextField(\n        state = state,\n        enabled = enabled,\n        lineLimits = TextFieldLineLimits.SingleLine,\n        inputTransformation = MinutesInputTransformation,\n//        outputTransformation = MinutesOutputTransformation,\n        keyboardOptions = KeyboardOptions(\n            keyboardType = KeyboardType.NumberPassword,\n            imeAction = imeAction\n        ),\n        textStyle = TextStyle(\n            fontFamily = interClock,\n            fontSize = 57.sp,\n            letterSpacing = (-2).sp,\n            color = if (enabled) colorScheme.onSurfaceVariant else colorScheme.outlineVariant,\n            textAlign = TextAlign.Center\n        ),\n        cursorBrush = SolidColor(colorScheme.onSurface),\n        decorator = { innerTextField ->\n            Box(\n                contentAlignment = Alignment.Center,\n                modifier = modifier\n                    .size(112.dp, 100.dp)\n                    .background(\n                        animateColorAsState(\n                            if (state.text.isNotEmpty())\n                                listItemColors.containerColor\n                            else colorScheme.errorContainer,\n                            motionScheme.defaultEffectsSpec()\n                        ).value,\n                        shape\n                    )\n            ) { innerTextField() }\n        }\n    )\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\MinutesTransformation.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.text.input.InputTransformation\nimport androidx.compose.foundation.text.input.TextFieldBuffer\nimport androidx.core.text.isDigitsOnly\n\nobject MinutesInputTransformation : InputTransformation {\n    override fun TextFieldBuffer.transformInput() {\n        if (!this.asCharSequence().isDigitsOnly() || this.length > 2) {\n            revertAllChanges()\n        }\n    }\n}\n\n//object MinutesOutputTransformation : OutputTransformation {\n//    override fun TextFieldBuffer.transformOutput() {\n//        when (this.length) {\n//            0 -> insert(0, \"00\")\n//            1 -> insert(0, \"0\")\n//        }\n//    }\n//}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\PlusDivider.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.HorizontalDivider\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.unit.dp\n\n@Composable\nfun PlusDivider(\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    Box(contentAlignment = Alignment.Center, modifier = modifier.padding(vertical = 14.dp)) {\n        HorizontalDivider(modifier = Modifier.clip(CircleShape), thickness = 4.dp)\n        Button(\n            onClick = { setShowPaywall(true) },\n            modifier = Modifier\n                .background(colorScheme.surfaceContainer)\n                .padding(horizontal = 8.dp)\n        ) {\n            Text(\"Customize further with Tomato+\", style = typography.titleSmall)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\PlusPromo.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\n\n@Composable\nfun PlusPromo(\n    isPlus: Boolean,\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val container = if (isPlus) colorScheme.surfaceBright else colorScheme.primary\n    val onContainer = if (isPlus) colorScheme.onSurface else colorScheme.onPrimary\n    val onContainerVariant = if (isPlus) colorScheme.onSurfaceVariant else colorScheme.onPrimary\n\n    Row(\n        verticalAlignment = Alignment.CenterVertically,\n        modifier = modifier\n            .clip(CircleShape)\n            .background(container)\n            .padding(16.dp)\n            .clickable { setShowPaywall(true) }\n    ) {\n        Icon(\n            painterResource(R.drawable.tomato_logo_notification),\n            null,\n            tint = onContainerVariant,\n            modifier = Modifier\n                .size(24.dp)\n        )\n        Spacer(Modifier.width(8.dp))\n        Text(\n            if (!isPlus) stringResource(R.string.get_plus)\n            else stringResource(R.string.app_name_plus),\n            style = typography.titleLarge,\n            fontFamily = robotoFlexTopBar,\n            color = onContainer\n        )\n        Spacer(Modifier.weight(1f))\n        Icon(\n            painterResource(R.drawable.arrow_forward_big),\n            null,\n            tint = onContainerVariant\n        )\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\ThemePickerListItem.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.ButtonGroupDefaults\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.ToggleButton\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.semantics.Role\nimport androidx.compose.ui.semantics.role\nimport androidx.compose.ui.semantics.semantics\nimport androidx.compose.ui.text.style.TextOverflow\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.cardShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun ThemePickerListItem(\n    theme: String,\n    items: Int,\n    index: Int,\n    onThemeChange: (String) -> Unit,\n    modifier: Modifier = Modifier,\n) {\n    val themeMap: Map<String, Pair<Int, Int>> = remember {\n        mapOf(\n            \"auto\" to Pair(\n                R.drawable.brightness_auto,\n                R.string.system_default\n            ),\n            \"light\" to Pair(R.drawable.light_mode, R.string.light),\n            \"dark\" to Pair(R.drawable.dark_mode, R.string.dark)\n        )\n    }\n\n    Column(\n        modifier\n            .clip(\n                if (items > 1)\n                    when (index) {\n                        0 -> topListItemShape\n                        items - 1 -> bottomListItemShape\n                        else -> middleListItemShape\n                    }\n                else cardShape,\n            ),\n    ) {\n        ListItem(\n            leadingContent = {\n                AnimatedContent(themeMap[theme]!!.first) {\n                    Icon(\n                        painter = painterResource(it),\n                        contentDescription = null,\n                    )\n                }\n            },\n            headlineContent = { Text(stringResource(R.string.theme)) },\n            colors = listItemColors,\n        )\n\n        val options = themeMap.toList()\n        val selectedIndex = options.indexOf(Pair(theme, themeMap[theme]))\n\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(ButtonGroupDefaults.ConnectedSpaceBetween),\n            modifier = Modifier\n                .background(listItemColors.containerColor)\n                .padding(start = 52.dp, end = 16.dp, bottom = 8.dp)\n        ) {\n            options.forEachIndexed { index, theme ->\n                val isSelected = selectedIndex == index\n                ToggleButton(\n                    checked = isSelected,\n                    onCheckedChange = { onThemeChange(theme.first) },\n                    modifier = Modifier\n                        .weight(1f)\n                        .semantics { role = Role.RadioButton },\n                    shapes =\n                        when (index) {\n                            0 -> ButtonGroupDefaults.connectedLeadingButtonShapes()\n                            options.lastIndex -> ButtonGroupDefaults.connectedTrailingButtonShapes()\n                            else -> ButtonGroupDefaults.connectedMiddleButtonShapes()\n                        },\n                ) {\n                    Text(\n                        stringResource(theme.second.second),\n                        maxLines = 1,\n                        overflow = TextOverflow.Ellipsis\n                    )\n                }\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\AlarmSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport android.annotation.SuppressLint\nimport android.app.Activity\nimport android.content.Intent\nimport android.media.RingtoneManager\nimport android.net.Uri\nimport android.os.Build\nimport androidx.activity.compose.rememberLauncherForActivityResult\nimport androidx.activity.result.contract.ActivityResultContracts\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.core.net.toUri\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.withContext\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AlarmSettings(\n    settingsState: SettingsState,\n    onAction: (SettingsAction) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n    val context = LocalContext.current\n\n    var alarmName by remember { mutableStateOf(\"...\") }\n\n    LaunchedEffect(settingsState.alarmSound) {\n        withContext(Dispatchers.IO) {\n            alarmName =\n                RingtoneManager.getRingtone(context, settingsState.alarmSound.toUri())\n                    ?.getTitle(context) ?: \"\"\n        }\n    }\n\n    val ringtonePickerLauncher = rememberLauncherForActivityResult(\n        contract = ActivityResultContracts.StartActivityForResult()\n    ) { result ->\n        if (result.resultCode == Activity.RESULT_OK) {\n            val uri =\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU) {\n                    result.data?.getParcelableExtra(\n                        RingtoneManager.EXTRA_RINGTONE_PICKED_URI,\n                        Uri::class.java\n                    )\n                } else {\n                    @Suppress(\"DEPRECATION\")\n                    result.data?.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI)\n                }\n            onAction(SettingsAction.SaveAlarmSound(uri))\n        }\n    }\n\n    @SuppressLint(\"LocalContextGetResourceValueCall\")\n    val ringtonePickerIntent = remember(settingsState.alarmSound) {\n        Intent(RingtoneManager.ACTION_RINGTONE_PICKER).apply {\n            putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_ALARM)\n            putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, context.getString(R.string.alarm_sound))\n            putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, settingsState.alarmSound.toUri())\n        }\n    }\n\n    val switchItems = remember(\n        settingsState.blackTheme,\n        settingsState.aodEnabled,\n        settingsState.alarmEnabled,\n        settingsState.vibrateEnabled\n    ) {\n        listOf(\n            SettingsSwitchItem(\n                checked = settingsState.alarmEnabled,\n                icon = R.drawable.alarm_on,\n                label = R.string.sound,\n                description = R.string.alarm_desc,\n                onClick = { onAction(SettingsAction.SaveAlarmEnabled(it)) }\n            ),\n            SettingsSwitchItem(\n                checked = settingsState.vibrateEnabled,\n                icon = R.drawable.mobile_vibrate,\n                label = R.string.vibrate,\n                description = R.string.vibrate_desc,\n                onClick = { onAction(SettingsAction.SaveVibrateEnabled(it)) }\n            )\n        )\n    }\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.alarm), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                Spacer(Modifier.height(14.dp))\n            }\n\n            item {\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(R.drawable.alarm), null)\n                    },\n                    headlineContent = { Text(stringResource(R.string.alarm_sound)) },\n                    supportingContent = { Text(alarmName) },\n                    colors = listItemColors,\n                    modifier = Modifier\n                        .clip(topListItemShape)\n                        .clickable(onClick = { ringtonePickerLauncher.launch(ringtonePickerIntent) })\n                )\n            }\n            itemsIndexed(switchItems) { index, item ->\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(item.icon), contentDescription = null)\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            onCheckedChange = { item.onClick(it) },\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier\n                        .clip(\n                            when (index) {\n                                switchItems.lastIndex -> bottomListItemShape\n                                else -> middleListItemShape\n                            }\n                        )\n                )\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nfun AlarmSettingsPreview() {\n    val settingsState = SettingsState()\n    AlarmSettings(\n        settingsState = settingsState,\n        onAction = {},\n        onBack = {}\n    )\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\AppearanceSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ColorSchemePickerListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusDivider\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ThemePickerListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.toColor\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun AppearanceSettings(\n    settingsState: SettingsState,\n    isPlus: Boolean,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.appearance), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                Spacer(Modifier.height(14.dp))\n            }\n            item {\n                ThemePickerListItem(\n                    theme = settingsState.theme,\n                    onThemeChange = { onAction(SettingsAction.SaveTheme(it)) },\n                    items = if (isPlus) 3 else 1,\n                    index = 0\n                )\n            }\n\n            if (!isPlus) {\n                item { PlusDivider(setShowPaywall) }\n            }\n\n            item {\n                ColorSchemePickerListItem(\n                    color = settingsState.colorScheme.toColor(),\n                    items = 3,\n                    index = if (isPlus) 1 else 0,\n                    isPlus = isPlus,\n                    onColorChange = { onAction(SettingsAction.SaveColorScheme(it)) },\n                )\n            }\n            item {\n                val item = SettingsSwitchItem(\n                    checked = settingsState.blackTheme,\n                    icon = R.drawable.contrast,\n                    label = R.string.black_theme,\n                    description = R.string.black_theme_desc,\n                    onClick = { onAction(SettingsAction.SaveBlackTheme(it)) }\n                )\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(item.icon), contentDescription = null)\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            onCheckedChange = { item.onClick(it) },\n                            enabled = isPlus,\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(bottomListItemShape)\n                )\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@Preview\n@Composable\nfun AppearanceSettingsPreview() {\n    val settingsState = SettingsState()\n    TomatoTheme(dynamicColor = false) {\n        AppearanceSettings(\n            settingsState = settingsState,\n            isPlus = false,\n            onAction = {},\n            setShowPaywall = {},\n            onBack = {}\n        )\n    }\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\screens\\TimerSettings.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.screens\n\nimport android.app.NotificationManager\nimport android.content.Context\nimport android.content.Intent\nimport android.provider.Settings\nimport android.widget.Toast\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.horizontalScroll\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.items\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.rememberScrollState\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.foundation.text.input.rememberTextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledTonalIconToggleButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.LargeFlexibleTopAppBar\nimport androidx.compose.material3.ListItem\nimport androidx.compose.material3.LocalContentColor\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Slider\nimport androidx.compose.material3.SliderState\nimport androidx.compose.material3.Switch\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.material3.rememberSliderState\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.CompositionLocalProvider\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.input.ImeAction\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.settingsScreen.SettingsSwitchItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.MinuteInputField\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusDivider\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.switchColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.bottomListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.cardShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.middleListItemShape\nimport org.nsh07.pomodoro.ui.theme.TomatoShapeDefaults.topListItemShape\n\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimerSettings(\n    isPlus: Boolean,\n    serviceRunning: Boolean,\n    settingsState: SettingsState,\n    focusTimeInputFieldState: TextFieldState,\n    shortBreakTimeInputFieldState: TextFieldState,\n    longBreakTimeInputFieldState: TextFieldState,\n    sessionsSliderState: SliderState,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    onBack: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n    val context = LocalContext.current\n    val appName = stringResource(R.string.app_name)\n    val notificationManagerService =\n        remember { context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager }\n\n    val switchItems = listOf(\n        SettingsSwitchItem(\n            checked = settingsState.dndEnabled,\n            enabled = !serviceRunning,\n            icon = R.drawable.dnd,\n            label = R.string.dnd,\n            description = R.string.dnd_desc,\n            onClick = {\n                if (it && !notificationManagerService.isNotificationPolicyAccessGranted()) {\n                    val intent = Intent(Settings.ACTION_NOTIFICATION_POLICY_ACCESS_SETTINGS)\n                    Toast.makeText(context, \"Enable permission for \\\"$appName\\\"\", Toast.LENGTH_LONG)\n                        .show()\n                    context.startActivity(intent)\n                } else if (!it && notificationManagerService.isNotificationPolicyAccessGranted()) {\n                    notificationManagerService.setInterruptionFilter(NotificationManager.INTERRUPTION_FILTER_ALL)\n                }\n                onAction(SettingsAction.SaveDndEnabled(it))\n            }\n        ),\n        SettingsSwitchItem(\n            checked = settingsState.aodEnabled,\n            icon = R.drawable.aod,\n            label = R.string.always_on_display,\n            description = R.string.always_on_display_desc,\n            onClick = { onAction(SettingsAction.SaveAodEnabled(it)) }\n        )\n    )\n\n    Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        LargeFlexibleTopAppBar(\n            title = {\n                Text(stringResource(R.string.timer), fontFamily = robotoFlexTopBar)\n            },\n            subtitle = {\n                Text(stringResource(R.string.settings))\n            },\n            navigationIcon = {\n                IconButton(onBack) {\n                    Icon(\n                        painterResource(R.drawable.arrow_back),\n                        null\n                    )\n                }\n            },\n            colors = topBarColors,\n            scrollBehavior = scrollBehavior\n        )\n\n        LazyColumn(\n            verticalArrangement = Arrangement.spacedBy(2.dp),\n            modifier = Modifier\n                .background(topBarColors.containerColor)\n                .fillMaxSize()\n                .padding(horizontal = 16.dp)\n        ) {\n            item {\n                CompositionLocalProvider(LocalContentColor provides colorScheme.error) {\n                    AnimatedVisibility(serviceRunning) {\n                        Column {\n                            Spacer(Modifier.height(8.dp))\n                            Row(\n                                verticalAlignment = Alignment.CenterVertically,\n                                horizontalArrangement = Arrangement.spacedBy(8.dp)\n                            ) {\n                                Icon(painterResource(R.drawable.info), null)\n                                Text(stringResource(R.string.timer_settings_reset_info))\n                            }\n                        }\n                    }\n                }\n                Spacer(Modifier.height(14.dp))\n            }\n            item {\n                Row(\n                    horizontalArrangement = Arrangement.Center,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .horizontalScroll(rememberScrollState())\n                ) {\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.focus),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = focusTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(\n                                topStart = topListItemShape.topStart,\n                                bottomStart = topListItemShape.topStart,\n                                topEnd = topListItemShape.bottomStart,\n                                bottomEnd = topListItemShape.bottomStart\n                            ),\n                            imeAction = ImeAction.Next\n                        )\n                    }\n                    Spacer(Modifier.width(2.dp))\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.short_break),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = shortBreakTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(middleListItemShape.topStart),\n                            imeAction = ImeAction.Next\n                        )\n                    }\n                    Spacer(Modifier.width(2.dp))\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(2.dp)\n                    ) {\n                        Text(\n                            stringResource(R.string.long_break),\n                            style = typography.titleSmallEmphasized\n                        )\n                        MinuteInputField(\n                            state = longBreakTimeInputFieldState,\n                            enabled = !serviceRunning,\n                            shape = RoundedCornerShape(\n                                topStart = bottomListItemShape.topStart,\n                                bottomStart = bottomListItemShape.topStart,\n                                topEnd = bottomListItemShape.bottomStart,\n                                bottomEnd = bottomListItemShape.bottomStart\n                            ),\n                            imeAction = ImeAction.Done\n                        )\n                    }\n                }\n            }\n            item {\n                Spacer(Modifier.height(12.dp))\n            }\n            item {\n                ListItem(\n                    leadingContent = {\n                        Icon(painterResource(R.drawable.clocks), null)\n                    },\n                    headlineContent = {\n                        Text(stringResource(R.string.session_length))\n                    },\n                    supportingContent = {\n                        Column {\n                            Text(\n                                stringResource(\n                                    R.string.session_length_desc,\n                                    sessionsSliderState.value.toInt()\n                                )\n                            )\n                            Slider(\n                                state = sessionsSliderState,\n                                enabled = !serviceRunning,\n                                modifier = Modifier.padding(vertical = 4.dp)\n                            )\n                        }\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(cardShape)\n                )\n            }\n            item { Spacer(Modifier.height(12.dp)) }\n\n            itemsIndexed(if (isPlus) switchItems else switchItems.take(1)) { index, item ->\n                ListItem(\n                    leadingContent = {\n                        Icon(\n                            painterResource(item.icon),\n                            contentDescription = null,\n                            modifier = Modifier.padding(top = 4.dp)\n                        )\n                    },\n                    headlineContent = { Text(stringResource(item.label)) },\n                    supportingContent = { Text(stringResource(item.description)) },\n                    trailingContent = {\n                        Switch(\n                            checked = item.checked,\n                            enabled = item.enabled,\n                            onCheckedChange = { item.onClick(it) },\n                            thumbContent = {\n                                if (item.checked) {\n                                    Icon(\n                                        painter = painterResource(R.drawable.check),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                } else {\n                                    Icon(\n                                        painter = painterResource(R.drawable.clear),\n                                        contentDescription = null,\n                                        modifier = Modifier.size(SwitchDefaults.IconSize),\n                                    )\n                                }\n                            },\n                            colors = switchColors\n                        )\n                    },\n                    colors = listItemColors,\n                    modifier = Modifier.clip(\n                        if (isPlus) when (index) {\n                            0 -> topListItemShape\n                            switchItems.size - 1 -> bottomListItemShape\n                            else -> middleListItemShape\n                        }\n                        else cardShape\n                    )\n                )\n            }\n\n            if (!isPlus) {\n                item {\n                    PlusDivider(setShowPaywall)\n                }\n                items(switchItems.drop(1)) { item ->\n                    ListItem(\n                        leadingContent = {\n                            Icon(\n                                painterResource(item.icon),\n                                contentDescription = null,\n                                modifier = Modifier.padding(top = 4.dp)\n                            )\n                        },\n                        headlineContent = { Text(stringResource(item.label)) },\n                        supportingContent = { Text(stringResource(item.description)) },\n                        trailingContent = {\n                            Switch(\n                                checked = item.checked,\n                                onCheckedChange = { item.onClick(it) },\n                                enabled = isPlus,\n                                thumbContent = {\n                                    if (item.checked) {\n                                        Icon(\n                                            painter = painterResource(R.drawable.check),\n                                            contentDescription = null,\n                                            modifier = Modifier.size(SwitchDefaults.IconSize),\n                                        )\n                                    } else {\n                                        Icon(\n                                            painter = painterResource(R.drawable.clear),\n                                            contentDescription = null,\n                                            modifier = Modifier.size(SwitchDefaults.IconSize),\n                                        )\n                                    }\n                                },\n                                colors = switchColors\n                            )\n                        },\n                        colors = listItemColors,\n                        modifier = Modifier.clip(cardShape)\n                    )\n                }\n            }\n\n            item {\n                var expanded by remember { mutableStateOf(false) }\n                Column(\n                    horizontalAlignment = Alignment.End,\n                    modifier = Modifier\n                        .padding(vertical = 6.dp)\n                        .fillMaxWidth()\n                ) {\n                    FilledTonalIconToggleButton(\n                        checked = expanded,\n                        onCheckedChange = { expanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier.width(52.dp)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.info),\n                            null\n                        )\n                    }\n                    AnimatedVisibility(expanded) {\n                        Text(\n                            stringResource(R.string.pomodoro_info),\n                            style = typography.bodyMedium,\n                            color = colorScheme.onSurfaceVariant,\n                            modifier = Modifier.padding(8.dp)\n                        )\n                    }\n                }\n            }\n\n            item { Spacer(Modifier.height(12.dp)) }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Preview\n@Composable\nprivate fun TimerSettingsPreview() {\n    val focusTimeInputFieldState = rememberTextFieldState(\"25\")\n    val shortBreakTimeInputFieldState = rememberTextFieldState(\"5\")\n    val longBreakTimeInputFieldState = rememberTextFieldState(\"15\")\n    val sessionsSliderState = rememberSliderState(\n        value = 4f,\n        valueRange = 1f..8f,\n        steps = 6\n    )\n    TimerSettings(\n        isPlus = false,\n        serviceRunning = true,\n        settingsState = remember { SettingsState() },\n        focusTimeInputFieldState = focusTimeInputFieldState,\n        shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n        longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n        sessionsSliderState = sessionsSliderState,\n        onAction = {},\n        setShowPaywall = {},\n        onBack = {}\n    )\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\SettingsScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "STATE",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen\n\nimport android.annotation.SuppressLint\nimport android.app.LocaleManager\nimport android.os.Build\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.slideInHorizontally\nimport androidx.compose.animation.slideOutHorizontally\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.itemsIndexed\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.LocalTextStyle\nimport androidx.compose.material3.SliderState\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.DisposableEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.saveable.rememberSaveable\nimport androidx.compose.runtime.setValue\nimport androidx.compose.runtime.snapshots.SnapshotStateList\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextOverflow\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport androidx.navigation3.runtime.entryProvider\nimport androidx.navigation3.ui.NavDisplay\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.Screen\nimport org.nsh07.pomodoro.ui.settingsScreen.components.AboutCard\nimport org.nsh07.pomodoro.ui.settingsScreen.components.ClickableListItem\nimport org.nsh07.pomodoro.ui.settingsScreen.components.LocaleBottomSheet\nimport org.nsh07.pomodoro.ui.settingsScreen.components.PlusPromo\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.AlarmSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.AppearanceSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.screens.TimerSettings\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsAction\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsState\nimport org.nsh07.pomodoro.ui.settingsScreen.viewModel.SettingsViewModel\nimport org.nsh07.pomodoro.ui.settingsScreens\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.CustomColors.listItemColors\nimport org.nsh07.pomodoro.ui.theme.CustomColors.topBarColors\n\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Composable\nfun SettingsScreenRoot(\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier,\n    viewModel: SettingsViewModel = viewModel(factory = SettingsViewModel.Factory)\n) {\n    val backStack = viewModel.backStack\n\n    DisposableEffect(Unit) {\n        viewModel.runTextFieldFlowCollection()\n        onDispose { viewModel.cancelTextFieldFlowCollection() }\n    }\n\n    val focusTimeInputFieldState = viewModel.focusTimeTextFieldState\n    val shortBreakTimeInputFieldState = viewModel.shortBreakTimeTextFieldState\n    val longBreakTimeInputFieldState = viewModel.longBreakTimeTextFieldState\n\n    val isPlus by viewModel.isPlus.collectAsStateWithLifecycle()\n    val serviceRunning by viewModel.serviceRunning.collectAsStateWithLifecycle()\n\n    val settingsState by viewModel.settingsState.collectAsStateWithLifecycle()\n\n    val sessionsSliderState = rememberSaveable(\n        saver = SliderState.Saver(\n            viewModel.sessionsSliderState.onValueChangeFinished,\n            viewModel.sessionsSliderState.valueRange\n        )\n    ) {\n        viewModel.sessionsSliderState\n    }\n\n    SettingsScreen(\n        isPlus = isPlus,\n        serviceRunning = serviceRunning,\n        settingsState = settingsState,\n        backStack = backStack,\n        focusTimeInputFieldState = focusTimeInputFieldState,\n        shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n        longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n        sessionsSliderState = sessionsSliderState,\n        onAction = viewModel::onAction,\n        setShowPaywall = setShowPaywall,\n        modifier = modifier\n    )\n}\n\n@SuppressLint(\"LocalContextGetResourceValueCall\")\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nprivate fun SettingsScreen(\n    isPlus: Boolean,\n    serviceRunning: Boolean,\n    settingsState: SettingsState,\n    backStack: SnapshotStateList<Screen.Settings>,\n    focusTimeInputFieldState: TextFieldState,\n    shortBreakTimeInputFieldState: TextFieldState,\n    longBreakTimeInputFieldState: TextFieldState,\n    sessionsSliderState: SliderState,\n    onAction: (SettingsAction) -> Unit,\n    setShowPaywall: (Boolean) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val context = LocalContext.current\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    val currentLocales =\n        if (Build.VERSION.SDK_INT >= 33) {\n            context\n                .getSystemService(LocaleManager::class.java)\n                .applicationLocales\n        } else null\n    val currentLocalesSize = currentLocales?.size() ?: 0\n\n    var showLocaleSheet by remember { mutableStateOf(false) }\n\n    if (showLocaleSheet && currentLocales != null)\n        LocaleBottomSheet(\n            currentLocales = currentLocales,\n            setShowSheet = { showLocaleSheet = it }\n        )\n\n    NavDisplay(\n        backStack = backStack,\n        onBack = backStack::removeLastOrNull,\n        transitionSpec = {\n            (slideInHorizontally(initialOffsetX = { it }))\n                .togetherWith(slideOutHorizontally(targetOffsetX = { -it / 4 }) + fadeOut())\n        },\n        popTransitionSpec = {\n            (slideInHorizontally(initialOffsetX = { -it / 4 }) + fadeIn())\n                .togetherWith(slideOutHorizontally(targetOffsetX = { it }))\n        },\n        predictivePopTransitionSpec = {\n            (slideInHorizontally(initialOffsetX = { -it / 4 }) + fadeIn())\n                .togetherWith(slideOutHorizontally(targetOffsetX = { it }))\n        },\n        entryProvider = entryProvider {\n            entry<Screen.Settings.Main> {\n                Column(modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n                    TopAppBar(\n                        title = {\n                            Text(\n                                stringResource(R.string.settings),\n                                style = LocalTextStyle.current.copy(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp\n                                )\n                            )\n                        },\n                        subtitle = {},\n                        colors = topBarColors,\n                        titleHorizontalAlignment = Alignment.CenterHorizontally,\n                        scrollBehavior = scrollBehavior\n                    )\n\n                    LazyColumn(\n                        verticalArrangement = Arrangement.spacedBy(2.dp),\n                        modifier = Modifier\n                            .background(topBarColors.containerColor)\n                            .fillMaxSize()\n                            .padding(horizontal = 16.dp)\n                    ) {\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (!isPlus) item {\n                            PlusPromo(isPlus, setShowPaywall)\n                            Spacer(Modifier.height(14.dp))\n                        }\n\n                        item { AboutCard(isPlus) }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (isPlus) item {\n                            PlusPromo(isPlus, setShowPaywall)\n                            Spacer(Modifier.height(14.dp))\n                        }\n\n                        itemsIndexed(settingsScreens) { index, item ->\n                            ClickableListItem(\n                                leadingContent = {\n                                    Icon(painterResource(item.icon), null)\n                                },\n                                headlineContent = { Text(stringResource(item.label)) },\n                                supportingContent = {\n                                    Text(\n                                        remember {\n                                            item.innerSettings.joinToString(\", \") {\n                                                context.getString(it)\n                                            }\n                                        },\n                                        maxLines = 1,\n                                        overflow = TextOverflow.Ellipsis\n                                    )\n                                },\n                                trailingContent = {\n                                    Icon(painterResource(R.drawable.arrow_forward_big), null)\n                                },\n                                items = settingsScreens.size,\n                                index = index\n                            ) { backStack.add(item.route) }\n                        }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n\n                        if (currentLocales != null)\n                            item {\n                                ClickableListItem(\n                                    leadingContent = {\n                                        Icon(\n                                            painterResource(R.drawable.language),\n                                            contentDescription = null\n                                        )\n                                    },\n                                    headlineContent = { Text(stringResource(R.string.language)) },\n                                    supportingContent = {\n                                        Text(\n                                            if (currentLocalesSize > 0) currentLocales.get(0).displayName\n                                            else stringResource(R.string.system_default)\n                                        )\n                                    },\n                                    colors = listItemColors,\n                                    items = 1,\n                                    index = 0\n                                ) { showLocaleSheet = true }\n                            }\n\n                        item { Spacer(Modifier.height(12.dp)) }\n                    }\n                }\n            }\n\n            entry<Screen.Settings.Alarm> {\n                AlarmSettings(\n                    settingsState = settingsState,\n                    onAction = onAction,\n                    onBack = backStack::removeLastOrNull\n                )\n            }\n            entry<Screen.Settings.Appearance> {\n                AppearanceSettings(\n                    settingsState = settingsState,\n                    isPlus = isPlus,\n                    onAction = onAction,\n                    setShowPaywall = setShowPaywall,\n                    onBack = backStack::removeLastOrNull\n                )\n            }\n            entry<Screen.Settings.Timer> {\n                TimerSettings(\n                    isPlus = isPlus,\n                    serviceRunning = serviceRunning,\n                    settingsState = settingsState,\n                    focusTimeInputFieldState = focusTimeInputFieldState,\n                    shortBreakTimeInputFieldState = shortBreakTimeInputFieldState,\n                    longBreakTimeInputFieldState = longBreakTimeInputFieldState,\n                    sessionsSliderState = sessionsSliderState,\n                    onAction = onAction,\n                    setShowPaywall = setShowPaywall,\n                    onBack = backStack::removeLastOrNull,\n                )\n            }\n        }\n    )\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\SettingsSwitchItem.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen\n\nimport androidx.annotation.DrawableRes\nimport androidx.annotation.StringRes\n\ndata class SettingsSwitchItem(\n    val checked: Boolean,\n    val enabled: Boolean = true,\n    @param:DrawableRes val icon: Int,\n    @param:StringRes val label: Int,\n    @param:StringRes val description: Int,\n    val onClick: (Boolean) -> Unit\n)\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsAction.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport android.net.Uri\nimport androidx.compose.ui.graphics.Color\n\nsealed interface SettingsAction {\n    data class SaveAlarmEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveVibrateEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveBlackTheme(val enabled: Boolean) : SettingsAction\n    data class SaveAodEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveDndEnabled(val enabled: Boolean) : SettingsAction\n    data class SaveAlarmSound(val uri: Uri?) : SettingsAction\n    data class SaveTheme(val theme: String) : SettingsAction\n    data class SaveColorScheme(val color: Color) : SettingsAction\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsState.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport androidx.compose.runtime.Immutable\nimport androidx.compose.ui.graphics.Color\n\n@Immutable\ndata class SettingsState(\n    val theme: String = \"auto\",\n    val alarmSound: String = \"\",\n    val colorScheme: String = Color.White.toString(),\n    val blackTheme: Boolean = false,\n    val aodEnabled: Boolean = false,\n    val alarmEnabled: Boolean = true,\n    val vibrateEnabled: Boolean = true,\n    val dndEnabled: Boolean = false\n)\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\viewModel\\SettingsViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.viewModel\n\nimport android.net.Uri\nimport android.provider.Settings\nimport androidx.compose.foundation.text.input.TextFieldState\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.SliderState\nimport androidx.compose.runtime.mutableStateListOf\nimport androidx.compose.runtime.snapshotFlow\nimport androidx.compose.ui.graphics.Color\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.FlowPreview\nimport kotlinx.coroutines.Job\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.debounce\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.billing.BillingManager\nimport org.nsh07.pomodoro.data.AppPreferenceRepository\nimport org.nsh07.pomodoro.data.TimerRepository\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.ui.Screen\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\nimport org.nsh07.pomodoro.utils.millisecondsToStr\n\n@OptIn(FlowPreview::class, ExperimentalMaterial3Api::class)\nclass SettingsViewModel(\n    private val billingManager: BillingManager,\n    private val preferenceRepository: AppPreferenceRepository,\n    private val serviceHelper: ServiceHelper,\n    private val time: MutableStateFlow<Long>,\n    private val timerRepository: TimerRepository,\n    private val timerState: MutableStateFlow<TimerState>\n) : ViewModel() {\n    val backStack = mutableStateListOf<Screen.Settings>(Screen.Settings.Main)\n\n    val isPlus = billingManager.isPlus\n    val serviceRunning = timerRepository.serviceRunning.asStateFlow()\n\n    private val _settingsState = MutableStateFlow(SettingsState())\n    val settingsState = _settingsState.asStateFlow()\n\n    val focusTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.focusTime / 60000).toString())\n    }\n    val shortBreakTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.shortBreakTime / 60000).toString())\n    }\n    val longBreakTimeTextFieldState by lazy {\n        TextFieldState((timerRepository.longBreakTime / 60000).toString())\n    }\n\n    val sessionsSliderState by lazy {\n        SliderState(\n            value = timerRepository.sessionLength.toFloat(),\n            steps = 4,\n            valueRange = 1f..6f,\n            onValueChangeFinished = ::updateSessionLength\n        )\n    }\n\n    private var focusFlowCollectionJob: Job? = null\n    private var shortBreakFlowCollectionJob: Job? = null\n    private var longBreakFlowCollectionJob: Job? = null\n\n    init {\n        viewModelScope.launch {\n            reloadSettings()\n        }\n    }\n\n    fun onAction(action: SettingsAction) {\n        when (action) {\n            is SettingsAction.SaveAlarmSound -> saveAlarmSound(action.uri)\n            is SettingsAction.SaveAlarmEnabled -> saveAlarmEnabled(action.enabled)\n            is SettingsAction.SaveVibrateEnabled -> saveVibrateEnabled(action.enabled)\n            is SettingsAction.SaveDndEnabled -> saveDndEnabled(action.enabled)\n            is SettingsAction.SaveColorScheme -> saveColorScheme(action.color)\n            is SettingsAction.SaveTheme -> saveTheme(action.theme)\n            is SettingsAction.SaveBlackTheme -> saveBlackTheme(action.enabled)\n            is SettingsAction.SaveAodEnabled -> saveAodEnabled(action.enabled)\n        }\n    }\n\n    private fun updateSessionLength() {\n        viewModelScope.launch {\n            timerRepository.sessionLength = preferenceRepository.saveIntPreference(\n                \"session_length\",\n                sessionsSliderState.value.toInt()\n            )\n            refreshTimer()\n        }\n    }\n\n    fun runTextFieldFlowCollection() {\n        focusFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { focusTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.focusTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"focus_time\",\n                            timerRepository.focusTime.toInt()\n                        )\n                    }\n                }\n        }\n        shortBreakFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { shortBreakTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.shortBreakTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"short_break_time\",\n                            timerRepository.shortBreakTime.toInt()\n                        )\n                    }\n                }\n        }\n        longBreakFlowCollectionJob = viewModelScope.launch(Dispatchers.IO) {\n            snapshotFlow { longBreakTimeTextFieldState.text }\n                .debounce(500)\n                .collect {\n                    if (it.isNotEmpty()) {\n                        timerRepository.longBreakTime = it.toString().toLong() * 60 * 1000\n                        refreshTimer()\n                        preferenceRepository.saveIntPreference(\n                            \"long_break_time\",\n                            timerRepository.longBreakTime.toInt()\n                        )\n                    }\n                }\n        }\n    }\n\n    fun cancelTextFieldFlowCollection() {\n        if (!serviceRunning.value) serviceHelper.startService(TimerAction.ResetTimer)\n        focusFlowCollectionJob?.cancel()\n        shortBreakFlowCollectionJob?.cancel()\n        longBreakFlowCollectionJob?.cancel()\n    }\n\n    private fun saveAlarmEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.alarmEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(alarmEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"alarm_enabled\", enabled)\n        }\n    }\n\n    private fun saveVibrateEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.vibrateEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(vibrateEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", enabled)\n        }\n    }\n\n    private fun saveDndEnabled(enabled: Boolean) {\n        viewModelScope.launch {\n            timerRepository.dndEnabled = enabled\n            _settingsState.update { currentState ->\n                currentState.copy(dndEnabled = enabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"dnd_enabled\", enabled)\n        }\n    }\n\n    private fun saveAlarmSound(uri: Uri?) {\n        viewModelScope.launch {\n            timerRepository.alarmSoundUri = uri\n            _settingsState.update { currentState ->\n                currentState.copy(alarmSound = uri.toString())\n            }\n            preferenceRepository.saveStringPreference(\"alarm_sound\", uri.toString())\n        }\n    }\n\n    private fun saveColorScheme(colorScheme: Color) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(colorScheme = colorScheme.toString())\n            }\n            preferenceRepository.saveStringPreference(\"color_scheme\", colorScheme.toString())\n        }\n    }\n\n    private fun saveTheme(theme: String) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(theme = theme)\n            }\n            preferenceRepository.saveStringPreference(\"theme\", theme)\n        }\n    }\n\n    private fun saveBlackTheme(blackTheme: Boolean) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(blackTheme = blackTheme)\n            }\n            preferenceRepository.saveBooleanPreference(\"black_theme\", blackTheme)\n        }\n    }\n\n    private fun saveAodEnabled(aodEnabled: Boolean) {\n        viewModelScope.launch {\n            _settingsState.update { currentState ->\n                currentState.copy(aodEnabled = aodEnabled)\n            }\n            preferenceRepository.saveBooleanPreference(\"aod_enabled\", aodEnabled)\n        }\n    }\n\n    suspend fun reloadSettings() {\n        val theme = preferenceRepository.getStringPreference(\"theme\")\n            ?: preferenceRepository.saveStringPreference(\"theme\", \"auto\")\n        val colorScheme = preferenceRepository.getStringPreference(\"color_scheme\")\n            ?: preferenceRepository.saveStringPreference(\"color_scheme\", Color.White.toString())\n        val blackTheme = preferenceRepository.getBooleanPreference(\"black_theme\")\n            ?: preferenceRepository.saveBooleanPreference(\"black_theme\", false)\n        val aodEnabled = preferenceRepository.getBooleanPreference(\"aod_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"aod_enabled\", false)\n        val alarmSound = preferenceRepository.getStringPreference(\"alarm_sound\")\n            ?: preferenceRepository.saveStringPreference(\n                \"alarm_sound\",\n                (Settings.System.DEFAULT_ALARM_ALERT_URI\n                    ?: Settings.System.DEFAULT_RINGTONE_URI).toString()\n            )\n        val alarmEnabled = preferenceRepository.getBooleanPreference(\"alarm_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"alarm_enabled\", true)\n        val vibrateEnabled = preferenceRepository.getBooleanPreference(\"vibrate_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", true)\n        val dndEnabled = preferenceRepository.getBooleanPreference(\"dnd_enabled\")\n            ?: preferenceRepository.saveBooleanPreference(\"dnd_enabled\", false)\n\n        _settingsState.update { currentState ->\n            currentState.copy(\n                theme = theme,\n                colorScheme = colorScheme,\n                alarmSound = alarmSound,\n                blackTheme = blackTheme,\n                aodEnabled = aodEnabled,\n                alarmEnabled = alarmEnabled,\n                vibrateEnabled = vibrateEnabled,\n                dndEnabled = dndEnabled\n            )\n        }\n    }\n\n    private fun refreshTimer() {\n        if (!serviceRunning.value) {\n            time.update { timerRepository.focusTime }\n\n            timerState.update { currentState ->\n                currentState.copy(\n                    timerMode = TimerMode.FOCUS,\n                    timeStr = millisecondsToStr(time.value),\n                    totalTime = time.value,\n                    nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                    nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                    currentFocusCount = 1,\n                    totalFocusCount = timerRepository.sessionLength\n                )\n            }\n        }\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appBillingManager = application.container.billingManager\n                val appPreferenceRepository = application.container.appPreferenceRepository\n                val appTimerRepository = application.container.appTimerRepository\n                val serviceHelper = application.container.serviceHelper\n                val time = application.container.time\n                val timerState = application.container.timerState\n\n                SettingsViewModel(\n                    billingManager = appBillingManager,\n                    preferenceRepository = appPreferenceRepository,\n                    serviceHelper = serviceHelper,\n                    time = time,\n                    timerRepository = appTimerRepository,\n                    timerState = timerState\n                )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\ProductivityGraph.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.ColumnScope\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.utils.millisecondsToHoursMinutes\n\n@Composable\nfun ColumnScope.ProductivityGraph(\n    expanded: Boolean,\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    label: String = stringResource(R.string.productivity_analysis)\n) {\n    AnimatedVisibility(expanded) {\n        Column(modifier = modifier) {\n            Text(label, style = typography.titleMedium)\n            Text(\n                stringResource(R.string.productivity_analysis_desc),\n                style = typography.bodySmall\n            )\n            Spacer(Modifier.height(8.dp))\n            TimeColumnChart(\n                modelProducer,\n                xValueFormatter = CartesianValueFormatter { _, value, _ ->\n                    when (value) {\n                        0.0 -> \"0 - 6\"\n                        1.0 -> \"6 - 12\"\n                        2.0 -> \"12 - 18\"\n                        3.0 -> \"18 - 24\"\n                        else -> \"\"\n                    }\n                },\n                yValueFormatter = CartesianValueFormatter { _, value, _ ->\n                    millisecondsToHoursMinutes(value.toLong())\n                }\n            )\n        }\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\StatsScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "STATE",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.animateFloatAsState\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.PaddingValues\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.WindowInsets\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.text.TextAutoSize\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledTonalIconToggleButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButton\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.LocalTextStyle\nimport androidx.compose.material3.MaterialTheme\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Surface\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.saveable.rememberSaveable\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.rotate\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.lifecycle.compose.collectAsStateWithLifecycle\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.common.data.ExtraStore\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.ui.statsScreen.viewModel.StatsViewModel\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHoursMinutes\n\n@Composable\nfun StatsScreenRoot(\n    contentPadding: PaddingValues,\n    modifier: Modifier = Modifier,\n    viewModel: StatsViewModel = viewModel(factory = StatsViewModel.Factory)\n) {\n    val todayStat by viewModel.todayStat.collectAsStateWithLifecycle(null)\n\n    val lastWeekSummaryChartData by viewModel.lastWeekSummaryChartData.collectAsStateWithLifecycle()\n    val lastWeekAnalysisValues by viewModel.lastWeekAverageFocusTimes.collectAsStateWithLifecycle()\n\n    val lastMonthSummaryChartData by viewModel.lastMonthSummaryChartData.collectAsStateWithLifecycle()\n    val lastMonthAnalysisValues by viewModel.lastMonthAverageFocusTimes.collectAsStateWithLifecycle()\n\n    val lastYearSummaryChartData by viewModel.lastYearSummaryChartData.collectAsStateWithLifecycle()\n    val lastYearAnalysisValues by viewModel.lastYearAverageFocusTimes.collectAsStateWithLifecycle()\n\n    StatsScreen(\n        contentPadding = contentPadding,\n        lastWeekSummaryChartData = lastWeekSummaryChartData,\n        lastMonthSummaryChartData = lastMonthSummaryChartData,\n        lastYearSummaryChartData = lastYearSummaryChartData,\n        todayStat = todayStat,\n        lastWeekAverageFocusTimes = lastWeekAnalysisValues,\n        lastMonthAverageFocusTimes = lastMonthAnalysisValues,\n        lastYearAverageFocusTimes = lastYearAnalysisValues,\n        generateSampleData = viewModel::generateSampleData,\n        modifier = modifier\n    )\n}\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun StatsScreen(\n    contentPadding: PaddingValues,\n    lastWeekSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    lastMonthSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    lastYearSummaryChartData: Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>,\n    todayStat: Stat?,\n    lastWeekAverageFocusTimes: List<Int>,\n    lastMonthAverageFocusTimes: List<Int>,\n    lastYearAverageFocusTimes: List<Int>,\n    generateSampleData: () -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val scrollBehavior = TopAppBarDefaults.enterAlwaysScrollBehavior()\n\n    var lastWeekStatExpanded by rememberSaveable { mutableStateOf(false) }\n    var lastMonthStatExpanded by rememberSaveable { mutableStateOf(false) }\n\n    val lastWeekSummaryAnalysisModelProducer = remember { CartesianChartModelProducer() }\n    val lastMonthSummaryAnalysisModelProducer = remember { CartesianChartModelProducer() }\n\n    LaunchedEffect(lastWeekAverageFocusTimes) {\n        lastWeekSummaryAnalysisModelProducer.runTransaction {\n            columnSeries {\n                series(lastWeekAverageFocusTimes)\n            }\n        }\n    }\n\n    LaunchedEffect(lastMonthAverageFocusTimes) {\n        lastMonthSummaryAnalysisModelProducer.runTransaction {\n            columnSeries {\n                series(lastMonthAverageFocusTimes)\n            }\n        }\n    }\n\n    Column(\n        horizontalAlignment = Alignment.CenterHorizontally,\n        modifier = modifier.nestedScroll(scrollBehavior.nestedScrollConnection)\n    ) {\n        TopAppBar(\n            title = {\n                Text(\n                    stringResource(R.string.stats),\n                    style = LocalTextStyle.current.copy(\n                        fontFamily = robotoFlexTopBar,\n                        fontSize = 32.sp,\n                        lineHeight = 32.sp\n                    ),\n                    modifier = Modifier\n                        .padding(top = contentPadding.calculateTopPadding())\n                        .padding(vertical = 14.dp)\n                )\n            },\n            actions = if (BuildConfig.DEBUG) {\n                {\n                    IconButton(\n                        onClick = generateSampleData\n                    ) {\n                        Spacer(Modifier.size(24.dp))\n                    }\n                }\n            } else {\n                {}\n            },\n            subtitle = {},\n            titleHorizontalAlignment = Alignment.CenterHorizontally,\n            scrollBehavior = scrollBehavior,\n            windowInsets = WindowInsets()\n        )\n\n        LazyColumn(\n            horizontalAlignment = Alignment.CenterHorizontally,\n            verticalArrangement = Arrangement.spacedBy(16.dp)\n        ) {\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.today),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(modifier = Modifier.padding(horizontal = 16.dp)) {\n                    Box(\n                        modifier = Modifier\n                            .background(\n                                colorScheme.primaryContainer,\n                                MaterialTheme.shapes.largeIncreased\n                            )\n                            .weight(1f)\n                    ) {\n                        Column(Modifier.padding(16.dp)) {\n                            Text(\n                                stringResource(R.string.focus),\n                                style = typography.titleMedium,\n                                color = colorScheme.onPrimaryContainer\n                            )\n                            Text(\n                                remember(todayStat) {\n                                    millisecondsToHoursMinutes(todayStat?.totalFocusTime() ?: 0)\n                                },\n                                style = typography.displaySmall,\n                                fontFamily = interClock,\n                                color = colorScheme.onPrimaryContainer,\n                                maxLines = 1,\n                                autoSize = TextAutoSize.StepBased(maxFontSize = typography.displaySmall.fontSize)\n                            )\n                        }\n                    }\n                    Spacer(Modifier.width(8.dp))\n                    Box(\n                        modifier = Modifier\n                            .background(\n                                colorScheme.tertiaryContainer,\n                                MaterialTheme.shapes.largeIncreased\n                            )\n                            .weight(1f)\n                    ) {\n                        Column(Modifier.padding(16.dp)) {\n                            Text(\n                                stringResource(R.string.break_),\n                                style = typography.titleMedium,\n                                color = colorScheme.onTertiaryContainer\n                            )\n                            Text(\n                                remember(todayStat) {\n                                    millisecondsToHoursMinutes(todayStat?.breakTime ?: 0)\n                                },\n                                style = typography.displaySmall,\n                                fontFamily = interClock,\n                                color = colorScheme.onTertiaryContainer,\n                                maxLines = 1,\n                                autoSize = TextAutoSize.StepBased(maxFontSize = typography.displaySmall.fontSize)\n                            )\n                        }\n                    }\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_week),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastWeekAverageFocusTimes) {\n                                lastWeekAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeColumnChart(\n                    lastWeekSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastWeekSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item {\n                val iconRotation by animateFloatAsState(\n                    if (lastWeekStatExpanded) 180f else 0f,\n                    animationSpec = motionScheme.defaultSpatialSpec()\n                )\n                Column(\n                    horizontalAlignment = Alignment.CenterHorizontally,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    Spacer(Modifier.height(2.dp))\n                    FilledTonalIconToggleButton(\n                        checked = lastWeekStatExpanded,\n                        onCheckedChange = { lastWeekStatExpanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier\n                            .padding(horizontal = 16.dp)\n                            .width(52.dp)\n                            .align(Alignment.End)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.arrow_down),\n                            stringResource(R.string.more_info),\n                            modifier = Modifier.rotate(iconRotation)\n                        )\n                    }\n                    ProductivityGraph(\n                        lastWeekStatExpanded,\n                        lastWeekSummaryAnalysisModelProducer,\n                        label = stringResource(R.string.weekly_productivity_analysis),\n                        modifier = Modifier.padding(horizontal = 32.dp)\n                    )\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_month),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastMonthAverageFocusTimes) {\n                                lastMonthAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        text = stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeColumnChart(\n                    lastMonthSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    thickness = 8.dp,\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastMonthSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item {\n                val iconRotation by animateFloatAsState(\n                    if (lastMonthStatExpanded) 180f else 0f,\n                    animationSpec = motionScheme.defaultSpatialSpec()\n                )\n                Column(\n                    horizontalAlignment = Alignment.CenterHorizontally,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    Spacer(Modifier.height(2.dp))\n                    FilledTonalIconToggleButton(\n                        checked = lastMonthStatExpanded,\n                        onCheckedChange = { lastMonthStatExpanded = it },\n                        shapes = IconButtonDefaults.toggleableShapes(),\n                        modifier = Modifier\n                            .padding(horizontal = 16.dp)\n                            .width(52.dp)\n                            .align(Alignment.End)\n                    ) {\n                        Icon(\n                            painterResource(R.drawable.arrow_down),\n                            stringResource(R.string.more_info),\n                            modifier = Modifier.rotate(iconRotation)\n                        )\n                    }\n                    ProductivityGraph(\n                        lastMonthStatExpanded,\n                        lastMonthSummaryAnalysisModelProducer,\n                        label = stringResource(R.string.monthly_productivity_analysis),\n                        modifier = Modifier.padding(horizontal = 32.dp)\n                    )\n                }\n            }\n            item { Spacer(Modifier) }\n            item {\n                Text(\n                    stringResource(R.string.last_year),\n                    style = typography.headlineSmall,\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                )\n            }\n            item {\n                Row(\n                    verticalAlignment = Alignment.Bottom,\n                    horizontalArrangement = Arrangement.spacedBy(8.dp),\n                    modifier = Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal = 16.dp)\n                ) {\n                    Text(\n                        millisecondsToHoursMinutes(\n                            remember(lastYearAverageFocusTimes) {\n                                lastYearAverageFocusTimes.sum().toLong()\n                            }\n                        ),\n                        style = typography.displaySmall,\n                        fontFamily = interClock\n                    )\n                    Text(\n                        text = stringResource(R.string.focus_per_day_avg),\n                        style = typography.titleSmall,\n                        modifier = Modifier.padding(bottom = 6.3.dp)\n                    )\n                }\n            }\n            item {\n                TimeLineChart(\n                    lastYearSummaryChartData.first,\n                    modifier = Modifier.padding(start = 16.dp),\n                    xValueFormatter = CartesianValueFormatter { context, x, _ ->\n                        context.model.extraStore[lastYearSummaryChartData.second][x.toInt()]\n                    }\n                )\n            }\n            item { Spacer(Modifier.height(16.dp)) }\n        }\n    }\n}\n\n@Preview(\n    widthDp = 400\n)\n@Composable\nfun StatsScreenPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val keys = remember { ExtraStore.Key<List<String>>() }\n\n    LaunchedEffect(Unit) {\n        modelProducer.runTransaction {\n            columnSeries {\n                series(5, 6, 5, 2, 11, 8, 5)\n            }\n            lineSeries {}\n            extras { it[keys] = listOf(\"M\", \"T\", \"W\", \"T\", \"F\", \"S\", \"S\") }\n        }\n    }\n\n    TomatoTheme {\n        Surface {\n            StatsScreen(\n                PaddingValues(),\n                Pair(modelProducer, keys),\n                Pair(modelProducer, keys),\n                Pair(modelProducer, keys),\n                null,\n                listOf(0, 0, 0, 0),\n                listOf(0, 0, 0, 0),\n                listOf(0, 0, 0, 0),\n                {}\n            )\n        }\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\TimeColumnChart.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.AnimationSpec\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Surface\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.compose.cartesian.CartesianChartHost\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberBottom\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberStart\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberColumnCartesianLayer\nimport com.patrykandpatrick.vico.compose.cartesian.rememberCartesianChart\nimport com.patrykandpatrick.vico.compose.cartesian.rememberVicoZoomState\nimport com.patrykandpatrick.vico.compose.common.ProvideVicoTheme\nimport com.patrykandpatrick.vico.compose.common.component.rememberLineComponent\nimport com.patrykandpatrick.vico.compose.common.fill\nimport com.patrykandpatrick.vico.compose.common.vicoTheme\nimport com.patrykandpatrick.vico.compose.m3.common.rememberM3VicoTheme\nimport com.patrykandpatrick.vico.core.cartesian.FadingEdges\nimport com.patrykandpatrick.vico.core.cartesian.Zoom\nimport com.patrykandpatrick.vico.core.cartesian.axis.HorizontalAxis\nimport com.patrykandpatrick.vico.core.cartesian.axis.VerticalAxis\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.layer.ColumnCartesianLayer\nimport com.patrykandpatrick.vico.core.common.Fill\nimport com.patrykandpatrick.vico.core.common.shape.CorneredShape\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHours\nimport org.nsh07.pomodoro.utils.millisecondsToMinutes\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimeColumnChart(\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    thickness: Dp = 40.dp,\n    columnCollectionSpacing: Dp = 4.dp,\n    xValueFormatter: CartesianValueFormatter = CartesianValueFormatter.Default,\n    yValueFormatter: CartesianValueFormatter = CartesianValueFormatter { _, value, _ ->\n        if (value >= 60 * 60 * 1000) {\n            millisecondsToHours(value.toLong())\n        } else {\n            millisecondsToMinutes(value.toLong())\n        }\n    },\n    animationSpec: AnimationSpec<Float>? = motionScheme.slowEffectsSpec()\n) {\n    ProvideVicoTheme(rememberM3VicoTheme()) {\n        CartesianChartHost(\n            chart =\n                rememberCartesianChart(\n                    rememberColumnCartesianLayer(\n                        ColumnCartesianLayer.ColumnProvider.series(\n                            vicoTheme.columnCartesianLayerColors.map { color ->\n                                rememberLineComponent(\n                                    fill = fill(color),\n                                    thickness = thickness,\n                                    shape = CorneredShape.Pill\n                                )\n                            }\n                        ),\n                        columnCollectionSpacing = columnCollectionSpacing\n                    ),\n                    startAxis = VerticalAxis.rememberStart(\n                        line = rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = yValueFormatter\n                    ),\n                    bottomAxis = HorizontalAxis.rememberBottom(\n                        rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = xValueFormatter\n                    ),\n                    fadingEdges = FadingEdges()\n                ),\n            modelProducer = modelProducer,\n            zoomState = rememberVicoZoomState(\n                zoomEnabled = false,\n                initialZoom = Zoom.fixed(),\n                minZoom = Zoom.min(Zoom.Content, Zoom.fixed())\n            ),\n            animationSpec = animationSpec,\n            modifier = modifier,\n        )\n    }\n}\n\n@Preview\n@Composable\nprivate fun TimeColumnChartPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val values = mutableListOf<Int>()\n    LaunchedEffect(Unit) {\n        repeat(30) {\n            values.add((0..120).random() * 60 * 1000)\n        }\n        modelProducer.runTransaction {\n            columnSeries {\n                series(values)\n            }\n        }\n    }\n    TomatoTheme {\n        Surface {\n            TimeColumnChart(thickness = 8.dp, modelProducer = modelProducer)\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\TimeLineChart.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen\n\nimport androidx.compose.animation.core.AnimationSpec\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.Surface\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.toArgb\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.unit.dp\nimport com.patrykandpatrick.vico.compose.cartesian.CartesianChartHost\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberBottom\nimport com.patrykandpatrick.vico.compose.cartesian.axis.rememberStart\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberLine\nimport com.patrykandpatrick.vico.compose.cartesian.layer.rememberLineCartesianLayer\nimport com.patrykandpatrick.vico.compose.cartesian.rememberCartesianChart\nimport com.patrykandpatrick.vico.compose.cartesian.rememberVicoZoomState\nimport com.patrykandpatrick.vico.compose.common.ProvideVicoTheme\nimport com.patrykandpatrick.vico.compose.common.component.rememberLineComponent\nimport com.patrykandpatrick.vico.compose.common.fill\nimport com.patrykandpatrick.vico.compose.common.vicoTheme\nimport com.patrykandpatrick.vico.compose.m3.common.rememberM3VicoTheme\nimport com.patrykandpatrick.vico.core.cartesian.FadingEdges\nimport com.patrykandpatrick.vico.core.cartesian.Zoom\nimport com.patrykandpatrick.vico.core.cartesian.axis.HorizontalAxis\nimport com.patrykandpatrick.vico.core.cartesian.axis.VerticalAxis\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianValueFormatter\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.cartesian.layer.LineCartesianLayer\nimport com.patrykandpatrick.vico.core.cartesian.layer.LineCartesianLayer.LineFill.Companion.single\nimport com.patrykandpatrick.vico.core.common.Fill\nimport com.patrykandpatrick.vico.core.common.shader.ShaderProvider\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.utils.millisecondsToHours\nimport org.nsh07.pomodoro.utils.millisecondsToMinutes\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TimeLineChart(\n    modelProducer: CartesianChartModelProducer,\n    modifier: Modifier = Modifier,\n    thickness: Float = 2f,\n    pointSpacing: Dp = 12.dp,\n    xValueFormatter: CartesianValueFormatter = CartesianValueFormatter.Default,\n    yValueFormatter: CartesianValueFormatter = CartesianValueFormatter { _, value, _ ->\n        if (value >= 60 * 60 * 1000) {\n            millisecondsToHours(value.toLong())\n        } else {\n            millisecondsToMinutes(value.toLong())\n        }\n    },\n    animationSpec: AnimationSpec<Float>? = motionScheme.slowEffectsSpec()\n) {\n    ProvideVicoTheme(rememberM3VicoTheme()) {\n        CartesianChartHost(\n            chart =\n                rememberCartesianChart(\n                    rememberLineCartesianLayer(\n                        LineCartesianLayer.LineProvider.series(\n                            vicoTheme.lineCartesianLayerColors.map { color ->\n                                LineCartesianLayer.rememberLine(\n                                    fill = single(fill(color)),\n                                    stroke = LineCartesianLayer.LineStroke.Continuous(\n                                        thicknessDp = thickness,\n                                    ),\n                                    areaFill = LineCartesianLayer.AreaFill.single(\n                                        fill(\n                                            ShaderProvider.verticalGradient(\n                                                color.toArgb(),\n                                                Color.Transparent.toArgb()\n                                            )\n                                        )\n                                    ),\n                                    pointConnector = LineCartesianLayer.PointConnector.cubic(0.5f)\n                                )\n                            }\n                        ),\n                        pointSpacing = pointSpacing\n                    ),\n                    startAxis = VerticalAxis.rememberStart(\n                        line = rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = yValueFormatter\n                    ),\n                    bottomAxis = HorizontalAxis.rememberBottom(\n                        rememberLineComponent(Fill.Transparent),\n                        tick = rememberLineComponent(Fill.Transparent),\n                        guideline = rememberLineComponent(Fill.Transparent),\n                        valueFormatter = xValueFormatter\n                    ),\n                    fadingEdges = FadingEdges()\n                ),\n            modelProducer = modelProducer,\n            zoomState = rememberVicoZoomState(\n                zoomEnabled = true,\n                initialZoom = Zoom.fixed(),\n                minZoom = Zoom.min(Zoom.Content, Zoom.fixed())\n            ),\n            animationSpec = animationSpec,\n            modifier = modifier,\n        )\n    }\n}\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Preview\n@Composable\nprivate fun TimeLineChartPreview() {\n    val modelProducer = remember { CartesianChartModelProducer() }\n    val values = mutableListOf<Int>()\n    LaunchedEffect(Unit) {\n        repeat(365) {\n            values.add((0..120).random() * 60 * 1000)\n        }\n        modelProducer.runTransaction {\n            lineSeries {\n                series(values)\n            }\n        }\n    }\n    TomatoTheme {\n        Surface {\n            TimeLineChart(modelProducer = modelProducer)\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\statsScreen\\viewModel\\StatsViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.statsScreen.viewModel\n\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport com.patrykandpatrick.vico.core.cartesian.data.CartesianChartModelProducer\nimport com.patrykandpatrick.vico.core.cartesian.data.columnSeries\nimport com.patrykandpatrick.vico.core.cartesian.data.lineSeries\nimport com.patrykandpatrick.vico.core.common.data.ExtraStore\nimport kotlinx.coroutines.flow.SharingStarted\nimport kotlinx.coroutines.flow.StateFlow\nimport kotlinx.coroutines.flow.distinctUntilChanged\nimport kotlinx.coroutines.flow.map\nimport kotlinx.coroutines.flow.stateIn\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.BuildConfig\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.data.StatRepository\nimport java.time.LocalDate\nimport java.time.format.DateTimeFormatter\nimport java.time.format.TextStyle\nimport java.util.Locale\n\nclass StatsViewModel(\n    private val statRepository: StatRepository\n) : ViewModel() {\n\n    val todayStat = statRepository.getTodayStat().distinctUntilChanged()\n\n    private val lastWeekSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n    private val lastMonthSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n    private val lastYearSummary =\n        Pair(CartesianChartModelProducer(), ExtraStore.Key<List<String>>())\n\n    private val yearDayFormatter = DateTimeFormatter.ofPattern(\"d MMM\")\n\n    val lastWeekSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(7)\n            .map { list ->\n                // reversing is required because we need ascending order while the DB returns descending order\n                val reversed = list.reversed()\n                val keys = reversed.map {\n                    it.date.dayOfWeek.getDisplayName(\n                        TextStyle.NARROW,\n                        Locale.getDefault()\n                    )\n                }\n                val values = reversed.map { it.focusTime }\n                lastWeekSummary.first.runTransaction {\n                    columnSeries { series(values) }\n                    extras { it[lastWeekSummary.second] = keys }\n                }\n                lastWeekSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastWeekSummary\n            )\n\n    val lastWeekAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(7)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    val lastMonthSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(30)\n            .map { list ->\n                val reversed = list.reversed()\n                val keys = reversed.map { it.date.dayOfMonth.toString() }\n                val values = reversed.map { it.focusTime }\n                lastMonthSummary.first.runTransaction {\n                    columnSeries { series(values) }\n                    extras { it[lastMonthSummary.second] = keys }\n                }\n                lastMonthSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastMonthSummary\n            )\n\n    val lastMonthAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(30)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    val lastYearSummaryChartData: StateFlow<Pair<CartesianChartModelProducer, ExtraStore.Key<List<String>>>> =\n        statRepository.getLastNDaysStatsSummary(365)\n            .map { list ->\n                val reversed = list.reversed()\n                val keys = reversed.map { it.date.format(yearDayFormatter) }\n                val values = reversed.map { it.focusTime }\n                lastYearSummary.first.runTransaction {\n                    lineSeries { series(values) }\n                    extras { it[lastYearSummary.second] = keys }\n                }\n                lastYearSummary\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = lastYearSummary\n            )\n\n    val lastYearAverageFocusTimes: StateFlow<List<Int>> =\n        statRepository.getLastNDaysAverageFocusTimes(365)\n            .map {\n                listOf(\n                    it?.focusTimeQ1?.toInt() ?: 0,\n                    it?.focusTimeQ2?.toInt() ?: 0,\n                    it?.focusTimeQ3?.toInt() ?: 0,\n                    it?.focusTimeQ4?.toInt() ?: 0\n                )\n            }\n            .stateIn(\n                scope = viewModelScope,\n                started = SharingStarted.WhileSubscribed(5000),\n                initialValue = listOf(0, 0, 0, 0)\n            )\n\n    fun generateSampleData() {\n        if (BuildConfig.DEBUG) {\n            viewModelScope.launch {\n                val today = LocalDate.now().plusDays(1)\n                var it = today.minusDays(40)\n\n                while (it.isBefore(today)) {\n                    statRepository.insertStat(\n                        Stat(\n                            it,\n                            (0..30 * 60 * 1000L).random(),\n                            (1 * 60 * 60 * 1000L..3 * 60 * 60 * 1000L).random(),\n                            (0..3 * 60 * 60 * 1000L).random(),\n                            (0..1 * 60 * 60 * 1000L).random(),\n                            0\n                        )\n                    )\n                    it = it.plusDays(1)\n                }\n\n                statRepository.addBreakTime((0..30 * 60 * 60 * 1000L).random())\n            }\n        }\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appStatRepository = application.container.appStatRepository\n\n                StatsViewModel(appStatRepository)\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Color.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ListItemColors\nimport androidx.compose.material3.ListItemDefaults\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.SwitchColors\nimport androidx.compose.material3.SwitchDefaults\nimport androidx.compose.material3.TopAppBarColors\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.graphics.Color\n\nval primaryLight = Color(0xFF4C662B)\nval onPrimaryLight = Color(0xFFFFFFFF)\nval primaryContainerLight = Color(0xFFCDEDA3)\nval onPrimaryContainerLight = Color(0xFF354E16)\nval secondaryLight = Color(0xFF586249)\nval onSecondaryLight = Color(0xFFFFFFFF)\nval secondaryContainerLight = Color(0xFFDCE7C8)\nval onSecondaryContainerLight = Color(0xFF404A33)\nval tertiaryLight = Color(0xFF386663)\nval onTertiaryLight = Color(0xFFFFFFFF)\nval tertiaryContainerLight = Color(0xFFBCECE7)\nval onTertiaryContainerLight = Color(0xFF1F4E4B)\nval errorLight = Color(0xFFBA1A1A)\nval onErrorLight = Color(0xFFFFFFFF)\nval errorContainerLight = Color(0xFFFFDAD6)\nval onErrorContainerLight = Color(0xFF93000A)\nval backgroundLight = Color(0xFFF9FAEF)\nval onBackgroundLight = Color(0xFF1A1C16)\nval surfaceLight = Color(0xFFF9FAEF)\nval onSurfaceLight = Color(0xFF1A1C16)\nval surfaceVariantLight = Color(0xFFE1E4D5)\nval onSurfaceVariantLight = Color(0xFF44483D)\nval outlineLight = Color(0xFF75796C)\nval outlineVariantLight = Color(0xFFC5C8BA)\nval scrimLight = Color(0xFF000000)\nval inverseSurfaceLight = Color(0xFF2F312A)\nval inverseOnSurfaceLight = Color(0xFFF1F2E6)\nval inversePrimaryLight = Color(0xFFB1D18A)\nval surfaceDimLight = Color(0xFFDADBD0)\nval surfaceBrightLight = Color(0xFFF9FAEF)\nval surfaceContainerLowestLight = Color(0xFFFFFFFF)\nval surfaceContainerLowLight = Color(0xFFF3F4E9)\nval surfaceContainerLight = Color(0xFFEEEFE3)\nval surfaceContainerHighLight = Color(0xFFE8E9DE)\nval surfaceContainerHighestLight = Color(0xFFE2E3D8)\n\nval primaryDark = Color(0xFFB1D18A)\nval onPrimaryDark = Color(0xFF1F3701)\nval primaryContainerDark = Color(0xFF354E16)\nval onPrimaryContainerDark = Color(0xFFCDEDA3)\nval secondaryDark = Color(0xFFBFCBAD)\nval onSecondaryDark = Color(0xFF2A331E)\nval secondaryContainerDark = Color(0xFF404A33)\nval onSecondaryContainerDark = Color(0xFFDCE7C8)\nval tertiaryDark = Color(0xFFA0D0CB)\nval onTertiaryDark = Color(0xFF003735)\nval tertiaryContainerDark = Color(0xFF1F4E4B)\nval onTertiaryContainerDark = Color(0xFFBCECE7)\nval errorDark = Color(0xFFFFB4AB)\nval onErrorDark = Color(0xFF690005)\nval errorContainerDark = Color(0xFF93000A)\nval onErrorContainerDark = Color(0xFFFFDAD6)\nval backgroundDark = Color(0xFF12140E)\nval onBackgroundDark = Color(0xFFE2E3D8)\nval surfaceDark = Color(0xFF12140E)\nval onSurfaceDark = Color(0xFFE2E3D8)\nval surfaceVariantDark = Color(0xFF44483D)\nval onSurfaceVariantDark = Color(0xFFC5C8BA)\nval outlineDark = Color(0xFF8F9285)\nval outlineVariantDark = Color(0xFF44483D)\nval scrimDark = Color(0xFF000000)\nval inverseSurfaceDark = Color(0xFFE2E3D8)\nval inverseOnSurfaceDark = Color(0xFF2F312A)\nval inversePrimaryDark = Color(0xFF4C662B)\nval surfaceDimDark = Color(0xFF12140E)\nval surfaceBrightDark = Color(0xFF383A32)\nval surfaceContainerLowestDark = Color(0xFF0C0F09)\nval surfaceContainerLowDark = Color(0xFF1A1C16)\nval surfaceContainerDark = Color(0xFF1E201A)\nval surfaceContainerHighDark = Color(0xFF282B24)\nval surfaceContainerHighestDark = Color(0xFF33362E)\n\nobject CustomColors {\n    var black = false\n\n    @OptIn(ExperimentalMaterial3Api::class)\n    val topBarColors: TopAppBarColors\n        @Composable get() =\n            TopAppBarDefaults.topAppBarColors(\n                containerColor = if (!black) colorScheme.surfaceContainer else colorScheme.surface,\n                scrolledContainerColor = if (!black) colorScheme.surfaceContainer else colorScheme.surface\n            )\n\n    val listItemColors: ListItemColors\n        @Composable get() =\n            ListItemDefaults.colors(containerColor = if (!black) colorScheme.surfaceBright else colorScheme.surfaceContainerHigh)\n\n    val selectedListItemColors: ListItemColors\n        @Composable get() =\n            ListItemDefaults.colors(\n                containerColor = colorScheme.secondaryContainer,\n                headlineColor = colorScheme.secondary,\n                leadingIconColor = colorScheme.onSecondaryContainer,\n                supportingColor = colorScheme.onSecondaryFixedVariant,\n                trailingIconColor = colorScheme.onSecondaryFixedVariant\n            )\n\n    val switchColors: SwitchColors\n        @Composable get() = SwitchDefaults.colors(\n            checkedIconColor = colorScheme.primary,\n        )\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Shape.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.foundation.shape.CornerBasedShape\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.runtime.Composable\n\nobject TomatoShapeDefaults {\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val topListItemShape: RoundedCornerShape\n        @Composable get() =\n            RoundedCornerShape(\n                topStart = shapes.largeIncreased.topStart,\n                topEnd = shapes.largeIncreased.topEnd,\n                bottomStart = shapes.extraSmall.bottomStart,\n                bottomEnd = shapes.extraSmall.bottomStart\n            )\n\n    val middleListItemShape: RoundedCornerShape\n        @Composable get() = RoundedCornerShape(shapes.extraSmall.topStart)\n\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val bottomListItemShape: RoundedCornerShape\n        @Composable get() =\n            RoundedCornerShape(\n                topStart = shapes.extraSmall.topStart,\n                topEnd = shapes.extraSmall.topEnd,\n                bottomStart = shapes.largeIncreased.bottomStart,\n                bottomEnd = shapes.largeIncreased.bottomEnd\n            )\n\n    @OptIn(ExperimentalMaterial3ExpressiveApi::class)\n    val cardShape: CornerBasedShape\n        @Composable get() = shapes.largeIncreased\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Theme.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport android.app.Activity\nimport android.os.Build\nimport androidx.compose.foundation.isSystemInDarkTheme\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.MaterialExpressiveTheme\nimport androidx.compose.material3.MotionScheme\nimport androidx.compose.material3.darkColorScheme\nimport androidx.compose.material3.dynamicDarkColorScheme\nimport androidx.compose.material3.dynamicLightColorScheme\nimport androidx.compose.material3.lightColorScheme\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.SideEffect\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.platform.LocalContext\nimport androidx.compose.ui.platform.LocalView\nimport androidx.core.view.WindowCompat\nimport com.materialkolor.dynamiccolor.ColorSpec\nimport com.materialkolor.rememberDynamicColorScheme\n\nprivate val lightScheme = lightColorScheme(\n    primary = primaryLight,\n    onPrimary = onPrimaryLight,\n    primaryContainer = primaryContainerLight,\n    onPrimaryContainer = onPrimaryContainerLight,\n    secondary = secondaryLight,\n    onSecondary = onSecondaryLight,\n    secondaryContainer = secondaryContainerLight,\n    onSecondaryContainer = onSecondaryContainerLight,\n    tertiary = tertiaryLight,\n    onTertiary = onTertiaryLight,\n    tertiaryContainer = tertiaryContainerLight,\n    onTertiaryContainer = onTertiaryContainerLight,\n    error = errorLight,\n    onError = onErrorLight,\n    errorContainer = errorContainerLight,\n    onErrorContainer = onErrorContainerLight,\n    background = backgroundLight,\n    onBackground = onBackgroundLight,\n    surface = surfaceLight,\n    onSurface = onSurfaceLight,\n    surfaceVariant = surfaceVariantLight,\n    onSurfaceVariant = onSurfaceVariantLight,\n    outline = outlineLight,\n    outlineVariant = outlineVariantLight,\n    scrim = scrimLight,\n    inverseSurface = inverseSurfaceLight,\n    inverseOnSurface = inverseOnSurfaceLight,\n    inversePrimary = inversePrimaryLight,\n    surfaceDim = surfaceDimLight,\n    surfaceBright = surfaceBrightLight,\n    surfaceContainerLowest = surfaceContainerLowestLight,\n    surfaceContainerLow = surfaceContainerLowLight,\n    surfaceContainer = surfaceContainerLight,\n    surfaceContainerHigh = surfaceContainerHighLight,\n    surfaceContainerHighest = surfaceContainerHighestLight,\n)\n\nprivate val darkScheme = darkColorScheme(\n    primary = primaryDark,\n    onPrimary = onPrimaryDark,\n    primaryContainer = primaryContainerDark,\n    onPrimaryContainer = onPrimaryContainerDark,\n    secondary = secondaryDark,\n    onSecondary = onSecondaryDark,\n    secondaryContainer = secondaryContainerDark,\n    onSecondaryContainer = onSecondaryContainerDark,\n    tertiary = tertiaryDark,\n    onTertiary = onTertiaryDark,\n    tertiaryContainer = tertiaryContainerDark,\n    onTertiaryContainer = onTertiaryContainerDark,\n    error = errorDark,\n    onError = onErrorDark,\n    errorContainer = errorContainerDark,\n    onErrorContainer = onErrorContainerDark,\n    background = backgroundDark,\n    onBackground = onBackgroundDark,\n    surface = surfaceDark,\n    onSurface = onSurfaceDark,\n    surfaceVariant = surfaceVariantDark,\n    onSurfaceVariant = onSurfaceVariantDark,\n    outline = outlineDark,\n    outlineVariant = outlineVariantDark,\n    scrim = scrimDark,\n    inverseSurface = inverseSurfaceDark,\n    inverseOnSurface = inverseOnSurfaceDark,\n    inversePrimary = inversePrimaryDark,\n    surfaceDim = surfaceDimDark,\n    surfaceBright = surfaceBrightDark,\n    surfaceContainerLowest = surfaceContainerLowestDark,\n    surfaceContainerLow = surfaceContainerLowDark,\n    surfaceContainer = surfaceContainerDark,\n    surfaceContainerHigh = surfaceContainerHighDark,\n    surfaceContainerHighest = surfaceContainerHighestDark,\n)\n\n@OptIn(ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun TomatoTheme(\n    darkTheme: Boolean = isSystemInDarkTheme(),\n    seedColor: Color = Color.White,\n    dynamicColor: Boolean = true,\n    blackTheme: Boolean = false,\n    content: @Composable () -> Unit\n) {\n    val colorScheme = when {\n        dynamicColor && Build.VERSION.SDK_INT >= Build.VERSION_CODES.S -> {\n            val context = LocalContext.current\n            if (darkTheme) dynamicDarkColorScheme(context) else dynamicLightColorScheme(context)\n        }\n\n        darkTheme -> darkScheme\n        else -> lightScheme\n    }\n\n    val view = LocalView.current\n    if (!view.isInEditMode) {\n        SideEffect {\n            val window = (view.context as Activity).window\n            WindowCompat.getInsetsController(window, view).isAppearanceLightStatusBars = !darkTheme\n        }\n    }\n    CustomColors.black = blackTheme && darkTheme\n\n    val dynamicColorScheme = rememberDynamicColorScheme(\n        seedColor = when (seedColor) {\n            Color.White -> colorScheme.primary\n            else -> seedColor\n        },\n        isDark = darkTheme,\n        specVersion = if (blackTheme && darkTheme) ColorSpec.SpecVersion.SPEC_2021 else ColorSpec.SpecVersion.SPEC_2025,\n        isAmoled = blackTheme && darkTheme\n    )\n\n    val scheme =\n        if (seedColor == Color.White && !(blackTheme && darkTheme)) colorScheme\n        else dynamicColorScheme\n\n    MaterialExpressiveTheme(\n        colorScheme = scheme,\n        typography = Typography,\n        motionScheme = MotionScheme.expressive(),\n        content = content\n    )\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\theme\\Type.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.theme\n\nimport androidx.compose.material3.Typography\nimport androidx.compose.ui.text.ExperimentalTextApi\nimport androidx.compose.ui.text.font.Font\nimport androidx.compose.ui.text.font.FontFamily\nimport androidx.compose.ui.text.font.FontStyle\nimport androidx.compose.ui.text.font.FontVariation\nimport androidx.compose.ui.text.font.FontWeight\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interBody\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interLabel\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexHeadline\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTitle\n\nval TYPOGRAPHY = Typography()\n\n// Set of Material typography styles to start with\nval Typography = Typography(\n    displayLarge = TYPOGRAPHY.displayLarge.copy(fontFamily = robotoFlexHeadline),\n    displayMedium = TYPOGRAPHY.displayMedium.copy(fontFamily = robotoFlexHeadline),\n    displaySmall = TYPOGRAPHY.displaySmall.copy(fontFamily = robotoFlexHeadline),\n    headlineLarge = TYPOGRAPHY.headlineLarge.copy(fontFamily = robotoFlexHeadline),\n    headlineMedium = TYPOGRAPHY.headlineMedium.copy(fontFamily = robotoFlexHeadline),\n    headlineSmall = TYPOGRAPHY.headlineSmall.copy(fontFamily = robotoFlexHeadline),\n    titleLarge = TYPOGRAPHY.titleLarge.copy(fontFamily = robotoFlexTitle),\n    titleMedium = TYPOGRAPHY.titleMedium.copy(fontFamily = robotoFlexTitle),\n    titleSmall = TYPOGRAPHY.titleSmall.copy(fontFamily = robotoFlexTitle),\n    bodyLarge = TYPOGRAPHY.bodyLarge.copy(fontFamily = interBody),\n    bodyMedium = TYPOGRAPHY.bodyMedium.copy(fontFamily = interBody),\n    bodySmall = TYPOGRAPHY.bodySmall.copy(fontFamily = interBody),\n    labelLarge = TYPOGRAPHY.labelLarge.copy(fontFamily = interLabel),\n    labelMedium = TYPOGRAPHY.labelMedium.copy(fontFamily = interLabel),\n    labelSmall = TYPOGRAPHY.labelSmall.copy(fontFamily = interLabel)\n)\n\n@OptIn(ExperimentalTextApi::class)\nobject AppFonts {\n    val interClock = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Bold,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val interBody = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Normal,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val interLabel = FontFamily(\n        Font(\n            R.font.inter_variable, variationSettings = FontVariation.Settings(\n                FontWeight.Medium,\n                FontStyle.Normal\n            )\n        )\n    )\n\n    val robotoFlexTopBar = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(125f),\n                FontVariation.weight(1000),\n                FontVariation.grade(0),\n                FontVariation.Setting(\"XOPQ\", 96F),\n                FontVariation.Setting(\"XTRA\", 500F),\n                FontVariation.Setting(\"YOPQ\", 79F),\n                FontVariation.Setting(\"YTAS\", 750F),\n                FontVariation.Setting(\"YTDE\", -203F),\n                FontVariation.Setting(\"YTFI\", 738F),\n                FontVariation.Setting(\"YTLC\", 514F),\n                FontVariation.Setting(\"YTUC\", 712F)\n            )\n        )\n    )\n\n    val robotoFlexHeadline = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(130f),\n                FontVariation.weight(600),\n                FontVariation.grade(0)\n            )\n        )\n    )\n\n    val robotoFlexTitle = FontFamily(\n        Font(\n            R.font.roboto_flex_variable,\n            variationSettings = FontVariation.Settings(\n                FontVariation.width(130f),\n                FontVariation.weight(700),\n                FontVariation.grade(0)\n            )\n        )\n    )\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\AlarmDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen\n\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.LocalContentColor\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.CompositionLocalProvider\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.window.Dialog\nimport androidx.compose.ui.window.DialogProperties\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Composable\nfun AlarmDialog(\n    modifier: Modifier = Modifier,\n    stopAlarm: () -> Unit\n) {\n    Dialog(\n        onDismissRequest = stopAlarm,\n        properties = DialogProperties(\n            usePlatformDefaultWidth = false,\n            decorFitsSystemWindows = false\n        )\n    ) {\n        Box(\n            contentAlignment = Alignment.Center,\n            modifier = modifier\n                .fillMaxSize()\n                .background(colorScheme.primaryContainer)\n                .clickable(onClick = stopAlarm)\n        ) {\n            CompositionLocalProvider(LocalContentColor provides colorScheme.onPrimaryContainer) {\n                Column(modifier = Modifier.padding(24.dp)) {\n                    Icon(\n                        painter = painterResource(R.drawable.alarm),\n                        contentDescription = stringResource(R.string.alarm),\n                        modifier = Modifier\n                            .align(Alignment.CenterHorizontally)\n                            .size(40.dp)\n                    )\n                    Spacer(Modifier.height(16.dp))\n                    Text(\n                        text = stringResource(R.string.stop_alarm_question),\n                        style = typography.headlineSmall,\n                        modifier = Modifier.align(Alignment.CenterHorizontally)\n                    )\n                    Spacer(Modifier.height(16.dp))\n                    Text(\n                        text = stringResource(R.string.stop_alarm_dialog_text),\n                        textAlign = TextAlign.Center\n                    )\n                    Spacer(modifier = Modifier.height(24.dp))\n                    Button(\n                        onClick = stopAlarm,\n                        modifier = Modifier.align(Alignment.End),\n                    ) {\n                        Text(stringResource(R.string.stop_alarm))\n                    }\n                }\n            }\n        }\n    }\n}\n\n@Preview\n@Composable\nfun AlarmDialogPreview() {\n    TomatoTheme {\n        AlarmDialog(stopAlarm = {})\n    }\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\TimerScreen.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI",
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI, RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen\n\nimport android.Manifest\nimport android.os.Build\nimport androidx.activity.compose.rememberLauncherForActivityResult\nimport androidx.activity.result.contract.ActivityResultContracts\nimport androidx.compose.animation.AnimatedContent\nimport androidx.compose.animation.AnimatedVisibility\nimport androidx.compose.animation.SharedTransitionLayout\nimport androidx.compose.animation.SharedTransitionScope\nimport androidx.compose.animation.animateColorAsState\nimport androidx.compose.animation.expandVertically\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\nimport androidx.compose.animation.shrinkVertically\nimport androidx.compose.animation.slideInVertically\nimport androidx.compose.animation.slideOutVertically\nimport androidx.compose.animation.togetherWith\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.interaction.MutableInteractionSource\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.Column\nimport androidx.compose.foundation.layout.Spacer\nimport androidx.compose.foundation.layout.aspectRatio\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.fillMaxWidth\nimport androidx.compose.foundation.layout.height\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.foundation.layout.width\nimport androidx.compose.foundation.layout.widthIn\nimport androidx.compose.foundation.rememberScrollState\nimport androidx.compose.foundation.verticalScroll\nimport androidx.compose.material3.ButtonGroup\nimport androidx.compose.material3.ButtonGroupDefaults\nimport androidx.compose.material3.CircularProgressIndicator\nimport androidx.compose.material3.CircularWavyProgressIndicator\nimport androidx.compose.material3.DropdownMenuItem\nimport androidx.compose.material3.ExperimentalMaterial3Api\nimport androidx.compose.material3.ExperimentalMaterial3ExpressiveApi\nimport androidx.compose.material3.FilledIconToggleButton\nimport androidx.compose.material3.FilledTonalIconButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.IconButtonDefaults\nimport androidx.compose.material3.MaterialTheme.colorScheme\nimport androidx.compose.material3.MaterialTheme.motionScheme\nimport androidx.compose.material3.MaterialTheme.shapes\nimport androidx.compose.material3.MaterialTheme.typography\nimport androidx.compose.material3.Surface\nimport androidx.compose.material3.Text\nimport androidx.compose.material3.TopAppBar\nimport androidx.compose.material3.TopAppBarDefaults\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.runtime.getValue\nimport androidx.compose.runtime.mutableStateOf\nimport androidx.compose.runtime.remember\nimport androidx.compose.runtime.setValue\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Alignment.Companion.CenterHorizontally\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.graphics.StrokeCap\nimport androidx.compose.ui.graphics.drawscope.Stroke\nimport androidx.compose.ui.hapticfeedback.HapticFeedbackType\nimport androidx.compose.ui.input.nestedscroll.nestedScroll\nimport androidx.compose.ui.platform.LocalDensity\nimport androidx.compose.ui.platform.LocalHapticFeedback\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.text.TextStyle\nimport androidx.compose.ui.text.style.TextAlign\nimport androidx.compose.ui.tooling.preview.Devices\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport androidx.navigation3.ui.LocalNavAnimatedContentScope\nimport org.nsh07.pomodoro.R\nimport org.nsh07.pomodoro.ui.theme.AppFonts.interClock\nimport org.nsh07.pomodoro.ui.theme.AppFonts.robotoFlexTopBar\nimport org.nsh07.pomodoro.ui.theme.TomatoTheme\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerAction\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerMode\nimport org.nsh07.pomodoro.ui.timerScreen.viewModel.TimerState\n\n\n@OptIn(ExperimentalMaterial3Api::class, ExperimentalMaterial3ExpressiveApi::class)\n@Composable\nfun SharedTransitionScope.TimerScreen(\n    timerState: TimerState,\n    isPlus: Boolean,\n    progress: () -> Float,\n    onAction: (TimerAction) -> Unit,\n    modifier: Modifier = Modifier\n) {\n    val motionScheme = motionScheme\n    val haptic = LocalHapticFeedback.current\n\n    val color by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.primary\n        else colorScheme.tertiary,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val onColor by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.onPrimary\n        else colorScheme.onTertiary,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n    val colorContainer by animateColorAsState(\n        if (timerState.timerMode == TimerMode.FOCUS) colorScheme.secondaryContainer\n        else colorScheme.tertiaryContainer,\n        animationSpec = motionScheme.slowEffectsSpec()\n    )\n\n    val permissionLauncher = rememberLauncherForActivityResult(\n        contract = ActivityResultContracts.RequestPermission(),\n        onResult = {}\n    )\n\n    val scrollBehavior = TopAppBarDefaults.exitUntilCollapsedScrollBehavior()\n\n    Column(modifier = modifier.nestedScroll(scrollBehavior.nestedScrollConnection)) {\n        TopAppBar(\n            title = {\n                AnimatedContent(\n                    if (!timerState.showBrandTitle) timerState.timerMode else TimerMode.BRAND,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    },\n                    contentAlignment = Alignment.Center,\n                    modifier = Modifier.fillMaxWidth()\n                ) {\n                    when (it) {\n                        TimerMode.BRAND ->\n                            Text(\n                                if (!isPlus) stringResource(R.string.app_name)\n                                else stringResource(R.string.app_name_plus),\n                                style = TextStyle(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp,\n                                    color = colorScheme.error\n                                ),\n                                textAlign = TextAlign.Center\n                            )\n\n                        TimerMode.FOCUS ->\n                            Text(\n                                stringResource(R.string.focus),\n                                style = TextStyle(\n                                    fontFamily = robotoFlexTopBar,\n                                    fontSize = 32.sp,\n                                    lineHeight = 32.sp,\n                                    color = colorScheme.primary\n                                ),\n                                textAlign = TextAlign.Center\n                            )\n\n                        TimerMode.SHORT_BREAK -> Text(\n                            stringResource(R.string.short_break),\n                            style = TextStyle(\n                                fontFamily = robotoFlexTopBar,\n                                fontSize = 32.sp,\n                                lineHeight = 32.sp,\n                                color = colorScheme.tertiary\n                            ),\n                            textAlign = TextAlign.Center\n                        )\n\n                        TimerMode.LONG_BREAK -> Text(\n                            stringResource(R.string.long_break),\n                            style = TextStyle(\n                                fontFamily = robotoFlexTopBar,\n                                fontSize = 32.sp,\n                                lineHeight = 32.sp,\n                                color = colorScheme.tertiary\n                            ),\n                            textAlign = TextAlign.Center\n                        )\n                    }\n                }\n            },\n            subtitle = {},\n            titleHorizontalAlignment = CenterHorizontally,\n            scrollBehavior = scrollBehavior\n        )\n\n        Column(\n            verticalArrangement = Arrangement.Center,\n            horizontalAlignment = CenterHorizontally,\n            modifier = Modifier\n                .fillMaxSize()\n                .verticalScroll(rememberScrollState())\n        ) {\n            Column(horizontalAlignment = CenterHorizontally) {\n                Box(contentAlignment = Alignment.Center) {\n                    if (timerState.timerMode == TimerMode.FOCUS) {\n                        CircularProgressIndicator(\n                            progress = progress,\n                            modifier = Modifier\n                                .sharedBounds(\n                                    sharedContentState = this@TimerScreen.rememberSharedContentState(\n                                        \"focus progress\"\n                                    ),\n                                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                                )\n                                .widthIn(max = 350.dp)\n                                .fillMaxWidth(0.9f)\n                                .aspectRatio(1f),\n                            color = color,\n                            trackColor = colorContainer,\n                            strokeWidth = 16.dp,\n                            gapSize = 8.dp\n                        )\n                    } else {\n                        CircularWavyProgressIndicator(\n                            progress = progress,\n                            modifier = Modifier\n                                .sharedBounds(\n                                    sharedContentState = this@TimerScreen.rememberSharedContentState(\n                                        \"break progress\"\n                                    ),\n                                    animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                                )\n                                .widthIn(max = 350.dp)\n                                .fillMaxWidth(0.9f)\n                                .aspectRatio(1f),\n                            color = color,\n                            trackColor = colorContainer,\n                            stroke = Stroke(\n                                width = with(LocalDensity.current) {\n                                    16.dp.toPx()\n                                },\n                                cap = StrokeCap.Round,\n                            ),\n                            trackStroke = Stroke(\n                                width = with(LocalDensity.current) {\n                                    16.dp.toPx()\n                                },\n                                cap = StrokeCap.Round,\n                            ),\n                            wavelength = 60.dp,\n                            gapSize = 8.dp\n                        )\n                    }\n                    var expanded by remember { mutableStateOf(timerState.showBrandTitle) }\n                    Column(\n                        horizontalAlignment = CenterHorizontally,\n                        modifier = Modifier\n                            .clip(shapes.largeIncreased)\n                            .clickable(onClick = { expanded = !expanded })\n                    ) {\n                        LaunchedEffect(timerState.showBrandTitle) {\n                            expanded = timerState.showBrandTitle\n                        }\n                        Text(\n                            text = timerState.timeStr,\n                            style = TextStyle(\n                                fontFamily = interClock,\n                                fontSize = 72.sp,\n                                letterSpacing = (-2).sp,\n                                fontFeatureSettings = \"tnum\"\n                            ),\n                            textAlign = TextAlign.Center,\n                            maxLines = 1,\n                            modifier = Modifier.sharedBounds(\n                                sharedContentState = this@TimerScreen.rememberSharedContentState(\"clock\"),\n                                animatedVisibilityScope = LocalNavAnimatedContentScope.current\n                            )\n                        )\n                        AnimatedVisibility(\n                            expanded,\n                            enter = fadeIn(motionScheme.defaultEffectsSpec()) +\n                                    expandVertically(motionScheme.defaultSpatialSpec()),\n                            exit = fadeOut(motionScheme.defaultEffectsSpec()) +\n                                    shrinkVertically(motionScheme.defaultSpatialSpec())\n                        ) {\n                            Text(\n                                stringResource(\n                                    R.string.timer_session_count,\n                                    timerState.currentFocusCount,\n                                    timerState.totalFocusCount\n                                ),\n                                fontFamily = interClock,\n                                style = typography.titleLarge,\n                                color = colorScheme.outline\n                            )\n                        }\n                    }\n                }\n                val interactionSources = remember { List(3) { MutableInteractionSource() } }\n                ButtonGroup(\n                    overflowIndicator = { state ->\n                        ButtonGroupDefaults.OverflowIndicator(\n                            state,\n                            colors = IconButtonDefaults.filledTonalIconButtonColors(),\n                            modifier = Modifier.size(64.dp, 96.dp)\n                        )\n                    },\n                    modifier = Modifier.padding(16.dp)\n                ) {\n                    customItem(\n                        {\n                            FilledIconToggleButton(\n                                onCheckedChange = { checked ->\n                                    onAction(TimerAction.ToggleTimer)\n\n                                    if (checked) haptic.performHapticFeedback(HapticFeedbackType.ToggleOn)\n                                    else haptic.performHapticFeedback(HapticFeedbackType.ToggleOff)\n\n                                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU && checked) {\n                                        permissionLauncher.launch(Manifest.permission.POST_NOTIFICATIONS)\n                                    }\n                                },\n                                checked = timerState.timerRunning,\n                                colors = IconButtonDefaults.filledIconToggleButtonColors(\n                                    checkedContainerColor = color,\n                                    checkedContentColor = onColor\n                                ),\n                                shapes = IconButtonDefaults.toggleableShapes(),\n                                interactionSource = interactionSources[0],\n                                modifier = Modifier\n                                    .size(width = 128.dp, height = 96.dp)\n                                    .animateWidth(interactionSources[0])\n                            ) {\n                                if (timerState.timerRunning) {\n                                    Icon(\n                                        painterResource(R.drawable.pause_large),\n                                        contentDescription = stringResource(R.string.pause),\n                                        modifier = Modifier.size(32.dp)\n                                    )\n                                } else {\n                                    Icon(\n                                        painterResource(R.drawable.play_large),\n                                        contentDescription = stringResource(R.string.play),\n                                        modifier = Modifier.size(32.dp)\n                                    )\n                                }\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    if (timerState.timerRunning) {\n                                        Icon(\n                                            painterResource(R.drawable.pause),\n                                            contentDescription = stringResource(R.string.pause)\n                                        )\n                                    } else {\n                                        Icon(\n                                            painterResource(R.drawable.play),\n                                            contentDescription = stringResource(R.string.play)\n                                        )\n                                    }\n                                },\n                                text = {\n                                    Text(\n                                        if (timerState.timerRunning) stringResource(R.string.pause) else stringResource(\n                                            R.string.play\n                                        )\n                                    )\n                                },\n                                onClick = {\n                                    onAction(TimerAction.ToggleTimer)\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n\n                    customItem(\n                        {\n                            FilledTonalIconButton(\n                                onClick = {\n                                    onAction(TimerAction.ResetTimer)\n                                    haptic.performHapticFeedback(HapticFeedbackType.VirtualKey)\n                                },\n                                colors = IconButtonDefaults.filledTonalIconButtonColors(\n                                    containerColor = colorContainer\n                                ),\n                                shapes = IconButtonDefaults.shapes(),\n                                interactionSource = interactionSources[1],\n                                modifier = Modifier\n                                    .size(96.dp)\n                                    .animateWidth(interactionSources[1])\n                            ) {\n                                Icon(\n                                    painterResource(R.drawable.restart_large),\n                                    contentDescription = stringResource(R.string.restart),\n                                    modifier = Modifier.size(32.dp)\n                                )\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    Icon(\n                                        painterResource(R.drawable.restart),\n                                        stringResource(R.string.restart)\n                                    )\n                                },\n                                text = { Text(stringResource(R.string.restart)) },\n                                onClick = {\n                                    onAction(TimerAction.ResetTimer)\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n\n                    customItem(\n                        {\n                            FilledTonalIconButton(\n                                onClick = {\n                                    onAction(TimerAction.SkipTimer(fromButton = true))\n                                    haptic.performHapticFeedback(HapticFeedbackType.VirtualKey)\n                                },\n                                colors = IconButtonDefaults.filledTonalIconButtonColors(\n                                    containerColor = colorContainer\n                                ),\n                                shapes = IconButtonDefaults.shapes(),\n                                interactionSource = interactionSources[2],\n                                modifier = Modifier\n                                    .size(64.dp, 96.dp)\n                                    .animateWidth(interactionSources[2])\n                            ) {\n                                Icon(\n                                    painterResource(R.drawable.skip_next_large),\n                                    contentDescription = stringResource(R.string.skip_to_next),\n                                    modifier = Modifier.size(32.dp)\n                                )\n                            }\n                        },\n                        { state ->\n                            DropdownMenuItem(\n                                leadingIcon = {\n                                    Icon(\n                                        painterResource(R.drawable.skip_next),\n                                        stringResource(R.string.skip_to_next)\n                                    )\n                                },\n                                text = { Text(stringResource(R.string.skip_to_next)) },\n                                onClick = {\n                                    onAction(TimerAction.SkipTimer(fromButton = true))\n                                    state.dismiss()\n                                }\n                            )\n                        }\n                    )\n                }\n            }\n\n            Spacer(Modifier.height(32.dp))\n\n            Column(horizontalAlignment = CenterHorizontally) {\n                Text(stringResource(R.string.up_next), style = typography.titleSmall)\n                AnimatedContent(\n                    timerState.nextTimeStr,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    }\n                ) {\n                    Text(\n                        it,\n                        style = TextStyle(\n                            fontFamily = interClock,\n                            fontSize = 22.sp,\n                            lineHeight = 28.sp,\n                            color = if (timerState.nextTimerMode == TimerMode.FOCUS) colorScheme.primary else colorScheme.tertiary,\n                            textAlign = TextAlign.Center\n                        ),\n                        modifier = Modifier.width(200.dp)\n                    )\n                }\n                AnimatedContent(\n                    timerState.nextTimerMode,\n                    transitionSpec = {\n                        slideInVertically(\n                            animationSpec = motionScheme.defaultSpatialSpec(),\n                            initialOffsetY = { (-it * 1.25).toInt() }\n                        ).togetherWith(\n                            slideOutVertically(\n                                animationSpec = motionScheme.defaultSpatialSpec(),\n                                targetOffsetY = { (it * 1.25).toInt() }\n                            )\n                        )\n                    }\n                ) {\n                    Text(\n                        when (it) {\n                            TimerMode.FOCUS -> stringResource(R.string.focus)\n                            TimerMode.SHORT_BREAK -> stringResource(R.string.short_break)\n                            else -> stringResource(R.string.long_break)\n                        },\n                        style = typography.titleMediumEmphasized,\n                        textAlign = TextAlign.Center,\n                        modifier = Modifier.width(200.dp)\n                    )\n                }\n            }\n\n            Spacer(Modifier.height(16.dp))\n        }\n    }\n}\n\n@Preview(\n    showSystemUi = true,\n    device = Devices.PIXEL_9_PRO\n)\n@Composable\nfun TimerScreenPreview() {\n    val timerState = TimerState(\n        timeStr = \"03:34\", nextTimeStr = \"5:00\", timerMode = TimerMode.FOCUS, timerRunning = true\n    )\n    TomatoTheme {\n        Surface {\n            SharedTransitionLayout {\n                TimerScreen(\n                    timerState,\n                    isPlus = true,\n                    { 0.3f },\n                    {}\n                )\n            }\n        }\n    }\n}\n"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerAction.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\nsealed interface TimerAction {\n    data class SkipTimer(val fromButton: Boolean) : TimerAction\n\n    data object ResetTimer : TimerAction\n    data object StopAlarm : TimerAction\n    data object ToggleTimer : TimerAction\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerState.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\ndata class TimerState(\n    val timerMode: TimerMode = TimerMode.FOCUS,\n    val timeStr: String = \"25:00\",\n    val totalTime: Long = 25 * 60,\n    val timerRunning: Boolean = false,\n    val nextTimerMode: TimerMode = TimerMode.SHORT_BREAK,\n    val nextTimeStr: String = \"5:00\",\n    val showBrandTitle: Boolean = true,\n    val currentFocusCount: Int = 1,\n    val totalFocusCount: Int = 4,\n    val alarmRinging: Boolean = false\n)\n\nenum class TimerMode {\n    FOCUS, SHORT_BREAK, LONG_BREAK, BRAND\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\ui\\timerScreen\\viewModel\\TimerViewModel.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "STATE"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用官方 AndroidX Lifecycle KMP 版 (ViewModel)"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.timerScreen.viewModel\n\nimport android.provider.Settings\nimport androidx.core.net.toUri\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.ViewModelProvider.AndroidViewModelFactory.Companion.APPLICATION_KEY\nimport androidx.lifecycle.viewModelScope\nimport androidx.lifecycle.viewmodel.initializer\nimport androidx.lifecycle.viewmodel.viewModelFactory\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.FlowPreview\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.SharingStarted\nimport kotlinx.coroutines.flow.StateFlow\nimport kotlinx.coroutines.flow.asStateFlow\nimport kotlinx.coroutines.flow.combine\nimport kotlinx.coroutines.flow.stateIn\nimport kotlinx.coroutines.flow.update\nimport kotlinx.coroutines.launch\nimport org.nsh07.pomodoro.TomatoApplication\nimport org.nsh07.pomodoro.data.PreferenceRepository\nimport org.nsh07.pomodoro.data.Stat\nimport org.nsh07.pomodoro.data.StatRepository\nimport org.nsh07.pomodoro.data.TimerRepository\nimport org.nsh07.pomodoro.service.ServiceHelper\nimport org.nsh07.pomodoro.utils.millisecondsToStr\nimport java.time.LocalDate\nimport java.time.temporal.ChronoUnit\n\n@OptIn(FlowPreview::class)\nclass TimerViewModel(\n    private val preferenceRepository: PreferenceRepository,\n    private val serviceHelper: ServiceHelper,\n    private val statRepository: StatRepository,\n    private val timerRepository: TimerRepository,\n    private val _timerState: MutableStateFlow<TimerState>,\n    private val _time: MutableStateFlow<Long>\n) : ViewModel() {\n    val timerState: StateFlow<TimerState> = _timerState.asStateFlow()\n\n    val time: StateFlow<Long> = _time.asStateFlow()\n\n    val progress = _time.combine(_timerState) { remainingTime, uiState ->\n        (uiState.totalTime.toFloat() - remainingTime) / uiState.totalTime\n    }.stateIn(viewModelScope, SharingStarted.WhileSubscribed(5000), 0f)\n\n    private var cycles = 0\n\n    private var startTime = 0L\n    private var pauseTime = 0L\n    private var pauseDuration = 0L\n\n    init {\n        if (!timerRepository.serviceRunning.value)\n            viewModelScope.launch(Dispatchers.IO) {\n                timerRepository.focusTime =\n                    preferenceRepository.getIntPreference(\"focus_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"focus_time\",\n                            timerRepository.focusTime.toInt()\n                        ).toLong()\n                timerRepository.shortBreakTime =\n                    preferenceRepository.getIntPreference(\"short_break_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"short_break_time\",\n                            timerRepository.shortBreakTime.toInt()\n                        ).toLong()\n                timerRepository.longBreakTime =\n                    preferenceRepository.getIntPreference(\"long_break_time\")?.toLong()\n                        ?: preferenceRepository.saveIntPreference(\n                            \"long_break_time\",\n                            timerRepository.longBreakTime.toInt()\n                        ).toLong()\n                timerRepository.sessionLength =\n                    preferenceRepository.getIntPreference(\"session_length\")\n                        ?: preferenceRepository.saveIntPreference(\n                            \"session_length\",\n                            timerRepository.sessionLength\n                        )\n\n                timerRepository.alarmEnabled =\n                    preferenceRepository.getBooleanPreference(\"alarm_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"alarm_enabled\", true)\n                timerRepository.vibrateEnabled =\n                    preferenceRepository.getBooleanPreference(\"vibrate_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"vibrate_enabled\", true)\n                timerRepository.dndEnabled =\n                    preferenceRepository.getBooleanPreference(\"dnd_enabled\")\n                        ?: preferenceRepository.saveBooleanPreference(\"dnd_enabled\", false)\n\n                timerRepository.alarmSoundUri = (\n                        preferenceRepository.getStringPreference(\"alarm_sound\")\n                            ?: preferenceRepository.saveStringPreference(\n                                \"alarm_sound\",\n                                (Settings.System.DEFAULT_ALARM_ALERT_URI\n                                    ?: Settings.System.DEFAULT_RINGTONE_URI).toString()\n                            )\n                        ).toUri()\n\n                _time.update { timerRepository.focusTime }\n                cycles = 0\n                startTime = 0L\n                pauseTime = 0L\n                pauseDuration = 0L\n\n                _timerState.update { currentState ->\n                    currentState.copy(\n                        timerMode = TimerMode.FOCUS,\n                        timeStr = millisecondsToStr(time.value),\n                        totalTime = time.value,\n                        nextTimerMode = if (timerRepository.sessionLength > 1) TimerMode.SHORT_BREAK else TimerMode.LONG_BREAK,\n                        nextTimeStr = millisecondsToStr(if (timerRepository.sessionLength > 1) timerRepository.shortBreakTime else timerRepository.longBreakTime),\n                        currentFocusCount = 1,\n                        totalFocusCount = timerRepository.sessionLength\n                    )\n                }\n\n                var lastDate = statRepository.getLastDate()\n                val today = LocalDate.now()\n\n                // Fills dates between today and lastDate with 0s to ensure continuous history\n                if (lastDate != null) {\n                    while (ChronoUnit.DAYS.between(lastDate, today) > 0) {\n                        lastDate = lastDate?.plusDays(1)\n                        statRepository.insertStat(Stat(lastDate!!, 0, 0, 0, 0, 0))\n                    }\n                } else {\n                    statRepository.insertStat(Stat(today, 0, 0, 0, 0, 0))\n                }\n\n                delay(1500)\n\n                _timerState.update { currentState ->\n                    currentState.copy(showBrandTitle = false)\n                }\n            }\n    }\n\n    fun onAction(action: TimerAction) {\n        serviceHelper.startService(action)\n    }\n\n    companion object {\n        val Factory: ViewModelProvider.Factory = viewModelFactory {\n            initializer {\n                val application = (this[APPLICATION_KEY] as TomatoApplication)\n                val appPreferenceRepository = application.container.appPreferenceRepository\n                val appStatRepository = application.container.appStatRepository\n                val appTimerRepository = application.container.appTimerRepository\n                val serviceHelper = application.container.serviceHelper\n                val timerState = application.container.timerState\n                val time = application.container.time\n\n                TimerViewModel(\n                    preferenceRepository = appPreferenceRepository,\n                    serviceHelper = serviceHelper,\n                    statRepository = appStatRepository,\n                    timerRepository = appTimerRepository,\n                    _timerState = timerState,\n                    _time = time\n                )\n            }\n        }\n    }\n}"
    },
    {
        "filePath": "src\\main\\java\\org\\nsh07\\pomodoro\\utils\\Utils.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.utils\n\nimport androidx.compose.ui.graphics.Color\nimport java.util.Locale\nimport java.util.concurrent.TimeUnit\n\nfun millisecondsToStr(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%02d:%02d\",\n        TimeUnit.MILLISECONDS.toMinutes(t),\n        TimeUnit.MILLISECONDS.toSeconds(t) % TimeUnit.MINUTES.toSeconds(1)\n    )\n}\n\nfun millisecondsToHours(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dh\",\n        TimeUnit.MILLISECONDS.toHours(t)\n    )\n}\n\nfun millisecondsToMinutes(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dm\",\n        TimeUnit.MILLISECONDS.toMinutes(t)\n    )\n}\n\nfun millisecondsToHoursMinutes(t: Long): String {\n    require(t >= 0L)\n    return String.format(\n        Locale.getDefault(),\n        \"%dh %dm\", TimeUnit.MILLISECONDS.toHours(t),\n        TimeUnit.MILLISECONDS.toMinutes(t) % TimeUnit.HOURS.toMinutes(1)\n    )\n}\n\n/**\n * Extension function for [String] to convert it to a [androidx.compose.ui.graphics.Color]\n *\n * The base string must be of the format produced by [androidx.compose.ui.graphics.Color.toString],\n * i.e, the color black with 100% opacity in sRGB would be represented by:\n *\n *      Color(0.0, 0.0, 0.0, 1.0, sRGB IEC61966-2.1)\n */\nfun String.toColor(): Color {\n    // Sample string: Color(0.0, 0.0, 0.0, 1.0, sRGB IEC61966-2.1)\n    val comma1 = this.indexOf(',')\n    val comma2 = this.indexOf(',', comma1 + 1)\n    val comma3 = this.indexOf(',', comma2 + 1)\n    val comma4 = this.indexOf(',', comma3 + 1)\n\n    val r = this.substringAfter('(').substringBefore(',').toFloat()\n    val g = this.slice(comma1 + 1..comma2 - 1).toFloat()\n    val b = this.slice(comma2 + 1..comma3 - 1).toFloat()\n    val a = this.slice(comma3 + 1..comma4 - 1).toFloat()\n    return Color(r, g, b, a)\n}\n"
    },
    {
        "filePath": "src\\play\\java\\org\\nsh07\\pomodoro\\billing\\initializePurchases.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "UI"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [UI]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.content.Context\nimport com.revenuecat.purchases.Purchases\nimport com.revenuecat.purchases.PurchasesConfiguration\n\nfun initializePurchases(context: Context) {\n    Purchases.configure(\n        PurchasesConfiguration\n            .Builder(context, \"goog_jBpRIBjTYvhKYluCqkPXSHbuFbX\")\n            .build()\n    )\n}"
    },
    {
        "filePath": "src\\play\\java\\org\\nsh07\\pomodoro\\billing\\PlayBillingManager.kt",
        "migratability": "MIGRATABLE",
        "androidUsages": [
            "LOGGING"
        ],
        "reasons": [
            "所有 Android 依赖项均有已知的 KMP 平替方案"
        ],
        "suggestedReplacements": [
            "使用 Kermit 或 Napier 日志库"
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport android.util.Log\nimport com.revenuecat.purchases.Purchases\nimport com.revenuecat.purchases.getCustomerInfoWith\nimport com.revenuecat.purchases.interfaces.UpdatedCustomerInfoListener\nimport kotlinx.coroutines.flow.MutableStateFlow\nimport kotlinx.coroutines.flow.asStateFlow\n\nprivate const val ENTITLEMENT_ID = \"plus\"\n\n/**\n * Google Play implementation of BillingManager\n */\nclass PlayBillingManager : BillingManager {\n    private val _isPlus = MutableStateFlow(false)\n    override val isPlus = _isPlus.asStateFlow()\n\n    private val purchases by lazy { Purchases.sharedInstance }\n\n    init {\n        purchases.updatedCustomerInfoListener =\n            UpdatedCustomerInfoListener { customerInfo ->\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\n            }\n\n        // Fetch initial customer info\n        purchases.getCustomerInfoWith(\n            onSuccess = { customerInfo ->\n                _isPlus.value = customerInfo.entitlements[ENTITLEMENT_ID]?.isActive == true\n            },\n            onError = { error ->\n                Log.e(\"GooglePlayPaywallManager\", \"Error fetching customer info: $error\")\n            }\n        )\n    }\n}\n\nobject BillingManagerProvider {\n    val manager: BillingManager = PlayBillingManager()\n}"
    },
    {
        "filePath": "src\\play\\java\\org\\nsh07\\pomodoro\\billing\\TomatoPlusPaywallDialog.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.billing\n\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.FilledTonalIconButton\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Scaffold\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.remember\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.unit.dp\nimport com.revenuecat.purchases.ui.revenuecatui.Paywall\nimport com.revenuecat.purchases.ui.revenuecatui.PaywallOptions\nimport com.revenuecat.purchases.ui.revenuecatui.customercenter.CustomerCenter\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TomatoPlusPaywallDialog(\n    isPlus: Boolean,\n    onDismiss: () -> Unit\n) {\n    val paywallOptions = remember {\n        PaywallOptions.Builder(dismissRequest = onDismiss).build()\n    }\n\n    Scaffold { innerPadding ->\n        if (!isPlus) {\n            Paywall(paywallOptions)\n\n            FilledTonalIconButton(\n                onClick = onDismiss,\n                modifier = Modifier\n                    .padding(innerPadding)\n                    .padding(16.dp)\n            ) {\n                Icon(\n                    painterResource(R.drawable.arrow_back),\n                    null\n                )\n            }\n        } else {\n            CustomerCenter(onDismiss = onDismiss)\n        }\n    }\n}"
    },
    {
        "filePath": "src\\play\\java\\org\\nsh07\\pomodoro\\ui\\settingsScreen\\components\\AboutButtons.kt",
        "migratability": "ANDROID_ONLY",
        "androidUsages": [
            "RESOURCES"
        ],
        "reasons": [
            "使用了不可平替的 Android API: [RESOURCES]"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * This file is part of Tomato - a minimalist pomodoro timer for Android.\n *\n * Tomato is free software: you can redistribute it and/or modify it under the terms of the GNU\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * Tomato is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even\n * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n * Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with Tomato.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.ui.settingsScreen.components\n\nimport androidx.compose.foundation.layout.Arrangement\nimport androidx.compose.foundation.layout.Row\nimport androidx.compose.foundation.layout.size\nimport androidx.compose.material3.Button\nimport androidx.compose.material3.ButtonColors\nimport androidx.compose.material3.Icon\nimport androidx.compose.material3.Text\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.platform.LocalUriHandler\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.ui.res.stringResource\nimport androidx.compose.ui.unit.dp\nimport org.nsh07.pomodoro.R\n\n@Composable\nfun TopButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://hosted.weblate.org/engage/tomato/\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.weblate),\n                contentDescription = null,\n                modifier = Modifier.size(24.dp)\n            )\n\n            Text(text = stringResource(R.string.help_with_translation))\n        }\n    }\n}\n\n@Composable\nfun BottomButton(\n    buttonColors: ButtonColors,\n    modifier: Modifier = Modifier\n) {\n    val uriHandler = LocalUriHandler.current\n    Button(\n        colors = buttonColors,\n        onClick = { uriHandler.openUri(\"https://play.google.com/store/apps/details?id=org.nsh07.pomodoro\") },\n        modifier = modifier\n    ) {\n        Row(\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\n            verticalAlignment = Alignment.CenterVertically\n        ) {\n            Icon(\n                painterResource(R.drawable.play_store),\n                contentDescription = null,\n                modifier = Modifier.size(24.dp)\n            )\n\n            Text(text = stringResource(R.string.rate_on_google_play))\n        }\n    }\n}"
    },
    {
        "filePath": "src\\test\\java\\org\\nsh07\\pomodoro\\utils\\UtilsKtTest.kt",
        "migratability": "COMMON_READY",
        "androidUsages": [
        ],
        "reasons": [
            "未检测到 Android 特定 API"
        ],
        "suggestedReplacements": [
        ],
        "originalCode": "/*\n * Copyright (c) 2025 Nishant Mishra\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\npackage org.nsh07.pomodoro.utils\n\nimport junit.framework.TestCase.assertEquals\nimport junit.framework.TestCase.assertTrue\nimport org.junit.Assert.assertThrows\nimport org.junit.Test\n\nclass UtilsKtTest {\n\n    @Test\n    fun `millisecondsToStr zero milliseconds`() {\n        assertEquals(\"00:00\", millisecondsToStr(0))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds less than a second`() {\n        assertEquals(\"00:00\", millisecondsToStr(999))\n    }\n\n    @Test\n    fun `millisecondsToStr exactly one second`() {\n        assertEquals(\"00:01\", millisecondsToStr(1000))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds less than a minute`() {\n        assertEquals(\"00:59\", millisecondsToStr(59999))\n    }\n\n    @Test\n    fun `millisecondsToStr exactly one minute`() {\n        assertEquals(\"01:00\", millisecondsToStr(60000))\n    }\n\n    @Test\n    fun `millisecondsToStr positive milliseconds more than a minute`() {\n        assertEquals(\"01:01\", millisecondsToStr(61999))\n    }\n\n    @Test\n    fun `millisecondsToStr large milliseconds value`() {\n        assertEquals(\"99:59\", millisecondsToStr(5999999))\n    }\n\n    @Test\n    fun `millisecondsToStr negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToStr(-1)\n        }\n        assertTrue(\n            \"millisecondsToStr should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToStr Long MAX VALUE`() {\n        assertEquals(\"153722867280912:55\", millisecondsToStr(Long.MAX_VALUE))\n    }\n\n    @Test\n    fun `millisecondsToHours zero milliseconds`() {\n        assertEquals(\"0h\", millisecondsToHours(0))\n    }\n\n    @Test\n    fun `millisecondsToHours less than an hour`() {\n        assertEquals(\"0h\", millisecondsToHours(3599999))\n    }\n\n    @Test\n    fun `millisecondsToHours exactly one hour`() {\n        assertEquals(\"1h\", millisecondsToHours(3600000))\n    }\n\n    @Test\n    fun `millisecondsToHours multiple hours`() {\n        assertEquals(\"2h\", millisecondsToHours(7200000))\n    }\n\n    @Test\n    fun `millisecondsToHours large number of hours`() {\n        assertEquals(\"25h\", millisecondsToHours(25 * 3600000))\n    }\n\n    @Test\n    fun `millisecondsToHours negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToHours(-1)\n        }\n        assertTrue(\n            \"millisecondsToHours should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToHours Long MAX VALUE`() {\n        assertEquals(\"2562047788015h\", millisecondsToHours(Long.MAX_VALUE))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes zero milliseconds`() {\n        assertEquals(\"0h 0m\", millisecondsToHoursMinutes(0))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes less than a minute`() {\n        assertEquals(\"0h 0m\", millisecondsToHoursMinutes(59999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes exactly one minute`() {\n        assertEquals(\"0h 1m\", millisecondsToHoursMinutes(60000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes less than an hour but more than a minute`() {\n        assertEquals(\"0h 59m\", millisecondsToHoursMinutes(3599999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes exactly one hour`() {\n        assertEquals(\"1h 0m\", millisecondsToHoursMinutes(3600000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes hours and minutes`() {\n        assertEquals(\"1h 1m\", millisecondsToHoursMinutes(3660000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes multiple hours and minutes`() {\n        assertEquals(\"2h 3m\", millisecondsToHoursMinutes(7380000))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes just less than 2 hours`() {\n        assertEquals(\"1h 59m\", millisecondsToHoursMinutes(3600000 + 3599999))\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes negative milliseconds`() {\n        val exception = assertThrows(IllegalArgumentException::class.java) {\n            millisecondsToHoursMinutes(-1)\n        }\n        assertTrue(\n            \"millisecondsToHoursMinutes should throw IllegalArgumentException for negative values\",\n            exception is IllegalArgumentException\n        )\n    }\n\n    @Test\n    fun `millisecondsToHoursMinutes Long MAX VALUE`() {\n        assertEquals(\"2562047788015h 12m\", millisecondsToHoursMinutes(Long.MAX_VALUE))\n    }\n\n}"
    }
]